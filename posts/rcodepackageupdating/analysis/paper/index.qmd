---
title: "Update R package development process"
draft: true
author: "R.G. Thomas"
image: "img/Rlogo.png"
date: today
document-type: "blog"
bibliography: update_code.bib
---

::: column-margin
![quarto](img/Rlogo.png)
:::

# Introduction

The R packaging system is a useful organizing framework. Whether we're looking
to manage a set of R functions we use regularly or want to customize an existing
package to our own requirements or looking to contribute to an open source
project working within the R package paradigm is a good idea. 

Describe the scenario to be considered. 

Start with cloning the github repo. 

powerful tool for organizing and sharing R code.
This post outlines the process of making changes to an R package, specifically
`zzdataframe2graphic`, from code modification to testing and GitHub
integration.

Here's the expanded procedure including Git and GitHub steps:

1. Create New Branch
   ```bash
   git checkout main         # Start from main branch
   git pull origin main     # Get latest changes
   git checkout -b feature-name   # Create & switch to new branch
   ```

2. Edit the R Code
   - Navigate to R/zzdataframe2graphic.R
   - Make your code changes
   - Document new parameters/changes in roxygen comments
   - Save file

3. Update Documentation
   ```r
   # In R:
   devtools::document()   # Updates NAMESPACE and man/ files
   ```

4. Write New Tests
   - Edit tests/testthat/test-zzdataframe2graphic.R
   - Add new test cases:
   ```r
   test_that("new feature works as expected", {
     result <- your_function(test_input)
     expect_equal(result, expected_output)
   })
   ```

5. Run Tests Locally
   ```r
   devtools::test()
   # Fix any failures and add more tests if needed
   ```

6. Update Version & Description
   - Edit DESCRIPTION file
   - Increment version number
   - Update date field
   - Update any dependencies if needed

7. Build and Check Package
   ```r
   devtools::build()
   devtools::check()
   ```

8. Additional Checks
   ```r
   devtools::check_win_devel()
   devtools::check_mac_release()
   rcmdcheck::rcmdcheck(args = c("--as-cran"))
   ```

9. Stage Changes
   ```bash
   git status                  # Review changes
   git add R/zzdataframe2graphic.R
   git add tests/testthat/test-zzdataframe2graphic.R
   git add DESCRIPTION
   git add man/*
   git add NAMESPACE
   ```

10. Commit Changes
    ```bash
    git commit -m "feat: add new feature to zzdataframe2graphic
    
    - Added X functionality
    - Updated documentation
    - Added tests"
    ```

11. Push to GitHub
    ```bash
    git push origin feature-name
    ```

12. Create Pull Request
    - Go to your GitHub repository
    - Click "Pull requests" tab
    - Click "New pull request"
    - Select:
      - base: main
      - compare: feature-name
    - Fill in PR description:
      - What changes were made
      - Why changes were made
      - How to test the changes
      - Any related issues

13. CI/Actions Check
    - Wait for GitHub Actions to complete
    - Review any failures
    - Make necessary fixes:
      ```bash
      git add .
      git commit -m "fix: address CI failures"
      git push origin feature-name
      ```

14. PR Review Process
    - Address any review comments
    - Make requested changes
    - Push additional commits
    - Request re-review if needed

15. Merge PR
    - Once approved and all checks pass
    - Choose merge strategy (usually "Squash and merge")
    - Update PR title if needed
    - Click "Squash and merge"

16. Clean Up
    ```bash
    git checkout main
    git pull origin main
    git branch -d feature-name    # Delete local branch
    ```

17. Create Release (optional)
    - Go to GitHub "Releases"
    - Click "Create new release"
    - Tag version (e.g., v0.2.1)
    - Add release notes
    - Publish release

Would you like me to elaborate on any of these steps or explain the reasoning behind any particular practices?
Here's an expanded blog post about making changes to the zzdataframe2graphic package:

# Making Changes to an R Package: A Complete Workflow

In this post, I'll walk through the complete process of making changes to an R package, from code modification to testing and GitHub integration. I'll use my package `zzdataframe2graphic` as an example.

## Initial Code Changes

The workflow begins with modifying your R code. Let's say we want to improve error handling in the package:

1. Navigate to the package's R directory
2. Open the relevant R file (in this case, `zzdataframe2graphic.R`)
3. Make your changes
4. Document any new parameters or changes in the roxygen comments

## Local Testing and Building

After making changes, follow these steps:

1. Document the changes:
```r
devtools::document()
```
This updates the NAMESPACE and man/ files based on your roxygen comments.

2. Run the tests:
```r
devtools::test()
```
Fix any test failures that appear.

3. Build and install the package:
```r
devtools::build()
devtools::install()
```

## GitHub Integration

Once your local changes are working, it's time to integrate with GitHub:

1. Create a new branch:
```bash
git checkout -b feature-name
```

2. Stage and commit your changes:
```bash
git add R/zzdataframe2graphic.R
git add tests/testthat/test-zzdataframe2graphic.R
git commit -m "Add improved error handling"
```

3. Push to GitHub:
```bash
git push origin feature-name
```

## GitHub Actions

GitHub Actions automate the testing process. The package uses three main workflows:

### R-CMD-check
This workflow runs `R CMD check` on multiple operating systems:
- Windows latest
- macOS latest
- Ubuntu latest (with R-release, R-devel, and R-oldrel)

The workflow is triggered on:
- Push to main/master
- Pull requests to main/master

### Test Coverage
This workflow:
- Runs all package tests
- Generates coverage reports
- Requires proper setup of LaTeX dependencies
- Reports which parts of the code need more testing

### pkgdown
This workflow:
- Builds package documentation
- Deploys to GitHub Pages
- Updates whenever changes are pushed to main/master

## Setting Up GitHub Actions

To set up these workflows:

1. Create the workflows directory:
```bash
mkdir -p .github/workflows
```

2. Add the necessary YAML files:
- `R-CMD-check.yaml`
- `test-coverage.yaml`
- `pkgdown.yaml`

3. Configure repository settings:
- Go to Settings → Actions → General
- Set "Workflow permissions" to "Read and write"
- Enable GitHub Pages deployment

## Monitoring the Process

After pushing changes:

1. Check the "Actions" tab on GitHub
2. Monitor each workflow's progress
3. Review any failures
4. Check the generated documentation site
5. Review test coverage reports

## Best Practices

- Always create a new branch for changes
- Run tests locally before pushing
- Write tests for new functionality
- Keep commits focused and well-documented
- Monitor GitHub Actions results
- Address failures promptly

## Conclusion

This workflow ensures that changes to the package are properly tested, documented, and integrated. The GitHub Actions automation provides confidence that the package works across different environments and maintains high-quality documentation.

Would you like me to expand on any particular aspect of this workflow?


Here's an additional section for the blog post with references:

## Further Reading and Resources

### Git Fundamentals
- [Pro Git Book](https://git-scm.com/book/en/v2) - The official and comprehensive guide to Git
- [Git Handbook](https://guides.github.com/introduction/git-handbook/) - GitHub's introduction to Git basics
- [Oh Shit, Git!?!](https://ohshitgit.com/) - Practical solutions for common Git mistakes

### R Package Development
- [R Packages (2e)](https://r-pkgs.org/) by Hadley Wickham and Jenny Bryan
- [Writing R Extensions](https://cran.r-project.org/doc/manuals/r-release/R-exts.html) - The official R manual for package development
- [devtools documentation](https://devtools.r-lib.org/) - Comprehensive guide to the devtools package

### GitHub Actions
- [GitHub Actions for R](https://github.com/r-lib/actions) - r-lib's collection of GitHub Actions for R
- [GitHub Actions Documentation](https://docs.github.com/en/actions) - Official documentation
- [GitHub Actions for R packages](https://usethis.r-lib.org/articles/articles/usethis-github-action-examples.html) - Examples from the usethis package

### Testing in R
- [testthat documentation](https://testthat.r-lib.org/) - The standard testing framework for R
- [Testing R packages](https://r-pkgs.org/tests.html) - Chapter from R Packages book
- [covr documentation](https://covr.r-lib.org/) - For understanding test coverage

### Package Documentation
- [roxygen2 documentation](https://roxygen2.r-lib.org/) - For writing package documentation
- [pkgdown documentation](https://pkgdown.r-lib.org/) - For creating package websites
- [Documentation guide](https://style.tidyverse.org/documentation.html) from the tidyverse style guide

### Interactive Learning
- [GitHub Skills](https://skills.github.com/) - Interactive courses for learning GitHub
- [Try Git](https://try.github.io/) - Resources to learn Git
- [GitHub Learning Lab](https://lab.github.com/) - Interactive GitHub tutorials

These resources range from beginner-friendly introductions to detailed technical references, allowing readers to dive deeper into any aspect of the workflow that interests them.



\section{Git Fundamentals}
The official and comprehensive guide to Git is available in the Pro Git Book @progit. 
GitHub provides an excellent introduction through their Git Handbook @githandbook.
For practical solutions to common Git problems, the Oh Shit, Git!?! guide @ohshitgit is invaluable.

\section{R Package Development}
The definitive guide is "R Packages (2e)" by Hadley Wickham and Jenny Bryan @rpackages.
The official manual for package development is "Writing R Extensions" @rextensions.
For practical development tools, see the devtools documentation @devtools.

\section{GitHub Actions}
The r-lib collection of GitHub Actions for R @ractions provides essential tools.
The official GitHub Actions documentation @githubactions offers comprehensive coverage.
The usethis package provides practical examples @usethisactions.

\section{Testing in R}
The standard testing framework is documented in testthat @testthat.
For comprehensive coverage of testing, see the testing chapter in R Packages @rpackages.
Understanding test coverage is explained in the covr documentation @covr.

\section{Package Documentation}
Package documentation tools include roxygen2 @roxygen2 and pkgdown @pkgdown.
The tidyverse style guide provides documentation standards @tidyversestyle.

\section{Interactive Learning}
GitHub provides interactive learning through GitHub Skills @githubskills and 
GitHub Learning Lab @githublab. The Try Git resources @trygit offer
hands-on practice.

# References

## Prerequisites

In development

## Step-by-Step Implementation

In development

## Key Takeaways

In development

## Further Reading

In development
