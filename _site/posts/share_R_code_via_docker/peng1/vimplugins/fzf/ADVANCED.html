<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ronald (Ryy) Glenn Thomas">

<title>advanced – Thomas Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<script src="../../../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting-3ac1d83748cf4fcd34880f42c7deae5c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap-7ba0fb6211dfa319973075dc5a8ae53f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400&amp;family=Open+Sans:ital,wght@0,400;0,600;1,400&amp;family=Fira+Mono:wght@400;500&amp;display=swap" rel="stylesheet">
<script src="https://kit.fontawesome.com/0fba9333d8.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

<!-- Custom meta tags for social sharing -->
<meta property="og:site_name" content="Thomas Lab">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@rgt47">

<!-- Add responsive features -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Add analytics if needed -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXX');
</script> -->

<!-- Add custom javascript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add any custom JavaScript functionality here
  
  // Example: Add smooth scrolling
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      
      document.querySelector(this.getAttribute('href')).scrollIntoView({
        behavior: 'smooth'
      });
    });
  });
});
</script>


<meta property="og:title" content="Thomas Lab">
<meta property="og:image" content="https://focusonr.org/posts/share_R_code_via_docker/peng1/vimplugins/fzf/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==">
<meta property="og:site_name" content="Thomas Lab">
</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../../index.html">
    <span class="navbar-title">Thomas Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../posts/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../about/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/rgt47"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rgt47"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Categories</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Programming &amp; Development</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Data Analysis &amp; Visualization</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Deployment &amp; Operations</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Development Environment</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Shiny Applications</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">AI &amp; Automation</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">System Administration</span></span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#advanced-fzf-examples" id="toc-advanced-fzf-examples" class="nav-link active" data-scroll-target="#advanced-fzf-examples"><span class="header-section-number">1</span> Advanced fzf examples</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">1.1</span> Introduction</a></li>
  <li><a href="#display-modes" id="toc-display-modes" class="nav-link" data-scroll-target="#display-modes"><span class="header-section-number">1.2</span> Display modes</a>
  <ul class="collapse">
  <li><a href="#height" id="toc-height" class="nav-link" data-scroll-target="#height"><span class="header-section-number">1.2.1</span> <code>--height</code></a></li>
  <li><a href="#tmux" id="toc-tmux" class="nav-link" data-scroll-target="#tmux"><span class="header-section-number">1.2.2</span> <code>--tmux</code></a></li>
  </ul></li>
  <li><a href="#dynamic-reloading-of-the-list" id="toc-dynamic-reloading-of-the-list" class="nav-link" data-scroll-target="#dynamic-reloading-of-the-list"><span class="header-section-number">1.3</span> Dynamic reloading of the list</a>
  <ul class="collapse">
  <li><a href="#updating-the-list-of-processes-by-pressing-ctrl-r" id="toc-updating-the-list-of-processes-by-pressing-ctrl-r" class="nav-link" data-scroll-target="#updating-the-list-of-processes-by-pressing-ctrl-r"><span class="header-section-number">1.3.1</span> Updating the list of processes by pressing CTRL-R</a></li>
  <li><a href="#toggling-between-data-sources" id="toc-toggling-between-data-sources" class="nav-link" data-scroll-target="#toggling-between-data-sources"><span class="header-section-number">1.3.2</span> Toggling between data sources</a></li>
  <li><a href="#toggling-with-a-single-key-binding" id="toc-toggling-with-a-single-key-binding" class="nav-link" data-scroll-target="#toggling-with-a-single-key-binding"><span class="header-section-number">1.3.3</span> Toggling with a single key binding</a></li>
  </ul></li>
  <li><a href="#ripgrep-integration" id="toc-ripgrep-integration" class="nav-link" data-scroll-target="#ripgrep-integration"><span class="header-section-number">1.4</span> Ripgrep integration</a>
  <ul class="collapse">
  <li><a href="#using-fzf-as-the-secondary-filter" id="toc-using-fzf-as-the-secondary-filter" class="nav-link" data-scroll-target="#using-fzf-as-the-secondary-filter"><span class="header-section-number">1.4.1</span> Using fzf as the secondary filter</a></li>
  <li><a href="#using-fzf-as-interactive-ripgrep-launcher" id="toc-using-fzf-as-interactive-ripgrep-launcher" class="nav-link" data-scroll-target="#using-fzf-as-interactive-ripgrep-launcher"><span class="header-section-number">1.4.2</span> Using fzf as interactive Ripgrep launcher</a></li>
  <li><a href="#switching-to-fzf-only-search-mode" id="toc-switching-to-fzf-only-search-mode" class="nav-link" data-scroll-target="#switching-to-fzf-only-search-mode"><span class="header-section-number">1.4.3</span> Switching to fzf-only search mode</a></li>
  <li><a href="#switching-between-ripgrep-mode-and-fzf-mode" id="toc-switching-between-ripgrep-mode-and-fzf-mode" class="nav-link" data-scroll-target="#switching-between-ripgrep-mode-and-fzf-mode"><span class="header-section-number">1.4.4</span> Switching between Ripgrep mode and fzf mode</a></li>
  <li><a href="#switching-between-ripgrep-mode-and-fzf-mode-using-a-single-key-binding" id="toc-switching-between-ripgrep-mode-and-fzf-mode-using-a-single-key-binding" class="nav-link" data-scroll-target="#switching-between-ripgrep-mode-and-fzf-mode-using-a-single-key-binding"><span class="header-section-number">1.4.5</span> Switching between Ripgrep mode and fzf mode using a single key binding</a></li>
  <li><a href="#controlling-ripgrep-search-and-fzf-search-simultaneously" id="toc-controlling-ripgrep-search-and-fzf-search-simultaneously" class="nav-link" data-scroll-target="#controlling-ripgrep-search-and-fzf-search-simultaneously"><span class="header-section-number">1.4.6</span> Controlling Ripgrep search and fzf search simultaneously</a></li>
  </ul></li>
  <li><a href="#log-tailing" id="toc-log-tailing" class="nav-link" data-scroll-target="#log-tailing"><span class="header-section-number">1.5</span> Log tailing</a></li>
  <li><a href="#key-bindings-for-git-objects" id="toc-key-bindings-for-git-objects" class="nav-link" data-scroll-target="#key-bindings-for-git-objects"><span class="header-section-number">1.6</span> Key bindings for git objects</a>
  <ul class="collapse">
  <li><a href="#files-listed-in-git-status" id="toc-files-listed-in-git-status" class="nav-link" data-scroll-target="#files-listed-in-git-status"><span class="header-section-number">1.6.1</span> Files listed in <code>git status</code></a></li>
  <li><a href="#branches" id="toc-branches" class="nav-link" data-scroll-target="#branches"><span class="header-section-number">1.6.2</span> Branches</a></li>
  <li><a href="#commit-hashes" id="toc-commit-hashes" class="nav-link" data-scroll-target="#commit-hashes"><span class="header-section-number">1.6.3</span> Commit hashes</a></li>
  </ul></li>
  <li><a href="#color-themes" id="toc-color-themes" class="nav-link" data-scroll-target="#color-themes"><span class="header-section-number">1.7</span> Color themes</a>
  <ul class="collapse">
  <li><a href="#fzf-theme-playground" id="toc-fzf-theme-playground" class="nav-link" data-scroll-target="#fzf-theme-playground"><span class="header-section-number">1.7.1</span> fzf Theme Playground</a></li>
  <li><a href="#generating-fzf-color-theme-from-vim-color-schemes" id="toc-generating-fzf-color-theme-from-vim-color-schemes" class="nav-link" data-scroll-target="#generating-fzf-color-theme-from-vim-color-schemes"><span class="header-section-number">1.7.2</span> Generating fzf color theme from Vim color schemes</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><div class="quarto-title-block"><div class="quarto-title-tools-only"><h1></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://rgtlab.org">Ronald (Ryy) Glenn Thomas</a> <a href="https://orcid.org/0000-0003-1686-4965" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://ucsd.edu">
            UCSD
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="advanced-fzf-examples" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Advanced fzf examples</h1>
<ul>
<li><em>Last update: 2025/02/02</em></li>
<li><em>Requires fzf 0.59.0 or later</em></li>
</ul>
<hr>
<!-- vim-markdown-toc GFM -->
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#display-modes">Display modes</a>
<ul>
<li><a href="#--height"><code>--height</code></a></li>
<li><a href="#--tmux"><code>--tmux</code></a></li>
</ul></li>
<li><a href="#dynamic-reloading-of-the-list">Dynamic reloading of the list</a>
<ul>
<li><a href="#updating-the-list-of-processes-by-pressing-ctrl-r">Updating the list of processes by pressing CTRL-R</a></li>
<li><a href="#toggling-between-data-sources">Toggling between data sources</a></li>
<li><a href="#toggling-with-a-single-key-binding">Toggling with a single key binding</a></li>
</ul></li>
<li><a href="#ripgrep-integration">Ripgrep integration</a>
<ul>
<li><a href="#using-fzf-as-the-secondary-filter">Using fzf as the secondary filter</a></li>
<li><a href="#using-fzf-as-interactive-ripgrep-launcher">Using fzf as interactive Ripgrep launcher</a></li>
<li><a href="#switching-to-fzf-only-search-mode">Switching to fzf-only search mode</a></li>
<li><a href="#switching-between-ripgrep-mode-and-fzf-mode">Switching between Ripgrep mode and fzf mode</a></li>
<li><a href="#switching-between-ripgrep-mode-and-fzf-mode-using-a-single-key-binding">Switching between Ripgrep mode and fzf mode using a single key binding</a></li>
<li><a href="#controlling-ripgrep-search-and-fzf-search-simultaneously">Controlling Ripgrep search and fzf search simultaneously</a></li>
</ul></li>
<li><a href="#log-tailing">Log tailing</a></li>
<li><a href="#key-bindings-for-git-objects">Key bindings for git objects</a>
<ul>
<li><a href="#files-listed-in-git-status">Files listed in <code>git status</code></a></li>
<li><a href="#branches">Branches</a></li>
<li><a href="#commit-hashes">Commit hashes</a></li>
</ul></li>
<li><a href="#color-themes">Color themes</a>
<ul>
<li><a href="#fzf-theme-playground">fzf Theme Playground</a></li>
<li><a href="#generating-fzf-color-theme-from-vim-color-schemes">Generating fzf color theme from Vim color schemes</a></li>
</ul></li>
</ul>
<!-- vim-markdown-toc -->
<section id="introduction" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1.1</span> Introduction</h2>
<p>fzf is an interactive <a href="https://en.wikipedia.org/wiki/Filter_(software)">Unix filter</a> program that is designed to be used with other Unix tools. It reads a list of items from the standard input, allows you to select a subset of the items, and prints the selected ones to the standard output. You can think of it as an interactive version of <em>grep</em>, and it’s already useful even if you don’t know any of its options.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. ps:   Feed the list of processes to fzf</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. fzf:  Interactively select a process using fuzzy matching algorithm</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. awk:  Take the PID from the selected line</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. kill: Kill the process with the PID</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> <span class="at">-ef</span> <span class="kw">|</span> <span class="ex">fzf</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'{print $2}'</span> <span class="kw">|</span> <span class="fu">xargs</span> kill <span class="at">-9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>While the above example succinctly summarizes the fundamental concept of fzf, you can build much more sophisticated interactive workflows using fzf once you learn its wide variety of features.</p>
<ul>
<li>To see the full list of options and features, see <code>man fzf</code></li>
<li>To see the latest additions, see <a href="../../../../../posts/share_R_code_via_docker/peng1/vimplugins/fzf/CHANGELOG.html">CHANGELOG.md</a></li>
</ul>
<p>This document will guide you through some examples that will familiarize you with the advanced features of fzf.</p>
</section>
<section id="display-modes" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="display-modes"><span class="header-section-number">1.2</span> Display modes</h2>
<section id="height" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="height"><span class="header-section-number">1.2.1</span> <code>--height</code></h3>
<p>fzf by default opens in fullscreen mode, but it’s not always desirable. Oftentimes, you want to see the current context of the terminal while using fzf. <code>--height</code> is an option for opening fzf below the cursor in non-fullscreen mode so you can still see the previous commands and their results above it.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40%</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113379893-c184c680-93b5-11eb-9676-c7c0a2f01748.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<p>You might also want to experiment with other layout options such as <code>--layout=reverse</code>, <code>--info=inline</code>, <code>--border</code>, <code>--margin</code>, etc.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline <span class="at">--border</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline <span class="at">--border</span> <span class="at">--margin</span><span class="op">=</span>1</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline <span class="at">--border</span> <span class="at">--margin</span><span class="op">=</span>1 <span class="at">--padding</span><span class="op">=</span>1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113379932-dfeac200-93b5-11eb-9e28-df1a2ee71f90.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<p><em>(See man page to see the full list of options)</em></p>
<p>But you definitely don’t want to repeat <code>--height=40% --layout=reverse --info=inline --border --margin=1 --padding=1</code> every time you use fzf. You could write a wrapper script or shell alias, but there is an easier option. Define <code>$FZF_DEFAULT_OPTS</code> like so:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">"--height=40% --layout=reverse --info=inline --border --margin=1 --padding=1"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="tmux" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="tmux"><span class="header-section-number">1.2.2</span> <code>--tmux</code></h3>
<p>(Requires tmux 3.3 or later)</p>
<p>If you’re using tmux, you can open fzf in a tmux popup using <code>--tmux</code> option.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open fzf in a tmux popup at the center of the screen with 70% width and height</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> 70%</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/junegunn/fzf/assets/700826/9c365405-c700-49b2-8985-60d822ed4cff.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<p><code>--tmux</code> option is silently ignored if you’re not on tmux. So if you’re trying to avoid opening fzf in fullscreen, try specifying both <code>--height</code> and <code>--tmux</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --tmux is specified later so it takes precedence over --height when on tmux.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># If you're not on tmux, --tmux is ignored and --height is used instead.</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span>  <span class="at">--height</span> 70% <span class="at">--tmux</span> 70%</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also specify the position, width, and height of the popup window in the following format:</p>
<ul>
<li><code>[center|top|bottom|left|right][,SIZE[%]][,SIZE[%][,border-native]]</code></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 100% width and 60% height</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> 100%,60% <span class="at">--border</span> horizontal</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/junegunn/fzf/assets/700826/f80d3514-d69f-42f2-a8de-a392a562bfcf.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On the right (50% width)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> right</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/junegunn/fzf/assets/700826/4033ade4-7efa-421b-a3fb-a430d197098a.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On the left (40% width and 70% height)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> left,40%,70%</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/junegunn/fzf/assets/700826/efe43881-2bf0-49ea-ab2e-1377f778cd52.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p>[!TIP] You might also want to check out my tmux plugins which support this popup window layout.</p>
<ul>
<li>https://github.com/junegunn/tmux-fzf-url</li>
<li>https://github.com/junegunn/tmux-fzf-maccy</li>
</ul>
</blockquote>
</section>
</section>
<section id="dynamic-reloading-of-the-list" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="dynamic-reloading-of-the-list"><span class="header-section-number">1.3</span> Dynamic reloading of the list</h2>
<p>fzf can dynamically update the candidate list using an arbitrary program with <code>reload</code> bindings (The design document for <code>reload</code> can be found <a href="https://github.com/junegunn/fzf/issues/1750">here</a>).</p>
<section id="updating-the-list-of-processes-by-pressing-ctrl-r" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="updating-the-list-of-processes-by-pressing-ctrl-r"><span class="header-section-number">1.3.1</span> Updating the list of processes by pressing CTRL-R</h3>
<p>This example shows how you can set up a binding for dynamically updating the list without restarting fzf.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="fu">date</span><span class="kw">;</span> <span class="fu">ps</span> <span class="at">-ef</span><span class="kw">)</span> <span class="kw">|</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">fzf</span> <span class="at">--bind</span><span class="op">=</span><span class="st">'ctrl-r:reload(date; ps -ef)'</span> <span class="dt">\</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">--header</span><span class="op">=</span><span class="st">$'Press CTRL-R to reload</span><span class="dt">\n\n</span><span class="st">'</span> <span class="at">--header-lines</span><span class="op">=</span>2 <span class="dt">\</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview</span><span class="op">=</span><span class="st">'echo {}'</span> <span class="at">--preview-window</span><span class="op">=</span>down,3,wrap <span class="dt">\</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--height</span><span class="op">=</span>80% <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'{print $2}'</span> <span class="kw">|</span> <span class="fu">xargs</span> kill <span class="at">-9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113465047-200c7c00-946c-11eb-918c-268f37a900c8.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<ul>
<li>The initial command is <code>(date; ps -ef)</code>. It prints the current date and time, and the list of the processes.</li>
<li>With <code>--header</code> option, you can show any message as the fixed header.</li>
<li>To disallow selecting the first two lines (<code>date</code> and <code>ps</code> header), we use <code>--header-lines=2</code> option.</li>
<li><code>--bind='ctrl-r:reload(date; ps -ef)'</code> binds CTRL-R to <code>reload</code> action that runs <code>date; ps -ef</code>, so we can update the list of the processes by pressing CTRL-R.</li>
<li>We use simple <code>echo {}</code> preview option, so we can see the entire line on the preview window below even if it’s too long</li>
</ul>
</section>
<section id="toggling-between-data-sources" class="level3" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="toggling-between-data-sources"><span class="header-section-number">1.3.2</span> Toggling between data sources</h3>
<p>You’re not limited to just one reload binding. Set up multiple bindings so you can switch between data sources.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> <span class="pp">*</span> <span class="kw">|</span> <span class="ex">fzf</span> <span class="at">--prompt</span> <span class="st">'All&gt; '</span> <span class="dt">\</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">--header</span> <span class="st">'CTRL-D: Directories / CTRL-F: Files'</span> <span class="dt">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">--bind</span> <span class="st">'ctrl-d:change-prompt(Directories&gt; )+reload(find * -type d)'</span> <span class="dt">\</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">--bind</span> <span class="st">'ctrl-f:change-prompt(Files&gt; )+reload(find * -type f)'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113465073-4af6d000-946c-11eb-858f-2372c0955f67.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113465072-46321c00-946c-11eb-9b6f-cda3951df579.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
</section>
<section id="toggling-with-a-single-key-binding" class="level3" data-number="1.3.3">
<h3 data-number="1.3.3" class="anchored" data-anchor-id="toggling-with-a-single-key-binding"><span class="header-section-number">1.3.3</span> Toggling with a single key binding</h3>
<p>The above example uses two different key bindings to toggle between two modes, but can we just use a single key binding?</p>
<p>To make a key binding behave differently each time it is pressed, we need:</p>
<ol type="1">
<li>a way to store the current state. i.e.&nbsp;“which mode are we in?”</li>
<li>and a way to dynamically perform different actions depending on the state.</li>
</ol>
<p>The following example shows how to 1. store the current mode in the prompt string, 2. and use this information (<code>$FZF_PROMPT</code>) to determine which actions to perform using the <code>transform</code> action.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">fd</span> <span class="at">--type</span> file <span class="kw">|</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">fzf</span> <span class="at">--prompt</span> <span class="st">'Files&gt; '</span> <span class="dt">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">--header</span> <span class="st">'CTRL-T: Switch between Files/Directories'</span> <span class="dt">\</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">--bind</span> <span class="st">'ctrl-t:transform:[[ ! $FZF_PROMPT =~ Files ]] &amp;&amp;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="st">              echo "change-prompt(Files&gt; )+reload(fd --type file)" ||</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="st">              echo "change-prompt(Directories&gt; )+reload(fd --type directory)"'</span> <span class="dt">\</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview</span> <span class="st">'[[ $FZF_PROMPT =~ Files ]] &amp;&amp; bat --color=always {} || tree -C {}'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="ripgrep-integration" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="ripgrep-integration"><span class="header-section-number">1.4</span> Ripgrep integration</h2>
<section id="using-fzf-as-the-secondary-filter" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="using-fzf-as-the-secondary-filter"><span class="header-section-number">1.4.1</span> Using fzf as the secondary filter</h3>
<ul>
<li>Requires <a href="https://github.com/sharkdp/bat">bat</a></li>
<li>Requires <a href="https://github.com/BurntSushi/ripgrep">Ripgrep</a></li>
</ul>
<p>fzf is pretty fast for filtering a list that you will rarely have to think about its performance. But it is not the right tool for searching for text inside many large files, and in that case you should definitely use something like <a href="https://github.com/BurntSushi/ripgrep">Ripgrep</a>.</p>
<p>In the next example, Ripgrep is the primary filter that searches for the given text in files, and fzf is used as the secondary fuzzy filter that adds interactivity to the workflow. And we use <a href="https://github.com/sharkdp/bat">bat</a> to show the matching line in the preview window.</p>
<p>This is a bash script and it will not run as expected on other non-compliant shells. To avoid the compatibility issue, let’s save this snippet as a script file called <code>rfv</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Search for text in files using Ripgrep</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Interactively narrow down the list using fzf</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Open the file in Vim</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="ex">rg</span> <span class="at">--color</span><span class="op">=</span>always <span class="at">--line-number</span> <span class="at">--no-heading</span> <span class="at">--smart-case</span> <span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span> <span class="kw">|</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">fzf</span> <span class="at">--ansi</span> <span class="dt">\</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And run it with an initial query string.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the script executable</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x rfv</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run it with the initial query "algo"</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="ex">./rfv</span> algo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p>Ripgrep will perform the initial search and list all the lines that contain <code>algo</code>. Then we further narrow down the list on fzf.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113683873-a42a6200-96ff-11eb-9666-26ce4091b0e4.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<p>I know it’s a lot to digest, let’s try to break down the code.</p>
<ul>
<li><p>Ripgrep prints the matching lines in the following format</p>
<pre><code>man/man1/fzf.1:54:.BI "--algo=" TYPE
man/man1/fzf.1:55:Fuzzy matching algorithm (default: v2)
man/man1/fzf.1:58:.BR v2 "     Optimal scoring algorithm (quality)"
src/pattern_test.go:7:  "github.com/junegunn/fzf/src/algo"</code></pre>
<p>The first token delimited by <code>:</code> is the file path, and the second token is the line number of the matching line. They respectively correspond to <code>{1}</code> and <code>{2}</code> in the preview command.</p>
<ul>
<li><code>--preview 'bat --color=always {1} --highlight-line {2}'</code></li>
</ul></li>
<li><p>As we run <code>rg</code> with <code>--color=always</code> option, we should tell fzf to parse ANSI color codes in the input by setting <code>--ansi</code>.</p></li>
<li><p>We customize how fzf colors various text elements using <code>--color</code> option. <code>-1</code> tells fzf to keep the original color from the input. See <code>man fzf</code> for available color options.</p></li>
<li><p>The value of <code>--preview-window</code> option consists of 5 components delimited by <code>,</code></p>
<ol type="1">
<li><code>up</code> — Position of the preview window</li>
<li><code>60%</code> — Size of the preview window</li>
<li><code>border-bottom</code> — Preview window border only on the bottom side</li>
<li><code>+{2}+3/3</code> — Scroll offset of the preview contents</li>
<li><code>~3</code> — Fixed header</li>
</ol></li>
<li><p>Let’s break down the latter two. We want to display the bat output in the preview window with a certain scroll offset so that the matching line is positioned near the center of the preview window.</p>
<ul>
<li><code>+{2}</code> — The base offset is extracted from the second token</li>
<li><code>+3</code> — We add 3 lines to the base offset to compensate for the header part of <code>bat</code> output
<ul>
<li><code>───────┬──────────────────────────────────────────────────────────            │ File: CHANGELOG.md     ───────┼──────────────────────────────────────────────────────────        1   │ CHANGELOG        2   │ =========        3   │        4   │ 0.26.0        5   │ ------</code></li>
</ul></li>
<li><code>/3</code> adjusts the offset so that the matching line is shown at a third position in the window</li>
<li><code>~3</code> makes the top three lines fixed header so that they are always visible regardless of the scroll offset</li>
</ul></li>
<li><p>Instead of using shell script to process the final output of fzf, we use <code>become(...)</code> action which was added in <a href="https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0380">fzf 0.38.0</a> to turn fzf into a new process that opens the file with <code>vim</code> (<code>vim {1}</code>) and move the cursor to the line (<code>+{2}</code>).</p></li>
</ul>
</section>
<section id="using-fzf-as-interactive-ripgrep-launcher" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="using-fzf-as-interactive-ripgrep-launcher"><span class="header-section-number">1.4.2</span> Using fzf as interactive Ripgrep launcher</h3>
<p>We have learned that we can bind <code>reload</code> action to a key (e.g. <code>--bind=ctrl-r:execute(ps -ef)</code>). In the next example, we are going to <strong>bind <code>reload</code> action to <code>change</code> event</strong> so that whenever the user <em>changes</em> the query string on fzf, <code>reload</code> action is triggered.</p>
<p>Here is a variation of the above <code>rfv</code> script. fzf will restart Ripgrep every time the user updates the query string on fzf. Searching and filtering is completely done by Ripgrep, and fzf merely provides the interactive interface. So we lose the “fuzziness”, but the performance will be better on larger projects, and it will free up memory as you narrow down the results.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Search for text in files using Ripgrep</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Interactively restart Ripgrep with reload action</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Open the file in Vim</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="va">RG_PREFIX</span><span class="op">=</span><span class="st">"rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start:reload:</span><span class="va">$RG_PREFIX</span><span class="st"> {q}"</span> <span class="dt">\</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"change:reload:sleep 0.1; </span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true"</span> <span class="dt">\</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113684212-f9ff0a00-96ff-11eb-8737-7bb571d320cc.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<ul>
<li>Instead of starting fzf in the usual <code>rg ... | fzf</code> form, we make it start the initial Ripgrep process immediately via <code>start:reload</code> binding for the consistency of the code.</li>
<li>Filtering is no longer a responsibility of fzf; hence <code>--disabled</code></li>
<li><code>{q}</code> in the reload command evaluates to the query string on fzf prompt.</li>
<li><code>sleep 0.1</code> in the reload command is for “debouncing”. This small delay will reduce the number of intermediate Ripgrep processes while we’re typing in a query.</li>
</ul>
</section>
<section id="switching-to-fzf-only-search-mode" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="switching-to-fzf-only-search-mode"><span class="header-section-number">1.4.3</span> Switching to fzf-only search mode</h3>
<p>In the previous example, we lost fuzzy matching capability as we completely delegated search functionality to Ripgrep. But we can dynamically switch to fzf-only search mode by <em>“unbinding”</em> <code>reload</code> action from <code>change</code> event.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Two-phase filtering with Ripgrep and fzf</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Search for text in files using Ripgrep</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Interactively restart Ripgrep with reload action</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#    * Press alt-enter to switch to fzf-only filtering</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Open the file in Vim</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="va">RG_PREFIX</span><span class="op">=</span><span class="st">"rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start:reload:</span><span class="va">$RG_PREFIX</span><span class="st"> {q}"</span> <span class="dt">\</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"change:reload:sleep 0.1; </span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true"</span> <span class="dt">\</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"alt-enter:unbind(change,alt-enter)+change-prompt(2. fzf&gt; )+enable-search+clear-query"</span> <span class="dt">\</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">'1. ripgrep&gt; '</span> <span class="dt">\</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>Phase 1. Filtering with Ripgrep <img src="https://user-images.githubusercontent.com/700826/119213880-735e8a80-bafd-11eb-8493-123e4be24fbc.png" class="img-fluid" alt="image"></p></li>
<li><p>Phase 2. Filtering with fzf <img src="https://user-images.githubusercontent.com/700826/119213887-7e191f80-bafd-11eb-98c9-71a1af9d7aab.png" class="img-fluid" alt="image"></p></li>
<li><p>We added <code>--prompt</code> option to show that fzf is initially running in “Ripgrep launcher mode”.</p></li>
<li><p>We added <code>alt-enter</code> binding that</p>
<ol type="1">
<li>unbinds <code>change</code> event, so Ripgrep is no longer restarted on key press</li>
<li>changes the prompt to <code>2. fzf&gt;</code></li>
<li>enables search functionality of fzf</li>
<li>clears the current query string that was used to start Ripgrep process</li>
<li>and unbinds <code>alt-enter</code> itself as this is a one-off event</li>
</ol></li>
<li><p>We reverted <code>--color</code> option for customizing how the matching chunks are displayed in the second phase</p></li>
</ul>
</section>
<section id="switching-between-ripgrep-mode-and-fzf-mode" class="level3" data-number="1.4.4">
<h3 data-number="1.4.4" class="anchored" data-anchor-id="switching-between-ripgrep-mode-and-fzf-mode"><span class="header-section-number">1.4.4</span> Switching between Ripgrep mode and fzf mode</h3>
<p><a href="https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0300">fzf 0.30.0</a> added <code>rebind</code> action so we can “rebind” the bindings that were previously “unbound” via <code>unbind</code>.</p>
<p>This is an improved version of the previous example that allows us to switch between Ripgrep launcher mode and fzf-only filtering mode via CTRL-R and CTRL-F.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch between Ripgrep launcher mode (CTRL-R) and fzf filtering mode (CTRL-F)</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-f</span> /tmp/rg-fzf-<span class="dt">{r</span><span class="op">,</span><span class="dt">f}</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="va">RG_PREFIX</span><span class="op">=</span><span class="st">"rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start:reload(</span><span class="va">$RG_PREFIX</span><span class="st"> {q})+unbind(ctrl-r)"</span> <span class="dt">\</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"change:reload:sleep 0.1; </span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true"</span> <span class="dt">\</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"ctrl-f:unbind(change,ctrl-f)+change-prompt(2. fzf&gt; )+enable-search+rebind(ctrl-r)+transform-query(echo {q} &gt; /tmp/rg-fzf-r; cat /tmp/rg-fzf-f)"</span> <span class="dt">\</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"ctrl-r:unbind(ctrl-r)+change-prompt(1. ripgrep&gt; )+disable-search+reload(</span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true)+rebind(change,ctrl-f)+transform-query(echo {q} &gt; /tmp/rg-fzf-f; cat /tmp/rg-fzf-r)"</span> <span class="dt">\</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">'1. ripgrep&gt; '</span> <span class="dt">\</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">--header</span> <span class="st">'╱ CTRL-R (ripgrep mode) ╱ CTRL-F (fzf mode) ╱'</span> <span class="dt">\</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>To restore the query string when switching between modes, we store the current query in <code>/tmp/rg-fzf-{r,f}</code> files and restore the query using <code>transform-query</code> action which was added in <a href="https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0360">fzf 0.36.0</a>.</li>
<li>Also note that we unbind <code>ctrl-r</code> binding on <code>start</code> event which is triggered once when fzf starts.</li>
</ul>
</section>
<section id="switching-between-ripgrep-mode-and-fzf-mode-using-a-single-key-binding" class="level3" data-number="1.4.5">
<h3 data-number="1.4.5" class="anchored" data-anchor-id="switching-between-ripgrep-mode-and-fzf-mode-using-a-single-key-binding"><span class="header-section-number">1.4.5</span> Switching between Ripgrep mode and fzf mode using a single key binding</h3>
<p>In contrast to the previous version, we use just one hotkey to toggle between ripgrep and fzf mode. This is achieved by using the <code>$FZF_PROMPT</code> as a state within the <code>transform</code> action, a feature introduced in <a href="https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0450">fzf 0.45.0</a>. A more detailed explanation of this feature can be found in a previous section - <a href="#toggling-with-a-single-key-binding">Toggling with a single keybinding</a>.</p>
<p>When using the <code>transform</code> action, the placeholder (<code>\{q}</code>) should be escaped to prevent immediate evaluation.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch between Ripgrep mode and fzf filtering mode (CTRL-T)</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-f</span> /tmp/rg-fzf-<span class="dt">{r</span><span class="op">,</span><span class="dt">f}</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="va">RG_PREFIX</span><span class="op">=</span><span class="st">"rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start:reload:</span><span class="va">$RG_PREFIX</span><span class="st"> {q}"</span> <span class="dt">\</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"change:reload:sleep 0.1; </span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true"</span> <span class="dt">\</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'ctrl-t:transform:[[ ! $FZF_PROMPT =~ ripgrep ]] &amp;&amp;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="st">      echo "rebind(change)+change-prompt(1. ripgrep&gt; )+disable-search+transform-query:echo \{q} &gt; /tmp/rg-fzf-f; cat /tmp/rg-fzf-r" ||</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="st">      echo "unbind(change)+change-prompt(2. fzf&gt; )+enable-search+transform-query:echo \{q} &gt; /tmp/rg-fzf-r; cat /tmp/rg-fzf-f"'</span> <span class="dt">\</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">'1. ripgrep&gt; '</span> <span class="dt">\</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--header</span> <span class="st">'CTRL-T: Switch between ripgrep/fzf'</span> <span class="dt">\</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="controlling-ripgrep-search-and-fzf-search-simultaneously" class="level3" data-number="1.4.6">
<h3 data-number="1.4.6" class="anchored" data-anchor-id="controlling-ripgrep-search-and-fzf-search-simultaneously"><span class="header-section-number">1.4.6</span> Controlling Ripgrep search and fzf search simultaneously</h3>
<p><code>search</code> and <code>transform-search</code> action allow you to trigger an fzf search with an arbitrary query string. This frees fzf from strictly following the prompt input, enabling custom search syntax.</p>
<p>In the example below, <code>transform</code> action is used to conditionally trigger <code>reload</code> for ripgrep, followed by <code>search</code> for fzf. The first word of the query initiates the Ripgrep process to generate the initial results, while the remainder of the query is passed to fzf for secondary filtering.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">TEMP</span><span class="op">=</span><span class="va">$(</span><span class="fu">mktemp</span> <span class="at">-u</span><span class="va">)</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="bu">trap</span> <span class="st">'rm -f "$TEMP"'</span> EXIT</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="va">TRANSFORMER</span><span class="op">=</span><span class="st">'</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="st">  rg_pat={q:1}      # The first word is passed to ripgrep</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="st">  fzf_pat={q:2..}   # The rest are passed to fzf</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="st">  if ! [[ -r "$TEMP" ]] || [[ $rg_pat != $(cat "$TEMP") ]]; then</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="st">    echo "$rg_pat" &gt; "$TEMP"</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="st">    printf "reload:sleep 0.1; rg --column --line-number --no-heading --color=always --smart-case %q || true" "$rg_pat"</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="st">  fi</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="st">  echo "+search:$fzf_pat"</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="st">'</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--with-shell</span> <span class="st">'bash -c'</span> <span class="dt">\</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start,change:transform:</span><span class="va">$TRANSFORMER</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-line,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="log-tailing" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="log-tailing"><span class="header-section-number">1.5</span> Log tailing</h2>
<p>fzf can run long-running preview commands and render partial results before completion. And when you specify <code>follow</code> flag in <code>--preview-window</code> option, fzf will “<code>tail -f</code>” the result, automatically scrolling to the bottom.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With "follow", preview window will automatically scroll to the bottom.</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "\033[2J" is an ANSI escape sequence for clearing the screen.</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># When fzf reads this code it clears the previous preview contents.</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--preview-window</span> follow <span class="at">--preview</span> <span class="st">'for i in $(seq 100000); do</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="st">  echo "$i"</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="st">  sleep 0.01</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="st">  (( i % 300 == 0 )) &amp;&amp; printf "\033[2J"</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="st">done'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113473303-dd669600-94a3-11eb-88a9-1f61b996bb0e.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<p>Admittedly, that was a silly example. Here’s a practical one for browsing Kubernetes pods.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pods()</span> <span class="kw">{</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">command</span><span class="op">=</span><span class="st">'kubectl get pods --all-namespaces'</span> <span class="ex">fzf</span> <span class="dt">\</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--info</span><span class="op">=</span>inline <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--header-lines</span><span class="op">=</span>1 <span class="dt">\</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">"</span><span class="va">$(</span><span class="ex">kubectl</span> config current-context <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/-context$//'</span><span class="va">)</span><span class="st">&gt; "</span> <span class="dt">\</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--header</span> <span class="st">$'╱ Enter (kubectl exec) ╱ CTRL-O (open log in editor) ╱ CTRL-R (reload) ╱</span><span class="dt">\n\n</span><span class="st">'</span> <span class="dt">\</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'start,ctrl-r:reload:$command'</span> <span class="dt">\</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'ctrl-/:change-preview-window(80%,border-bottom|hidden|)'</span> <span class="dt">\</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:execute:kubectl exec -it --namespace {1} {2} -- bash'</span> <span class="dt">\</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'ctrl-o:execute:${EDITOR:-vim} &lt;(kubectl logs --all-containers --namespace {1} {2})'</span> <span class="dt">\</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> up:follow <span class="dt">\</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'kubectl logs --follow --all-containers --tail=10000 --namespace {1} {2}'</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113473547-1d7a4880-94a5-11eb-98ef-9aa6f0ed215a.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
<ul>
<li>The preview window will <em>“log tail”</em> the pod
<ul>
<li>Holding on to a large amount of log will consume a lot of memory. So we limited the initial log amount with <code>--tail=10000</code>.</li>
</ul></li>
<li><code>execute</code> bindings allow you to run any command without leaving fzf
<ul>
<li>Press enter key on a pod to <code>kubectl exec</code> into it</li>
<li>Press CTRL-O to open the log in your editor</li>
</ul></li>
<li>Press CTRL-R to reload the pod list</li>
<li>Press CTRL-/ repeatedly to rotate through a different sets of preview window options
<ol type="1">
<li><code>80%,border-bottom</code></li>
<li><code>hidden</code></li>
<li>Empty string after <code>|</code> translates to the default options from <code>--preview-window</code></li>
</ol></li>
</ul>
</section>
<section id="key-bindings-for-git-objects" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="key-bindings-for-git-objects"><span class="header-section-number">1.6</span> Key bindings for git objects</h2>
<p>Oftentimes, you want to put the identifiers of various Git object to the command-line. For example, it is common to write commands like these:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout [SOME_COMMIT_HASH or BRANCH or TAG]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> diff [SOME_COMMIT_HASH or BRANCH or TAG] [SOME_COMMIT_HASH or BRANCH or TAG]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="https://github.com/junegunn/fzf-git.sh">fzf-git.sh</a> project defines a set of fzf-based key bindings for Git objects. I strongly recommend that you check them out because they are seriously useful.</p>
<section id="files-listed-in-git-status" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="files-listed-in-git-status"><span class="header-section-number">1.6.1</span> Files listed in <code>git status</code></h3>
<p><kbd>CTRL-G</kbd><kbd>CTRL-F</kbd></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113473779-a9d93b00-94a6-11eb-87b5-f62a8d0a0efc.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
</section>
<section id="branches" class="level3" data-number="1.6.2">
<h3 data-number="1.6.2" class="anchored" data-anchor-id="branches"><span class="header-section-number">1.6.2</span> Branches</h3>
<p><kbd>CTRL-G</kbd><kbd>CTRL-B</kbd></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113473758-87dfb880-94a6-11eb-82f4-9218103f10bd.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
</section>
<section id="commit-hashes" class="level3" data-number="1.6.3">
<h3 data-number="1.6.3" class="anchored" data-anchor-id="commit-hashes"><span class="header-section-number">1.6.3</span> Commit hashes</h3>
<p><kbd>CTRL-G</kbd><kbd>CTRL-H</kbd></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113473765-91692080-94a6-11eb-8d38-ed4d41f27ac1.png" class="img-fluid figure-img"></p>
<figcaption>image</figcaption>
</figure>
</div>
</section>
</section>
<section id="color-themes" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="color-themes"><span class="header-section-number">1.7</span> Color themes</h2>
<p>You can customize how fzf colors the text elements with <code>--color</code> option. Here are a few color themes. Note that you need a terminal emulator that can display 24-bit colors.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># junegunn/seoul256.vim (dark)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#3F3F3F,bg:#4B4B4B,border:#6B6B6B,spinner:#98BC99,hl:#719872,fg:#D9D9D9,header:#719872,info:#BDBB72,pointer:#E12672,marker:#E17899,fg+:#D9D9D9,preview-bg:#3F3F3F,prompt:#98BEDE,hl+:#98BC99'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113475011-2c192d80-94ae-11eb-9d17-1e5867bae01f.png" class="img-fluid figure-img"></p>
<figcaption>seoul256</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb25"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># junegunn/seoul256.vim (light)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#D9D9D9,bg:#E1E1E1,border:#C8C8C8,spinner:#719899,hl:#719872,fg:#616161,header:#719872,info:#727100,pointer:#E12672,marker:#E17899,fg+:#616161,preview-bg:#D9D9D9,prompt:#0099BD,hl+:#719899'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113475022-389d8600-94ae-11eb-905f-0939dd535837.png" class="img-fluid figure-img"></p>
<figcaption>seoul256-light</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb26"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># morhetz/gruvbox</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#3c3836,bg:#32302f,spinner:#fb4934,hl:#928374,fg:#ebdbb2,header:#928374,info:#8ec07c,pointer:#fb4934,marker:#fb4934,fg+:#ebdbb2,prompt:#fb4934,hl+:#fb4934'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113475042-494dfc00-94ae-11eb-9322-cd03a027305a.png" class="img-fluid figure-img"></p>
<figcaption>gruvbox</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb27"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># arcticicestudio/nord-vim</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#3B4252,bg:#2E3440,spinner:#81A1C1,hl:#616E88,fg:#D8DEE9,header:#616E88,info:#81A1C1,pointer:#81A1C1,marker:#81A1C1,fg+:#D8DEE9,prompt:#81A1C1,hl+:#81A1C1'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113475063-67b3f780-94ae-11eb-9b24-5f0d22b63399.png" class="img-fluid figure-img"></p>
<figcaption>nord</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb28"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tomasr/molokai</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#293739,bg:#1B1D1E,border:#808080,spinner:#E6DB74,hl:#7E8E91,fg:#F8F8F2,header:#7E8E91,info:#A6E22E,pointer:#A6E22E,marker:#F92672,fg+:#F8F8F2,prompt:#F92672,hl+:#F92672'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://user-images.githubusercontent.com/700826/113475085-8619f300-94ae-11eb-85e4-2766fc3246bf.png" class="img-fluid figure-img"></p>
<figcaption>molokai</figcaption>
</figure>
</div>
<section id="fzf-theme-playground" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="fzf-theme-playground"><span class="header-section-number">1.7.1</span> fzf Theme Playground</h3>
<p><a href="https://vitormv.github.io/fzf-themes/">fzf Theme Playground</a> created by <a href="https://github.com/vitormv">Vitor Mello</a> is a webpage where you can interactively create fzf themes.</p>
</section>
<section id="generating-fzf-color-theme-from-vim-color-schemes" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="generating-fzf-color-theme-from-vim-color-schemes"><span class="header-section-number">1.7.2</span> Generating fzf color theme from Vim color schemes</h3>
<p>The Vim plugin of fzf can generate <code>--color</code> option from the current color scheme according to <code>g:fzf_colors</code> variable. You can find the detailed explanation <a href="https://github.com/junegunn/fzf/blob/master/README-VIM.md#explanation-of-gfzf_colors">here</a>.</p>
<p>Here is an example. Add this to your Vim configuration file.</p>
<pre class="vim"><code>let g:fzf_colors =
\ { 'fg':         ['fg', 'Normal'],
  \ 'bg':         ['bg', 'Normal'],
  \ 'preview-bg': ['bg', 'NormalFloat'],
  \ 'hl':         ['fg', 'Comment'],
  \ 'fg+':        ['fg', 'CursorLine', 'CursorColumn', 'Normal'],
  \ 'bg+':        ['bg', 'CursorLine', 'CursorColumn'],
  \ 'hl+':        ['fg', 'Statement'],
  \ 'info':       ['fg', 'PreProc'],
  \ 'border':     ['fg', 'Ignore'],
  \ 'prompt':     ['fg', 'Conditional'],
  \ 'pointer':    ['fg', 'Exception'],
  \ 'marker':     ['fg', 'Keyword'],
  \ 'spinner':    ['fg', 'Label'],
  \ 'header':     ['fg', 'Comment'] }</code></pre>
<p>Then you can see how the <code>--color</code> option is generated by printing the result of <code>fzf#wrap()</code>.</p>
<pre class="vim"><code>:echo fzf#wrap()</code></pre>
<p>Use this command to append <code>export FZF_DEFAULT_OPTS="..."</code> line to the end of the current file.</p>
<pre class="vim"><code>:call append('$', printf('export FZF_DEFAULT_OPTS="%s"', matchstr(fzf#wrap().options, "--color[^']*")))</code></pre>


<!-- -->

</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas,
  author = {(Ryy) Glenn Thomas, Ronald},
  url = {https://focusonr.org/posts/share_R_code_via_docker/peng1/vimplugins/fzf/ADVANCED.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas" class="csl-entry quarto-appendix-citeas" role="listitem">
(Ryy) Glenn Thomas, Ronald. n.d. <a href="https://focusonr.org/posts/share_R_code_via_docker/peng1/vimplugins/fzf/ADVANCED.html">https://focusonr.org/posts/share_R_code_via_docker/peng1/vimplugins/fzf/ADVANCED.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/focusonr\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light">
<script>
function loadGiscusWhenReady() {
  // Function to get the theme based on body class
  const getTheme = () => {
    const baseTheme = document.getElementById('giscus-base-theme').value;
    const altTheme = document.getElementById('giscus-alt-theme').value;
    return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
  };
  // Create the Giscus script and add it to the desired location
  const loadGiscus = () => {
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "rgt47/qblog";
    script.dataset.repoId = "R_kgDOH6TO7A";
    script.dataset.category = "Announcements";
    script.dataset.categoryId = "DIC_kwDOH5G3U84CRUp9";
    script.dataset.mapping = "pathname";
    script.dataset.reactionsEnabled = "1";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "bottom";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  };
  // MutationObserver to detect when the 'quarto-light' or 'quarto-dark' class is added to the body
  const observer = new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.type === "attributes" && mutation.attributeName === "class") {
        if (document.body.classList.contains('quarto-light') || document.body.classList.contains('quarto-dark')) {
          loadGiscus();
          observer.disconnect(); // Stop observing once Giscus is loaded
          break;
        }
      }
    }
  });
  // Start observing the body for class attribute changes
  observer.observe(document.body, {
    attributes: true,
    attributeFilter: ["class"],
  });
}
loadGiscusWhenReady();
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb32" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>Advanced fzf examples</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">======================</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>*Last update: 2025/02/02*</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>*Requires fzf 0.59.0 or later*</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- vim-markdown-toc GFM --&gt;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Introduction</span><span class="co">](#introduction)</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Display modes</span><span class="co">](#display-modes)</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">`--height`</span><span class="co">](#--height)</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">`--tmux`</span><span class="co">](#--tmux)</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Dynamic reloading of the list</span><span class="co">](#dynamic-reloading-of-the-list)</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Updating the list of processes by pressing CTRL-R</span><span class="co">](#updating-the-list-of-processes-by-pressing-ctrl-r)</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Toggling between data sources</span><span class="co">](#toggling-between-data-sources)</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Toggling with a single key binding</span><span class="co">](#toggling-with-a-single-key-binding)</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Ripgrep integration</span><span class="co">](#ripgrep-integration)</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Using fzf as the secondary filter</span><span class="co">](#using-fzf-as-the-secondary-filter)</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Using fzf as interactive Ripgrep launcher</span><span class="co">](#using-fzf-as-interactive-ripgrep-launcher)</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Switching to fzf-only search mode</span><span class="co">](#switching-to-fzf-only-search-mode)</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Switching between Ripgrep mode and fzf mode</span><span class="co">](#switching-between-ripgrep-mode-and-fzf-mode)</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Switching between Ripgrep mode and fzf mode using a single key binding</span><span class="co">](#switching-between-ripgrep-mode-and-fzf-mode-using-a-single-key-binding)</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Controlling Ripgrep search and fzf search simultaneously</span><span class="co">](#controlling-ripgrep-search-and-fzf-search-simultaneously)</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Log tailing</span><span class="co">](#log-tailing)</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Key bindings for git objects</span><span class="co">](#key-bindings-for-git-objects)</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Files listed in `git status`</span><span class="co">](#files-listed-in-git-status)</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Branches</span><span class="co">](#branches)</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Commit hashes</span><span class="co">](#commit-hashes)</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="co">[</span><span class="ot">Color themes</span><span class="co">](#color-themes)</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">fzf Theme Playground</span><span class="co">](#fzf-theme-playground)</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a><span class="ss">    * </span><span class="co">[</span><span class="ot">Generating fzf color theme from Vim color schemes</span><span class="co">](#generating-fzf-color-theme-from-vim-color-schemes)</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- vim-markdown-toc --&gt;</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>Introduction</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>------------</span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>fzf is an interactive <span class="co">[</span><span class="ot">Unix filter</span><span class="co">][filter]</span> program that is designed to be</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>used with other Unix tools. It reads a list of items from the standard input,</span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>allows you to select a subset of the items, and prints the selected ones to</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>the standard output. You can think of it as an interactive version of *grep*,</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>and it's already useful even if you don't know any of its options.</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. ps:   Feed the list of processes to fzf</span></span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. fzf:  Interactively select a process using fuzzy matching algorithm</span></span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. awk:  Take the PID from the selected line</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. kill: Kill the process with the PID</span></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> <span class="at">-ef</span> <span class="kw">|</span> <span class="ex">fzf</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'{print $2}'</span> <span class="kw">|</span> <span class="fu">xargs</span> kill <span class="at">-9</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a><span class="ot">[filter]: https://en.wikipedia.org/wiki/Filter_(software)</span></span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>While the above example succinctly summarizes the fundamental concept of fzf,</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>you can build much more sophisticated interactive workflows using fzf once you</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>learn its wide variety of features.</span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>To see the full list of options and features, see <span class="in">`man fzf`</span></span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>To see the latest additions, see <span class="co">[</span><span class="ot">CHANGELOG.md</span><span class="co">](CHANGELOG.md)</span></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>This document will guide you through some examples that will familiarize you</span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>with the advanced features of fzf.</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>Display modes</span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a>-------------</span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a><span class="fu">### `--height`</span></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a>fzf by default opens in fullscreen mode, but it's not always desirable.</span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>Oftentimes, you want to see the current context of the terminal while using</span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a>fzf. <span class="in">`--height`</span> is an option for opening fzf below the cursor in</span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>non-fullscreen mode so you can still see the previous commands and their</span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a>results above it.</span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40%</span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113379893-c184c680-93b5-11eb-9676-c7c0a2f01748.png)</span></span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a>You might also want to experiment with other layout options such as</span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a><span class="in">`--layout=reverse`</span>, <span class="in">`--info=inline`</span>, <span class="in">`--border`</span>, <span class="in">`--margin`</span>, etc.</span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse</span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline</span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline <span class="at">--border</span></span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline <span class="at">--border</span> <span class="at">--margin</span><span class="op">=</span>1</span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--height</span><span class="op">=</span>40% <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--info</span><span class="op">=</span>inline <span class="at">--border</span> <span class="at">--margin</span><span class="op">=</span>1 <span class="at">--padding</span><span class="op">=</span>1</span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113379932-dfeac200-93b5-11eb-9e28-df1a2ee71f90.png)</span></span>
<span id="cb32-95"><a href="#cb32-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-96"><a href="#cb32-96" aria-hidden="true" tabindex="-1"></a>*(See man page to see the full list of options)*</span>
<span id="cb32-97"><a href="#cb32-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-98"><a href="#cb32-98" aria-hidden="true" tabindex="-1"></a>But you definitely don't want to repeat `--height=40% --layout=reverse</span>
<span id="cb32-99"><a href="#cb32-99" aria-hidden="true" tabindex="-1"></a>--info=inline --border --margin=1 --padding=1` every time you use fzf. You</span>
<span id="cb32-100"><a href="#cb32-100" aria-hidden="true" tabindex="-1"></a>could write a wrapper script or shell alias, but there is an easier option.</span>
<span id="cb32-101"><a href="#cb32-101" aria-hidden="true" tabindex="-1"></a>Define <span class="in">`$FZF_DEFAULT_OPTS`</span> like so:</span>
<span id="cb32-102"><a href="#cb32-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-103"><a href="#cb32-103" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-104"><a href="#cb32-104" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">"--height=40% --layout=reverse --info=inline --border --margin=1 --padding=1"</span></span>
<span id="cb32-105"><a href="#cb32-105" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-106"><a href="#cb32-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-107"><a href="#cb32-107" aria-hidden="true" tabindex="-1"></a><span class="fu">### `--tmux`</span></span>
<span id="cb32-108"><a href="#cb32-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-109"><a href="#cb32-109" aria-hidden="true" tabindex="-1"></a>(Requires tmux 3.3 or later)</span>
<span id="cb32-110"><a href="#cb32-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-111"><a href="#cb32-111" aria-hidden="true" tabindex="-1"></a>If you're using tmux, you can open fzf in a tmux popup using <span class="in">`--tmux`</span> option.</span>
<span id="cb32-112"><a href="#cb32-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-113"><a href="#cb32-113" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-114"><a href="#cb32-114" aria-hidden="true" tabindex="-1"></a><span class="co"># Open fzf in a tmux popup at the center of the screen with 70% width and height</span></span>
<span id="cb32-115"><a href="#cb32-115" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> 70%</span>
<span id="cb32-116"><a href="#cb32-116" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-117"><a href="#cb32-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-118"><a href="#cb32-118" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://github.com/junegunn/fzf/assets/700826/9c365405-c700-49b2-8985-60d822ed4cff)</span></span>
<span id="cb32-119"><a href="#cb32-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-120"><a href="#cb32-120" aria-hidden="true" tabindex="-1"></a><span class="in">`--tmux`</span> option is silently ignored if you're not on tmux. So if you're trying</span>
<span id="cb32-121"><a href="#cb32-121" aria-hidden="true" tabindex="-1"></a>to avoid opening fzf in fullscreen, try specifying both <span class="in">`--height`</span> and <span class="in">`--tmux`</span>.</span>
<span id="cb32-122"><a href="#cb32-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-123"><a href="#cb32-123" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-124"><a href="#cb32-124" aria-hidden="true" tabindex="-1"></a><span class="co"># --tmux is specified later so it takes precedence over --height when on tmux.</span></span>
<span id="cb32-125"><a href="#cb32-125" aria-hidden="true" tabindex="-1"></a><span class="co"># If you're not on tmux, --tmux is ignored and --height is used instead.</span></span>
<span id="cb32-126"><a href="#cb32-126" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span>  <span class="at">--height</span> 70% <span class="at">--tmux</span> 70%</span>
<span id="cb32-127"><a href="#cb32-127" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-128"><a href="#cb32-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-129"><a href="#cb32-129" aria-hidden="true" tabindex="-1"></a>You can also specify the position, width, and height of the popup window in</span>
<span id="cb32-130"><a href="#cb32-130" aria-hidden="true" tabindex="-1"></a>the following format:</span>
<span id="cb32-131"><a href="#cb32-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-132"><a href="#cb32-132" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span><span class="in">`[center|top|bottom|left|right][,SIZE[%]][,SIZE[%][,border-native]]`</span></span>
<span id="cb32-133"><a href="#cb32-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-134"><a href="#cb32-134" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-135"><a href="#cb32-135" aria-hidden="true" tabindex="-1"></a><span class="co"># 100% width and 60% height</span></span>
<span id="cb32-136"><a href="#cb32-136" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> 100%,60% <span class="at">--border</span> horizontal</span>
<span id="cb32-137"><a href="#cb32-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-138"><a href="#cb32-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-139"><a href="#cb32-139" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://github.com/junegunn/fzf/assets/700826/f80d3514-d69f-42f2-a8de-a392a562bfcf)</span></span>
<span id="cb32-140"><a href="#cb32-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-141"><a href="#cb32-141" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-142"><a href="#cb32-142" aria-hidden="true" tabindex="-1"></a><span class="co"># On the right (50% width)</span></span>
<span id="cb32-143"><a href="#cb32-143" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> right</span>
<span id="cb32-144"><a href="#cb32-144" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-145"><a href="#cb32-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-146"><a href="#cb32-146" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://github.com/junegunn/fzf/assets/700826/4033ade4-7efa-421b-a3fb-a430d197098a)</span></span>
<span id="cb32-147"><a href="#cb32-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-148"><a href="#cb32-148" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-149"><a href="#cb32-149" aria-hidden="true" tabindex="-1"></a><span class="co"># On the left (40% width and 70% height)</span></span>
<span id="cb32-150"><a href="#cb32-150" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--tmux</span> left,40%,70%</span>
<span id="cb32-151"><a href="#cb32-151" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-152"><a href="#cb32-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-153"><a href="#cb32-153" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://github.com/junegunn/fzf/assets/700826/efe43881-2bf0-49ea-ab2e-1377f778cd52)</span></span>
<span id="cb32-154"><a href="#cb32-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-155"><a href="#cb32-155" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; </span><span class="co">[</span><span class="ot">!TIP</span><span class="co">]</span></span>
<span id="cb32-156"><a href="#cb32-156" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; You might also want to check out my tmux plugins which support this popup</span></span>
<span id="cb32-157"><a href="#cb32-157" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; window layout.</span></span>
<span id="cb32-158"><a href="#cb32-158" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb32-159"><a href="#cb32-159" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - https://github.com/junegunn/tmux-fzf-url</span></span>
<span id="cb32-160"><a href="#cb32-160" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - https://github.com/junegunn/tmux-fzf-maccy</span></span>
<span id="cb32-161"><a href="#cb32-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-162"><a href="#cb32-162" aria-hidden="true" tabindex="-1"></a>Dynamic reloading of the list</span>
<span id="cb32-163"><a href="#cb32-163" aria-hidden="true" tabindex="-1"></a>-----------------------------</span>
<span id="cb32-164"><a href="#cb32-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-165"><a href="#cb32-165" aria-hidden="true" tabindex="-1"></a>fzf can dynamically update the candidate list using an arbitrary program with</span>
<span id="cb32-166"><a href="#cb32-166" aria-hidden="true" tabindex="-1"></a><span class="in">`reload`</span> bindings (The design document for <span class="in">`reload`</span> can be found</span>
<span id="cb32-167"><a href="#cb32-167" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">here</span><span class="co">][reload]</span>).</span>
<span id="cb32-168"><a href="#cb32-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-169"><a href="#cb32-169" aria-hidden="true" tabindex="-1"></a><span class="ot">[reload]: https://github.com/junegunn/fzf/issues/1750</span></span>
<span id="cb32-170"><a href="#cb32-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-171"><a href="#cb32-171" aria-hidden="true" tabindex="-1"></a><span class="fu">### Updating the list of processes by pressing CTRL-R</span></span>
<span id="cb32-172"><a href="#cb32-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-173"><a href="#cb32-173" aria-hidden="true" tabindex="-1"></a>This example shows how you can set up a binding for dynamically updating the</span>
<span id="cb32-174"><a href="#cb32-174" aria-hidden="true" tabindex="-1"></a>list without restarting fzf.</span>
<span id="cb32-175"><a href="#cb32-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-176"><a href="#cb32-176" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-177"><a href="#cb32-177" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="fu">date</span><span class="kw">;</span> <span class="fu">ps</span> <span class="at">-ef</span><span class="kw">)</span> <span class="kw">|</span></span>
<span id="cb32-178"><a href="#cb32-178" aria-hidden="true" tabindex="-1"></a>  <span class="ex">fzf</span> <span class="at">--bind</span><span class="op">=</span><span class="st">'ctrl-r:reload(date; ps -ef)'</span> <span class="dt">\</span></span>
<span id="cb32-179"><a href="#cb32-179" aria-hidden="true" tabindex="-1"></a>      <span class="at">--header</span><span class="op">=</span><span class="st">$'Press CTRL-R to reload</span><span class="dt">\n\n</span><span class="st">'</span> <span class="at">--header-lines</span><span class="op">=</span>2 <span class="dt">\</span></span>
<span id="cb32-180"><a href="#cb32-180" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview</span><span class="op">=</span><span class="st">'echo {}'</span> <span class="at">--preview-window</span><span class="op">=</span>down,3,wrap <span class="dt">\</span></span>
<span id="cb32-181"><a href="#cb32-181" aria-hidden="true" tabindex="-1"></a>      <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--height</span><span class="op">=</span>80% <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'{print $2}'</span> <span class="kw">|</span> <span class="fu">xargs</span> kill <span class="at">-9</span></span>
<span id="cb32-182"><a href="#cb32-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-183"><a href="#cb32-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-184"><a href="#cb32-184" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113465047-200c7c00-946c-11eb-918c-268f37a900c8.png)</span></span>
<span id="cb32-185"><a href="#cb32-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-186"><a href="#cb32-186" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The initial command is <span class="in">`(date; ps -ef)`</span>. It prints the current date and</span>
<span id="cb32-187"><a href="#cb32-187" aria-hidden="true" tabindex="-1"></a>  time, and the list of the processes.</span>
<span id="cb32-188"><a href="#cb32-188" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>With <span class="in">`--header`</span> option, you can show any message as the fixed header.</span>
<span id="cb32-189"><a href="#cb32-189" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>To disallow selecting the first two lines (<span class="in">`date`</span> and <span class="in">`ps`</span> header), we use</span>
<span id="cb32-190"><a href="#cb32-190" aria-hidden="true" tabindex="-1"></a>  <span class="in">`--header-lines=2`</span> option.</span>
<span id="cb32-191"><a href="#cb32-191" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`--bind='ctrl-r:reload(date; ps -ef)'`</span> binds CTRL-R to <span class="in">`reload`</span> action that</span>
<span id="cb32-192"><a href="#cb32-192" aria-hidden="true" tabindex="-1"></a>  runs <span class="in">`date; ps -ef`</span>, so we can update the list of the processes by pressing</span>
<span id="cb32-193"><a href="#cb32-193" aria-hidden="true" tabindex="-1"></a>  CTRL-R.</span>
<span id="cb32-194"><a href="#cb32-194" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We use simple <span class="in">`echo {}`</span> preview option, so we can see the entire line on the</span>
<span id="cb32-195"><a href="#cb32-195" aria-hidden="true" tabindex="-1"></a>  preview window below even if it's too long</span>
<span id="cb32-196"><a href="#cb32-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-197"><a href="#cb32-197" aria-hidden="true" tabindex="-1"></a><span class="fu">### Toggling between data sources</span></span>
<span id="cb32-198"><a href="#cb32-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-199"><a href="#cb32-199" aria-hidden="true" tabindex="-1"></a>You're not limited to just one reload binding. Set up multiple bindings so</span>
<span id="cb32-200"><a href="#cb32-200" aria-hidden="true" tabindex="-1"></a>you can switch between data sources.</span>
<span id="cb32-201"><a href="#cb32-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-202"><a href="#cb32-202" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-203"><a href="#cb32-203" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> <span class="pp">*</span> <span class="kw">|</span> <span class="ex">fzf</span> <span class="at">--prompt</span> <span class="st">'All&gt; '</span> <span class="dt">\</span></span>
<span id="cb32-204"><a href="#cb32-204" aria-hidden="true" tabindex="-1"></a>             <span class="at">--header</span> <span class="st">'CTRL-D: Directories / CTRL-F: Files'</span> <span class="dt">\</span></span>
<span id="cb32-205"><a href="#cb32-205" aria-hidden="true" tabindex="-1"></a>             <span class="at">--bind</span> <span class="st">'ctrl-d:change-prompt(Directories&gt; )+reload(find * -type d)'</span> <span class="dt">\</span></span>
<span id="cb32-206"><a href="#cb32-206" aria-hidden="true" tabindex="-1"></a>             <span class="at">--bind</span> <span class="st">'ctrl-f:change-prompt(Files&gt; )+reload(find * -type f)'</span></span>
<span id="cb32-207"><a href="#cb32-207" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-208"><a href="#cb32-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-209"><a href="#cb32-209" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113465073-4af6d000-946c-11eb-858f-2372c0955f67.png)</span></span>
<span id="cb32-210"><a href="#cb32-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-211"><a href="#cb32-211" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113465072-46321c00-946c-11eb-9b6f-cda3951df579.png)</span></span>
<span id="cb32-212"><a href="#cb32-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-213"><a href="#cb32-213" aria-hidden="true" tabindex="-1"></a><span class="fu">### Toggling with a single key binding</span></span>
<span id="cb32-214"><a href="#cb32-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-215"><a href="#cb32-215" aria-hidden="true" tabindex="-1"></a>The above example uses two different key bindings to toggle between two modes,</span>
<span id="cb32-216"><a href="#cb32-216" aria-hidden="true" tabindex="-1"></a>but can we just use a single key binding?</span>
<span id="cb32-217"><a href="#cb32-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-218"><a href="#cb32-218" aria-hidden="true" tabindex="-1"></a>To make a key binding behave differently each time it is pressed, we need:</span>
<span id="cb32-219"><a href="#cb32-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-220"><a href="#cb32-220" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>a way to store the current state. i.e. "which mode are we in?"</span>
<span id="cb32-221"><a href="#cb32-221" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>and a way to dynamically perform different actions depending on the state.</span>
<span id="cb32-222"><a href="#cb32-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-223"><a href="#cb32-223" aria-hidden="true" tabindex="-1"></a>The following example shows how to 1. store the current mode in the prompt</span>
<span id="cb32-224"><a href="#cb32-224" aria-hidden="true" tabindex="-1"></a>string, 2. and use this information (<span class="in">`$FZF_PROMPT`</span>) to determine which</span>
<span id="cb32-225"><a href="#cb32-225" aria-hidden="true" tabindex="-1"></a>actions to perform using the <span class="in">`transform`</span> action.</span>
<span id="cb32-226"><a href="#cb32-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-227"><a href="#cb32-227" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-228"><a href="#cb32-228" aria-hidden="true" tabindex="-1"></a><span class="ex">fd</span> <span class="at">--type</span> file <span class="kw">|</span></span>
<span id="cb32-229"><a href="#cb32-229" aria-hidden="true" tabindex="-1"></a>  <span class="ex">fzf</span> <span class="at">--prompt</span> <span class="st">'Files&gt; '</span> <span class="dt">\</span></span>
<span id="cb32-230"><a href="#cb32-230" aria-hidden="true" tabindex="-1"></a>      <span class="at">--header</span> <span class="st">'CTRL-T: Switch between Files/Directories'</span> <span class="dt">\</span></span>
<span id="cb32-231"><a href="#cb32-231" aria-hidden="true" tabindex="-1"></a>      <span class="at">--bind</span> <span class="st">'ctrl-t:transform:[[ ! $FZF_PROMPT =~ Files ]] &amp;&amp;</span></span>
<span id="cb32-232"><a href="#cb32-232" aria-hidden="true" tabindex="-1"></a><span class="st">              echo "change-prompt(Files&gt; )+reload(fd --type file)" ||</span></span>
<span id="cb32-233"><a href="#cb32-233" aria-hidden="true" tabindex="-1"></a><span class="st">              echo "change-prompt(Directories&gt; )+reload(fd --type directory)"'</span> <span class="dt">\</span></span>
<span id="cb32-234"><a href="#cb32-234" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview</span> <span class="st">'[[ $FZF_PROMPT =~ Files ]] &amp;&amp; bat --color=always {} || tree -C {}'</span></span>
<span id="cb32-235"><a href="#cb32-235" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-236"><a href="#cb32-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-237"><a href="#cb32-237" aria-hidden="true" tabindex="-1"></a>Ripgrep integration</span>
<span id="cb32-238"><a href="#cb32-238" aria-hidden="true" tabindex="-1"></a>-------------------</span>
<span id="cb32-239"><a href="#cb32-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-240"><a href="#cb32-240" aria-hidden="true" tabindex="-1"></a><span class="fu">### Using fzf as the secondary filter</span></span>
<span id="cb32-241"><a href="#cb32-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-242"><a href="#cb32-242" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Requires <span class="co">[</span><span class="ot">bat</span><span class="co">][bat]</span></span>
<span id="cb32-243"><a href="#cb32-243" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Requires <span class="co">[</span><span class="ot">Ripgrep</span><span class="co">][rg]</span></span>
<span id="cb32-244"><a href="#cb32-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-245"><a href="#cb32-245" aria-hidden="true" tabindex="-1"></a><span class="ot">[bat]: https://github.com/sharkdp/bat</span></span>
<span id="cb32-246"><a href="#cb32-246" aria-hidden="true" tabindex="-1"></a><span class="ot">[rg]: https://github.com/BurntSushi/ripgrep</span></span>
<span id="cb32-247"><a href="#cb32-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-248"><a href="#cb32-248" aria-hidden="true" tabindex="-1"></a>fzf is pretty fast for filtering a list that you will rarely have to think</span>
<span id="cb32-249"><a href="#cb32-249" aria-hidden="true" tabindex="-1"></a>about its performance. But it is not the right tool for searching for text</span>
<span id="cb32-250"><a href="#cb32-250" aria-hidden="true" tabindex="-1"></a>inside many large files, and in that case you should definitely use something</span>
<span id="cb32-251"><a href="#cb32-251" aria-hidden="true" tabindex="-1"></a>like <span class="co">[</span><span class="ot">Ripgrep</span><span class="co">][rg]</span>.</span>
<span id="cb32-252"><a href="#cb32-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-253"><a href="#cb32-253" aria-hidden="true" tabindex="-1"></a>In the next example, Ripgrep is the primary filter that searches for the given</span>
<span id="cb32-254"><a href="#cb32-254" aria-hidden="true" tabindex="-1"></a>text in files, and fzf is used as the secondary fuzzy filter that adds</span>
<span id="cb32-255"><a href="#cb32-255" aria-hidden="true" tabindex="-1"></a>interactivity to the workflow. And we use <span class="co">[</span><span class="ot">bat</span><span class="co">][bat]</span> to show the matching line in</span>
<span id="cb32-256"><a href="#cb32-256" aria-hidden="true" tabindex="-1"></a>the preview window.</span>
<span id="cb32-257"><a href="#cb32-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-258"><a href="#cb32-258" aria-hidden="true" tabindex="-1"></a>This is a bash script and it will not run as expected on other non-compliant</span>
<span id="cb32-259"><a href="#cb32-259" aria-hidden="true" tabindex="-1"></a>shells. To avoid the compatibility issue, let's save this snippet as a script</span>
<span id="cb32-260"><a href="#cb32-260" aria-hidden="true" tabindex="-1"></a>file called <span class="in">`rfv`</span>.</span>
<span id="cb32-261"><a href="#cb32-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-262"><a href="#cb32-262" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb32-263"><a href="#cb32-263" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb32-264"><a href="#cb32-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-265"><a href="#cb32-265" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Search for text in files using Ripgrep</span></span>
<span id="cb32-266"><a href="#cb32-266" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Interactively narrow down the list using fzf</span></span>
<span id="cb32-267"><a href="#cb32-267" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Open the file in Vim</span></span>
<span id="cb32-268"><a href="#cb32-268" aria-hidden="true" tabindex="-1"></a><span class="ex">rg</span> <span class="at">--color</span><span class="op">=</span>always <span class="at">--line-number</span> <span class="at">--no-heading</span> <span class="at">--smart-case</span> <span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span> <span class="kw">|</span></span>
<span id="cb32-269"><a href="#cb32-269" aria-hidden="true" tabindex="-1"></a>  <span class="ex">fzf</span> <span class="at">--ansi</span> <span class="dt">\</span></span>
<span id="cb32-270"><a href="#cb32-270" aria-hidden="true" tabindex="-1"></a>      <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb32-271"><a href="#cb32-271" aria-hidden="true" tabindex="-1"></a>      <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb32-272"><a href="#cb32-272" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb32-273"><a href="#cb32-273" aria-hidden="true" tabindex="-1"></a>      <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb32-274"><a href="#cb32-274" aria-hidden="true" tabindex="-1"></a>      <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span>
<span id="cb32-275"><a href="#cb32-275" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-276"><a href="#cb32-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-277"><a href="#cb32-277" aria-hidden="true" tabindex="-1"></a>And run it with an initial query string.</span>
<span id="cb32-278"><a href="#cb32-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-279"><a href="#cb32-279" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-280"><a href="#cb32-280" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the script executable</span></span>
<span id="cb32-281"><a href="#cb32-281" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x rfv</span>
<span id="cb32-282"><a href="#cb32-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-283"><a href="#cb32-283" aria-hidden="true" tabindex="-1"></a><span class="co"># Run it with the initial query "algo"</span></span>
<span id="cb32-284"><a href="#cb32-284" aria-hidden="true" tabindex="-1"></a><span class="ex">./rfv</span> algo</span>
<span id="cb32-285"><a href="#cb32-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-286"><a href="#cb32-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-287"><a href="#cb32-287" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Ripgrep will perform the initial search and list all the lines that contain</span></span>
<span id="cb32-288"><a href="#cb32-288" aria-hidden="true" tabindex="-1"></a><span class="in">`algo`</span><span class="at">. Then we further narrow down the list on fzf.</span></span>
<span id="cb32-289"><a href="#cb32-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-290"><a href="#cb32-290" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113683873-a42a6200-96ff-11eb-9666-26ce4091b0e4.png)</span></span>
<span id="cb32-291"><a href="#cb32-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-292"><a href="#cb32-292" aria-hidden="true" tabindex="-1"></a>I know it's a lot to digest, let's try to break down the code.</span>
<span id="cb32-293"><a href="#cb32-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-294"><a href="#cb32-294" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ripgrep prints the matching lines in the following format</span>
<span id="cb32-295"><a href="#cb32-295" aria-hidden="true" tabindex="-1"></a>  <span class="in">```</span></span>
<span id="cb32-296"><a href="#cb32-296" aria-hidden="true" tabindex="-1"></a><span class="in">  man/man1/fzf.1:54:.BI "--algo=" TYPE</span></span>
<span id="cb32-297"><a href="#cb32-297" aria-hidden="true" tabindex="-1"></a><span class="in">  man/man1/fzf.1:55:Fuzzy matching algorithm (default: v2)</span></span>
<span id="cb32-298"><a href="#cb32-298" aria-hidden="true" tabindex="-1"></a><span class="in">  man/man1/fzf.1:58:.BR v2 "     Optimal scoring algorithm (quality)"</span></span>
<span id="cb32-299"><a href="#cb32-299" aria-hidden="true" tabindex="-1"></a><span class="in">  src/pattern_test.go:7:  "github.com/junegunn/fzf/src/algo"</span></span>
<span id="cb32-300"><a href="#cb32-300" aria-hidden="true" tabindex="-1"></a><span class="in">  ```</span></span>
<span id="cb32-301"><a href="#cb32-301" aria-hidden="true" tabindex="-1"></a>  The first token delimited by <span class="in">`:`</span> is the file path, and the second token is</span>
<span id="cb32-302"><a href="#cb32-302" aria-hidden="true" tabindex="-1"></a>  the line number of the matching line. They respectively correspond to <span class="in">`{1}`</span></span>
<span id="cb32-303"><a href="#cb32-303" aria-hidden="true" tabindex="-1"></a>  and <span class="in">`{2}`</span> in the preview command.</span>
<span id="cb32-304"><a href="#cb32-304" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`--preview 'bat --color=always {1} --highlight-line {2}'`</span></span>
<span id="cb32-305"><a href="#cb32-305" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>As we run <span class="in">`rg`</span> with <span class="in">`--color=always`</span> option, we should tell fzf to parse</span>
<span id="cb32-306"><a href="#cb32-306" aria-hidden="true" tabindex="-1"></a>  ANSI color codes in the input by setting <span class="in">`--ansi`</span>.</span>
<span id="cb32-307"><a href="#cb32-307" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We customize how fzf colors various text elements using <span class="in">`--color`</span> option.</span>
<span id="cb32-308"><a href="#cb32-308" aria-hidden="true" tabindex="-1"></a>  <span class="in">`-1`</span> tells fzf to keep the original color from the input. See <span class="in">`man fzf`</span> for</span>
<span id="cb32-309"><a href="#cb32-309" aria-hidden="true" tabindex="-1"></a>  available color options.</span>
<span id="cb32-310"><a href="#cb32-310" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The value of <span class="in">`--preview-window`</span> option consists of 5 components delimited</span>
<span id="cb32-311"><a href="#cb32-311" aria-hidden="true" tabindex="-1"></a>  by <span class="in">`,`</span></span>
<span id="cb32-312"><a href="#cb32-312" aria-hidden="true" tabindex="-1"></a><span class="ss">    1. </span><span class="in">`up`</span> — Position of the preview window</span>
<span id="cb32-313"><a href="#cb32-313" aria-hidden="true" tabindex="-1"></a><span class="ss">    1. </span><span class="in">`60%`</span> — Size of the preview window</span>
<span id="cb32-314"><a href="#cb32-314" aria-hidden="true" tabindex="-1"></a><span class="ss">    1. </span><span class="in">`border-bottom`</span> — Preview window border only on the bottom side</span>
<span id="cb32-315"><a href="#cb32-315" aria-hidden="true" tabindex="-1"></a><span class="ss">    1. </span><span class="in">`+{2}+3/3`</span> — Scroll offset of the preview contents</span>
<span id="cb32-316"><a href="#cb32-316" aria-hidden="true" tabindex="-1"></a><span class="ss">    1. </span><span class="in">`~3`</span> — Fixed header</span>
<span id="cb32-317"><a href="#cb32-317" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Let's break down the latter two. We want to display the bat output in the</span>
<span id="cb32-318"><a href="#cb32-318" aria-hidden="true" tabindex="-1"></a>  preview window with a certain scroll offset so that the matching line is</span>
<span id="cb32-319"><a href="#cb32-319" aria-hidden="true" tabindex="-1"></a>  positioned near the center of the preview window.</span>
<span id="cb32-320"><a href="#cb32-320" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`+{2}`</span> — The base offset is extracted from the second token</span>
<span id="cb32-321"><a href="#cb32-321" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`+3`</span> — We add 3 lines to the base offset to compensate for the header</span>
<span id="cb32-322"><a href="#cb32-322" aria-hidden="true" tabindex="-1"></a>      part of <span class="in">`bat`</span> output</span>
<span id="cb32-323"><a href="#cb32-323" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>```</span>
<span id="cb32-324"><a href="#cb32-324" aria-hidden="true" tabindex="-1"></a>          ───────┬──────────────────────────────────────────────────────────</span>
<span id="cb32-325"><a href="#cb32-325" aria-hidden="true" tabindex="-1"></a>                 │ File: CHANGELOG.md</span>
<span id="cb32-326"><a href="#cb32-326" aria-hidden="true" tabindex="-1"></a>          ───────┼──────────────────────────────────────────────────────────</span>
<span id="cb32-327"><a href="#cb32-327" aria-hidden="true" tabindex="-1"></a>             1   │ CHANGELOG</span>
<span id="cb32-328"><a href="#cb32-328" aria-hidden="true" tabindex="-1"></a>             2   │ =========</span>
<span id="cb32-329"><a href="#cb32-329" aria-hidden="true" tabindex="-1"></a>             3   │</span>
<span id="cb32-330"><a href="#cb32-330" aria-hidden="true" tabindex="-1"></a>             4   │ 0.26.0</span>
<span id="cb32-331"><a href="#cb32-331" aria-hidden="true" tabindex="-1"></a>             5   │ ------</span>
<span id="cb32-332"><a href="#cb32-332" aria-hidden="true" tabindex="-1"></a>          <span class="in">```</span></span>
<span id="cb32-333"><a href="#cb32-333" aria-hidden="true" tabindex="-1"></a><span class="in">    - `/3` adjusts the offset so that the matching line is shown at a third</span></span>
<span id="cb32-334"><a href="#cb32-334" aria-hidden="true" tabindex="-1"></a><span class="in">      position in the window</span></span>
<span id="cb32-335"><a href="#cb32-335" aria-hidden="true" tabindex="-1"></a><span class="in">    - `~3` makes the top three lines fixed header so that they are always</span></span>
<span id="cb32-336"><a href="#cb32-336" aria-hidden="true" tabindex="-1"></a><span class="in">      visible regardless of the scroll offset</span></span>
<span id="cb32-337"><a href="#cb32-337" aria-hidden="true" tabindex="-1"></a><span class="in">- Instead of using shell script to process the final output of fzf, we use</span></span>
<span id="cb32-338"><a href="#cb32-338" aria-hidden="true" tabindex="-1"></a><span class="in">  `become(...)` action which was added in [fzf 0.38.0][0.38.0] to turn fzf</span></span>
<span id="cb32-339"><a href="#cb32-339" aria-hidden="true" tabindex="-1"></a><span class="in">  into a new process that opens the file with `vim` (`vim {1}`) and move the</span></span>
<span id="cb32-340"><a href="#cb32-340" aria-hidden="true" tabindex="-1"></a><span class="in">  cursor to the line (`+{2}`).</span></span>
<span id="cb32-341"><a href="#cb32-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-342"><a href="#cb32-342" aria-hidden="true" tabindex="-1"></a><span class="in">[0.38.0]: https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0380</span></span>
<span id="cb32-343"><a href="#cb32-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-344"><a href="#cb32-344" aria-hidden="true" tabindex="-1"></a><span class="in">### Using fzf as interactive Ripgrep launcher</span></span>
<span id="cb32-345"><a href="#cb32-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-346"><a href="#cb32-346" aria-hidden="true" tabindex="-1"></a><span class="in">We have learned that we can bind `reload` action to a key (e.g.</span></span>
<span id="cb32-347"><a href="#cb32-347" aria-hidden="true" tabindex="-1"></a><span class="in">`--bind=ctrl-r:execute(ps -ef)`). In the next example, we are going to **bind</span></span>
<span id="cb32-348"><a href="#cb32-348" aria-hidden="true" tabindex="-1"></a><span class="in">`reload` action to `change` event** so that whenever the user *changes* the</span></span>
<span id="cb32-349"><a href="#cb32-349" aria-hidden="true" tabindex="-1"></a><span class="in">query string on fzf, `reload` action is triggered.</span></span>
<span id="cb32-350"><a href="#cb32-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-351"><a href="#cb32-351" aria-hidden="true" tabindex="-1"></a><span class="in">Here is a variation of the above `rfv` script. fzf will restart Ripgrep every</span></span>
<span id="cb32-352"><a href="#cb32-352" aria-hidden="true" tabindex="-1"></a><span class="in">time the user updates the query string on fzf. Searching and filtering is</span></span>
<span id="cb32-353"><a href="#cb32-353" aria-hidden="true" tabindex="-1"></a><span class="in">completely done by Ripgrep, and fzf merely provides the interactive interface.</span></span>
<span id="cb32-354"><a href="#cb32-354" aria-hidden="true" tabindex="-1"></a><span class="in">So we lose the "fuzziness", but the performance will be better on larger</span></span>
<span id="cb32-355"><a href="#cb32-355" aria-hidden="true" tabindex="-1"></a><span class="in">projects, and it will free up memory as you narrow down the results.</span></span>
<span id="cb32-356"><a href="#cb32-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-357"><a href="#cb32-357" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb32-358"><a href="#cb32-358" aria-hidden="true" tabindex="-1"></a><span class="in">#!/usr/bin/env bash</span></span>
<span id="cb32-359"><a href="#cb32-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-360"><a href="#cb32-360" aria-hidden="true" tabindex="-1"></a><span class="in"># 1. Search for text in files using Ripgrep</span></span>
<span id="cb32-361"><a href="#cb32-361" aria-hidden="true" tabindex="-1"></a><span class="in"># 2. Interactively restart Ripgrep with reload action</span></span>
<span id="cb32-362"><a href="#cb32-362" aria-hidden="true" tabindex="-1"></a><span class="in"># 3. Open the file in Vim</span></span>
<span id="cb32-363"><a href="#cb32-363" aria-hidden="true" tabindex="-1"></a><span class="in">RG_PREFIX="rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb32-364"><a href="#cb32-364" aria-hidden="true" tabindex="-1"></a><span class="in">INITIAL_QUERY="${*:-}"</span></span>
<span id="cb32-365"><a href="#cb32-365" aria-hidden="true" tabindex="-1"></a><span class="in">fzf --ansi --disabled --query "$INITIAL_QUERY" \</span></span>
<span id="cb32-366"><a href="#cb32-366" aria-hidden="true" tabindex="-1"></a><span class="in">    --bind "start:reload:$RG_PREFIX {q}" \</span></span>
<span id="cb32-367"><a href="#cb32-367" aria-hidden="true" tabindex="-1"></a><span class="in">    --bind "change:reload:sleep 0.1; $RG_PREFIX {q} || true" \</span></span>
<span id="cb32-368"><a href="#cb32-368" aria-hidden="true" tabindex="-1"></a><span class="in">    --delimiter : \</span></span>
<span id="cb32-369"><a href="#cb32-369" aria-hidden="true" tabindex="-1"></a><span class="in">    --preview 'bat --color=always {1} --highlight-line {2}' \</span></span>
<span id="cb32-370"><a href="#cb32-370" aria-hidden="true" tabindex="-1"></a><span class="in">    --preview-window 'up,60%,border-bottom,+{2}+3/3,~3' \</span></span>
<span id="cb32-371"><a href="#cb32-371" aria-hidden="true" tabindex="-1"></a><span class="in">    --bind 'enter:become(vim {1} +{2})'</span></span>
<span id="cb32-372"><a href="#cb32-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-373"><a href="#cb32-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-374"><a href="#cb32-374" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113684212-f9ff0a00-96ff-11eb-8737-7bb571d320cc.png)</span></span>
<span id="cb32-375"><a href="#cb32-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-376"><a href="#cb32-376" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Instead of starting fzf in the usual <span class="in">`rg ... | fzf`</span> form, we make it start</span>
<span id="cb32-377"><a href="#cb32-377" aria-hidden="true" tabindex="-1"></a>  the initial Ripgrep process immediately via <span class="in">`start:reload`</span> binding for the</span>
<span id="cb32-378"><a href="#cb32-378" aria-hidden="true" tabindex="-1"></a>  consistency of the code.</span>
<span id="cb32-379"><a href="#cb32-379" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Filtering is no longer a responsibility of fzf; hence <span class="in">`--disabled`</span></span>
<span id="cb32-380"><a href="#cb32-380" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`{q}`</span> in the reload command evaluates to the query string on fzf prompt.</span>
<span id="cb32-381"><a href="#cb32-381" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`sleep 0.1`</span> in the reload command is for "debouncing". This small delay will</span>
<span id="cb32-382"><a href="#cb32-382" aria-hidden="true" tabindex="-1"></a>  reduce the number of intermediate Ripgrep processes while we're typing in</span>
<span id="cb32-383"><a href="#cb32-383" aria-hidden="true" tabindex="-1"></a>  a query.</span>
<span id="cb32-384"><a href="#cb32-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-385"><a href="#cb32-385" aria-hidden="true" tabindex="-1"></a><span class="fu">### Switching to fzf-only search mode</span></span>
<span id="cb32-386"><a href="#cb32-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-387"><a href="#cb32-387" aria-hidden="true" tabindex="-1"></a>In the previous example, we lost fuzzy matching capability as we completely</span>
<span id="cb32-388"><a href="#cb32-388" aria-hidden="true" tabindex="-1"></a>delegated search functionality to Ripgrep. But we can dynamically switch to</span>
<span id="cb32-389"><a href="#cb32-389" aria-hidden="true" tabindex="-1"></a>fzf-only search mode by *"unbinding"* <span class="in">`reload`</span> action from <span class="in">`change`</span> event.</span>
<span id="cb32-390"><a href="#cb32-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-391"><a href="#cb32-391" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-392"><a href="#cb32-392" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb32-393"><a href="#cb32-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-394"><a href="#cb32-394" aria-hidden="true" tabindex="-1"></a><span class="co"># Two-phase filtering with Ripgrep and fzf</span></span>
<span id="cb32-395"><a href="#cb32-395" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb32-396"><a href="#cb32-396" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Search for text in files using Ripgrep</span></span>
<span id="cb32-397"><a href="#cb32-397" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Interactively restart Ripgrep with reload action</span></span>
<span id="cb32-398"><a href="#cb32-398" aria-hidden="true" tabindex="-1"></a><span class="co">#    * Press alt-enter to switch to fzf-only filtering</span></span>
<span id="cb32-399"><a href="#cb32-399" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Open the file in Vim</span></span>
<span id="cb32-400"><a href="#cb32-400" aria-hidden="true" tabindex="-1"></a><span class="va">RG_PREFIX</span><span class="op">=</span><span class="st">"rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb32-401"><a href="#cb32-401" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb32-402"><a href="#cb32-402" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb32-403"><a href="#cb32-403" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start:reload:</span><span class="va">$RG_PREFIX</span><span class="st"> {q}"</span> <span class="dt">\</span></span>
<span id="cb32-404"><a href="#cb32-404" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"change:reload:sleep 0.1; </span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true"</span> <span class="dt">\</span></span>
<span id="cb32-405"><a href="#cb32-405" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"alt-enter:unbind(change,alt-enter)+change-prompt(2. fzf&gt; )+enable-search+clear-query"</span> <span class="dt">\</span></span>
<span id="cb32-406"><a href="#cb32-406" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb32-407"><a href="#cb32-407" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">'1. ripgrep&gt; '</span> <span class="dt">\</span></span>
<span id="cb32-408"><a href="#cb32-408" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb32-409"><a href="#cb32-409" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb32-410"><a href="#cb32-410" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb32-411"><a href="#cb32-411" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span>
<span id="cb32-412"><a href="#cb32-412" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-413"><a href="#cb32-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-414"><a href="#cb32-414" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Phase 1. Filtering with Ripgrep</span>
<span id="cb32-415"><a href="#cb32-415" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/119213880-735e8a80-bafd-11eb-8493-123e4be24fbc.png)</span></span>
<span id="cb32-416"><a href="#cb32-416" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Phase 2. Filtering with fzf</span>
<span id="cb32-417"><a href="#cb32-417" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/119213887-7e191f80-bafd-11eb-98c9-71a1af9d7aab.png)</span></span>
<span id="cb32-418"><a href="#cb32-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-419"><a href="#cb32-419" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We added <span class="in">`--prompt`</span> option to show that fzf is initially running in "Ripgrep</span>
<span id="cb32-420"><a href="#cb32-420" aria-hidden="true" tabindex="-1"></a>  launcher mode".</span>
<span id="cb32-421"><a href="#cb32-421" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We added <span class="in">`alt-enter`</span> binding that</span>
<span id="cb32-422"><a href="#cb32-422" aria-hidden="true" tabindex="-1"></a><span class="ss">    1. </span>unbinds <span class="in">`change`</span> event, so Ripgrep is no longer restarted on key press</span>
<span id="cb32-423"><a href="#cb32-423" aria-hidden="true" tabindex="-1"></a><span class="ss">    2. </span>changes the prompt to <span class="in">`2. fzf&gt;`</span></span>
<span id="cb32-424"><a href="#cb32-424" aria-hidden="true" tabindex="-1"></a><span class="ss">    3. </span>enables search functionality of fzf</span>
<span id="cb32-425"><a href="#cb32-425" aria-hidden="true" tabindex="-1"></a><span class="ss">    4. </span>clears the current query string that was used to start Ripgrep process</span>
<span id="cb32-426"><a href="#cb32-426" aria-hidden="true" tabindex="-1"></a><span class="ss">    5. </span>and unbinds <span class="in">`alt-enter`</span> itself as this is a one-off event</span>
<span id="cb32-427"><a href="#cb32-427" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We reverted <span class="in">`--color`</span> option for customizing how the matching chunks are</span>
<span id="cb32-428"><a href="#cb32-428" aria-hidden="true" tabindex="-1"></a>  displayed in the second phase</span>
<span id="cb32-429"><a href="#cb32-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-430"><a href="#cb32-430" aria-hidden="true" tabindex="-1"></a><span class="fu">### Switching between Ripgrep mode and fzf mode</span></span>
<span id="cb32-431"><a href="#cb32-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-432"><a href="#cb32-432" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">fzf 0.30.0</span><span class="co">][0.30.0]</span> added <span class="in">`rebind`</span> action so we can "rebind" the bindings</span>
<span id="cb32-433"><a href="#cb32-433" aria-hidden="true" tabindex="-1"></a>that were previously "unbound" via <span class="in">`unbind`</span>.</span>
<span id="cb32-434"><a href="#cb32-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-435"><a href="#cb32-435" aria-hidden="true" tabindex="-1"></a>This is an improved version of the previous example that allows us to switch</span>
<span id="cb32-436"><a href="#cb32-436" aria-hidden="true" tabindex="-1"></a>between Ripgrep launcher mode and fzf-only filtering mode via CTRL-R and</span>
<span id="cb32-437"><a href="#cb32-437" aria-hidden="true" tabindex="-1"></a>CTRL-F.</span>
<span id="cb32-438"><a href="#cb32-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-439"><a href="#cb32-439" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-440"><a href="#cb32-440" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb32-441"><a href="#cb32-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-442"><a href="#cb32-442" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch between Ripgrep launcher mode (CTRL-R) and fzf filtering mode (CTRL-F)</span></span>
<span id="cb32-443"><a href="#cb32-443" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-f</span> /tmp/rg-fzf-<span class="dt">{r</span><span class="op">,</span><span class="dt">f}</span></span>
<span id="cb32-444"><a href="#cb32-444" aria-hidden="true" tabindex="-1"></a><span class="va">RG_PREFIX</span><span class="op">=</span><span class="st">"rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb32-445"><a href="#cb32-445" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb32-446"><a href="#cb32-446" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb32-447"><a href="#cb32-447" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start:reload(</span><span class="va">$RG_PREFIX</span><span class="st"> {q})+unbind(ctrl-r)"</span> <span class="dt">\</span></span>
<span id="cb32-448"><a href="#cb32-448" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"change:reload:sleep 0.1; </span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true"</span> <span class="dt">\</span></span>
<span id="cb32-449"><a href="#cb32-449" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"ctrl-f:unbind(change,ctrl-f)+change-prompt(2. fzf&gt; )+enable-search+rebind(ctrl-r)+transform-query(echo {q} &gt; /tmp/rg-fzf-r; cat /tmp/rg-fzf-f)"</span> <span class="dt">\</span></span>
<span id="cb32-450"><a href="#cb32-450" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"ctrl-r:unbind(ctrl-r)+change-prompt(1. ripgrep&gt; )+disable-search+reload(</span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true)+rebind(change,ctrl-f)+transform-query(echo {q} &gt; /tmp/rg-fzf-f; cat /tmp/rg-fzf-r)"</span> <span class="dt">\</span></span>
<span id="cb32-451"><a href="#cb32-451" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb32-452"><a href="#cb32-452" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">'1. ripgrep&gt; '</span> <span class="dt">\</span></span>
<span id="cb32-453"><a href="#cb32-453" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb32-454"><a href="#cb32-454" aria-hidden="true" tabindex="-1"></a>    <span class="at">--header</span> <span class="st">'╱ CTRL-R (ripgrep mode) ╱ CTRL-F (fzf mode) ╱'</span> <span class="dt">\</span></span>
<span id="cb32-455"><a href="#cb32-455" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb32-456"><a href="#cb32-456" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb32-457"><a href="#cb32-457" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span>
<span id="cb32-458"><a href="#cb32-458" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-459"><a href="#cb32-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-460"><a href="#cb32-460" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>To restore the query string when switching between modes, we store the</span>
<span id="cb32-461"><a href="#cb32-461" aria-hidden="true" tabindex="-1"></a>  current query in <span class="in">`/tmp/rg-fzf-{r,f}`</span> files and restore the query using</span>
<span id="cb32-462"><a href="#cb32-462" aria-hidden="true" tabindex="-1"></a>  <span class="in">`transform-query`</span> action which was added in <span class="co">[</span><span class="ot">fzf 0.36.0</span><span class="co">][0.36.0]</span>.</span>
<span id="cb32-463"><a href="#cb32-463" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Also note that we unbind <span class="in">`ctrl-r`</span> binding on <span class="in">`start`</span> event which is</span>
<span id="cb32-464"><a href="#cb32-464" aria-hidden="true" tabindex="-1"></a>  triggered once when fzf starts.</span>
<span id="cb32-465"><a href="#cb32-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-466"><a href="#cb32-466" aria-hidden="true" tabindex="-1"></a><span class="ot">[0.30.0]: https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0300</span></span>
<span id="cb32-467"><a href="#cb32-467" aria-hidden="true" tabindex="-1"></a><span class="ot">[0.36.0]: https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0360</span></span>
<span id="cb32-468"><a href="#cb32-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-469"><a href="#cb32-469" aria-hidden="true" tabindex="-1"></a><span class="fu">### Switching between Ripgrep mode and fzf mode using a single key binding</span></span>
<span id="cb32-470"><a href="#cb32-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-471"><a href="#cb32-471" aria-hidden="true" tabindex="-1"></a>In contrast to the previous version, we use just one hotkey to toggle between</span>
<span id="cb32-472"><a href="#cb32-472" aria-hidden="true" tabindex="-1"></a>ripgrep and fzf mode. This is achieved by using the <span class="in">`$FZF_PROMPT`</span> as a state</span>
<span id="cb32-473"><a href="#cb32-473" aria-hidden="true" tabindex="-1"></a>within the <span class="in">`transform`</span> action, a feature introduced in <span class="co">[</span><span class="ot">fzf 0.45.0</span><span class="co">][0.45.0]</span>. A</span>
<span id="cb32-474"><a href="#cb32-474" aria-hidden="true" tabindex="-1"></a>more detailed explanation of this feature can be found in a previous section -</span>
<span id="cb32-475"><a href="#cb32-475" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Toggling with a single keybinding</span><span class="co">](#toggling-with-a-single-key-binding)</span>.</span>
<span id="cb32-476"><a href="#cb32-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-477"><a href="#cb32-477" aria-hidden="true" tabindex="-1"></a><span class="ot">[0.45.0]: https://github.com/junegunn/fzf/blob/master/CHANGELOG.md#0450</span></span>
<span id="cb32-478"><a href="#cb32-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-479"><a href="#cb32-479" aria-hidden="true" tabindex="-1"></a>When using the <span class="in">`transform`</span> action, the placeholder (<span class="in">`\{q}`</span>) should be escaped to</span>
<span id="cb32-480"><a href="#cb32-480" aria-hidden="true" tabindex="-1"></a>prevent immediate evaluation.</span>
<span id="cb32-481"><a href="#cb32-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-482"><a href="#cb32-482" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-483"><a href="#cb32-483" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb32-484"><a href="#cb32-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-485"><a href="#cb32-485" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch between Ripgrep mode and fzf filtering mode (CTRL-T)</span></span>
<span id="cb32-486"><a href="#cb32-486" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-f</span> /tmp/rg-fzf-<span class="dt">{r</span><span class="op">,</span><span class="dt">f}</span></span>
<span id="cb32-487"><a href="#cb32-487" aria-hidden="true" tabindex="-1"></a><span class="va">RG_PREFIX</span><span class="op">=</span><span class="st">"rg --column --line-number --no-heading --color=always --smart-case "</span></span>
<span id="cb32-488"><a href="#cb32-488" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb32-489"><a href="#cb32-489" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb32-490"><a href="#cb32-490" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start:reload:</span><span class="va">$RG_PREFIX</span><span class="st"> {q}"</span> <span class="dt">\</span></span>
<span id="cb32-491"><a href="#cb32-491" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"change:reload:sleep 0.1; </span><span class="va">$RG_PREFIX</span><span class="st"> {q} || true"</span> <span class="dt">\</span></span>
<span id="cb32-492"><a href="#cb32-492" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'ctrl-t:transform:[[ ! $FZF_PROMPT =~ ripgrep ]] &amp;&amp;</span></span>
<span id="cb32-493"><a href="#cb32-493" aria-hidden="true" tabindex="-1"></a><span class="st">      echo "rebind(change)+change-prompt(1. ripgrep&gt; )+disable-search+transform-query:echo \{q} &gt; /tmp/rg-fzf-f; cat /tmp/rg-fzf-r" ||</span></span>
<span id="cb32-494"><a href="#cb32-494" aria-hidden="true" tabindex="-1"></a><span class="st">      echo "unbind(change)+change-prompt(2. fzf&gt; )+enable-search+transform-query:echo \{q} &gt; /tmp/rg-fzf-r; cat /tmp/rg-fzf-f"'</span> <span class="dt">\</span></span>
<span id="cb32-495"><a href="#cb32-495" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb32-496"><a href="#cb32-496" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">'1. ripgrep&gt; '</span> <span class="dt">\</span></span>
<span id="cb32-497"><a href="#cb32-497" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb32-498"><a href="#cb32-498" aria-hidden="true" tabindex="-1"></a>    <span class="at">--header</span> <span class="st">'CTRL-T: Switch between ripgrep/fzf'</span> <span class="dt">\</span></span>
<span id="cb32-499"><a href="#cb32-499" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb32-500"><a href="#cb32-500" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-bottom,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb32-501"><a href="#cb32-501" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span>
<span id="cb32-502"><a href="#cb32-502" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-503"><a href="#cb32-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-504"><a href="#cb32-504" aria-hidden="true" tabindex="-1"></a><span class="fu">### Controlling Ripgrep search and fzf search simultaneously</span></span>
<span id="cb32-505"><a href="#cb32-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-506"><a href="#cb32-506" aria-hidden="true" tabindex="-1"></a><span class="in">`search`</span> and <span class="in">`transform-search`</span> action allow you to trigger an fzf search with</span>
<span id="cb32-507"><a href="#cb32-507" aria-hidden="true" tabindex="-1"></a>an arbitrary query string. This frees fzf from strictly following the prompt</span>
<span id="cb32-508"><a href="#cb32-508" aria-hidden="true" tabindex="-1"></a>input, enabling custom search syntax.</span>
<span id="cb32-509"><a href="#cb32-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-510"><a href="#cb32-510" aria-hidden="true" tabindex="-1"></a>In the example below, <span class="in">`transform`</span> action is used to conditionally trigger</span>
<span id="cb32-511"><a href="#cb32-511" aria-hidden="true" tabindex="-1"></a><span class="in">`reload`</span> for ripgrep, followed by <span class="in">`search`</span> for fzf. The first word of the</span>
<span id="cb32-512"><a href="#cb32-512" aria-hidden="true" tabindex="-1"></a>query initiates the Ripgrep process to generate the initial results, while the</span>
<span id="cb32-513"><a href="#cb32-513" aria-hidden="true" tabindex="-1"></a>remainder of the query is passed to fzf for secondary filtering.</span>
<span id="cb32-514"><a href="#cb32-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-515"><a href="#cb32-515" aria-hidden="true" tabindex="-1"></a><span class="in">```sh</span></span>
<span id="cb32-516"><a href="#cb32-516" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb32-517"><a href="#cb32-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-518"><a href="#cb32-518" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">TEMP</span><span class="op">=</span><span class="va">$(</span><span class="fu">mktemp</span> <span class="at">-u</span><span class="va">)</span></span>
<span id="cb32-519"><a href="#cb32-519" aria-hidden="true" tabindex="-1"></a><span class="bu">trap</span> <span class="st">'rm -f "$TEMP"'</span> EXIT</span>
<span id="cb32-520"><a href="#cb32-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-521"><a href="#cb32-521" aria-hidden="true" tabindex="-1"></a><span class="va">INITIAL_QUERY</span><span class="op">=</span><span class="st">"</span><span class="va">${*</span><span class="op">:-</span><span class="va">}</span><span class="st">"</span></span>
<span id="cb32-522"><a href="#cb32-522" aria-hidden="true" tabindex="-1"></a><span class="va">TRANSFORMER</span><span class="op">=</span><span class="st">'</span></span>
<span id="cb32-523"><a href="#cb32-523" aria-hidden="true" tabindex="-1"></a><span class="st">  rg_pat={q:1}      # The first word is passed to ripgrep</span></span>
<span id="cb32-524"><a href="#cb32-524" aria-hidden="true" tabindex="-1"></a><span class="st">  fzf_pat={q:2..}   # The rest are passed to fzf</span></span>
<span id="cb32-525"><a href="#cb32-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-526"><a href="#cb32-526" aria-hidden="true" tabindex="-1"></a><span class="st">  if ! [[ -r "$TEMP" ]] || [[ $rg_pat != $(cat "$TEMP") ]]; then</span></span>
<span id="cb32-527"><a href="#cb32-527" aria-hidden="true" tabindex="-1"></a><span class="st">    echo "$rg_pat" &gt; "$TEMP"</span></span>
<span id="cb32-528"><a href="#cb32-528" aria-hidden="true" tabindex="-1"></a><span class="st">    printf "reload:sleep 0.1; rg --column --line-number --no-heading --color=always --smart-case %q || true" "$rg_pat"</span></span>
<span id="cb32-529"><a href="#cb32-529" aria-hidden="true" tabindex="-1"></a><span class="st">  fi</span></span>
<span id="cb32-530"><a href="#cb32-530" aria-hidden="true" tabindex="-1"></a><span class="st">  echo "+search:$fzf_pat"</span></span>
<span id="cb32-531"><a href="#cb32-531" aria-hidden="true" tabindex="-1"></a><span class="st">'</span></span>
<span id="cb32-532"><a href="#cb32-532" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--ansi</span> <span class="at">--disabled</span> <span class="at">--query</span> <span class="st">"</span><span class="va">$INITIAL_QUERY</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb32-533"><a href="#cb32-533" aria-hidden="true" tabindex="-1"></a>    <span class="at">--with-shell</span> <span class="st">'bash -c'</span> <span class="dt">\</span></span>
<span id="cb32-534"><a href="#cb32-534" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"start,change:transform:</span><span class="va">$TRANSFORMER</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb32-535"><a href="#cb32-535" aria-hidden="true" tabindex="-1"></a>    <span class="at">--color</span> <span class="st">"hl:-1:underline,hl+:-1:underline:reverse"</span> <span class="dt">\</span></span>
<span id="cb32-536"><a href="#cb32-536" aria-hidden="true" tabindex="-1"></a>    <span class="at">--delimiter</span> : <span class="dt">\</span></span>
<span id="cb32-537"><a href="#cb32-537" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'bat --color=always {1} --highlight-line {2}'</span> <span class="dt">\</span></span>
<span id="cb32-538"><a href="#cb32-538" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> <span class="st">'up,60%,border-line,+{2}+3/3,~3'</span> <span class="dt">\</span></span>
<span id="cb32-539"><a href="#cb32-539" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:become(vim {1} +{2})'</span></span>
<span id="cb32-540"><a href="#cb32-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-541"><a href="#cb32-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-542"><a href="#cb32-542" aria-hidden="true" tabindex="-1"></a>Log tailing</span>
<span id="cb32-543"><a href="#cb32-543" aria-hidden="true" tabindex="-1"></a>-----------</span>
<span id="cb32-544"><a href="#cb32-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-545"><a href="#cb32-545" aria-hidden="true" tabindex="-1"></a>fzf can run long-running preview commands and render partial results before</span>
<span id="cb32-546"><a href="#cb32-546" aria-hidden="true" tabindex="-1"></a>completion. And when you specify <span class="in">`follow`</span> flag in <span class="in">`--preview-window`</span> option,</span>
<span id="cb32-547"><a href="#cb32-547" aria-hidden="true" tabindex="-1"></a>fzf will "<span class="in">`tail -f`</span>" the result, automatically scrolling to the bottom.</span>
<span id="cb32-548"><a href="#cb32-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-549"><a href="#cb32-549" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb32-550"><a href="#cb32-550" aria-hidden="true" tabindex="-1"></a><span class="co"># With "follow", preview window will automatically scroll to the bottom.</span></span>
<span id="cb32-551"><a href="#cb32-551" aria-hidden="true" tabindex="-1"></a><span class="co"># "\033[2J" is an ANSI escape sequence for clearing the screen.</span></span>
<span id="cb32-552"><a href="#cb32-552" aria-hidden="true" tabindex="-1"></a><span class="co"># When fzf reads this code it clears the previous preview contents.</span></span>
<span id="cb32-553"><a href="#cb32-553" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf</span> <span class="at">--preview-window</span> follow <span class="at">--preview</span> <span class="st">'for i in $(seq 100000); do</span></span>
<span id="cb32-554"><a href="#cb32-554" aria-hidden="true" tabindex="-1"></a><span class="st">  echo "$i"</span></span>
<span id="cb32-555"><a href="#cb32-555" aria-hidden="true" tabindex="-1"></a><span class="st">  sleep 0.01</span></span>
<span id="cb32-556"><a href="#cb32-556" aria-hidden="true" tabindex="-1"></a><span class="st">  (( i % 300 == 0 )) &amp;&amp; printf "\033[2J"</span></span>
<span id="cb32-557"><a href="#cb32-557" aria-hidden="true" tabindex="-1"></a><span class="st">done'</span></span>
<span id="cb32-558"><a href="#cb32-558" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb32-559"><a href="#cb32-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-560"><a href="#cb32-560" aria-hidden="true" tabindex="-1"></a><span class="al">![image](https://user-images.githubusercontent.com/700826/113473303-dd669600-94a3-11eb-88a9-1f61b996bb0e.png)</span></span>
<span id="cb32-561"><a href="#cb32-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-562"><a href="#cb32-562" aria-hidden="true" tabindex="-1"></a>Admittedly, that was a silly example. Here's a practical one for browsing</span>
<span id="cb32-563"><a href="#cb32-563" aria-hidden="true" tabindex="-1"></a>Kubernetes pods.</span>
<span id="cb32-564"><a href="#cb32-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-565"><a href="#cb32-565" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb32-566"><a href="#cb32-566" aria-hidden="true" tabindex="-1"></a><span class="fu">pods()</span> <span class="kw">{</span></span>
<span id="cb32-567"><a href="#cb32-567" aria-hidden="true" tabindex="-1"></a>  <span class="va">command</span><span class="op">=</span><span class="st">'kubectl get pods --all-namespaces'</span> <span class="ex">fzf</span> <span class="dt">\</span></span>
<span id="cb32-568"><a href="#cb32-568" aria-hidden="true" tabindex="-1"></a>    <span class="at">--info</span><span class="op">=</span>inline <span class="at">--layout</span><span class="op">=</span>reverse <span class="at">--header-lines</span><span class="op">=</span>1 <span class="dt">\</span></span>
<span id="cb32-569"><a href="#cb32-569" aria-hidden="true" tabindex="-1"></a>    <span class="at">--prompt</span> <span class="st">"</span><span class="va">$(</span><span class="ex">kubectl</span> config current-context <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/-context$//'</span><span class="va">)</span><span class="st">&gt; "</span> <span class="dt">\</span></span>
<span id="cb32-570"><a href="#cb32-570" aria-hidden="true" tabindex="-1"></a>    <span class="at">--header</span> <span class="st">$'╱ Enter (kubectl exec) ╱ CTRL-O (open log in editor) ╱ CTRL-R (reload) ╱</span><span class="dt">\n\n</span><span class="st">'</span> <span class="dt">\</span></span>
<span id="cb32-571"><a href="#cb32-571" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'start,ctrl-r:reload:$command'</span> <span class="dt">\</span></span>
<span id="cb32-572"><a href="#cb32-572" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'ctrl-/:change-preview-window(80%,border-bottom|hidden|)'</span> <span class="dt">\</span></span>
<span id="cb32-573"><a href="#cb32-573" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'enter:execute:kubectl exec -it --namespace {1} {2} -- bash'</span> <span class="dt">\</span></span>
<span id="cb32-574"><a href="#cb32-574" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">'ctrl-o:execute:${EDITOR:-vim} &lt;(kubectl logs --all-containers --namespace {1} {2})'</span> <span class="dt">\</span></span>
<span id="cb32-575"><a href="#cb32-575" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview-window</span> up:follow <span class="dt">\</span></span>
<span id="cb32-576"><a href="#cb32-576" aria-hidden="true" tabindex="-1"></a>    <span class="at">--preview</span> <span class="st">'kubectl logs --follow --all-containers --tail=10000 --namespace {1} {2}'</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb32-577"><a href="#cb32-577" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb32-578"><a href="#cb32-578" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-579"><a href="#cb32-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-580"><a href="#cb32-580" aria-hidden="true" tabindex="-1"></a><span class="ex">![image]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113473547-1d7a4880-94a5-11eb-98ef-9aa6f0ed215a.png</span><span class="kw">)</span></span>
<span id="cb32-581"><a href="#cb32-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-582"><a href="#cb32-582" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> The preview window will <span class="pp">*</span><span class="st">"log tail"</span><span class="pp">*</span> the pod</span>
<span id="cb32-583"><a href="#cb32-583" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> Holding on to a large amount of log will consume a lot of memory. So we</span>
<span id="cb32-584"><a href="#cb32-584" aria-hidden="true" tabindex="-1"></a>      <span class="ex">limited</span> the initial log amount with <span class="kw">`</span><span class="at">--tail</span><span class="op">=</span>10000<span class="kw">`</span><span class="bu">.</span></span>
<span id="cb32-585"><a href="#cb32-585" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> <span class="kw">`</span>execute<span class="kw">`</span> <span class="ex">bindings</span> allow you to run any command without leaving fzf</span>
<span id="cb32-586"><a href="#cb32-586" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> Press enter key on a pod to <span class="kw">`</span>kubectl exec<span class="kw">`</span> <span class="ex">into</span> it</span>
<span id="cb32-587"><a href="#cb32-587" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> Press CTRL-O to open the log in your editor</span>
<span id="cb32-588"><a href="#cb32-588" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> Press CTRL-R to reload the pod list</span>
<span id="cb32-589"><a href="#cb32-589" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> Press CTRL-/ repeatedly to rotate through a different sets of preview</span>
<span id="cb32-590"><a href="#cb32-590" aria-hidden="true" tabindex="-1"></a>  <span class="ex">window</span> options</span>
<span id="cb32-591"><a href="#cb32-591" aria-hidden="true" tabindex="-1"></a>    <span class="ex">1.</span> <span class="kw">`</span>80%,border-bottom<span class="kw">`</span></span>
<span id="cb32-592"><a href="#cb32-592" aria-hidden="true" tabindex="-1"></a>    <span class="ex">1.</span> <span class="kw">`</span>hidden<span class="kw">`</span></span>
<span id="cb32-593"><a href="#cb32-593" aria-hidden="true" tabindex="-1"></a>    <span class="ex">1.</span> Empty string after <span class="kw">`|`</span> <span class="ex">translates</span> to the default options from <span class="kw">`</span><span class="at">--preview-window</span><span class="kw">`</span></span>
<span id="cb32-594"><a href="#cb32-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-595"><a href="#cb32-595" aria-hidden="true" tabindex="-1"></a><span class="ex">Key</span> bindings for git objects</span>
<span id="cb32-596"><a href="#cb32-596" aria-hidden="true" tabindex="-1"></a><span class="ex">----------------------------</span></span>
<span id="cb32-597"><a href="#cb32-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-598"><a href="#cb32-598" aria-hidden="true" tabindex="-1"></a><span class="ex">Oftentimes,</span> you want to put the identifiers of various Git object to the</span>
<span id="cb32-599"><a href="#cb32-599" aria-hidden="true" tabindex="-1"></a><span class="ex">command-line.</span> For example, it is common to write commands like these:</span>
<span id="cb32-600"><a href="#cb32-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-601"><a href="#cb32-601" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>sh</span>
<span id="cb32-602"><a href="#cb32-602" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout [SOME_COMMIT_HASH or BRANCH or TAG]</span>
<span id="cb32-603"><a href="#cb32-603" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> diff [SOME_COMMIT_HASH or BRANCH or TAG] [SOME_COMMIT_HASH or BRANCH or TAG]</span>
<span id="cb32-604"><a href="#cb32-604" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-605"><a href="#cb32-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-606"><a href="#cb32-606" aria-hidden="true" tabindex="-1"></a><span class="ex">[fzf-git.sh]</span><span class="er">(</span><span class="ex">https://github.com/junegunn/fzf-git.sh</span><span class="kw">)</span> <span class="ex">project</span> defines a set of</span>
<span id="cb32-607"><a href="#cb32-607" aria-hidden="true" tabindex="-1"></a><span class="ex">fzf-based</span> key bindings for Git objects. I strongly recommend that you check</span>
<span id="cb32-608"><a href="#cb32-608" aria-hidden="true" tabindex="-1"></a><span class="ex">them</span> out because they are seriously useful.</span>
<span id="cb32-609"><a href="#cb32-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-610"><a href="#cb32-610" aria-hidden="true" tabindex="-1"></a><span class="co">### Files listed in </span><span class="kw">`</span>git status<span class="kw">`</span></span>
<span id="cb32-611"><a href="#cb32-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-612"><a href="#cb32-612" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>kbd<span class="op">&gt;</span>CTRL-G<span class="op">&lt;</span>/kbd<span class="op">&gt;&lt;</span>kbd<span class="op">&gt;</span>CTRL-F<span class="op">&lt;</span>/kbd<span class="op">&gt;</span></span>
<span id="cb32-613"><a href="#cb32-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-614"><a href="#cb32-614" aria-hidden="true" tabindex="-1"></a><span class="ex">![image]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113473779-a9d93b00-94a6-11eb-87b5-f62a8d0a0efc.png</span><span class="kw">)</span></span>
<span id="cb32-615"><a href="#cb32-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-616"><a href="#cb32-616" aria-hidden="true" tabindex="-1"></a><span class="co">### Branches</span></span>
<span id="cb32-617"><a href="#cb32-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-618"><a href="#cb32-618" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>kbd<span class="op">&gt;</span>CTRL-G<span class="op">&lt;</span>/kbd<span class="op">&gt;&lt;</span>kbd<span class="op">&gt;</span>CTRL-B<span class="op">&lt;</span>/kbd<span class="op">&gt;</span></span>
<span id="cb32-619"><a href="#cb32-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-620"><a href="#cb32-620" aria-hidden="true" tabindex="-1"></a><span class="ex">![image]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113473758-87dfb880-94a6-11eb-82f4-9218103f10bd.png</span><span class="kw">)</span></span>
<span id="cb32-621"><a href="#cb32-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-622"><a href="#cb32-622" aria-hidden="true" tabindex="-1"></a><span class="co">### Commit hashes</span></span>
<span id="cb32-623"><a href="#cb32-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-624"><a href="#cb32-624" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>kbd<span class="op">&gt;</span>CTRL-G<span class="op">&lt;</span>/kbd<span class="op">&gt;&lt;</span>kbd<span class="op">&gt;</span>CTRL-H<span class="op">&lt;</span>/kbd<span class="op">&gt;</span></span>
<span id="cb32-625"><a href="#cb32-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-626"><a href="#cb32-626" aria-hidden="true" tabindex="-1"></a><span class="ex">![image]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113473765-91692080-94a6-11eb-8d38-ed4d41f27ac1.png</span><span class="kw">)</span></span>
<span id="cb32-627"><a href="#cb32-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-628"><a href="#cb32-628" aria-hidden="true" tabindex="-1"></a><span class="ex">Color</span> themes</span>
<span id="cb32-629"><a href="#cb32-629" aria-hidden="true" tabindex="-1"></a><span class="ex">------------</span></span>
<span id="cb32-630"><a href="#cb32-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-631"><a href="#cb32-631" aria-hidden="true" tabindex="-1"></a><span class="ex">You</span> can customize how fzf colors the text elements with <span class="kw">`</span><span class="at">--color</span><span class="kw">`</span> <span class="ex">option.</span> Here</span>
<span id="cb32-632"><a href="#cb32-632" aria-hidden="true" tabindex="-1"></a><span class="ex">are</span> a few color themes. Note that you need a terminal emulator that can</span>
<span id="cb32-633"><a href="#cb32-633" aria-hidden="true" tabindex="-1"></a><span class="ex">display</span> 24-bit colors.</span>
<span id="cb32-634"><a href="#cb32-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-635"><a href="#cb32-635" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>sh</span>
<span id="cb32-636"><a href="#cb32-636" aria-hidden="true" tabindex="-1"></a><span class="co"># junegunn/seoul256.vim (dark)</span></span>
<span id="cb32-637"><a href="#cb32-637" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#3F3F3F,bg:#4B4B4B,border:#6B6B6B,spinner:#98BC99,hl:#719872,fg:#D9D9D9,header:#719872,info:#BDBB72,pointer:#E12672,marker:#E17899,fg+:#D9D9D9,preview-bg:#3F3F3F,prompt:#98BEDE,hl+:#98BC99'</span></span>
<span id="cb32-638"><a href="#cb32-638" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-639"><a href="#cb32-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-640"><a href="#cb32-640" aria-hidden="true" tabindex="-1"></a><span class="ex">![seoul256]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113475011-2c192d80-94ae-11eb-9d17-1e5867bae01f.png</span><span class="kw">)</span></span>
<span id="cb32-641"><a href="#cb32-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-642"><a href="#cb32-642" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>sh</span>
<span id="cb32-643"><a href="#cb32-643" aria-hidden="true" tabindex="-1"></a><span class="co"># junegunn/seoul256.vim (light)</span></span>
<span id="cb32-644"><a href="#cb32-644" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#D9D9D9,bg:#E1E1E1,border:#C8C8C8,spinner:#719899,hl:#719872,fg:#616161,header:#719872,info:#727100,pointer:#E12672,marker:#E17899,fg+:#616161,preview-bg:#D9D9D9,prompt:#0099BD,hl+:#719899'</span></span>
<span id="cb32-645"><a href="#cb32-645" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-646"><a href="#cb32-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-647"><a href="#cb32-647" aria-hidden="true" tabindex="-1"></a><span class="ex">![seoul256-light]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113475022-389d8600-94ae-11eb-905f-0939dd535837.png</span><span class="kw">)</span></span>
<span id="cb32-648"><a href="#cb32-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-649"><a href="#cb32-649" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>sh</span>
<span id="cb32-650"><a href="#cb32-650" aria-hidden="true" tabindex="-1"></a><span class="co"># morhetz/gruvbox</span></span>
<span id="cb32-651"><a href="#cb32-651" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#3c3836,bg:#32302f,spinner:#fb4934,hl:#928374,fg:#ebdbb2,header:#928374,info:#8ec07c,pointer:#fb4934,marker:#fb4934,fg+:#ebdbb2,prompt:#fb4934,hl+:#fb4934'</span></span>
<span id="cb32-652"><a href="#cb32-652" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-653"><a href="#cb32-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-654"><a href="#cb32-654" aria-hidden="true" tabindex="-1"></a><span class="ex">![gruvbox]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113475042-494dfc00-94ae-11eb-9322-cd03a027305a.png</span><span class="kw">)</span></span>
<span id="cb32-655"><a href="#cb32-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-656"><a href="#cb32-656" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>sh</span>
<span id="cb32-657"><a href="#cb32-657" aria-hidden="true" tabindex="-1"></a><span class="co"># arcticicestudio/nord-vim</span></span>
<span id="cb32-658"><a href="#cb32-658" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#3B4252,bg:#2E3440,spinner:#81A1C1,hl:#616E88,fg:#D8DEE9,header:#616E88,info:#81A1C1,pointer:#81A1C1,marker:#81A1C1,fg+:#D8DEE9,prompt:#81A1C1,hl+:#81A1C1'</span></span>
<span id="cb32-659"><a href="#cb32-659" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-660"><a href="#cb32-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-661"><a href="#cb32-661" aria-hidden="true" tabindex="-1"></a><span class="ex">![nord]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113475063-67b3f780-94ae-11eb-9b24-5f0d22b63399.png</span><span class="kw">)</span></span>
<span id="cb32-662"><a href="#cb32-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-663"><a href="#cb32-663" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>sh</span>
<span id="cb32-664"><a href="#cb32-664" aria-hidden="true" tabindex="-1"></a><span class="co"># tomasr/molokai</span></span>
<span id="cb32-665"><a href="#cb32-665" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">FZF_DEFAULT_OPTS</span><span class="op">=</span><span class="st">'--color=bg+:#293739,bg:#1B1D1E,border:#808080,spinner:#E6DB74,hl:#7E8E91,fg:#F8F8F2,header:#7E8E91,info:#A6E22E,pointer:#A6E22E,marker:#F92672,fg+:#F8F8F2,prompt:#F92672,hl+:#F92672'</span></span>
<span id="cb32-666"><a href="#cb32-666" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-667"><a href="#cb32-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-668"><a href="#cb32-668" aria-hidden="true" tabindex="-1"></a><span class="ex">![molokai]</span><span class="er">(</span><span class="ex">https://user-images.githubusercontent.com/700826/113475085-8619f300-94ae-11eb-85e4-2766fc3246bf.png</span><span class="kw">)</span></span>
<span id="cb32-669"><a href="#cb32-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-670"><a href="#cb32-670" aria-hidden="true" tabindex="-1"></a><span class="co">### fzf Theme Playground</span></span>
<span id="cb32-671"><a href="#cb32-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-672"><a href="#cb32-672" aria-hidden="true" tabindex="-1"></a><span class="ex">[fzf</span> Theme Playground]<span class="er">(</span><span class="ex">https://vitormv.github.io/fzf-themes/</span><span class="kw">)</span> <span class="ex">created</span> by</span>
<span id="cb32-673"><a href="#cb32-673" aria-hidden="true" tabindex="-1"></a><span class="ex">[Vitor</span> Mello]<span class="er">(</span><span class="ex">https://github.com/vitormv</span><span class="kw">)</span> <span class="ex">is</span> a webpage where you can</span>
<span id="cb32-674"><a href="#cb32-674" aria-hidden="true" tabindex="-1"></a><span class="ex">interactively</span> create fzf themes.</span>
<span id="cb32-675"><a href="#cb32-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-676"><a href="#cb32-676" aria-hidden="true" tabindex="-1"></a><span class="co">### Generating fzf color theme from Vim color schemes</span></span>
<span id="cb32-677"><a href="#cb32-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-678"><a href="#cb32-678" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> Vim plugin of fzf can generate <span class="kw">`</span><span class="at">--color</span><span class="kw">`</span> <span class="ex">option</span> from the current color</span>
<span id="cb32-679"><a href="#cb32-679" aria-hidden="true" tabindex="-1"></a><span class="ex">scheme</span> according to <span class="kw">`</span>g:fzf_colors<span class="kw">`</span> <span class="ex">variable.</span> You can find the detailed</span>
<span id="cb32-680"><a href="#cb32-680" aria-hidden="true" tabindex="-1"></a><span class="ex">explanation</span> <span class="pp">[</span><span class="ss">here</span><span class="pp">]</span><span class="er">(</span><span class="ex">https://github.com/junegunn/fzf/blob/master/README-VIM.md#explanation-of-gfzf_colors</span><span class="kw">)</span><span class="bu">.</span></span>
<span id="cb32-681"><a href="#cb32-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-682"><a href="#cb32-682" aria-hidden="true" tabindex="-1"></a><span class="ex">Here</span> is an example. Add this to your Vim configuration file.</span>
<span id="cb32-683"><a href="#cb32-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-684"><a href="#cb32-684" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>vim</span>
<span id="cb32-685"><a href="#cb32-685" aria-hidden="true" tabindex="-1"></a><span class="bu">let</span> <span class="va">g</span><span class="op">:</span><span class="va">fzf_colors</span> <span class="op">=</span></span>
<span id="cb32-686"><a href="#cb32-686" aria-hidden="true" tabindex="-1"></a><span class="ex">\ {</span> <span class="st">'fg'</span>:         [<span class="st">'fg'</span>, <span class="st">'Normal'</span>],</span>
<span id="cb32-687"><a href="#cb32-687" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'bg'</span><span class="ex">:</span>         [<span class="st">'bg'</span>, <span class="st">'Normal'</span>],</span>
<span id="cb32-688"><a href="#cb32-688" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'preview-bg'</span><span class="ex">:</span> [<span class="st">'bg'</span>, <span class="st">'NormalFloat'</span>],</span>
<span id="cb32-689"><a href="#cb32-689" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'hl'</span><span class="ex">:</span>         [<span class="st">'fg'</span>, <span class="st">'Comment'</span>],</span>
<span id="cb32-690"><a href="#cb32-690" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'fg+'</span><span class="ex">:</span>        [<span class="st">'fg'</span>, <span class="st">'CursorLine'</span>, <span class="st">'CursorColumn'</span>, <span class="st">'Normal'</span>],</span>
<span id="cb32-691"><a href="#cb32-691" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'bg+'</span><span class="ex">:</span>        [<span class="st">'bg'</span>, <span class="st">'CursorLine'</span>, <span class="st">'CursorColumn'</span>],</span>
<span id="cb32-692"><a href="#cb32-692" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'hl+'</span><span class="ex">:</span>        [<span class="st">'fg'</span>, <span class="st">'Statement'</span>],</span>
<span id="cb32-693"><a href="#cb32-693" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'info'</span><span class="ex">:</span>       [<span class="st">'fg'</span>, <span class="st">'PreProc'</span>],</span>
<span id="cb32-694"><a href="#cb32-694" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'border'</span><span class="ex">:</span>     [<span class="st">'fg'</span>, <span class="st">'Ignore'</span>],</span>
<span id="cb32-695"><a href="#cb32-695" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'prompt'</span><span class="ex">:</span>     [<span class="st">'fg'</span>, <span class="st">'Conditional'</span>],</span>
<span id="cb32-696"><a href="#cb32-696" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'pointer'</span><span class="ex">:</span>    [<span class="st">'fg'</span>, <span class="st">'Exception'</span>],</span>
<span id="cb32-697"><a href="#cb32-697" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'marker'</span><span class="ex">:</span>     [<span class="st">'fg'</span>, <span class="st">'Keyword'</span>],</span>
<span id="cb32-698"><a href="#cb32-698" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'spinner'</span><span class="ex">:</span>    [<span class="st">'fg'</span>, <span class="st">'Label'</span>],</span>
<span id="cb32-699"><a href="#cb32-699" aria-hidden="true" tabindex="-1"></a>  <span class="ex">\ </span><span class="st">'header'</span><span class="ex">:</span>     [<span class="st">'fg'</span>, <span class="st">'Comment'</span>] }</span>
<span id="cb32-700"><a href="#cb32-700" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-701"><a href="#cb32-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-702"><a href="#cb32-702" aria-hidden="true" tabindex="-1"></a><span class="ex">Then</span> you can see how the <span class="kw">`</span><span class="at">--color</span><span class="kw">`</span> <span class="ex">option</span> is generated by printing the result</span>
<span id="cb32-703"><a href="#cb32-703" aria-hidden="true" tabindex="-1"></a><span class="ex">of</span> <span class="kw">`</span>fzf#wrap<span class="er">(</span><span class="kw">)`</span><span class="bu">.</span></span>
<span id="cb32-704"><a href="#cb32-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-705"><a href="#cb32-705" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>vim</span>
<span id="cb32-706"><a href="#cb32-706" aria-hidden="true" tabindex="-1"></a><span class="ex">:echo</span> fzf#wrap<span class="er">(</span><span class="kw">)</span></span>
<span id="cb32-707"><a href="#cb32-707" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span>
<span id="cb32-708"><a href="#cb32-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-709"><a href="#cb32-709" aria-hidden="true" tabindex="-1"></a><span class="ex">Use</span> this command to append <span class="kw">`</span>export FZF_DEFAULT_OPTS=<span class="st">"..."</span><span class="kw">`</span> <span class="ex">line</span> to the end of</span>
<span id="cb32-710"><a href="#cb32-710" aria-hidden="true" tabindex="-1"></a><span class="ex">the</span> current file.</span>
<span id="cb32-711"><a href="#cb32-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-712"><a href="#cb32-712" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span>vim</span>
<span id="cb32-713"><a href="#cb32-713" aria-hidden="true" tabindex="-1"></a><span class="ex">:call</span> append<span class="er">(</span><span class="st">'$'</span><span class="ex">,</span> printf<span class="er">(</span><span class="st">'export FZF_DEFAULT_OPTS="%s"'</span><span class="ex">,</span> matchstr<span class="er">(</span><span class="fu">fzf#wrap()</span><span class="ex">.options,</span> <span class="st">"--color[^']*"</span><span class="kw">)))</span></span>
<span id="cb32-714"><a href="#cb32-714" aria-hidden="true" tabindex="-1"></a><span class="kw">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2023-2025, Ronald G. Thomas</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rgt47">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/rgt47">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>