<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ronald (Ryy) Glenn Thomas">
<meta name="dcterms.date" content="2025-05-13">

<title>RCT validation language – Thomas Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-3ac1d83748cf4fcd34880f42c7deae5c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-7ba0fb6211dfa319973075dc5a8ae53f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400&amp;family=Open+Sans:ital,wght@0,400;0,600;1,400&amp;family=Fira+Mono:wght@400;500&amp;display=swap" rel="stylesheet">
<script src="https://kit.fontawesome.com/0fba9333d8.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

<!-- Custom meta tags for social sharing -->
<meta property="og:site_name" content="Thomas Lab">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@rgt47">

<!-- Add responsive features -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Add analytics if needed -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXX');
</script> -->

<!-- Add custom javascript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add any custom JavaScript functionality here
  
  // Example: Add smooth scrolling
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      
      document.querySelector(this.getAttribute('href')).scrollIntoView({
        behavior: 'smooth'
      });
    });
  });
});
</script>


<meta property="og:title" content="RCT validation language – Thomas Lab">
<meta property="og:description" content="">
<meta property="og:image" content="https://focusonr.org/posts/rct_validation_lang/img/lua.png">
<meta property="og:site_name" content="Thomas Lab">
<meta property="og:image:height" content="2000">
<meta property="og:image:width" content="3000">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Thomas Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/rgt47"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rgt47"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">RCT validation language</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Categories</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Programming &amp; Development</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Data Analysis &amp; Visualization</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Deployment &amp; Operations</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Development Environment</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Shiny Applications</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">AI &amp; Automation</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">System Administration</span></span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#consider-matlab-to-r-converter" id="toc-consider-matlab-to-r-converter" class="nav-link" data-scroll-target="#consider-matlab-to-r-converter"><span class="header-section-number">1.0.1</span> consider matlab to R converter</a></li>
  </ul></li>
  <li><a href="#tools-for-implementing-complex-data-validation-checks-in-edc-systems" id="toc-tools-for-implementing-complex-data-validation-checks-in-edc-systems" class="nav-link" data-scroll-target="#tools-for-implementing-complex-data-validation-checks-in-edc-systems"><span class="header-section-number">2</span> <strong>Tools for Implementing Complex Data Validation Checks in EDC Systems</strong></a>
  <ul class="collapse">
  <li><a href="#proprietary-edc-systems-with-built-in-validation" id="toc-proprietary-edc-systems-with-built-in-validation" class="nav-link" data-scroll-target="#proprietary-edc-systems-with-built-in-validation"><span class="header-section-number">2.1</span> <strong>1. Proprietary EDC Systems with Built-in Validation</strong></a></li>
  <li><a href="#open-source-edc-systems-with-custom-validation-capabilities" id="toc-open-source-edc-systems-with-custom-validation-capabilities" class="nav-link" data-scroll-target="#open-source-edc-systems-with-custom-validation-capabilities"><span class="header-section-number">2.2</span> <strong>2. Open-Source EDC Systems with Custom Validation Capabilities</strong></a>
  <ul class="collapse">
  <li><a href="#a.-openclinica" id="toc-a.-openclinica" class="nav-link" data-scroll-target="#a.-openclinica"><span class="header-section-number">2.2.1</span> <strong>a. OpenClinica</strong></a></li>
  <li><a href="#b.-redcap" id="toc-b.-redcap" class="nav-link" data-scroll-target="#b.-redcap"><span class="header-section-number">2.2.2</span> <strong>b. REDCap</strong></a></li>
  <li><a href="#c.-clincapture" id="toc-c.-clincapture" class="nav-link" data-scroll-target="#c.-clincapture"><span class="header-section-number">2.2.3</span> <strong>c.&nbsp;ClinCapture</strong></a></li>
  </ul></li>
  <li><a href="#custom-validation-using-general-purpose-tools" id="toc-custom-validation-using-general-purpose-tools" class="nav-link" data-scroll-target="#custom-validation-using-general-purpose-tools"><span class="header-section-number">2.3</span> <strong>3. Custom Validation Using General-Purpose Tools</strong></a>
  <ul class="collapse">
  <li><a href="#a.-r-for-data-validation" id="toc-a.-r-for-data-validation" class="nav-link" data-scroll-target="#a.-r-for-data-validation"><span class="header-section-number">2.3.1</span> <strong>a. R for Data Validation</strong></a></li>
  <li><a href="#b.-python-for-data-validation" id="toc-b.-python-for-data-validation" class="nav-link" data-scroll-target="#b.-python-for-data-validation"><span class="header-section-number">2.3.2</span> <strong>b. Python for Data Validation</strong></a></li>
  <li><a href="#c.-sql-for-data-integrity-checks" id="toc-c.-sql-for-data-integrity-checks" class="nav-link" data-scroll-target="#c.-sql-for-data-integrity-checks"><span class="header-section-number">2.3.3</span> <strong>c.&nbsp;SQL for Data Integrity Checks</strong></a></li>
  </ul></li>
  <li><a href="#integrating-validation-into-edc-workflows" id="toc-integrating-validation-into-edc-workflows" class="nav-link" data-scroll-target="#integrating-validation-into-edc-workflows"><span class="header-section-number">2.4</span> <strong>4. Integrating Validation into EDC Workflows</strong></a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">2.5</span> <strong>Conclusion</strong></a></li>
  </ul></li>
  <li><a href="#shiny-form-validation-with-relational-data-and-machine-learning" id="toc-shiny-form-validation-with-relational-data-and-machine-learning" class="nav-link" data-scroll-target="#shiny-form-validation-with-relational-data-and-machine-learning"><span class="header-section-number">3</span> <strong>Shiny Form Validation with Relational Data and Machine Learning</strong></a>
  <ul class="collapse">
  <li><a href="#can-shiny-create-forms-with-real-time-validation" id="toc-can-shiny-create-forms-with-real-time-validation" class="nav-link" data-scroll-target="#can-shiny-create-forms-with-real-time-validation"><span class="header-section-number">3.1</span> <strong>Can Shiny Create Forms with Real-Time Validation?</strong></a></li>
  <li><a href="#methods-for-real-time-validation-in-shiny" id="toc-methods-for-real-time-validation-in-shiny" class="nav-link" data-scroll-target="#methods-for-real-time-validation-in-shiny"><span class="header-section-number">3.2</span> <strong>Methods for Real-Time Validation in Shiny</strong></a>
  <ul class="collapse">
  <li><a href="#validate-and-need-for-simple-input-validation" id="toc-validate-and-need-for-simple-input-validation" class="nav-link" data-scroll-target="#validate-and-need-for-simple-input-validation"><span class="header-section-number">3.2.1</span> <strong>1. <code>validate()</code> and <code>need()</code> for Simple Input Validation</strong></a></li>
  <li><a href="#shinyvalidate-package-for-advanced-form-validation" id="toc-shinyvalidate-package-for-advanced-form-validation" class="nav-link" data-scroll-target="#shinyvalidate-package-for-advanced-form-validation"><span class="header-section-number">3.2.2</span> <strong>2. <code>shinyvalidate</code> Package for Advanced Form Validation</strong></a></li>
  <li><a href="#javascript-based-validation-for-immediate-feedback" id="toc-javascript-based-validation-for-immediate-feedback" class="nav-link" data-scroll-target="#javascript-based-validation-for-immediate-feedback"><span class="header-section-number">3.2.3</span> <strong>3. JavaScript-Based Validation for Immediate Feedback</strong></a></li>
  </ul></li>
  <li><a href="#can-javascript-access-relational-data-and-machine-learning-tools" id="toc-can-javascript-access-relational-data-and-machine-learning-tools" class="nav-link" data-scroll-target="#can-javascript-access-relational-data-and-machine-learning-tools"><span class="header-section-number">3.3</span> <strong>Can JavaScript Access Relational Data and Machine Learning Tools?</strong></a></li>
  <li><a href="#using-indexeddb-for-local-relational-data-validation" id="toc-using-indexeddb-for-local-relational-data-validation" class="nav-link" data-scroll-target="#using-indexeddb-for-local-relational-data-validation"><span class="header-section-number">3.4</span> <strong>1. Using IndexedDB for Local Relational Data Validation</strong></a></li>
  <li><a href="#using-ajax-to-query-a-remote-sql-database" id="toc-using-ajax-to-query-a-remote-sql-database" class="nav-link" data-scroll-target="#using-ajax-to-query-a-remote-sql-database"><span class="header-section-number">3.5</span> <strong>2. Using AJAX to Query a Remote SQL Database</strong></a></li>
  <li><a href="#calling-a-machine-learning-model-for-validation" id="toc-calling-a-machine-learning-model-for-validation" class="nav-link" data-scroll-target="#calling-a-machine-learning-model-for-validation"><span class="header-section-number">3.6</span> <strong>3. Calling a Machine Learning Model for Validation</strong></a></li>
  <li><a href="#choosing-the-best-approach" id="toc-choosing-the-best-approach" class="nav-link" data-scroll-target="#choosing-the-best-approach"><span class="header-section-number">3.7</span> <strong>Choosing the Best Approach</strong></a></li>
  <li><a href="#conclusion-1" id="toc-conclusion-1" class="nav-link" data-scroll-target="#conclusion-1"><span class="header-section-number">3.8</span> <strong>Conclusion</strong></a></li>
  </ul></li>
  <li><a href="#spreadsheet-driven-validation-system-for-shiny-forms" id="toc-spreadsheet-driven-validation-system-for-shiny-forms" class="nav-link" data-scroll-target="#spreadsheet-driven-validation-system-for-shiny-forms"><span class="header-section-number">4</span> <strong>Spreadsheet-Driven Validation System for Shiny Forms</strong></a>
  <ul class="collapse">
  <li><a href="#your-idea-spreadsheet-driven-validation-system" id="toc-your-idea-spreadsheet-driven-validation-system" class="nav-link" data-scroll-target="#your-idea-spreadsheet-driven-validation-system"><span class="header-section-number">4.1</span> <strong>Your Idea: Spreadsheet-Driven Validation System</strong></a></li>
  <li><a href="#has-this-been-done-before" id="toc-has-this-been-done-before" class="nav-link" data-scroll-target="#has-this-been-done-before"><span class="header-section-number">4.2</span> <strong>Has This Been Done Before?</strong></a></li>
  <li><a href="#why-this-is-a-good-idea" id="toc-why-this-is-a-good-idea" class="nav-link" data-scroll-target="#why-this-is-a-good-idea"><span class="header-section-number">4.3</span> <strong>Why This is a Good Idea</strong></a></li>
  <li><a href="#how-it-would-work" id="toc-how-it-would-work" class="nav-link" data-scroll-target="#how-it-would-work"><span class="header-section-number">4.4</span> <strong>How It Would Work</strong></a>
  <ul class="collapse">
  <li><a href="#define-rules-in-a-spreadsheet" id="toc-define-rules-in-a-spreadsheet" class="nav-link" data-scroll-target="#define-rules-in-a-spreadsheet"><span class="header-section-number">4.4.1</span> <strong>1. Define Rules in a Spreadsheet</strong></a></li>
  <li><a href="#lua-script-processes-the-spreadsheet" id="toc-lua-script-processes-the-spreadsheet" class="nav-link" data-scroll-target="#lua-script-processes-the-spreadsheet"><span class="header-section-number">4.4.2</span> <strong>2. Lua Script Processes the Spreadsheet</strong></a></li>
  <li><a href="#javascript-file-is-included-in-shiny" id="toc-javascript-file-is-included-in-shiny" class="nav-link" data-scroll-target="#javascript-file-is-included-in-shiny"><span class="header-section-number">4.4.3</span> <strong>3. JavaScript File is Included in Shiny</strong></a></li>
  </ul></li>
  <li><a href="#advantages-of-this-approach" id="toc-advantages-of-this-approach" class="nav-link" data-scroll-target="#advantages-of-this-approach"><span class="header-section-number">4.5</span> <strong>Advantages of This Approach</strong></a></li>
  <li><a href="#potential-enhancements" id="toc-potential-enhancements" class="nav-link" data-scroll-target="#potential-enhancements"><span class="header-section-number">4.6</span> <strong>Potential Enhancements</strong></a>
  <ul class="collapse">
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps"><span class="header-section-number">4.6.1</span> <strong>Next Steps</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#dynamic-rule-reloading-and-database-integration-for-shiny-forms" id="toc-dynamic-rule-reloading-and-database-integration-for-shiny-forms" class="nav-link" data-scroll-target="#dynamic-rule-reloading-and-database-integration-for-shiny-forms"><span class="header-section-number">5</span> <strong>Dynamic Rule Reloading and Database Integration for Shiny Forms</strong></a>
  <ul class="collapse">
  <li><a href="#dynamic-rule-reloading-spreadsheet-based" id="toc-dynamic-rule-reloading-spreadsheet-based" class="nav-link" data-scroll-target="#dynamic-rule-reloading-spreadsheet-based"><span class="header-section-number">5.1</span> <strong>1. Dynamic Rule Reloading (Spreadsheet-Based)</strong></a>
  <ul class="collapse">
  <li><a href="#a.-spreadsheet-format-validation_rules.csv" id="toc-a.-spreadsheet-format-validation_rules.csv" class="nav-link" data-scroll-target="#a.-spreadsheet-format-validation_rules.csv"><span class="header-section-number">5.1.1</span> <strong>A. Spreadsheet Format (<code>validation_rules.csv</code>)</strong></a></li>
  <li><a href="#b.-lua-script-to-convert-csv-to-javascript-process_validation.lua" id="toc-b.-lua-script-to-convert-csv-to-javascript-process_validation.lua" class="nav-link" data-scroll-target="#b.-lua-script-to-convert-csv-to-javascript-process_validation.lua"><span class="header-section-number">5.1.2</span> <strong>B. Lua Script to Convert CSV to JavaScript (<code>process_validation.lua</code>)</strong></a></li>
  <li><a href="#c.-shiny-app-with-automatic-rule-reloading-app.r" id="toc-c.-shiny-app-with-automatic-rule-reloading-app.r" class="nav-link" data-scroll-target="#c.-shiny-app-with-automatic-rule-reloading-app.r"><span class="header-section-number">5.1.3</span> <strong>C. Shiny App with Automatic Rule Reloading (<code>app.R</code>)</strong></a></li>
  </ul></li>
  <li><a href="#database-integration-for-validation-rules" id="toc-database-integration-for-validation-rules" class="nav-link" data-scroll-target="#database-integration-for-validation-rules"><span class="header-section-number">5.2</span> <strong>2. Database Integration for Validation Rules</strong></a>
  <ul class="collapse">
  <li><a href="#a.-database-schema" id="toc-a.-database-schema" class="nav-link" data-scroll-target="#a.-database-schema"><span class="header-section-number">5.2.1</span> <strong>A. Database Schema</strong></a></li>
  <li><a href="#b.-lua-script-to-fetch-rules-from-database-process_validation_db.lua" id="toc-b.-lua-script-to-fetch-rules-from-database-process_validation_db.lua" class="nav-link" data-scroll-target="#b.-lua-script-to-fetch-rules-from-database-process_validation_db.lua"><span class="header-section-number">5.2.2</span> <strong>B. Lua Script to Fetch Rules from Database (<code>process_validation_db.lua</code>)</strong></a></li>
  <li><a href="#c.-modify-shiny-to-fetch-rules-from-database" id="toc-c.-modify-shiny-to-fetch-rules-from-database" class="nav-link" data-scroll-target="#c.-modify-shiny-to-fetch-rules-from-database"><span class="header-section-number">5.2.3</span> <strong>C. Modify Shiny to Fetch Rules from Database</strong></a></li>
  </ul></li>
  <li><a href="#comparison-spreadsheet-vs.-database" id="toc-comparison-spreadsheet-vs.-database" class="nav-link" data-scroll-target="#comparison-spreadsheet-vs.-database"><span class="header-section-number">5.3</span> <strong>Comparison: Spreadsheet vs.&nbsp;Database</strong></a></li>
  <li><a href="#next-steps-1" id="toc-next-steps-1" class="nav-link" data-scroll-target="#next-steps-1"><span class="header-section-number">5.4</span> <strong>Next Steps</strong></a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites"><span class="header-section-number">5.5</span> Prerequisites</a></li>
  <li><a href="#step-by-step-implementation" id="toc-step-by-step-implementation" class="nav-link" data-scroll-target="#step-by-step-implementation"><span class="header-section-number">5.6</span> Step-by-Step Implementation</a></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways"><span class="header-section-number">5.7</span> Key Takeaways</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">5.8</span> Further Reading</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">RCT validation language</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://rgtlab.org">Ronald (Ryy) Glenn Thomas</a> <a href="https://orcid.org/0000-0003-1686-4965" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://ucsd.edu">
            UCSD
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 13, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>



<div class="no-row-height column-margin column-container"><div class="">
<p><img src="img/lua.png" class="img-fluid"></p>
</div></div><section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Consider a simple programming language to capture the essence of clinical trial data base validation logic.</p>
<p>Similar in concept to Coffeescript (compiles to Lua) or Moonscript (compiles to Javascript).</p>
<p>Idea is for trial design and initiation team to collaborate (say on gppgle docs) to develop the quality control validation logic and then translate that language into a series of snippets in Lua (using Lpeg)</p>
<p>https://www.inf.puc-rio.br/~roberto/lpeg/</p>
<section id="consider-matlab-to-r-converter" class="level3" data-number="1.0.1">
<h3 data-number="1.0.1" class="anchored" data-anchor-id="consider-matlab-to-r-converter"><span class="header-section-number">1.0.1</span> consider matlab to R converter</h3>
<p><a href="https://cran.r-project.org/web/packages/matconv/index.html">CRAN - Package matconv</a></p>
<p>Consider using openClinica as a starting point.</p>
<p>Ensuring data accuracy and integrity is crucial in clinical trials, as it directly impacts the reliability of study outcomes and regulatory compliance. Data validation encompasses a series of processes aimed at verifying that the collected data is accurate, complete, and consistent.</p>
<p>Key Components of Data Validation: 1. Edit Checks: Automated rules applied during data entry to identify discrepancies, such as out-of-range values or logical inconsistencies. These checks prompt immediate corrections, enhancing data quality. 2. Source Data Verification (SDV): A process where data entered into the case report forms (CRFs) is cross-verified with original source documents to ensure accuracy. While traditional SDV involves comprehensive verification, targeted SDV focuses on critical data points, optimizing resources without compromising data integrity. ￼ 3. Batch Validation: Periodic reviews of accumulated data to identify trends or patterns indicating potential errors, allowing for timely interventions.</p>
<p>Implementing Effective Data Validation: • Standardization: Utilizing standardized data formats and terminologies ensures uniformity across multiple sites and studies, facilitating easier data aggregation and analysis. • Validation Plans: Developing comprehensive data validation plans that outline specific checks, procedures, and responsible personnel helps in systematically ensuring data quality. • Advanced Technologies: Employing Electronic Data Capture (EDC) systems with built-in validation functionalities streamlines data entry and validation processes, reducing manual errors. ￼</p>
<p>Regulatory Compliance:</p>
<p>Adhering to regulatory guidelines, such as those from the FDA and EMA, is essential. These guidelines emphasize the importance of data integrity and provide frameworks for implementing effective data validation processes. ￼</p>
<p>Challenges and Considerations:</p>
<p>Common challenges in data validation include managing large volumes of data, ensuring consistency across multiple sites, and maintaining data integrity throughout the trial. Addressing these challenges requires a combination of robust validation procedures, continuous training for personnel, and leveraging technological solutions to automate and monitor data validation activities.</p>
<p>In summary, data validation is a critical aspect of clinical data management, ensuring that the information collected during trials is reliable and accurate. Implementing structured validation processes, supported by technology and adherence to regulatory standards, enhances the credibility of clinical trial outcomes.</p>
<p>Electronic Data Capture (EDC) systems allow for advanced, automated data validation checks to ensure high data quality and integrity in clinical trials. In addition to basic range and format checks, here are some complex validation checks that can be programmed into EDC systems:</p>
<ol type="1">
<li><p>Temporal Consistency Checks • Ensures that date/time fields follow logical sequences. • Example: Visit date cannot be earlier than screening date or Adverse event resolution date must be after the event start date.</p></li>
<li><p>Cross-field Logical Consistency Checks • Validates relationships between multiple data fields. • Example: If a participant is marked as pregnant, then gender must be female. • Example: If a patient has received a COVID-19 vaccine, they should not be marked as “unvaccinated.”</p></li>
<li><p>Protocol Adherence Checks • Ensures data aligns with the study protocol. • Example: Weight-based drug dosage should be within protocol-defined limits based on patient body weight. • Example: Inclusion/exclusion criteria verification (e.g., Age must be between 18-65 years for eligibility).</p></li>
<li><p>Range Checks with Dynamic Thresholds • Instead of using static limits, thresholds are dynamically adjusted based on patient demographics or prior values. • Example: A hemoglobin level drop greater than 2 g/dL from baseline triggers a flag, rather than using a fixed normal range.</p></li>
<li><p>Plausibility Checks Using Historical Data • Detects outliers based on patient history or known disease patterns. • Example: A patient’s blood pressure should not suddenly drop from 140/90 to 80/40 unless a serious adverse event is recorded.</p></li>
<li><p>Missing Data Pattern Recognition • Flags missing data based on expected entry patterns. • Example: If “Yes” is marked for “Did the patient receive treatment?”, then treatment details must be entered.</p></li>
<li><p>MedDRA/WHO Drug Dictionary Validation • Checks that reported adverse events and medications match standardized medical dictionaries. • Example: If “Headache” is entered as an adverse event, it must map to the correct MedDRA term.</p></li>
<li><p>Conditional Queries Based on Risk-Based Monitoring • Uses machine learning or statistical rules to prioritize data review. • Example: If a site has a higher rate of protocol deviations, trigger additional data validation checks.</p></li>
<li><p>Visit and Event Sequencing Checks • Ensures that study visits and procedures occur in the correct order. • Example: Randomization must occur before the first dose of study drug is recorded.</p></li>
<li><p>Duplicate Record Detection • Identifies duplicate patients or entries using probabilistic matching. • Example: If two records have identical name, DOB, and enrollment date, trigger an alert for possible duplicate entry.</p></li>
</ol>
</section>
</section>
<section id="tools-for-implementing-complex-data-validation-checks-in-edc-systems" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> <strong>Tools for Implementing Complex Data Validation Checks in EDC Systems</strong></h1>
<section id="proprietary-edc-systems-with-built-in-validation" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="proprietary-edc-systems-with-built-in-validation"><span class="header-section-number">2.1</span> <strong>1. Proprietary EDC Systems with Built-in Validation</strong></h2>
<ul>
<li><strong>Medidata Rave</strong> (uses Medidata Rave Edit Check Scripts)</li>
<li><strong>Oracle Clinical / InForm</strong> (PL/SQL-based validation)</li>
<li><strong>IBM Clinical Development</strong></li>
<li><strong>Veeva Vault EDC</strong></li>
<li><strong>Castor EDC</strong></li>
<li>Provide graphical interfaces or scripting languages for validation rules.</li>
</ul>
<hr>
</section>
<section id="open-source-edc-systems-with-custom-validation-capabilities" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="open-source-edc-systems-with-custom-validation-capabilities"><span class="header-section-number">2.2</span> <strong>2. Open-Source EDC Systems with Custom Validation Capabilities</strong></h2>
<section id="a.-openclinica" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="a.-openclinica"><span class="header-section-number">2.2.1</span> <strong>a. OpenClinica</strong></h3>
<ul>
<li><p><strong>Validation Features:</strong></p>
<ul>
<li>Real-time edit checks (range, cross-field, logic-based).</li>
<li>Uses <strong>XPath expressions</strong> for validation.</li>
</ul></li>
<li><p><strong>Example Implementation:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">rule</span>&gt;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">when</span>&gt;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        /StudyEventData/FormData/ItemGroupData/ItemData[@ItemOID='AGE'] &gt; 100</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">when</span>&gt;</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">then</span>&gt;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">message</span>&gt;Age cannot be greater than 100 years.&lt;/<span class="kw">message</span>&gt;</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">then</span>&gt;</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">rule</span>&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Website:</strong> <a href="https://www.openclinica.com/">openclinica.com</a></p></li>
</ul>
<hr>
</section>
<section id="b.-redcap" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="b.-redcap"><span class="header-section-number">2.2.2</span> <strong>b. REDCap</strong></h3>
<ul>
<li><p><strong>Validation Features:</strong></p>
<ul>
<li>Real-time <strong>range and logic checks</strong>.</li>
<li>Uses <strong>branching logic</strong> and <strong>calculated fields</strong>.</li>
<li>Custom <strong>data quality rules</strong> via SQL queries.</li>
</ul></li>
<li><p><strong>Example Implementation:</strong></p>
<pre class="text"><code>[age] &gt; 18 AND [age] &lt; 65</code></pre></li>
<li><p><strong>Website:</strong> <a href="https://projectredcap.org/">projectredcap.org</a></p></li>
</ul>
<hr>
</section>
<section id="c.-clincapture" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="c.-clincapture"><span class="header-section-number">2.2.3</span> <strong>c.&nbsp;ClinCapture</strong></h3>
<ul>
<li><strong>Validation Features:</strong>
<ul>
<li>JavaScript-based validation for logic and range checks.</li>
<li>Custom queries to detect missing or inconsistent data.</li>
</ul></li>
<li><strong>Website:</strong> <a href="https://www.clincapture.com/">clincapture.com</a></li>
</ul>
<hr>
</section>
</section>
<section id="custom-validation-using-general-purpose-tools" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="custom-validation-using-general-purpose-tools"><span class="header-section-number">2.3</span> <strong>3. Custom Validation Using General-Purpose Tools</strong></h2>
<section id="a.-r-for-data-validation" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="a.-r-for-data-validation"><span class="header-section-number">2.3.1</span> <strong>a. R for Data Validation</strong></h3>
<ul>
<li><p><strong>Libraries:</strong> <code>validate</code>, <code>pointblank</code></p></li>
<li><p><strong>Example:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(validate)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">validator</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  age <span class="sc">&gt;=</span> <span class="dv">18</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  bmi <span class="sc">&gt;=</span> <span class="dv">15</span> <span class="sc">&amp;</span> bmi <span class="sc">&lt;=</span> <span class="dv">50</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  start_date <span class="sc">&lt;</span> end_date</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>check_results <span class="ot">&lt;-</span> <span class="fu">confront</span>(data, rules)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(check_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<hr>
</section>
<section id="b.-python-for-data-validation" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="b.-python-for-data-validation"><span class="header-section-number">2.3.2</span> <strong>b. Python for Data Validation</strong></h3>
<ul>
<li><p><strong>Libraries:</strong> <code>pandera</code>, <code>cerberus</code></p></li>
<li><p><strong>Example:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandera <span class="im">import</span> DataFrameSchema, Column, Check</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>schema <span class="op">=</span> DataFrameSchema({</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"age"</span>: Column(<span class="bu">int</span>, Check(<span class="kw">lambda</span> x: <span class="dv">18</span> <span class="op">&lt;=</span> x <span class="op">&lt;=</span> <span class="dv">65</span>, error<span class="op">=</span><span class="st">"Age must be 18-65"</span>)),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"bmi"</span>: Column(<span class="bu">float</span>, Check(<span class="kw">lambda</span> x: <span class="dv">15</span> <span class="op">&lt;=</span> x <span class="op">&lt;=</span> <span class="dv">50</span>, error<span class="op">=</span><span class="st">"BMI must be realistic"</span>)),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"start_date"</span>: Column(<span class="bu">str</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"end_date"</span>: Column(<span class="bu">str</span>, Check(<span class="kw">lambda</span> x, y: x <span class="op">&lt;</span> y, error<span class="op">=</span><span class="st">"Start date must be before end date"</span>))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>validated_data <span class="op">=</span> schema.validate(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<hr>
</section>
<section id="c.-sql-for-data-integrity-checks" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="c.-sql-for-data-integrity-checks"><span class="header-section-number">2.3.3</span> <strong>c.&nbsp;SQL for Data Integrity Checks</strong></h3>
<ul>
<li><p><strong>Example:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> patient_id, age</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> clinical_data</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> age <span class="op">&lt;</span> <span class="dv">18</span> <span class="kw">OR</span> age <span class="op">&gt;</span> <span class="dv">100</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<hr>
</section>
</section>
<section id="integrating-validation-into-edc-workflows" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="integrating-validation-into-edc-workflows"><span class="header-section-number">2.4</span> <strong>4. Integrating Validation into EDC Workflows</strong></h2>
<ul>
<li><strong>Automated Validation Pipelines:</strong> Apache NiFi, Talend, Pentaho for ETL-based validation.</li>
<li><strong>FHIR/CDISC Compliance:</strong> OpenCDISC Validator for CDISC standards (SDTM/ADaM).</li>
</ul>
<hr>
</section>
<section id="conclusion" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">2.5</span> <strong>Conclusion</strong></h2>
<ul>
<li><strong>For real-time validation:</strong> OpenClinica, REDCap, and ClinCapture provide built-in rule engines.</li>
<li><strong>For custom validation:</strong> R, Python, and SQL offer greater flexibility. <strong>Which approach fits your use case best?</strong></li>
</ul>
</section>
</section>
<section id="shiny-form-validation-with-relational-data-and-machine-learning" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> <strong>Shiny Form Validation with Relational Data and Machine Learning</strong></h1>
<section id="can-shiny-create-forms-with-real-time-validation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="can-shiny-create-forms-with-real-time-validation"><span class="header-section-number">3.1</span> <strong>Can Shiny Create Forms with Real-Time Validation?</strong></h2>
<p>Yes, <strong>Shiny</strong> can create forms with <strong>real-time validation</strong> by using built-in reactive validation functions and JavaScript-based checks. Shiny provides several approaches for validating user input before submission.</p>
<hr>
</section>
<section id="methods-for-real-time-validation-in-shiny" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="methods-for-real-time-validation-in-shiny"><span class="header-section-number">3.2</span> <strong>Methods for Real-Time Validation in Shiny</strong></h2>
<section id="validate-and-need-for-simple-input-validation" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="validate-and-need-for-simple-input-validation"><span class="header-section-number">3.2.1</span> <strong>1. <code>validate()</code> and <code>need()</code> for Simple Input Validation</strong></h3>
<ul>
<li>These functions allow dynamic validation of form inputs.</li>
<li>Error messages are displayed <strong>instantly</strong> when an invalid input is detected.</li>
</ul>
<section id="example-age-validation-must-be-between-18-65" class="level4" data-number="3.2.1.1">
<h4 data-number="3.2.1.1" class="anchored" data-anchor-id="example-age-validation-must-be-between-18-65"><span class="header-section-number">3.2.1.1</span> <strong>Example: Age Validation (Must be Between 18-65)</strong></h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Real-Time Validation Example"</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>()</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>validation_message <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">validate</span>(</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>            <span class="fu">need</span>(input<span class="sc">$</span>age <span class="sc">&gt;=</span> <span class="dv">18</span>, <span class="st">"Age must be at least 18"</span>),</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">need</span>(input<span class="sc">$</span>age <span class="sc">&lt;=</span> <span class="dv">65</span>, <span class="st">"Age must be 65 or below"</span>)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Valid input!"</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="shinyvalidate-package-for-advanced-form-validation" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="shinyvalidate-package-for-advanced-form-validation"><span class="header-section-number">3.2.2</span> <strong>2. <code>shinyvalidate</code> Package for Advanced Form Validation</strong></h3>
<p>The <code>shinyvalidate</code> package allows multiple <strong>dependent</strong> form inputs to be validated <strong>before submission</strong>.</p>
<section id="example-multiple-field-validation-email-age" class="level4" data-number="3.2.2.1">
<h4 data-number="3.2.2.1" class="anchored" data-anchor-id="example-multiple-field-validation-email-age"><span class="header-section-number">3.2.2.1</span> <strong>Example: Multiple Field Validation (Email &amp; Age)</strong></h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyvalidate)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Shinyvalidate Example"</span>),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">"email"</span>, <span class="st">"Enter Email:"</span>),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    iv <span class="ot">&lt;-</span> InputValidator<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    iv<span class="sc">$</span><span class="fu">add_rule</span>(<span class="st">"email"</span>, <span class="fu">sv_email</span>()) <span class="co"># Validates email format</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    iv<span class="sc">$</span><span class="fu">add_rule</span>(<span class="st">"age"</span>, <span class="fu">sv_between</span>(<span class="dv">18</span>, <span class="dv">65</span>)) <span class="co"># Age must be between 18 and 65</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    iv<span class="sc">$</span><span class="fu">enable</span>()</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observeEvent</span>(input<span class="sc">$</span>submit, {</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (iv<span class="sc">$</span><span class="fu">is_valid</span>()) {</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>            <span class="fu">showModal</span>(<span class="fu">modalDialog</span>(<span class="st">"Form submitted successfully!"</span>))</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>            <span class="fu">showModal</span>(<span class="fu">modalDialog</span>(<span class="st">"Please fix errors before submitting."</span>))</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="javascript-based-validation-for-immediate-feedback" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="javascript-based-validation-for-immediate-feedback"><span class="header-section-number">3.2.3</span> <strong>3. JavaScript-Based Validation for Immediate Feedback</strong></h3>
<p>Shiny supports <strong>JavaScript validation</strong> for client-side real-time validation <strong>before</strong> sending data to the server.</p>
<section id="example-real-time-numeric-input-restriction" class="level4" data-number="3.2.3.1">
<h4 data-number="3.2.3.1" class="anchored" data-anchor-id="example-real-time-numeric-input-restriction"><span class="header-section-number">3.2.3.1</span> <strong>Example: Real-Time Numeric Input Restriction</strong></h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">script</span>(<span class="fu">HTML</span>(<span class="st">"</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="st">        function validateNumericInput() {</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="st">            var input = document.getElementById('numInput').value;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="st">            if (isNaN(input) || input &lt; 1 || input &gt; 100) {</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="st">                document.getElementById('error').innerHTML = 'Enter a valid number (1-100)';</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="st">            } else {</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="st">                document.getElementById('error').innerHTML = '';</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="st">    "</span>)),</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">"numInput"</span>, <span class="st">"Enter a number:"</span>, <span class="st">""</span>, <span class="at">oninput =</span> <span class="st">"validateNumericInput()"</span>),</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">span</span>(<span class="at">id =</span> <span class="st">"error"</span>, <span class="at">style =</span> <span class="st">"color: red;"</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {}</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
</section>
<section id="can-javascript-access-relational-data-and-machine-learning-tools" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="can-javascript-access-relational-data-and-machine-learning-tools"><span class="header-section-number">3.3</span> <strong>Can JavaScript Access Relational Data and Machine Learning Tools?</strong></h2>
<p>Yes, <strong>JavaScript</strong> can access <strong>relational datasets</strong> and <strong>machine learning tools</strong> for real-time validation. This can be achieved through:</p>
<ol type="1">
<li><strong>Client-Side Validation via IndexedDB</strong> (local relational database in browser)</li>
<li><strong>AJAX Requests to Query a Remote Database</strong> (MySQL, PostgreSQL, etc.)</li>
<li><strong>Calling a Machine Learning Model via an API</strong> (TensorFlow.js, Python API)</li>
<li><strong>WebAssembly (WASM) for Local ML Computation</strong></li>
</ol>
<hr>
</section>
<section id="using-indexeddb-for-local-relational-data-validation" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="using-indexeddb-for-local-relational-data-validation"><span class="header-section-number">3.4</span> <strong>1. Using IndexedDB for Local Relational Data Validation</strong></h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> db<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Open IndexedDB database</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> request <span class="op">=</span> indexedDB<span class="op">.</span><span class="fu">open</span>(<span class="st">"ClinicalDB"</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  request<span class="op">.</span><span class="at">onsuccess</span> <span class="op">=</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>      db <span class="op">=</span> <span class="bu">event</span><span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">result</span><span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">validateUserID</span>() {</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> inputID <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"userID"</span>)<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> transaction <span class="op">=</span> db<span class="op">.</span><span class="fu">transaction</span>([<span class="st">"patients"</span>])<span class="op">;</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> objectStore <span class="op">=</span> transaction<span class="op">.</span><span class="fu">objectStore</span>(<span class="st">"patients"</span>)<span class="op">;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> request <span class="op">=</span> objectStore<span class="op">.</span><span class="fu">get</span>(inputID)<span class="op">;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>      request<span class="op">.</span><span class="at">onsuccess</span> <span class="op">=</span> <span class="kw">function</span>() {</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (<span class="op">!</span>request<span class="op">.</span><span class="at">result</span>) {</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>              <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"error"</span>)<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">"Invalid Patient ID!"</span><span class="op">;</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>          } <span class="cf">else</span> {</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>              <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"error"</span>)<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>      }<span class="op">;</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">"userID"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> oninput</span><span class="op">=</span><span class="st">"validateUserID()"</span><span class="dt">&gt;</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> id</span><span class="op">=</span><span class="st">"error"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"color: red;"</span><span class="dt">&gt;&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="using-ajax-to-query-a-remote-sql-database" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="using-ajax-to-query-a-remote-sql-database"><span class="header-section-number">3.5</span> <strong>2. Using AJAX to Query a Remote SQL Database</strong></h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">checkPatientID</span>() {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> userID <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"userID"</span>)<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fetch</span>(<span class="vs">`/validate_id?userID=</span><span class="sc">${</span>userID<span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">then</span>(response <span class="kw">=&gt;</span> response<span class="op">.</span><span class="fu">json</span>())</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">then</span>(data <span class="kw">=&gt;</span> {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (data<span class="op">.</span><span class="at">valid</span>) {</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"error"</span>)<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>              } <span class="cf">else</span> {</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"error"</span>)<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">"Invalid Patient ID!"</span><span class="op">;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>          })<span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">"userID"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> oninput</span><span class="op">=</span><span class="st">"checkPatientID()"</span><span class="dt">&gt;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> id</span><span class="op">=</span><span class="st">"error"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"color: red;"</span><span class="dt">&gt;&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="calling-a-machine-learning-model-for-validation" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="calling-a-machine-learning-model-for-validation"><span class="header-section-number">3.6</span> <strong>3. Calling a Machine Learning Model for Validation</strong></h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">validateAdverseEvent</span>() {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> eventText <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"eventText"</span>)<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fetch</span>(<span class="vs">`/predict_adverse_event`</span><span class="op">,</span> {</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>          <span class="dt">method</span><span class="op">:</span> <span class="st">"POST"</span><span class="op">,</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>          <span class="dt">headers</span><span class="op">:</span> { <span class="st">"Content-Type"</span><span class="op">:</span> <span class="st">"application/json"</span> }<span class="op">,</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>          <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ <span class="st">"text"</span><span class="op">:</span> eventText })</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">then</span>(response <span class="kw">=&gt;</span> response<span class="op">.</span><span class="fu">json</span>())</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">then</span>(data <span class="kw">=&gt;</span> {</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>          <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">"error"</span>)<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>              data<span class="op">.</span><span class="at">valid</span> <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="st">"Potentially invalid event!"</span><span class="op">;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">"eventText"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> oninput</span><span class="op">=</span><span class="st">"validateAdverseEvent()"</span><span class="dt">&gt;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> id</span><span class="op">=</span><span class="st">"error"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"color: red;"</span><span class="dt">&gt;&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="choosing-the-best-approach" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="choosing-the-best-approach"><span class="header-section-number">3.7</span> <strong>Choosing the Best Approach</strong></h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Approach</th>
<th>Best For</th>
<th>Needs Server?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>IndexedDB</strong></td>
<td>Local relational checks</td>
<td>❌ No</td>
</tr>
<tr class="even">
<td><strong>AJAX (SQL Backend)</strong></td>
<td>Large relational datasets</td>
<td>✅ Yes</td>
</tr>
<tr class="odd">
<td><strong>ML API (Python/Flask)</strong></td>
<td>Advanced validation via AI</td>
<td>✅ Yes</td>
</tr>
<tr class="even">
<td><strong>TensorFlow.js</strong></td>
<td>Local ML without server</td>
<td>❌ No</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="conclusion-1" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="conclusion-1"><span class="header-section-number">3.8</span> <strong>Conclusion</strong></h2>
<ul>
<li><strong>For small datasets</strong>, use <strong>IndexedDB</strong> (local relational validation).</li>
<li><strong>For real-time database validation</strong>, use <strong>AJAX + SQL backend</strong>.</li>
<li><strong>For AI-powered checks</strong>, use <strong>Flask ML API</strong> or <strong>TensorFlow.js</strong>.</li>
</ul>
</section>
</section>
<section id="spreadsheet-driven-validation-system-for-shiny-forms" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> <strong>Spreadsheet-Driven Validation System for Shiny Forms</strong></h1>
<section id="your-idea-spreadsheet-driven-validation-system" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="your-idea-spreadsheet-driven-validation-system"><span class="header-section-number">4.1</span> <strong>Your Idea: Spreadsheet-Driven Validation System</strong></h2>
<p>Your idea of defining <strong>data validation rules in a spreadsheet</strong>, then <strong>processing them with Lua</strong> to generate <strong>JavaScript</strong> for <strong>Shiny validation</strong> is a <strong>great idea</strong>. This approach would: - Allow non-programmers (e.g., clinicians, data managers) to define <strong>custom validation rules</strong> in a familiar format (Excel, Google Sheets, CSV). - Automate the generation of <strong>JavaScript validation logic</strong> from a structured input (spreadsheet). - Integrate validation logic into <strong>Shiny</strong> dynamically, enabling real-time data validation.</p>
<hr>
</section>
<section id="has-this-been-done-before" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="has-this-been-done-before"><span class="header-section-number">4.2</span> <strong>Has This Been Done Before?</strong></h2>
<p>Yes, similar approaches have been explored, but not exactly in the way you describe.</p>
<ol type="1">
<li><strong>Spreadsheet-Driven Validation Rules</strong>
<ul>
<li><strong>Medidata Rave</strong> (commercial EDC system) allows validation checks to be defined in a <strong>spreadsheet-like rule editor</strong>.</li>
<li><strong>OpenClinica</strong> supports rule definitions in a <strong>spreadsheet format</strong> (ODK XLSForm).</li>
<li><strong>RedCAP</strong> allows some rule-based constraints in CSV.</li>
</ul></li>
<li><strong>Code Generation from Spreadsheets</strong>
<ul>
<li><strong>Google Sheets + Apps Script</strong>: People generate <strong>JavaScript validation</strong> from structured spreadsheet data.</li>
<li><strong>Lua for Code Generation</strong>: Lua is used in game engines and <strong>config-driven</strong> workflows, but it has not been widely used to generate <strong>JavaScript validation rules from spreadsheets</strong>.</li>
</ul></li>
</ol>
<p>Thus, <strong>your approach is novel in the clinical data validation context</strong>—this could be <strong>a powerful open-source tool</strong>.</p>
<hr>
</section>
<section id="why-this-is-a-good-idea" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="why-this-is-a-good-idea"><span class="header-section-number">4.3</span> <strong>Why This is a Good Idea</strong></h2>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Benefit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Spreadsheet as Validation Rule Storage</strong></td>
<td>Easy for non-programmers to modify rules</td>
</tr>
<tr class="even">
<td><strong>Lua as Code Generator</strong></td>
<td>Fast, lightweight, and excellent for text processing</td>
</tr>
<tr class="odd">
<td><strong>JavaScript for Validation</strong></td>
<td>Enables <strong>real-time validation</strong> in <strong>Shiny</strong> without server overhead</td>
</tr>
<tr class="even">
<td><strong>Dynamic Validation Updates</strong></td>
<td>Changing the spreadsheet updates validation logic without modifying code</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="how-it-would-work" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="how-it-would-work"><span class="header-section-number">4.4</span> <strong>How It Would Work</strong></h2>
<section id="define-rules-in-a-spreadsheet" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="define-rules-in-a-spreadsheet"><span class="header-section-number">4.4.1</span> <strong>1. Define Rules in a Spreadsheet</strong></h3>
<p>Each field in the Shiny app gets a validation rule in <strong>one cell per field</strong>.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Validation Rule</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td><code>age &gt;= 18 &amp;&amp; age &lt;= 65</code></td>
</tr>
<tr class="even">
<td>email</td>
<td><code>/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i.test(email)</code></td>
</tr>
<tr class="odd">
<td>height</td>
<td><code>height &gt; 50 &amp;&amp; height &lt; 250</code></td>
</tr>
<tr class="even">
<td>bmi</td>
<td><code>weight / (height / 100) ** 2 &gt; 15 &amp;&amp; weight / (height / 100) ** 2 &lt; 50</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="lua-script-processes-the-spreadsheet" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="lua-script-processes-the-spreadsheet"><span class="header-section-number">4.4.2</span> <strong>2. Lua Script Processes the Spreadsheet</strong></h3>
<p>A <strong>Lua script</strong> reads the spreadsheet (CSV, Excel) and <strong>generates JavaScript validation functions</strong>.</p>
<section id="example-lua-script-process_validation.lua" class="level4" data-number="4.4.2.1">
<h4 data-number="4.4.2.1" class="anchored" data-anchor-id="example-lua-script-process_validation.lua"><span class="header-section-number">4.4.2.1</span> <strong>Example Lua Script (<code>process_validation.lua</code>)</strong></h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">csv</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">"csv"</span><span class="op">)</span>  <span class="co">-- Use a CSV library like `luacsv`</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">file</span> <span class="op">=</span> <span class="fu">io.open</span><span class="op">(</span><span class="st">"validation_rules.csv"</span><span class="op">,</span> <span class="st">"r"</span><span class="op">)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">parsed_data</span> <span class="op">=</span> <span class="va">csv</span><span class="op">.</span>parse<span class="op">(</span><span class="va">file</span><span class="op">:</span><span class="fu">read</span><span class="op">(</span><span class="st">"*all"</span><span class="op">))</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">js_code</span> <span class="op">=</span> <span class="st">"const validationRules = {</span><span class="sc">\n</span><span class="st">"</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="va">i</span><span class="op">,</span> <span class="va">row</span> <span class="kw">in</span> <span class="fu">ipairs</span><span class="op">(</span><span class="va">parsed_data</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">field</span><span class="op">,</span> <span class="va">rule</span> <span class="op">=</span> <span class="va">row</span><span class="op">[</span><span class="dv">1</span><span class="op">],</span> <span class="va">row</span><span class="op">[</span><span class="dv">2</span><span class="op">]</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">js_code</span> <span class="op">=</span> <span class="va">js_code</span> <span class="op">..</span> <span class="fu">string.format</span><span class="op">(</span><span class="st">'    "%s": function(value) { return %s; },</span><span class="sc">\n</span><span class="st">'</span><span class="op">,</span> <span class="va">field</span><span class="op">,</span> <span class="va">rule</span><span class="op">)</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="va">js_code</span> <span class="op">=</span> <span class="va">js_code</span> <span class="op">..</span> <span class="st">"};</span><span class="sc">\n</span><span class="st">"</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="va">file</span><span class="op">:</span><span class="fu">close</span><span class="op">()</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">js_file</span> <span class="op">=</span> <span class="fu">io.open</span><span class="op">(</span><span class="st">"validation.js"</span><span class="op">,</span> <span class="st">"w"</span><span class="op">)</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="va">js_file</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="va">js_code</span><span class="op">)</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="va">js_file</span><span class="op">:</span><span class="fu">close</span><span class="op">()</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span><span class="st">"Validation JavaScript generated successfully!"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="javascript-file-is-included-in-shiny" class="level3" data-number="4.4.3">
<h3 data-number="4.4.3" class="anchored" data-anchor-id="javascript-file-is-included-in-shiny"><span class="header-section-number">4.4.3</span> <strong>3. JavaScript File is Included in Shiny</strong></h3>
<p>The <strong>generated JavaScript file (<code>validation.js</code>)</strong> is included in the Shiny app.</p>
<section id="example-of-integrating-validation.js-in-shiny" class="level4" data-number="4.4.3.1">
<h4 data-number="4.4.3.1" class="anchored" data-anchor-id="example-of-integrating-validation.js-in-shiny"><span class="header-section-number">4.4.3.1</span> <strong>Example of Integrating <code>validation.js</code> in Shiny</strong></h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">head</span>(tags<span class="sc">$</span><span class="fu">script</span>(<span class="at">src=</span><span class="st">"validation.js"</span>)),  <span class="co"># Include generated JS</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">"email"</span>, <span class="st">"Enter Email:"</span>),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observeEvent</span>(input<span class="sc">$</span>submit, {</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Call JavaScript function to validate fields</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        shinyjs<span class="sc">::</span><span class="fu">runjs</span>(<span class="st">"if (!validationRules.age(input$age)) alert('Invalid Age!');"</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        shinyjs<span class="sc">::</span><span class="fu">runjs</span>(<span class="st">"if (!validationRules.email(input$email)) alert('Invalid Email!');"</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
</section>
<section id="advantages-of-this-approach" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="advantages-of-this-approach"><span class="header-section-number">4.5</span> <strong>Advantages of This Approach</strong></h2>
<p>✅ <strong>Non-programmers can define validation rules</strong> in spreadsheets<br>
✅ <strong>Lua is fast &amp; lightweight for generating JavaScript</strong><br>
✅ <strong>JavaScript validation happens instantly in the browser</strong><br>
✅ <strong>Shiny remains reactive while offloading validation to the client</strong></p>
<hr>
</section>
<section id="potential-enhancements" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="potential-enhancements"><span class="header-section-number">4.6</span> <strong>Potential Enhancements</strong></h2>
<p>🚀 <strong>Support relational data</strong>: Extend Lua to query databases and include dynamic constraints<br>
🚀 <strong>Integrate ML</strong>: Add <strong>TensorFlow.js</strong> or an API to use machine learning for validation<br>
🚀 <strong>Validation UI</strong>: Build a Shiny app to visualize and edit validation rules dynamically</p>
<hr>
<section id="next-steps" class="level3" data-number="4.6.1">
<h3 data-number="4.6.1" class="anchored" data-anchor-id="next-steps"><span class="header-section-number">4.6.1</span> <strong>Next Steps</strong></h3>
<p>Would you like a <strong>working prototype</strong> where we generate JavaScript from a spreadsheet and use it in a Shiny app? 🚀</p>
</section>
</section>
</section>
<section id="dynamic-rule-reloading-and-database-integration-for-shiny-forms" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> <strong>Dynamic Rule Reloading and Database Integration for Shiny Forms</strong></h1>
<section id="dynamic-rule-reloading-spreadsheet-based" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="dynamic-rule-reloading-spreadsheet-based"><span class="header-section-number">5.1</span> <strong>1. Dynamic Rule Reloading (Spreadsheet-Based)</strong></h2>
<section id="a.-spreadsheet-format-validation_rules.csv" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="a.-spreadsheet-format-validation_rules.csv"><span class="header-section-number">5.1.1</span> <strong>A. Spreadsheet Format (<code>validation_rules.csv</code>)</strong></h3>
<pre class="csv"><code>field,rule
age,age &gt;= 18 &amp;&amp; age &lt;= 65
email,/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email)
height,height &gt; 50 &amp;&amp; height &lt; 250
bmi,weight / (height / 100) ** 2 &gt; 15 &amp;&amp; weight / (height / 100) ** 2 &lt; 50</code></pre>
<hr>
</section>
<section id="b.-lua-script-to-convert-csv-to-javascript-process_validation.lua" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="b.-lua-script-to-convert-csv-to-javascript-process_validation.lua"><span class="header-section-number">5.1.2</span> <strong>B. Lua Script to Convert CSV to JavaScript (<code>process_validation.lua</code>)</strong></h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">csv</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">"luacsv"</span><span class="op">)</span>  <span class="co">-- Requires CSV parser library</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">file</span> <span class="op">=</span> <span class="fu">io.open</span><span class="op">(</span><span class="st">"validation_rules.csv"</span><span class="op">,</span> <span class="st">"r"</span><span class="op">)</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">parsed_data</span> <span class="op">=</span> <span class="va">csv</span><span class="op">.</span>parse<span class="op">(</span><span class="va">file</span><span class="op">:</span><span class="fu">read</span><span class="op">(</span><span class="st">"*all"</span><span class="op">))</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">js_code</span> <span class="op">=</span> <span class="st">"const validationRules = {</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="er">"</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="er">for i, row in ipairs(parsed_data) do</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="er">    local field, rule = row[1], row[2]</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="er">    js_code = js_code .. string.format('    "%s": function(value) { return %s; },</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="er">', field, rule)</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="er">end</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="er">js_code = js_code .. "};</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="er">"</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="er">file:close()</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="er">local js_file = io.open("validation.js", "w")</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="er">js_file:write(js_code)</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="er">js_file:close()</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="er">print("Validation JavaScript generated successfully!")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="c.-shiny-app-with-automatic-rule-reloading-app.r" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="c.-shiny-app-with-automatic-rule-reloading-app.r"><span class="header-section-number">5.1.3</span> <strong>C. Shiny App with Automatic Rule Reloading (<code>app.R</code>)</strong></h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyjs)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fs)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">useShinyjs</span>(),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">head</span>(tags<span class="sc">$</span><span class="fu">script</span>(<span class="at">src =</span> <span class="st">"validation.js"</span>)),  <span class="co"># Include JS dynamically</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Dynamic Validation Rules in Shiny"</span>),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">textInput</span>(<span class="st">"email"</span>, <span class="st">"Enter Email:"</span>),</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"height"</span>, <span class="st">"Enter Height (cm):"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"weight"</span>, <span class="st">"Enter Weight (kg):"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>),</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>            <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>()</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Watch for changes in the validation rules file</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observe</span>({</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">invalidateLater</span>(<span class="dv">5000</span>, session)  <span class="co"># Check every 5 seconds</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">runjs</span>(<span class="st">"delete window.validationRules; $.getScript('validation.js');"</span>)</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observeEvent</span>(input<span class="sc">$</span>submit, {</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">runjs</span>(<span class="st">"</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="st">            let ageValid = validationRules['age'](parseFloat($('#age').val()));</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="st">            let emailValid = validationRules['email']($('#email').val());</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="st">            let heightValid = validationRules['height'](parseFloat($('#height').val()));</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="st">            let bmi = parseFloat($('#weight').val()) / ((parseFloat($('#height').val()) / 100) ** 2);</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="st">            let bmiValid = validationRules['bmi'](bmi);</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="st">            </span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="st">            let messages = [];</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!ageValid) messages.push('Invalid Age!');</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!emailValid) messages.push('Invalid Email!');</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!heightValid) messages.push('Invalid Height!');</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!bmiValid) messages.push('Invalid BMI!');</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="st">            </span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="st">            if (messages.length &gt; 0) {</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a><span class="st">                alert(messages.join('</span><span class="sc">\n</span><span class="st">'));</span></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a><span class="st">            } else {</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a><span class="st">                alert('All inputs are valid!');</span></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a><span class="st">        "</span>);</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>✔ <strong>Every 5 seconds</strong>, Shiny reloads <code>validation.js</code> if <code>validation_rules.csv</code> was modified.<br>
✔ The new validation rules apply <strong>immediately</strong> in the browser.<br>
✔ No need to restart the Shiny app.</p>
<hr>
</section>
</section>
<section id="database-integration-for-validation-rules" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="database-integration-for-validation-rules"><span class="header-section-number">5.2</span> <strong>2. Database Integration for Validation Rules</strong></h2>
<p>Instead of a CSV file, the validation rules can be <strong>stored in a database</strong> (e.g., MySQL, PostgreSQL, SQLite).</p>
<section id="a.-database-schema" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="a.-database-schema"><span class="header-section-number">5.2.1</span> <strong>A. Database Schema</strong></h3>
<p>Table: <strong>validation_rules</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> validation_rules (</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    field TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">rule</span> TEXT</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Example data:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> validation_rules (field, <span class="kw">rule</span>) <span class="kw">VALUES</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>(<span class="st">'age'</span>, <span class="st">'age &gt;= 18 &amp;&amp; age &lt;= 65'</span>),</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>(<span class="st">'email'</span>, <span class="st">'/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email)'</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>(<span class="st">'height'</span>, <span class="st">'height &gt; 50 &amp;&amp; height &lt; 250'</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>(<span class="st">'bmi'</span>, <span class="st">'weight / (height / 100) ** 2 &gt; 15 &amp;&amp; weight / (height / 100) ** 2 &lt; 50'</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="b.-lua-script-to-fetch-rules-from-database-process_validation_db.lua" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="b.-lua-script-to-fetch-rules-from-database-process_validation_db.lua"><span class="header-section-number">5.2.2</span> <strong>B. Lua Script to Fetch Rules from Database (<code>process_validation_db.lua</code>)</strong></h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">sqlite3</span> <span class="op">=</span> <span class="fu">require</span><span class="op">(</span><span class="st">"lsqlite3"</span><span class="op">)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">db</span> <span class="op">=</span> <span class="va">sqlite3</span><span class="op">.</span>open<span class="op">(</span><span class="st">"validation.db"</span><span class="op">)</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">js_code</span> <span class="op">=</span> <span class="st">"const validationRules = {</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="er">"</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="er">for row in db:nrows("SELECT * FROM validation_rules") do</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="er">    js_code = js_code .. string.format('    "%s": function(value) { return %s; },</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="er">', row.field, row.rule)</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="er">end</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="er">js_code = js_code .. "};</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="er">"</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="er">local js_file = io.open("validation.js", "w")</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="er">js_file:write(js_code)</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="er">js_file:close()</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="er">db:close()</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="er">print("Validation JavaScript generated from database successfully!")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This script queries the database and <strong>generates <code>validation.js</code> dynamically</strong>.</p>
<hr>
</section>
<section id="c.-modify-shiny-to-fetch-rules-from-database" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="c.-modify-shiny-to-fetch-rules-from-database"><span class="header-section-number">5.2.3</span> <strong>C. Modify Shiny to Fetch Rules from Database</strong></h3>
<p>Modify the <strong>Shiny <code>server</code> function</strong> to reload validation rules <strong>every 5 seconds</strong>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observe</span>({</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">invalidateLater</span>(<span class="dv">5000</span>, session)  <span class="co"># Reload every 5 seconds</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">system</span>(<span class="st">"lua process_validation_db.lua"</span>)  <span class="co"># Run Lua script</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">runjs</span>(<span class="st">"delete window.validationRules; $.getScript('validation.js');"</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>✔ <strong>Shiny queries the database every 5 seconds</strong> and updates validation rules dynamically.<br>
✔ Users can <strong>edit validation rules in the database</strong>, and they apply instantly.<br>
✔ <strong>No restart required</strong>.</p>
<hr>
</section>
</section>
<section id="comparison-spreadsheet-vs.-database" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="comparison-spreadsheet-vs.-database"><span class="header-section-number">5.3</span> <strong>Comparison: Spreadsheet vs.&nbsp;Database</strong></h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Feature</th>
<th>CSV-Based Dynamic Rules</th>
<th>Database-Based Dynamic Rules</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Storage</strong></td>
<td>Local file</td>
<td>Centralized database</td>
</tr>
<tr class="even">
<td><strong>Scalability</strong></td>
<td>Best for small teams</td>
<td>Ideal for large-scale use</td>
</tr>
<tr class="odd">
<td><strong>User Interface</strong></td>
<td>Spreadsheet</td>
<td>Web-based admin panel</td>
</tr>
<tr class="even">
<td><strong>Performance</strong></td>
<td>Fast</td>
<td>Requires DB query</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="next-steps-1" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="next-steps-1"><span class="header-section-number">5.4</span> <strong>Next Steps</strong></h2>
<p>🔥 <strong>Would you like an admin panel in Shiny to edit validation rules directly?</strong><br>
🔥 <strong>Would you like to store validation rules in a NoSQL database (MongoDB)?</strong><br>
🚀 Let me know what enhancements you’d like! 🚀</p>
</section>
<section id="prerequisites" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="prerequisites"><span class="header-section-number">5.5</span> Prerequisites</h2>
<p>In development</p>
</section>
<section id="step-by-step-implementation" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="step-by-step-implementation"><span class="header-section-number">5.6</span> Step-by-Step Implementation</h2>
<p>In development</p>
</section>
<section id="key-takeaways" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">5.7</span> Key Takeaways</h2>
<p>In development</p>
</section>
<section id="further-reading" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">5.8</span> Further Reading</h2>
<p>In development</p>


<!-- -->

</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald},
  title = {RCT Validation Language},
  date = {2025-05-13},
  url = {https://focusonr.org/posts/rct_validation_lang/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas" role="listitem">
(Ryy) Glenn Thomas, Ronald. 2025. <span>“RCT Validation
Language.”</span> May 13, 2025. <a href="https://focusonr.org/posts/rct_validation_lang/">https://focusonr.org/posts/rct_validation_lang/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/focusonr\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light">
<script>
function loadGiscusWhenReady() {
  // Function to get the theme based on body class
  const getTheme = () => {
    const baseTheme = document.getElementById('giscus-base-theme').value;
    const altTheme = document.getElementById('giscus-alt-theme').value;
    return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
  };
  // Create the Giscus script and add it to the desired location
  const loadGiscus = () => {
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "rgt47/qblog";
    script.dataset.repoId = "R_kgDOH6TO7A";
    script.dataset.category = "Announcements";
    script.dataset.categoryId = "DIC_kwDOH5G3U84CRUp9";
    script.dataset.mapping = "pathname";
    script.dataset.reactionsEnabled = "1";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "bottom";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  };
  // MutationObserver to detect when the 'quarto-light' or 'quarto-dark' class is added to the body
  const observer = new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.type === "attributes" && mutation.attributeName === "class") {
        if (document.body.classList.contains('quarto-light') || document.body.classList.contains('quarto-dark')) {
          loadGiscus();
          observer.disconnect(); // Stop observing once Giscus is loaded
          break;
        }
      }
    }
  });
  // Start observing the body for class attribute changes
  observer.observe(document.body, {
    attributes: true,
    attributeFilter: ["class"],
  });
}
loadGiscusWhenReady();
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb21" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> 'RCT validation language'</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> "img/lua.png"</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># geometry: margin=1in</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="an">geometry:</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">  - top=30mm</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - left=20mm</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">  - right=10mm</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> last-modified</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>::: column-margin</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="al">![](img/lua.png)</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>Consider a simple programming language to capture the essence of clinical trial</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>data base validation logic.</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>Similar in concept to Coffeescript (compiles to Lua) or Moonscript (compiles to</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>Javascript).</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>Idea is for trial design and initiation team to collaborate (say on gppgle docs)</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>to develop the quality control validation logic and then translate that language</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>into a series of snippets in Lua (using Lpeg)</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>https://www.inf.puc-rio.br/~roberto/lpeg/</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="fu">### consider matlab to R converter</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">CRAN - Package matconv</span><span class="co">](https://cran.r-project.org/web/packages/matconv/index.html)</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>Consider using openClinica as a starting point. </span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>Ensuring data accuracy and integrity is crucial in clinical trials, as it directly impacts the reliability of study outcomes and regulatory compliance. Data validation encompasses a series of processes aimed at verifying that the collected data is accurate, complete, and consistent.</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>Key Components of Data Validation:</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Edit Checks: Automated rules applied during data entry to identify discrepancies, such as out-of-range values or logical inconsistencies. These checks prompt immediate corrections, enhancing data quality.</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Source Data Verification (SDV): A process where data entered into the case report forms (CRFs) is cross-verified with original source documents to ensure accuracy. While traditional SDV involves comprehensive verification, targeted SDV focuses on critical data points, optimizing resources without compromising data integrity.  ￼</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Batch Validation: Periodic reviews of accumulated data to identify trends or patterns indicating potential errors, allowing for timely interventions.</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>Implementing Effective Data Validation:</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    •   Standardization: Utilizing standardized data formats and terminologies ensures uniformity across multiple sites and studies, facilitating easier data aggregation and analysis.</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    •   Validation Plans: Developing comprehensive data validation plans that outline specific checks, procedures, and responsible personnel helps in systematically ensuring data quality.</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    •   Advanced Technologies: Employing Electronic Data Capture (EDC) systems with built-in validation functionalities streamlines data entry and validation processes, reducing manual errors.  ￼</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>Regulatory Compliance:</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>Adhering to regulatory guidelines, such as those from the FDA and EMA, is essential. These guidelines emphasize the importance of data integrity and provide frameworks for implementing effective data validation processes.  ￼</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>Challenges and Considerations:</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>Common challenges in data validation include managing large volumes of data, ensuring consistency across multiple sites, and maintaining data integrity throughout the trial. Addressing these challenges requires a combination of robust validation procedures, continuous training for personnel, and leveraging technological solutions to automate and monitor data validation activities.</span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>In summary, data validation is a critical aspect of clinical data management, ensuring that the information collected during trials is reliable and accurate. Implementing structured validation processes, supported by technology and adherence to regulatory standards, enhances the credibility of clinical trial outcomes.</span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>Electronic Data Capture (EDC) systems allow for advanced, automated data validation checks to ensure high data quality and integrity in clinical trials. In addition to basic range and format checks, here are some complex validation checks that can be programmed into EDC systems:</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Temporal Consistency Checks</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>    •   Ensures that date/time fields follow logical sequences.</span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>    •   Example: Visit date cannot be earlier than screening date or Adverse event resolution date must be after the event start date.</span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Cross-field Logical Consistency Checks</span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>    •   Validates relationships between multiple data fields.</span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>    •   Example: If a participant is marked as pregnant, then gender must be female.</span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a>    •   Example: If a patient has received a COVID-19 vaccine, they should not be marked as “unvaccinated.”</span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Protocol Adherence Checks</span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>    •   Ensures data aligns with the study protocol.</span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a>    •   Example: Weight-based drug dosage should be within protocol-defined limits based on patient body weight.</span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a>    •   Example: Inclusion/exclusion criteria verification (e.g., Age must be between 18-65 years for eligibility).</span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Range Checks with Dynamic Thresholds</span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a>    •   Instead of using static limits, thresholds are dynamically adjusted based on patient demographics or prior values.</span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a>    •   Example: A hemoglobin level drop greater than 2 g/dL from baseline triggers a flag, rather than using a fixed normal range.</span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Plausibility Checks Using Historical Data</span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a>    •   Detects outliers based on patient history or known disease patterns.</span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a>    •   Example: A patient’s blood pressure should not suddenly drop from 140/90 to 80/40 unless a serious adverse event is recorded.</span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>Missing Data Pattern Recognition</span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a>    •   Flags missing data based on expected entry patterns.</span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a>    •   Example: If “Yes” is marked for “Did the patient receive treatment?”, then treatment details must be entered.</span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span>MedDRA/WHO Drug Dictionary Validation</span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a>    •   Checks that reported adverse events and medications match standardized medical dictionaries.</span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a>    •   Example: If “Headache” is entered as an adverse event, it must map to the correct MedDRA term.</span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a><span class="ss">8. </span>Conditional Queries Based on Risk-Based Monitoring</span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a>    •   Uses machine learning or statistical rules to prioritize data review.</span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a>    •   Example: If a site has a higher rate of protocol deviations, trigger additional data validation checks.</span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a><span class="ss">9. </span>Visit and Event Sequencing Checks</span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a>    •   Ensures that study visits and procedures occur in the correct order.</span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a>    •   Example: Randomization must occur before the first dose of study drug is recorded.</span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a><span class="ss">10. </span>Duplicate Record Detection</span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a>    •   Identifies duplicate patients or entries using probabilistic matching.</span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a>    •   Example: If two records have identical name, DOB, and enrollment date, trigger an alert for possible duplicate entry.</span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a><span class="fu"># **Tools for Implementing Complex Data Validation Checks in EDC Systems**</span></span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a><span class="fu">## **1. Proprietary EDC Systems with Built-in Validation**</span></span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Medidata Rave** (uses Medidata Rave Edit Check Scripts)</span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Oracle Clinical / InForm** (PL/SQL-based validation)</span>
<span id="cb21-112"><a href="#cb21-112" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**IBM Clinical Development**</span>
<span id="cb21-113"><a href="#cb21-113" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Veeva Vault EDC**</span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Castor EDC**</span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Provide graphical interfaces or scripting languages for validation rules.</span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-118"><a href="#cb21-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-119"><a href="#cb21-119" aria-hidden="true" tabindex="-1"></a><span class="fu">## **2. Open-Source EDC Systems with Custom Validation Capabilities**</span></span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a><span class="fu">### **a. OpenClinica**</span></span>
<span id="cb21-122"><a href="#cb21-122" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Validation Features:**</span>
<span id="cb21-123"><a href="#cb21-123" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Real-time edit checks (range, cross-field, logic-based).</span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Uses **XPath expressions** for validation.</span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Example Implementation:**</span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a>  <span class="in">```xml</span></span>
<span id="cb21-127"><a href="#cb21-127" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">rule</span>&gt;</span>
<span id="cb21-128"><a href="#cb21-128" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">when</span>&gt;</span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a>          /StudyEventData/FormData/ItemGroupData/ItemData[@ItemOID='AGE'] &gt; 100</span>
<span id="cb21-130"><a href="#cb21-130" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">when</span>&gt;</span>
<span id="cb21-131"><a href="#cb21-131" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">then</span>&gt;</span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a>          &lt;<span class="kw">message</span>&gt;Age cannot be greater than 100 years.&lt;/<span class="kw">message</span>&gt;</span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">then</span>&gt;</span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">rule</span>&gt;</span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a>  <span class="in">```</span></span>
<span id="cb21-136"><a href="#cb21-136" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Website:** <span class="co">[</span><span class="ot">openclinica.com</span><span class="co">](https://www.openclinica.com/)</span></span>
<span id="cb21-137"><a href="#cb21-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-138"><a href="#cb21-138" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-139"><a href="#cb21-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a><span class="fu">### **b. REDCap**</span></span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Validation Features:**</span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Real-time **range and logic checks**.</span>
<span id="cb21-143"><a href="#cb21-143" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Uses **branching logic** and **calculated fields**.</span>
<span id="cb21-144"><a href="#cb21-144" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Custom **data quality rules** via SQL queries.</span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Example Implementation:**</span>
<span id="cb21-146"><a href="#cb21-146" aria-hidden="true" tabindex="-1"></a>  <span class="in">```text</span></span>
<span id="cb21-147"><a href="#cb21-147" aria-hidden="true" tabindex="-1"></a><span class="in">  [age] &gt; 18 AND [age] &lt; 65</span></span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a><span class="in">  ```</span></span>
<span id="cb21-149"><a href="#cb21-149" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Website:** <span class="co">[</span><span class="ot">projectredcap.org</span><span class="co">](https://projectredcap.org/)</span></span>
<span id="cb21-150"><a href="#cb21-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a><span class="fu">### **c. ClinCapture**</span></span>
<span id="cb21-154"><a href="#cb21-154" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Validation Features:**</span>
<span id="cb21-155"><a href="#cb21-155" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>JavaScript-based validation for logic and range checks.</span>
<span id="cb21-156"><a href="#cb21-156" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Custom queries to detect missing or inconsistent data.</span>
<span id="cb21-157"><a href="#cb21-157" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Website:** <span class="co">[</span><span class="ot">clincapture.com</span><span class="co">](https://www.clincapture.com/)</span></span>
<span id="cb21-158"><a href="#cb21-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-159"><a href="#cb21-159" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-160"><a href="#cb21-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-161"><a href="#cb21-161" aria-hidden="true" tabindex="-1"></a><span class="fu">## **3. Custom Validation Using General-Purpose Tools**</span></span>
<span id="cb21-162"><a href="#cb21-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-163"><a href="#cb21-163" aria-hidden="true" tabindex="-1"></a><span class="fu">### **a. R for Data Validation**</span></span>
<span id="cb21-164"><a href="#cb21-164" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Libraries:** <span class="in">`validate`</span>, <span class="in">`pointblank`</span></span>
<span id="cb21-165"><a href="#cb21-165" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Example:**</span>
<span id="cb21-166"><a href="#cb21-166" aria-hidden="true" tabindex="-1"></a>  <span class="in">```r</span></span>
<span id="cb21-167"><a href="#cb21-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(validate)</span>
<span id="cb21-168"><a href="#cb21-168" aria-hidden="true" tabindex="-1"></a>  rules <span class="ot">&lt;-</span> <span class="fu">validator</span>(</span>
<span id="cb21-169"><a href="#cb21-169" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">18</span>,</span>
<span id="cb21-170"><a href="#cb21-170" aria-hidden="true" tabindex="-1"></a>    bmi <span class="sc">&gt;=</span> <span class="dv">15</span> <span class="sc">&amp;</span> bmi <span class="sc">&lt;=</span> <span class="dv">50</span>,</span>
<span id="cb21-171"><a href="#cb21-171" aria-hidden="true" tabindex="-1"></a>    start_date <span class="sc">&lt;</span> end_date</span>
<span id="cb21-172"><a href="#cb21-172" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-173"><a href="#cb21-173" aria-hidden="true" tabindex="-1"></a>  check_results <span class="ot">&lt;-</span> <span class="fu">confront</span>(data, rules)</span>
<span id="cb21-174"><a href="#cb21-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>(check_results)</span>
<span id="cb21-175"><a href="#cb21-175" aria-hidden="true" tabindex="-1"></a>  <span class="in">```</span></span>
<span id="cb21-176"><a href="#cb21-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-177"><a href="#cb21-177" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-178"><a href="#cb21-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-179"><a href="#cb21-179" aria-hidden="true" tabindex="-1"></a><span class="fu">### **b. Python for Data Validation**</span></span>
<span id="cb21-180"><a href="#cb21-180" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Libraries:** <span class="in">`pandera`</span>, <span class="in">`cerberus`</span></span>
<span id="cb21-181"><a href="#cb21-181" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Example:**</span>
<span id="cb21-182"><a href="#cb21-182" aria-hidden="true" tabindex="-1"></a>  <span class="in">```python</span></span>
<span id="cb21-183"><a href="#cb21-183" aria-hidden="true" tabindex="-1"></a>  <span class="im">from</span> pandera <span class="im">import</span> DataFrameSchema, Column, Check</span>
<span id="cb21-184"><a href="#cb21-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-185"><a href="#cb21-185" aria-hidden="true" tabindex="-1"></a>  schema <span class="op">=</span> DataFrameSchema({</span>
<span id="cb21-186"><a href="#cb21-186" aria-hidden="true" tabindex="-1"></a>      <span class="st">"age"</span>: Column(<span class="bu">int</span>, Check(<span class="kw">lambda</span> x: <span class="dv">18</span> <span class="op">&lt;=</span> x <span class="op">&lt;=</span> <span class="dv">65</span>, error<span class="op">=</span><span class="st">"Age must be 18-65"</span>)),</span>
<span id="cb21-187"><a href="#cb21-187" aria-hidden="true" tabindex="-1"></a>      <span class="st">"bmi"</span>: Column(<span class="bu">float</span>, Check(<span class="kw">lambda</span> x: <span class="dv">15</span> <span class="op">&lt;=</span> x <span class="op">&lt;=</span> <span class="dv">50</span>, error<span class="op">=</span><span class="st">"BMI must be realistic"</span>)),</span>
<span id="cb21-188"><a href="#cb21-188" aria-hidden="true" tabindex="-1"></a>      <span class="st">"start_date"</span>: Column(<span class="bu">str</span>),</span>
<span id="cb21-189"><a href="#cb21-189" aria-hidden="true" tabindex="-1"></a>      <span class="st">"end_date"</span>: Column(<span class="bu">str</span>, Check(<span class="kw">lambda</span> x, y: x <span class="op">&lt;</span> y, error<span class="op">=</span><span class="st">"Start date must be before end date"</span>))</span>
<span id="cb21-190"><a href="#cb21-190" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-191"><a href="#cb21-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-192"><a href="#cb21-192" aria-hidden="true" tabindex="-1"></a>  validated_data <span class="op">=</span> schema.validate(df)</span>
<span id="cb21-193"><a href="#cb21-193" aria-hidden="true" tabindex="-1"></a>  <span class="in">```</span></span>
<span id="cb21-194"><a href="#cb21-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-195"><a href="#cb21-195" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-196"><a href="#cb21-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-197"><a href="#cb21-197" aria-hidden="true" tabindex="-1"></a><span class="fu">### **c. SQL for Data Integrity Checks**</span></span>
<span id="cb21-198"><a href="#cb21-198" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Example:**</span>
<span id="cb21-199"><a href="#cb21-199" aria-hidden="true" tabindex="-1"></a>  <span class="in">```sql</span></span>
<span id="cb21-200"><a href="#cb21-200" aria-hidden="true" tabindex="-1"></a>  <span class="kw">SELECT</span> patient_id, age</span>
<span id="cb21-201"><a href="#cb21-201" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> clinical_data</span>
<span id="cb21-202"><a href="#cb21-202" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> age <span class="op">&lt;</span> <span class="dv">18</span> <span class="kw">OR</span> age <span class="op">&gt;</span> <span class="dv">100</span>;</span>
<span id="cb21-203"><a href="#cb21-203" aria-hidden="true" tabindex="-1"></a>  <span class="in">```</span></span>
<span id="cb21-204"><a href="#cb21-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-205"><a href="#cb21-205" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-206"><a href="#cb21-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-207"><a href="#cb21-207" aria-hidden="true" tabindex="-1"></a><span class="fu">## **4. Integrating Validation into EDC Workflows**</span></span>
<span id="cb21-208"><a href="#cb21-208" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Automated Validation Pipelines:** Apache NiFi, Talend, Pentaho for ETL-based validation.</span>
<span id="cb21-209"><a href="#cb21-209" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**FHIR/CDISC Compliance:** OpenCDISC Validator for CDISC standards (SDTM/ADaM).</span>
<span id="cb21-210"><a href="#cb21-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-211"><a href="#cb21-211" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-212"><a href="#cb21-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-213"><a href="#cb21-213" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Conclusion**</span></span>
<span id="cb21-214"><a href="#cb21-214" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**For real-time validation:** OpenClinica, REDCap, and ClinCapture provide built-in rule engines.</span>
<span id="cb21-215"><a href="#cb21-215" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**For custom validation:** R, Python, and SQL offer greater flexibility.</span>
<span id="cb21-216"><a href="#cb21-216" aria-hidden="true" tabindex="-1"></a>**Which approach fits your use case best?**</span>
<span id="cb21-217"><a href="#cb21-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-218"><a href="#cb21-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-219"><a href="#cb21-219" aria-hidden="true" tabindex="-1"></a><span class="fu"># **Shiny Form Validation with Relational Data and Machine Learning**</span></span>
<span id="cb21-220"><a href="#cb21-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-221"><a href="#cb21-221" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Can Shiny Create Forms with Real-Time Validation?**</span></span>
<span id="cb21-222"><a href="#cb21-222" aria-hidden="true" tabindex="-1"></a>Yes, **Shiny** can create forms with **real-time validation** by using built-in reactive validation functions and JavaScript-based checks. Shiny provides several approaches for validating user input before submission.</span>
<span id="cb21-223"><a href="#cb21-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-224"><a href="#cb21-224" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-225"><a href="#cb21-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-226"><a href="#cb21-226" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Methods for Real-Time Validation in Shiny**</span></span>
<span id="cb21-227"><a href="#cb21-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-228"><a href="#cb21-228" aria-hidden="true" tabindex="-1"></a><span class="fu">### **1. `validate()` and `need()` for Simple Input Validation**</span></span>
<span id="cb21-229"><a href="#cb21-229" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>These functions allow dynamic validation of form inputs.</span>
<span id="cb21-230"><a href="#cb21-230" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Error messages are displayed **instantly** when an invalid input is detected.</span>
<span id="cb21-231"><a href="#cb21-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-232"><a href="#cb21-232" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **Example: Age Validation (Must be Between 18-65)**</span></span>
<span id="cb21-233"><a href="#cb21-233" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb21-234"><a href="#cb21-234" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb21-235"><a href="#cb21-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-236"><a href="#cb21-236" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb21-237"><a href="#cb21-237" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Real-Time Validation Example"</span>),</span>
<span id="cb21-238"><a href="#cb21-238" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb21-239"><a href="#cb21-239" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb21-240"><a href="#cb21-240" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>),</span>
<span id="cb21-241"><a href="#cb21-241" aria-hidden="true" tabindex="-1"></a>            <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>),</span>
<span id="cb21-242"><a href="#cb21-242" aria-hidden="true" tabindex="-1"></a>            <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>)</span>
<span id="cb21-243"><a href="#cb21-243" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-244"><a href="#cb21-244" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>()</span>
<span id="cb21-245"><a href="#cb21-245" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-246"><a href="#cb21-246" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-247"><a href="#cb21-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-248"><a href="#cb21-248" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb21-249"><a href="#cb21-249" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>validation_message <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb21-250"><a href="#cb21-250" aria-hidden="true" tabindex="-1"></a>        <span class="fu">validate</span>(</span>
<span id="cb21-251"><a href="#cb21-251" aria-hidden="true" tabindex="-1"></a>            <span class="fu">need</span>(input<span class="sc">$</span>age <span class="sc">&gt;=</span> <span class="dv">18</span>, <span class="st">"Age must be at least 18"</span>),</span>
<span id="cb21-252"><a href="#cb21-252" aria-hidden="true" tabindex="-1"></a>            <span class="fu">need</span>(input<span class="sc">$</span>age <span class="sc">&lt;=</span> <span class="dv">65</span>, <span class="st">"Age must be 65 or below"</span>)</span>
<span id="cb21-253"><a href="#cb21-253" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-254"><a href="#cb21-254" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Valid input!"</span></span>
<span id="cb21-255"><a href="#cb21-255" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb21-256"><a href="#cb21-256" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-257"><a href="#cb21-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-258"><a href="#cb21-258" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span>
<span id="cb21-259"><a href="#cb21-259" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-260"><a href="#cb21-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-261"><a href="#cb21-261" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-262"><a href="#cb21-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-263"><a href="#cb21-263" aria-hidden="true" tabindex="-1"></a><span class="fu">### **2. `shinyvalidate` Package for Advanced Form Validation**</span></span>
<span id="cb21-264"><a href="#cb21-264" aria-hidden="true" tabindex="-1"></a>The <span class="in">`shinyvalidate`</span> package allows multiple **dependent** form inputs to be validated **before submission**.</span>
<span id="cb21-265"><a href="#cb21-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-266"><a href="#cb21-266" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **Example: Multiple Field Validation (Email &amp; Age)**</span></span>
<span id="cb21-267"><a href="#cb21-267" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb21-268"><a href="#cb21-268" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb21-269"><a href="#cb21-269" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyvalidate)</span>
<span id="cb21-270"><a href="#cb21-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-271"><a href="#cb21-271" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb21-272"><a href="#cb21-272" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Shinyvalidate Example"</span>),</span>
<span id="cb21-273"><a href="#cb21-273" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">"email"</span>, <span class="st">"Enter Email:"</span>),</span>
<span id="cb21-274"><a href="#cb21-274" aria-hidden="true" tabindex="-1"></a>    <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>),</span>
<span id="cb21-275"><a href="#cb21-275" aria-hidden="true" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>),</span>
<span id="cb21-276"><a href="#cb21-276" aria-hidden="true" tabindex="-1"></a>    <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>)</span>
<span id="cb21-277"><a href="#cb21-277" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-278"><a href="#cb21-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-279"><a href="#cb21-279" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb21-280"><a href="#cb21-280" aria-hidden="true" tabindex="-1"></a>    iv <span class="ot">&lt;-</span> InputValidator<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb21-281"><a href="#cb21-281" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-282"><a href="#cb21-282" aria-hidden="true" tabindex="-1"></a>    iv<span class="sc">$</span><span class="fu">add_rule</span>(<span class="st">"email"</span>, <span class="fu">sv_email</span>()) <span class="co"># Validates email format</span></span>
<span id="cb21-283"><a href="#cb21-283" aria-hidden="true" tabindex="-1"></a>    iv<span class="sc">$</span><span class="fu">add_rule</span>(<span class="st">"age"</span>, <span class="fu">sv_between</span>(<span class="dv">18</span>, <span class="dv">65</span>)) <span class="co"># Age must be between 18 and 65</span></span>
<span id="cb21-284"><a href="#cb21-284" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-285"><a href="#cb21-285" aria-hidden="true" tabindex="-1"></a>    iv<span class="sc">$</span><span class="fu">enable</span>()</span>
<span id="cb21-286"><a href="#cb21-286" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-287"><a href="#cb21-287" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observeEvent</span>(input<span class="sc">$</span>submit, {</span>
<span id="cb21-288"><a href="#cb21-288" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (iv<span class="sc">$</span><span class="fu">is_valid</span>()) {</span>
<span id="cb21-289"><a href="#cb21-289" aria-hidden="true" tabindex="-1"></a>            <span class="fu">showModal</span>(<span class="fu">modalDialog</span>(<span class="st">"Form submitted successfully!"</span>))</span>
<span id="cb21-290"><a href="#cb21-290" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb21-291"><a href="#cb21-291" aria-hidden="true" tabindex="-1"></a>            <span class="fu">showModal</span>(<span class="fu">modalDialog</span>(<span class="st">"Please fix errors before submitting."</span>))</span>
<span id="cb21-292"><a href="#cb21-292" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb21-293"><a href="#cb21-293" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb21-294"><a href="#cb21-294" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-295"><a href="#cb21-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-296"><a href="#cb21-296" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span>
<span id="cb21-297"><a href="#cb21-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-298"><a href="#cb21-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-299"><a href="#cb21-299" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-300"><a href="#cb21-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-301"><a href="#cb21-301" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3. JavaScript-Based Validation for Immediate Feedback**</span></span>
<span id="cb21-302"><a href="#cb21-302" aria-hidden="true" tabindex="-1"></a>Shiny supports **JavaScript validation** for client-side real-time validation **before** sending data to the server.</span>
<span id="cb21-303"><a href="#cb21-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-304"><a href="#cb21-304" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **Example: Real-Time Numeric Input Restriction**</span></span>
<span id="cb21-305"><a href="#cb21-305" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb21-306"><a href="#cb21-306" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb21-307"><a href="#cb21-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-308"><a href="#cb21-308" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb21-309"><a href="#cb21-309" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">script</span>(<span class="fu">HTML</span>(<span class="st">"</span></span>
<span id="cb21-310"><a href="#cb21-310" aria-hidden="true" tabindex="-1"></a><span class="st">        function validateNumericInput() {</span></span>
<span id="cb21-311"><a href="#cb21-311" aria-hidden="true" tabindex="-1"></a><span class="st">            var input = document.getElementById('numInput').value;</span></span>
<span id="cb21-312"><a href="#cb21-312" aria-hidden="true" tabindex="-1"></a><span class="st">            if (isNaN(input) || input &lt; 1 || input &gt; 100) {</span></span>
<span id="cb21-313"><a href="#cb21-313" aria-hidden="true" tabindex="-1"></a><span class="st">                document.getElementById('error').innerHTML = 'Enter a valid number (1-100)';</span></span>
<span id="cb21-314"><a href="#cb21-314" aria-hidden="true" tabindex="-1"></a><span class="st">            } else {</span></span>
<span id="cb21-315"><a href="#cb21-315" aria-hidden="true" tabindex="-1"></a><span class="st">                document.getElementById('error').innerHTML = '';</span></span>
<span id="cb21-316"><a href="#cb21-316" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb21-317"><a href="#cb21-317" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb21-318"><a href="#cb21-318" aria-hidden="true" tabindex="-1"></a><span class="st">    "</span>)),</span>
<span id="cb21-319"><a href="#cb21-319" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">"numInput"</span>, <span class="st">"Enter a number:"</span>, <span class="st">""</span>, <span class="at">oninput =</span> <span class="st">"validateNumericInput()"</span>),</span>
<span id="cb21-320"><a href="#cb21-320" aria-hidden="true" tabindex="-1"></a>    <span class="fu">span</span>(<span class="at">id =</span> <span class="st">"error"</span>, <span class="at">style =</span> <span class="st">"color: red;"</span>)</span>
<span id="cb21-321"><a href="#cb21-321" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-322"><a href="#cb21-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-323"><a href="#cb21-323" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {}</span>
<span id="cb21-324"><a href="#cb21-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-325"><a href="#cb21-325" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span>
<span id="cb21-326"><a href="#cb21-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-327"><a href="#cb21-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-328"><a href="#cb21-328" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-329"><a href="#cb21-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-330"><a href="#cb21-330" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Can JavaScript Access Relational Data and Machine Learning Tools?**</span></span>
<span id="cb21-331"><a href="#cb21-331" aria-hidden="true" tabindex="-1"></a>Yes, **JavaScript** can access **relational datasets** and **machine learning tools** for real-time validation. This can be achieved through:</span>
<span id="cb21-332"><a href="#cb21-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-333"><a href="#cb21-333" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Client-Side Validation via IndexedDB** (local relational database in browser)</span>
<span id="cb21-334"><a href="#cb21-334" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**AJAX Requests to Query a Remote Database** (MySQL, PostgreSQL, etc.)</span>
<span id="cb21-335"><a href="#cb21-335" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Calling a Machine Learning Model via an API** (TensorFlow.js, Python API)</span>
<span id="cb21-336"><a href="#cb21-336" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**WebAssembly (WASM) for Local ML Computation**</span>
<span id="cb21-337"><a href="#cb21-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-338"><a href="#cb21-338" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-339"><a href="#cb21-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-340"><a href="#cb21-340" aria-hidden="true" tabindex="-1"></a><span class="fu">## **1. Using IndexedDB for Local Relational Data Validation**</span></span>
<span id="cb21-341"><a href="#cb21-341" aria-hidden="true" tabindex="-1"></a><span class="in">```html</span></span>
<span id="cb21-342"><a href="#cb21-342" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script<span class="op">&gt;</span></span>
<span id="cb21-343"><a href="#cb21-343" aria-hidden="true" tabindex="-1"></a>  let db<span class="op">;</span></span>
<span id="cb21-344"><a href="#cb21-344" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-345"><a href="#cb21-345" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Open IndexedDB database</span></span>
<span id="cb21-346"><a href="#cb21-346" aria-hidden="true" tabindex="-1"></a>  let request <span class="op">=</span> indexedDB<span class="op">.</span>open<span class="op">(</span><span class="st">"ClinicalDB"</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb21-347"><a href="#cb21-347" aria-hidden="true" tabindex="-1"></a>  request<span class="op">.</span>onsuccess <span class="op">=</span> function<span class="op">(</span>event<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-348"><a href="#cb21-348" aria-hidden="true" tabindex="-1"></a>      db <span class="op">=</span> event<span class="op">.</span>target<span class="op">.</span>result<span class="op">;</span></span>
<span id="cb21-349"><a href="#cb21-349" aria-hidden="true" tabindex="-1"></a>  <span class="op">};</span></span>
<span id="cb21-350"><a href="#cb21-350" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-351"><a href="#cb21-351" aria-hidden="true" tabindex="-1"></a>  function validateUserID<span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-352"><a href="#cb21-352" aria-hidden="true" tabindex="-1"></a>      let inputID <span class="op">=</span> document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"userID"</span><span class="op">).</span>value<span class="op">;</span></span>
<span id="cb21-353"><a href="#cb21-353" aria-hidden="true" tabindex="-1"></a>      let transaction <span class="op">=</span> db<span class="op">.</span>transaction<span class="op">([</span><span class="st">"patients"</span><span class="op">]);</span></span>
<span id="cb21-354"><a href="#cb21-354" aria-hidden="true" tabindex="-1"></a>      let objectStore <span class="op">=</span> transaction<span class="op">.</span>objectStore<span class="op">(</span><span class="st">"patients"</span><span class="op">);</span></span>
<span id="cb21-355"><a href="#cb21-355" aria-hidden="true" tabindex="-1"></a>      let request <span class="op">=</span> objectStore<span class="op">.</span>get<span class="op">(</span>inputID<span class="op">);</span></span>
<span id="cb21-356"><a href="#cb21-356" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb21-357"><a href="#cb21-357" aria-hidden="true" tabindex="-1"></a>      request<span class="op">.</span>onsuccess <span class="op">=</span> function<span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-358"><a href="#cb21-358" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> <span class="op">(!</span>request<span class="op">.</span>result<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-359"><a href="#cb21-359" aria-hidden="true" tabindex="-1"></a>              document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"error"</span><span class="op">).</span>innerHTML <span class="op">=</span> <span class="st">"Invalid Patient ID!"</span><span class="op">;</span></span>
<span id="cb21-360"><a href="#cb21-360" aria-hidden="true" tabindex="-1"></a>          <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb21-361"><a href="#cb21-361" aria-hidden="true" tabindex="-1"></a>              document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"error"</span><span class="op">).</span>innerHTML <span class="op">=</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb21-362"><a href="#cb21-362" aria-hidden="true" tabindex="-1"></a>          <span class="op">}</span></span>
<span id="cb21-363"><a href="#cb21-363" aria-hidden="true" tabindex="-1"></a>      <span class="op">};</span></span>
<span id="cb21-364"><a href="#cb21-364" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb21-365"><a href="#cb21-365" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb21-366"><a href="#cb21-366" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>input id<span class="op">=</span><span class="st">"userID"</span> type<span class="op">=</span><span class="st">"text"</span> oninput<span class="op">=</span><span class="st">"validateUserID()"</span><span class="op">&gt;</span></span>
<span id="cb21-367"><a href="#cb21-367" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>span id<span class="op">=</span><span class="st">"error"</span> style<span class="op">=</span><span class="st">"color: red;"</span><span class="op">&gt;&lt;/</span>span<span class="op">&gt;</span></span>
<span id="cb21-368"><a href="#cb21-368" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-369"><a href="#cb21-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-370"><a href="#cb21-370" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-371"><a href="#cb21-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-372"><a href="#cb21-372" aria-hidden="true" tabindex="-1"></a><span class="fu">## **2. Using AJAX to Query a Remote SQL Database**</span></span>
<span id="cb21-373"><a href="#cb21-373" aria-hidden="true" tabindex="-1"></a><span class="in">```html</span></span>
<span id="cb21-374"><a href="#cb21-374" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script<span class="op">&gt;</span></span>
<span id="cb21-375"><a href="#cb21-375" aria-hidden="true" tabindex="-1"></a>  function checkPatientID<span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-376"><a href="#cb21-376" aria-hidden="true" tabindex="-1"></a>      let userID <span class="op">=</span> document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"userID"</span><span class="op">).</span>value<span class="op">;</span></span>
<span id="cb21-377"><a href="#cb21-377" aria-hidden="true" tabindex="-1"></a>      fetch<span class="op">(</span>`<span class="op">/</span>validate_id<span class="op">?</span>userID<span class="op">=</span>$<span class="op">{</span>userID<span class="op">}</span>`<span class="op">)</span></span>
<span id="cb21-378"><a href="#cb21-378" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span>then<span class="op">(</span>response <span class="op">=&gt;</span> response<span class="op">.</span>json<span class="op">())</span></span>
<span id="cb21-379"><a href="#cb21-379" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span>then<span class="op">(</span>data <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb21-380"><a href="#cb21-380" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> <span class="op">(</span>data<span class="op">.</span>valid<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-381"><a href="#cb21-381" aria-hidden="true" tabindex="-1"></a>                  document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"error"</span><span class="op">).</span>innerHTML <span class="op">=</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb21-382"><a href="#cb21-382" aria-hidden="true" tabindex="-1"></a>              <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb21-383"><a href="#cb21-383" aria-hidden="true" tabindex="-1"></a>                  document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"error"</span><span class="op">).</span>innerHTML <span class="op">=</span> <span class="st">"Invalid Patient ID!"</span><span class="op">;</span></span>
<span id="cb21-384"><a href="#cb21-384" aria-hidden="true" tabindex="-1"></a>              <span class="op">}</span></span>
<span id="cb21-385"><a href="#cb21-385" aria-hidden="true" tabindex="-1"></a>          <span class="op">});</span></span>
<span id="cb21-386"><a href="#cb21-386" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb21-387"><a href="#cb21-387" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb21-388"><a href="#cb21-388" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>input id<span class="op">=</span><span class="st">"userID"</span> type<span class="op">=</span><span class="st">"text"</span> oninput<span class="op">=</span><span class="st">"checkPatientID()"</span><span class="op">&gt;</span></span>
<span id="cb21-389"><a href="#cb21-389" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>span id<span class="op">=</span><span class="st">"error"</span> style<span class="op">=</span><span class="st">"color: red;"</span><span class="op">&gt;&lt;/</span>span<span class="op">&gt;</span></span>
<span id="cb21-390"><a href="#cb21-390" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-391"><a href="#cb21-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-392"><a href="#cb21-392" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-393"><a href="#cb21-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-394"><a href="#cb21-394" aria-hidden="true" tabindex="-1"></a><span class="fu">## **3. Calling a Machine Learning Model for Validation**</span></span>
<span id="cb21-395"><a href="#cb21-395" aria-hidden="true" tabindex="-1"></a><span class="in">```html</span></span>
<span id="cb21-396"><a href="#cb21-396" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script<span class="op">&gt;</span></span>
<span id="cb21-397"><a href="#cb21-397" aria-hidden="true" tabindex="-1"></a>  function validateAdverseEvent<span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-398"><a href="#cb21-398" aria-hidden="true" tabindex="-1"></a>      let eventText <span class="op">=</span> document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"eventText"</span><span class="op">).</span>value<span class="op">;</span></span>
<span id="cb21-399"><a href="#cb21-399" aria-hidden="true" tabindex="-1"></a>      fetch<span class="op">(</span>`<span class="op">/</span>predict_adverse_event`<span class="op">,</span> <span class="op">{</span></span>
<span id="cb21-400"><a href="#cb21-400" aria-hidden="true" tabindex="-1"></a>          method<span class="op">:</span> <span class="st">"POST"</span><span class="op">,</span></span>
<span id="cb21-401"><a href="#cb21-401" aria-hidden="true" tabindex="-1"></a>          headers<span class="op">:</span> <span class="op">{</span> <span class="st">"Content-Type"</span><span class="op">:</span> <span class="st">"application/json"</span> <span class="op">},</span></span>
<span id="cb21-402"><a href="#cb21-402" aria-hidden="true" tabindex="-1"></a>          body<span class="op">:</span> JSON<span class="op">.</span>stringify<span class="op">({</span> <span class="st">"text"</span><span class="op">:</span> eventText <span class="op">})</span></span>
<span id="cb21-403"><a href="#cb21-403" aria-hidden="true" tabindex="-1"></a>      <span class="op">})</span></span>
<span id="cb21-404"><a href="#cb21-404" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span>then<span class="op">(</span>response <span class="op">=&gt;</span> response<span class="op">.</span>json<span class="op">())</span></span>
<span id="cb21-405"><a href="#cb21-405" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span>then<span class="op">(</span>data <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb21-406"><a href="#cb21-406" aria-hidden="true" tabindex="-1"></a>          document<span class="op">.</span>getElementById<span class="op">(</span><span class="st">"error"</span><span class="op">).</span>innerHTML <span class="op">=</span> </span>
<span id="cb21-407"><a href="#cb21-407" aria-hidden="true" tabindex="-1"></a>              data<span class="op">.</span>valid <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="st">"Potentially invalid event!"</span><span class="op">;</span></span>
<span id="cb21-408"><a href="#cb21-408" aria-hidden="true" tabindex="-1"></a>      <span class="op">});</span></span>
<span id="cb21-409"><a href="#cb21-409" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb21-410"><a href="#cb21-410" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb21-411"><a href="#cb21-411" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>input id<span class="op">=</span><span class="st">"eventText"</span> type<span class="op">=</span><span class="st">"text"</span> oninput<span class="op">=</span><span class="st">"validateAdverseEvent()"</span><span class="op">&gt;</span></span>
<span id="cb21-412"><a href="#cb21-412" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>span id<span class="op">=</span><span class="st">"error"</span> style<span class="op">=</span><span class="st">"color: red;"</span><span class="op">&gt;&lt;/</span>span<span class="op">&gt;</span></span>
<span id="cb21-413"><a href="#cb21-413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-414"><a href="#cb21-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-415"><a href="#cb21-415" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-416"><a href="#cb21-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-417"><a href="#cb21-417" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Choosing the Best Approach**</span></span>
<span id="cb21-418"><a href="#cb21-418" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Approach <span class="pp">|</span> Best For <span class="pp">|</span> Needs Server? <span class="pp">|</span></span>
<span id="cb21-419"><a href="#cb21-419" aria-hidden="true" tabindex="-1"></a><span class="pp">|----------|---------|--------------|</span></span>
<span id="cb21-420"><a href="#cb21-420" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **IndexedDB** <span class="pp">|</span> Local relational checks <span class="pp">|</span> ❌ No <span class="pp">|</span></span>
<span id="cb21-421"><a href="#cb21-421" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **AJAX (SQL Backend)** <span class="pp">|</span> Large relational datasets <span class="pp">|</span> ✅ Yes <span class="pp">|</span></span>
<span id="cb21-422"><a href="#cb21-422" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **ML API (Python/Flask)** <span class="pp">|</span> Advanced validation via AI <span class="pp">|</span> ✅ Yes <span class="pp">|</span></span>
<span id="cb21-423"><a href="#cb21-423" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **TensorFlow.js** <span class="pp">|</span> Local ML without server <span class="pp">|</span> ❌ No <span class="pp">|</span></span>
<span id="cb21-424"><a href="#cb21-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-425"><a href="#cb21-425" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-426"><a href="#cb21-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-427"><a href="#cb21-427" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Conclusion**</span></span>
<span id="cb21-428"><a href="#cb21-428" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**For small datasets**, use **IndexedDB** (local relational validation).</span>
<span id="cb21-429"><a href="#cb21-429" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**For real-time database validation**, use **AJAX + SQL backend**.</span>
<span id="cb21-430"><a href="#cb21-430" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**For AI-powered checks**, use **Flask ML API** or **TensorFlow.js**.</span>
<span id="cb21-431"><a href="#cb21-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-432"><a href="#cb21-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-433"><a href="#cb21-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-434"><a href="#cb21-434" aria-hidden="true" tabindex="-1"></a><span class="fu"># **Spreadsheet-Driven Validation System for Shiny Forms**</span></span>
<span id="cb21-435"><a href="#cb21-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-436"><a href="#cb21-436" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Your Idea: Spreadsheet-Driven Validation System**</span></span>
<span id="cb21-437"><a href="#cb21-437" aria-hidden="true" tabindex="-1"></a>Your idea of defining **data validation rules in a spreadsheet**, then **processing them with Lua** to generate **JavaScript** for **Shiny validation** is a **great idea**. This approach would:</span>
<span id="cb21-438"><a href="#cb21-438" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Allow non-programmers (e.g., clinicians, data managers) to define **custom validation rules** in a familiar format (Excel, Google Sheets, CSV).</span>
<span id="cb21-439"><a href="#cb21-439" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Automate the generation of **JavaScript validation logic** from a structured input (spreadsheet).</span>
<span id="cb21-440"><a href="#cb21-440" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Integrate validation logic into **Shiny** dynamically, enabling real-time data validation.</span>
<span id="cb21-441"><a href="#cb21-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-442"><a href="#cb21-442" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-443"><a href="#cb21-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-444"><a href="#cb21-444" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Has This Been Done Before?**</span></span>
<span id="cb21-445"><a href="#cb21-445" aria-hidden="true" tabindex="-1"></a>Yes, similar approaches have been explored, but not exactly in the way you describe.</span>
<span id="cb21-446"><a href="#cb21-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-447"><a href="#cb21-447" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Spreadsheet-Driven Validation Rules**</span>
<span id="cb21-448"><a href="#cb21-448" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>**Medidata Rave** (commercial EDC system) allows validation checks to be defined in a **spreadsheet-like rule editor**.</span>
<span id="cb21-449"><a href="#cb21-449" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>**OpenClinica** supports rule definitions in a **spreadsheet format** (ODK XLSForm).</span>
<span id="cb21-450"><a href="#cb21-450" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>**RedCAP** allows some rule-based constraints in CSV.</span>
<span id="cb21-451"><a href="#cb21-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-452"><a href="#cb21-452" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Code Generation from Spreadsheets**</span>
<span id="cb21-453"><a href="#cb21-453" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>**Google Sheets + Apps Script**: People generate **JavaScript validation** from structured spreadsheet data.</span>
<span id="cb21-454"><a href="#cb21-454" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>**Lua for Code Generation**: Lua is used in game engines and **config-driven** workflows, but it has not been widely used to generate **JavaScript validation rules from spreadsheets**.</span>
<span id="cb21-455"><a href="#cb21-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-456"><a href="#cb21-456" aria-hidden="true" tabindex="-1"></a>Thus, **your approach is novel in the clinical data validation context**—this could be **a powerful open-source tool**.</span>
<span id="cb21-457"><a href="#cb21-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-458"><a href="#cb21-458" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-459"><a href="#cb21-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-460"><a href="#cb21-460" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Why This is a Good Idea**</span></span>
<span id="cb21-461"><a href="#cb21-461" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Feature <span class="pp">|</span> Benefit <span class="pp">|</span></span>
<span id="cb21-462"><a href="#cb21-462" aria-hidden="true" tabindex="-1"></a><span class="pp">|---------|---------|</span></span>
<span id="cb21-463"><a href="#cb21-463" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Spreadsheet as Validation Rule Storage** <span class="pp">|</span> Easy for non-programmers to modify rules <span class="pp">|</span></span>
<span id="cb21-464"><a href="#cb21-464" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Lua as Code Generator** <span class="pp">|</span> Fast, lightweight, and excellent for text processing <span class="pp">|</span></span>
<span id="cb21-465"><a href="#cb21-465" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **JavaScript for Validation** | Enables **real-time validation** in **Shiny** without server overhead <span class="pp">|</span></span>
<span id="cb21-466"><a href="#cb21-466" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Dynamic Validation Updates** <span class="pp">|</span> Changing the spreadsheet updates validation logic without modifying code <span class="pp">|</span></span>
<span id="cb21-467"><a href="#cb21-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-468"><a href="#cb21-468" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-469"><a href="#cb21-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-470"><a href="#cb21-470" aria-hidden="true" tabindex="-1"></a><span class="fu">## **How It Would Work**</span></span>
<span id="cb21-471"><a href="#cb21-471" aria-hidden="true" tabindex="-1"></a><span class="fu">### **1. Define Rules in a Spreadsheet**</span></span>
<span id="cb21-472"><a href="#cb21-472" aria-hidden="true" tabindex="-1"></a>Each field in the Shiny app gets a validation rule in **one cell per field**.</span>
<span id="cb21-473"><a href="#cb21-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-474"><a href="#cb21-474" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Field <span class="pp">|</span> Validation Rule <span class="pp">|</span></span>
<span id="cb21-475"><a href="#cb21-475" aria-hidden="true" tabindex="-1"></a><span class="pp">|-------|----------------|</span></span>
<span id="cb21-476"><a href="#cb21-476" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> age   <span class="pp">|</span> <span class="in">`age &gt;= 18 &amp;&amp; age &lt;= 65`</span> <span class="pp">|</span></span>
<span id="cb21-477"><a href="#cb21-477" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> email <span class="pp">|</span> <span class="in">`/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i.test(email)`</span> <span class="pp">|</span></span>
<span id="cb21-478"><a href="#cb21-478" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> height <span class="pp">|</span> <span class="in">`height &gt; 50 &amp;&amp; height &lt; 250`</span> <span class="pp">|</span></span>
<span id="cb21-479"><a href="#cb21-479" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> bmi <span class="pp">|</span> <span class="in">`weight / (height / 100) ** 2 &gt; 15 &amp;&amp; weight / (height / 100) ** 2 &lt; 50`</span> <span class="pp">|</span></span>
<span id="cb21-480"><a href="#cb21-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-481"><a href="#cb21-481" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-482"><a href="#cb21-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-483"><a href="#cb21-483" aria-hidden="true" tabindex="-1"></a><span class="fu">### **2. Lua Script Processes the Spreadsheet**</span></span>
<span id="cb21-484"><a href="#cb21-484" aria-hidden="true" tabindex="-1"></a>A **Lua script** reads the spreadsheet (CSV, Excel) and **generates JavaScript validation functions**.</span>
<span id="cb21-485"><a href="#cb21-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-486"><a href="#cb21-486" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **Example Lua Script (`process_validation.lua`)**</span></span>
<span id="cb21-487"><a href="#cb21-487" aria-hidden="true" tabindex="-1"></a><span class="in">```lua</span></span>
<span id="cb21-488"><a href="#cb21-488" aria-hidden="true" tabindex="-1"></a><span class="in">local csv = require("csv")  -- Use a CSV library like `luacsv`</span></span>
<span id="cb21-489"><a href="#cb21-489" aria-hidden="true" tabindex="-1"></a><span class="in">local file = io.open("validation_rules.csv", "r")</span></span>
<span id="cb21-490"><a href="#cb21-490" aria-hidden="true" tabindex="-1"></a><span class="in">local parsed_data = csv.parse(file:read("*all"))</span></span>
<span id="cb21-491"><a href="#cb21-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-492"><a href="#cb21-492" aria-hidden="true" tabindex="-1"></a><span class="in">local js_code = "const validationRules = {\n"</span></span>
<span id="cb21-493"><a href="#cb21-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-494"><a href="#cb21-494" aria-hidden="true" tabindex="-1"></a><span class="in">for i, row in ipairs(parsed_data) do</span></span>
<span id="cb21-495"><a href="#cb21-495" aria-hidden="true" tabindex="-1"></a><span class="in">    local field, rule = row[1], row[2]</span></span>
<span id="cb21-496"><a href="#cb21-496" aria-hidden="true" tabindex="-1"></a><span class="in">    js_code = js_code .. string.format('    "%s": function(value) { return %s; },\n', field, rule)</span></span>
<span id="cb21-497"><a href="#cb21-497" aria-hidden="true" tabindex="-1"></a><span class="in">end</span></span>
<span id="cb21-498"><a href="#cb21-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-499"><a href="#cb21-499" aria-hidden="true" tabindex="-1"></a><span class="in">js_code = js_code .. "};\n"</span></span>
<span id="cb21-500"><a href="#cb21-500" aria-hidden="true" tabindex="-1"></a><span class="in">file:close()</span></span>
<span id="cb21-501"><a href="#cb21-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-502"><a href="#cb21-502" aria-hidden="true" tabindex="-1"></a><span class="in">local js_file = io.open("validation.js", "w")</span></span>
<span id="cb21-503"><a href="#cb21-503" aria-hidden="true" tabindex="-1"></a><span class="in">js_file:write(js_code)</span></span>
<span id="cb21-504"><a href="#cb21-504" aria-hidden="true" tabindex="-1"></a><span class="in">js_file:close()</span></span>
<span id="cb21-505"><a href="#cb21-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-506"><a href="#cb21-506" aria-hidden="true" tabindex="-1"></a><span class="in">print("Validation JavaScript generated successfully!")</span></span>
<span id="cb21-507"><a href="#cb21-507" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-508"><a href="#cb21-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-509"><a href="#cb21-509" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-510"><a href="#cb21-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-511"><a href="#cb21-511" aria-hidden="true" tabindex="-1"></a><span class="fu">### **3. JavaScript File is Included in Shiny**</span></span>
<span id="cb21-512"><a href="#cb21-512" aria-hidden="true" tabindex="-1"></a>The **generated JavaScript file (`validation.js`)** is included in the Shiny app.</span>
<span id="cb21-513"><a href="#cb21-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-514"><a href="#cb21-514" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **Example of Integrating `validation.js` in Shiny**</span></span>
<span id="cb21-515"><a href="#cb21-515" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb21-516"><a href="#cb21-516" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb21-517"><a href="#cb21-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-518"><a href="#cb21-518" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb21-519"><a href="#cb21-519" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">head</span>(tags<span class="sc">$</span><span class="fu">script</span>(<span class="at">src=</span><span class="st">"validation.js"</span>)),  <span class="co"># Include generated JS</span></span>
<span id="cb21-520"><a href="#cb21-520" aria-hidden="true" tabindex="-1"></a>    <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb21-521"><a href="#cb21-521" aria-hidden="true" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">"email"</span>, <span class="st">"Enter Email:"</span>),</span>
<span id="cb21-522"><a href="#cb21-522" aria-hidden="true" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>),</span>
<span id="cb21-523"><a href="#cb21-523" aria-hidden="true" tabindex="-1"></a>    <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>)</span>
<span id="cb21-524"><a href="#cb21-524" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-525"><a href="#cb21-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-526"><a href="#cb21-526" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb21-527"><a href="#cb21-527" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observeEvent</span>(input<span class="sc">$</span>submit, {</span>
<span id="cb21-528"><a href="#cb21-528" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Call JavaScript function to validate fields</span></span>
<span id="cb21-529"><a href="#cb21-529" aria-hidden="true" tabindex="-1"></a>        shinyjs<span class="sc">::</span><span class="fu">runjs</span>(<span class="st">"if (!validationRules.age(input$age)) alert('Invalid Age!');"</span>)</span>
<span id="cb21-530"><a href="#cb21-530" aria-hidden="true" tabindex="-1"></a>        shinyjs<span class="sc">::</span><span class="fu">runjs</span>(<span class="st">"if (!validationRules.email(input$email)) alert('Invalid Email!');"</span>)</span>
<span id="cb21-531"><a href="#cb21-531" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb21-532"><a href="#cb21-532" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-533"><a href="#cb21-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-534"><a href="#cb21-534" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span>
<span id="cb21-535"><a href="#cb21-535" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-536"><a href="#cb21-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-537"><a href="#cb21-537" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-538"><a href="#cb21-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-539"><a href="#cb21-539" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Advantages of This Approach**</span></span>
<span id="cb21-540"><a href="#cb21-540" aria-hidden="true" tabindex="-1"></a>✅ **Non-programmers can define validation rules** in spreadsheets  </span>
<span id="cb21-541"><a href="#cb21-541" aria-hidden="true" tabindex="-1"></a>✅ **Lua is fast &amp; lightweight for generating JavaScript**  </span>
<span id="cb21-542"><a href="#cb21-542" aria-hidden="true" tabindex="-1"></a>✅ **JavaScript validation happens instantly in the browser**  </span>
<span id="cb21-543"><a href="#cb21-543" aria-hidden="true" tabindex="-1"></a>✅ **Shiny remains reactive while offloading validation to the client**  </span>
<span id="cb21-544"><a href="#cb21-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-545"><a href="#cb21-545" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-546"><a href="#cb21-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-547"><a href="#cb21-547" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Potential Enhancements**</span></span>
<span id="cb21-548"><a href="#cb21-548" aria-hidden="true" tabindex="-1"></a>🚀 **Support relational data**: Extend Lua to query databases and include dynamic constraints  </span>
<span id="cb21-549"><a href="#cb21-549" aria-hidden="true" tabindex="-1"></a>🚀 **Integrate ML**: Add **TensorFlow.js** or an API to use machine learning for validation  </span>
<span id="cb21-550"><a href="#cb21-550" aria-hidden="true" tabindex="-1"></a>🚀 **Validation UI**: Build a Shiny app to visualize and edit validation rules dynamically  </span>
<span id="cb21-551"><a href="#cb21-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-552"><a href="#cb21-552" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-553"><a href="#cb21-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-554"><a href="#cb21-554" aria-hidden="true" tabindex="-1"></a><span class="fu">### **Next Steps**</span></span>
<span id="cb21-555"><a href="#cb21-555" aria-hidden="true" tabindex="-1"></a>Would you like a **working prototype** where we generate JavaScript from a spreadsheet and use it in a Shiny app? 🚀</span>
<span id="cb21-556"><a href="#cb21-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-557"><a href="#cb21-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-558"><a href="#cb21-558" aria-hidden="true" tabindex="-1"></a><span class="fu"># **Dynamic Rule Reloading and Database Integration for Shiny Forms**</span></span>
<span id="cb21-559"><a href="#cb21-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-560"><a href="#cb21-560" aria-hidden="true" tabindex="-1"></a><span class="fu">## **1. Dynamic Rule Reloading (Spreadsheet-Based)**</span></span>
<span id="cb21-561"><a href="#cb21-561" aria-hidden="true" tabindex="-1"></a><span class="fu">### **A. Spreadsheet Format (`validation_rules.csv`)**</span></span>
<span id="cb21-562"><a href="#cb21-562" aria-hidden="true" tabindex="-1"></a><span class="in">```csv</span></span>
<span id="cb21-563"><a href="#cb21-563" aria-hidden="true" tabindex="-1"></a>field<span class="op">,</span>rule</span>
<span id="cb21-564"><a href="#cb21-564" aria-hidden="true" tabindex="-1"></a>age<span class="op">,</span>age <span class="op">&gt;=</span> <span class="dv">18</span> <span class="op">&amp;&amp;</span> age <span class="op">&lt;=</span> <span class="dv">65</span></span>
<span id="cb21-565"><a href="#cb21-565" aria-hidden="true" tabindex="-1"></a>email<span class="op">,/^[</span>a<span class="op">-</span>zA<span class="op">-</span>Z0<span class="fl">-9.</span>_<span class="op">%+-]+</span>@<span class="op">[</span>a<span class="op">-</span>zA<span class="op">-</span>Z0<span class="fl">-9.</span><span class="op">-]+</span>\<span class="op">.[</span>a<span class="op">-</span>zA<span class="op">-</span>Z<span class="op">]{</span><span class="dv">2</span><span class="op">,}</span>$<span class="op">/.</span><span class="fu">test</span><span class="op">(</span>email<span class="op">)</span></span>
<span id="cb21-566"><a href="#cb21-566" aria-hidden="true" tabindex="-1"></a>height<span class="op">,</span>height <span class="op">&gt;</span> <span class="dv">50</span> <span class="op">&amp;&amp;</span> height <span class="op">&lt;</span> <span class="dv">250</span></span>
<span id="cb21-567"><a href="#cb21-567" aria-hidden="true" tabindex="-1"></a>bmi<span class="op">,</span>weight <span class="op">/</span> <span class="op">(</span>height <span class="op">/</span> <span class="dv">100</span><span class="op">)</span> <span class="op">**</span> <span class="dv">2</span> <span class="op">&gt;</span> <span class="dv">15</span> <span class="op">&amp;&amp;</span> weight <span class="op">/</span> <span class="op">(</span>height <span class="op">/</span> <span class="dv">100</span><span class="op">)</span> <span class="op">**</span> <span class="dv">2</span> <span class="op">&lt;</span> <span class="dv">50</span></span>
<span id="cb21-568"><a href="#cb21-568" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-569"><a href="#cb21-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-570"><a href="#cb21-570" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-571"><a href="#cb21-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-572"><a href="#cb21-572" aria-hidden="true" tabindex="-1"></a><span class="fu">### **B. Lua Script to Convert CSV to JavaScript (`process_validation.lua`)**</span></span>
<span id="cb21-573"><a href="#cb21-573" aria-hidden="true" tabindex="-1"></a><span class="in">```lua</span></span>
<span id="cb21-574"><a href="#cb21-574" aria-hidden="true" tabindex="-1"></a><span class="in">local csv = require("luacsv")  -- Requires CSV parser library</span></span>
<span id="cb21-575"><a href="#cb21-575" aria-hidden="true" tabindex="-1"></a><span class="in">local file = io.open("validation_rules.csv", "r")</span></span>
<span id="cb21-576"><a href="#cb21-576" aria-hidden="true" tabindex="-1"></a><span class="in">local parsed_data = csv.parse(file:read("*all"))</span></span>
<span id="cb21-577"><a href="#cb21-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-578"><a href="#cb21-578" aria-hidden="true" tabindex="-1"></a><span class="in">local js_code = "const validationRules = {</span></span>
<span id="cb21-579"><a href="#cb21-579" aria-hidden="true" tabindex="-1"></a><span class="in">"</span></span>
<span id="cb21-580"><a href="#cb21-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-581"><a href="#cb21-581" aria-hidden="true" tabindex="-1"></a><span class="in">for i, row in ipairs(parsed_data) do</span></span>
<span id="cb21-582"><a href="#cb21-582" aria-hidden="true" tabindex="-1"></a><span class="in">    local field, rule = row[1], row[2]</span></span>
<span id="cb21-583"><a href="#cb21-583" aria-hidden="true" tabindex="-1"></a><span class="in">    js_code = js_code .. string.format('    "%s": function(value) { return %s; },</span></span>
<span id="cb21-584"><a href="#cb21-584" aria-hidden="true" tabindex="-1"></a><span class="in">', field, rule)</span></span>
<span id="cb21-585"><a href="#cb21-585" aria-hidden="true" tabindex="-1"></a><span class="in">end</span></span>
<span id="cb21-586"><a href="#cb21-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-587"><a href="#cb21-587" aria-hidden="true" tabindex="-1"></a><span class="in">js_code = js_code .. "};</span></span>
<span id="cb21-588"><a href="#cb21-588" aria-hidden="true" tabindex="-1"></a><span class="in">"</span></span>
<span id="cb21-589"><a href="#cb21-589" aria-hidden="true" tabindex="-1"></a><span class="in">file:close()</span></span>
<span id="cb21-590"><a href="#cb21-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-591"><a href="#cb21-591" aria-hidden="true" tabindex="-1"></a><span class="in">local js_file = io.open("validation.js", "w")</span></span>
<span id="cb21-592"><a href="#cb21-592" aria-hidden="true" tabindex="-1"></a><span class="in">js_file:write(js_code)</span></span>
<span id="cb21-593"><a href="#cb21-593" aria-hidden="true" tabindex="-1"></a><span class="in">js_file:close()</span></span>
<span id="cb21-594"><a href="#cb21-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-595"><a href="#cb21-595" aria-hidden="true" tabindex="-1"></a><span class="in">print("Validation JavaScript generated successfully!")</span></span>
<span id="cb21-596"><a href="#cb21-596" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-597"><a href="#cb21-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-598"><a href="#cb21-598" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-599"><a href="#cb21-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-600"><a href="#cb21-600" aria-hidden="true" tabindex="-1"></a><span class="fu">### **C. Shiny App with Automatic Rule Reloading (`app.R`)**</span></span>
<span id="cb21-601"><a href="#cb21-601" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb21-602"><a href="#cb21-602" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb21-603"><a href="#cb21-603" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyjs)</span>
<span id="cb21-604"><a href="#cb21-604" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fs)</span>
<span id="cb21-605"><a href="#cb21-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-606"><a href="#cb21-606" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb21-607"><a href="#cb21-607" aria-hidden="true" tabindex="-1"></a>    <span class="fu">useShinyjs</span>(),</span>
<span id="cb21-608"><a href="#cb21-608" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">head</span>(tags<span class="sc">$</span><span class="fu">script</span>(<span class="at">src =</span> <span class="st">"validation.js"</span>)),  <span class="co"># Include JS dynamically</span></span>
<span id="cb21-609"><a href="#cb21-609" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Dynamic Validation Rules in Shiny"</span>),</span>
<span id="cb21-610"><a href="#cb21-610" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-611"><a href="#cb21-611" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb21-612"><a href="#cb21-612" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb21-613"><a href="#cb21-613" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"age"</span>, <span class="st">"Enter Age:"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb21-614"><a href="#cb21-614" aria-hidden="true" tabindex="-1"></a>            <span class="fu">textInput</span>(<span class="st">"email"</span>, <span class="st">"Enter Email:"</span>),</span>
<span id="cb21-615"><a href="#cb21-615" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"height"</span>, <span class="st">"Enter Height (cm):"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb21-616"><a href="#cb21-616" aria-hidden="true" tabindex="-1"></a>            <span class="fu">numericInput</span>(<span class="st">"weight"</span>, <span class="st">"Enter Weight (kg):"</span>, <span class="at">value =</span> <span class="cn">NULL</span>),</span>
<span id="cb21-617"><a href="#cb21-617" aria-hidden="true" tabindex="-1"></a>            <span class="fu">actionButton</span>(<span class="st">"submit"</span>, <span class="st">"Submit"</span>),</span>
<span id="cb21-618"><a href="#cb21-618" aria-hidden="true" tabindex="-1"></a>            <span class="fu">verbatimTextOutput</span>(<span class="st">"validation_message"</span>)</span>
<span id="cb21-619"><a href="#cb21-619" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-620"><a href="#cb21-620" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>()</span>
<span id="cb21-621"><a href="#cb21-621" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-622"><a href="#cb21-622" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-623"><a href="#cb21-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-624"><a href="#cb21-624" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb21-625"><a href="#cb21-625" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Watch for changes in the validation rules file</span></span>
<span id="cb21-626"><a href="#cb21-626" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observe</span>({</span>
<span id="cb21-627"><a href="#cb21-627" aria-hidden="true" tabindex="-1"></a>        <span class="fu">invalidateLater</span>(<span class="dv">5000</span>, session)  <span class="co"># Check every 5 seconds</span></span>
<span id="cb21-628"><a href="#cb21-628" aria-hidden="true" tabindex="-1"></a>        <span class="fu">runjs</span>(<span class="st">"delete window.validationRules; $.getScript('validation.js');"</span>)</span>
<span id="cb21-629"><a href="#cb21-629" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb21-630"><a href="#cb21-630" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-631"><a href="#cb21-631" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observeEvent</span>(input<span class="sc">$</span>submit, {</span>
<span id="cb21-632"><a href="#cb21-632" aria-hidden="true" tabindex="-1"></a>        <span class="fu">runjs</span>(<span class="st">"</span></span>
<span id="cb21-633"><a href="#cb21-633" aria-hidden="true" tabindex="-1"></a><span class="st">            let ageValid = validationRules['age'](parseFloat($('#age').val()));</span></span>
<span id="cb21-634"><a href="#cb21-634" aria-hidden="true" tabindex="-1"></a><span class="st">            let emailValid = validationRules['email']($('#email').val());</span></span>
<span id="cb21-635"><a href="#cb21-635" aria-hidden="true" tabindex="-1"></a><span class="st">            let heightValid = validationRules['height'](parseFloat($('#height').val()));</span></span>
<span id="cb21-636"><a href="#cb21-636" aria-hidden="true" tabindex="-1"></a><span class="st">            let bmi = parseFloat($('#weight').val()) / ((parseFloat($('#height').val()) / 100) ** 2);</span></span>
<span id="cb21-637"><a href="#cb21-637" aria-hidden="true" tabindex="-1"></a><span class="st">            let bmiValid = validationRules['bmi'](bmi);</span></span>
<span id="cb21-638"><a href="#cb21-638" aria-hidden="true" tabindex="-1"></a><span class="st">            </span></span>
<span id="cb21-639"><a href="#cb21-639" aria-hidden="true" tabindex="-1"></a><span class="st">            let messages = [];</span></span>
<span id="cb21-640"><a href="#cb21-640" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!ageValid) messages.push('Invalid Age!');</span></span>
<span id="cb21-641"><a href="#cb21-641" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!emailValid) messages.push('Invalid Email!');</span></span>
<span id="cb21-642"><a href="#cb21-642" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!heightValid) messages.push('Invalid Height!');</span></span>
<span id="cb21-643"><a href="#cb21-643" aria-hidden="true" tabindex="-1"></a><span class="st">            if (!bmiValid) messages.push('Invalid BMI!');</span></span>
<span id="cb21-644"><a href="#cb21-644" aria-hidden="true" tabindex="-1"></a><span class="st">            </span></span>
<span id="cb21-645"><a href="#cb21-645" aria-hidden="true" tabindex="-1"></a><span class="st">            if (messages.length &gt; 0) {</span></span>
<span id="cb21-646"><a href="#cb21-646" aria-hidden="true" tabindex="-1"></a><span class="st">                alert(messages.join('</span><span class="sc">\n</span><span class="st">'));</span></span>
<span id="cb21-647"><a href="#cb21-647" aria-hidden="true" tabindex="-1"></a><span class="st">            } else {</span></span>
<span id="cb21-648"><a href="#cb21-648" aria-hidden="true" tabindex="-1"></a><span class="st">                alert('All inputs are valid!');</span></span>
<span id="cb21-649"><a href="#cb21-649" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb21-650"><a href="#cb21-650" aria-hidden="true" tabindex="-1"></a><span class="st">        "</span>);</span>
<span id="cb21-651"><a href="#cb21-651" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb21-652"><a href="#cb21-652" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-653"><a href="#cb21-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-654"><a href="#cb21-654" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span>
<span id="cb21-655"><a href="#cb21-655" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-656"><a href="#cb21-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-657"><a href="#cb21-657" aria-hidden="true" tabindex="-1"></a>✔ **Every 5 seconds**, Shiny reloads <span class="in">`validation.js`</span> if <span class="in">`validation_rules.csv`</span> was modified.  </span>
<span id="cb21-658"><a href="#cb21-658" aria-hidden="true" tabindex="-1"></a>✔ The new validation rules apply **immediately** in the browser.  </span>
<span id="cb21-659"><a href="#cb21-659" aria-hidden="true" tabindex="-1"></a>✔ No need to restart the Shiny app.</span>
<span id="cb21-660"><a href="#cb21-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-661"><a href="#cb21-661" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-662"><a href="#cb21-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-663"><a href="#cb21-663" aria-hidden="true" tabindex="-1"></a><span class="fu">## **2. Database Integration for Validation Rules**</span></span>
<span id="cb21-664"><a href="#cb21-664" aria-hidden="true" tabindex="-1"></a>Instead of a CSV file, the validation rules can be **stored in a database** (e.g., MySQL, PostgreSQL, SQLite).</span>
<span id="cb21-665"><a href="#cb21-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-666"><a href="#cb21-666" aria-hidden="true" tabindex="-1"></a><span class="fu">### **A. Database Schema**</span></span>
<span id="cb21-667"><a href="#cb21-667" aria-hidden="true" tabindex="-1"></a>Table: **validation_rules**</span>
<span id="cb21-668"><a href="#cb21-668" aria-hidden="true" tabindex="-1"></a><span class="in">```sql</span></span>
<span id="cb21-669"><a href="#cb21-669" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> validation_rules (</span>
<span id="cb21-670"><a href="#cb21-670" aria-hidden="true" tabindex="-1"></a>    <span class="fu">field</span> <span class="dt">TEXT</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb21-671"><a href="#cb21-671" aria-hidden="true" tabindex="-1"></a>    rule <span class="dt">TEXT</span></span>
<span id="cb21-672"><a href="#cb21-672" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb21-673"><a href="#cb21-673" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-674"><a href="#cb21-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-675"><a href="#cb21-675" aria-hidden="true" tabindex="-1"></a>Example data:</span>
<span id="cb21-676"><a href="#cb21-676" aria-hidden="true" tabindex="-1"></a><span class="in">```sql</span></span>
<span id="cb21-677"><a href="#cb21-677" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> validation_rules (<span class="fu">field</span>, rule) <span class="kw">VALUES</span></span>
<span id="cb21-678"><a href="#cb21-678" aria-hidden="true" tabindex="-1"></a>(<span class="st">'age'</span>, <span class="st">'age &gt;= 18 </span><span class="ch">&amp;&amp;</span><span class="st"> age &lt;= 65'</span>),</span>
<span id="cb21-679"><a href="#cb21-679" aria-hidden="true" tabindex="-1"></a>(<span class="st">'email'</span>, <span class="st">'/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email)'</span>),</span>
<span id="cb21-680"><a href="#cb21-680" aria-hidden="true" tabindex="-1"></a>(<span class="st">'height'</span>, <span class="st">'height &gt; 50 </span><span class="ch">&amp;&amp;</span><span class="st"> height &lt; 250'</span>),</span>
<span id="cb21-681"><a href="#cb21-681" aria-hidden="true" tabindex="-1"></a>(<span class="st">'bmi'</span>, <span class="st">'weight / (height / 100) ** 2 &gt; 15 </span><span class="ch">&amp;&amp;</span><span class="st"> weight / (height / 100) ** 2 &lt; 50'</span>);</span>
<span id="cb21-682"><a href="#cb21-682" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-683"><a href="#cb21-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-684"><a href="#cb21-684" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-685"><a href="#cb21-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-686"><a href="#cb21-686" aria-hidden="true" tabindex="-1"></a><span class="fu">### **B. Lua Script to Fetch Rules from Database (`process_validation_db.lua`)**</span></span>
<span id="cb21-687"><a href="#cb21-687" aria-hidden="true" tabindex="-1"></a><span class="in">```lua</span></span>
<span id="cb21-688"><a href="#cb21-688" aria-hidden="true" tabindex="-1"></a><span class="in">local sqlite3 = require("lsqlite3")</span></span>
<span id="cb21-689"><a href="#cb21-689" aria-hidden="true" tabindex="-1"></a><span class="in">local db = sqlite3.open("validation.db")</span></span>
<span id="cb21-690"><a href="#cb21-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-691"><a href="#cb21-691" aria-hidden="true" tabindex="-1"></a><span class="in">local js_code = "const validationRules = {</span></span>
<span id="cb21-692"><a href="#cb21-692" aria-hidden="true" tabindex="-1"></a><span class="in">"</span></span>
<span id="cb21-693"><a href="#cb21-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-694"><a href="#cb21-694" aria-hidden="true" tabindex="-1"></a><span class="in">for row in db:nrows("SELECT * FROM validation_rules") do</span></span>
<span id="cb21-695"><a href="#cb21-695" aria-hidden="true" tabindex="-1"></a><span class="in">    js_code = js_code .. string.format('    "%s": function(value) { return %s; },</span></span>
<span id="cb21-696"><a href="#cb21-696" aria-hidden="true" tabindex="-1"></a><span class="in">', row.field, row.rule)</span></span>
<span id="cb21-697"><a href="#cb21-697" aria-hidden="true" tabindex="-1"></a><span class="in">end</span></span>
<span id="cb21-698"><a href="#cb21-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-699"><a href="#cb21-699" aria-hidden="true" tabindex="-1"></a><span class="in">js_code = js_code .. "};</span></span>
<span id="cb21-700"><a href="#cb21-700" aria-hidden="true" tabindex="-1"></a><span class="in">"</span></span>
<span id="cb21-701"><a href="#cb21-701" aria-hidden="true" tabindex="-1"></a><span class="in">local js_file = io.open("validation.js", "w")</span></span>
<span id="cb21-702"><a href="#cb21-702" aria-hidden="true" tabindex="-1"></a><span class="in">js_file:write(js_code)</span></span>
<span id="cb21-703"><a href="#cb21-703" aria-hidden="true" tabindex="-1"></a><span class="in">js_file:close()</span></span>
<span id="cb21-704"><a href="#cb21-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-705"><a href="#cb21-705" aria-hidden="true" tabindex="-1"></a><span class="in">db:close()</span></span>
<span id="cb21-706"><a href="#cb21-706" aria-hidden="true" tabindex="-1"></a><span class="in">print("Validation JavaScript generated from database successfully!")</span></span>
<span id="cb21-707"><a href="#cb21-707" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-708"><a href="#cb21-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-709"><a href="#cb21-709" aria-hidden="true" tabindex="-1"></a>This script queries the database and **generates `validation.js` dynamically**.</span>
<span id="cb21-710"><a href="#cb21-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-711"><a href="#cb21-711" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-712"><a href="#cb21-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-713"><a href="#cb21-713" aria-hidden="true" tabindex="-1"></a><span class="fu">### **C. Modify Shiny to Fetch Rules from Database**</span></span>
<span id="cb21-714"><a href="#cb21-714" aria-hidden="true" tabindex="-1"></a>Modify the **Shiny `server` function** to reload validation rules **every 5 seconds**.</span>
<span id="cb21-715"><a href="#cb21-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-716"><a href="#cb21-716" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb21-717"><a href="#cb21-717" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb21-718"><a href="#cb21-718" aria-hidden="true" tabindex="-1"></a>    <span class="fu">observe</span>({</span>
<span id="cb21-719"><a href="#cb21-719" aria-hidden="true" tabindex="-1"></a>        <span class="fu">invalidateLater</span>(<span class="dv">5000</span>, session)  <span class="co"># Reload every 5 seconds</span></span>
<span id="cb21-720"><a href="#cb21-720" aria-hidden="true" tabindex="-1"></a>        <span class="fu">system</span>(<span class="st">"lua process_validation_db.lua"</span>)  <span class="co"># Run Lua script</span></span>
<span id="cb21-721"><a href="#cb21-721" aria-hidden="true" tabindex="-1"></a>        <span class="fu">runjs</span>(<span class="st">"delete window.validationRules; $.getScript('validation.js');"</span>)</span>
<span id="cb21-722"><a href="#cb21-722" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb21-723"><a href="#cb21-723" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-724"><a href="#cb21-724" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-725"><a href="#cb21-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-726"><a href="#cb21-726" aria-hidden="true" tabindex="-1"></a>✔ **Shiny queries the database every 5 seconds** and updates validation rules dynamically.  </span>
<span id="cb21-727"><a href="#cb21-727" aria-hidden="true" tabindex="-1"></a>✔ Users can **edit validation rules in the database**, and they apply instantly.  </span>
<span id="cb21-728"><a href="#cb21-728" aria-hidden="true" tabindex="-1"></a>✔ **No restart required**.</span>
<span id="cb21-729"><a href="#cb21-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-730"><a href="#cb21-730" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-731"><a href="#cb21-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-732"><a href="#cb21-732" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Comparison: Spreadsheet vs. Database**</span></span>
<span id="cb21-733"><a href="#cb21-733" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Feature <span class="pp">|</span> CSV-Based Dynamic Rules <span class="pp">|</span> Database-Based Dynamic Rules <span class="pp">|</span></span>
<span id="cb21-734"><a href="#cb21-734" aria-hidden="true" tabindex="-1"></a><span class="pp">|---------|----------------------|----------------------|</span></span>
<span id="cb21-735"><a href="#cb21-735" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Storage** <span class="pp">|</span> Local file <span class="pp">|</span> Centralized database <span class="pp">|</span></span>
<span id="cb21-736"><a href="#cb21-736" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Scalability** <span class="pp">|</span> Best for small teams <span class="pp">|</span> Ideal for large-scale use <span class="pp">|</span></span>
<span id="cb21-737"><a href="#cb21-737" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **User Interface** <span class="pp">|</span> Spreadsheet <span class="pp">|</span> Web-based admin panel <span class="pp">|</span></span>
<span id="cb21-738"><a href="#cb21-738" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> **Performance** <span class="pp">|</span> Fast <span class="pp">|</span> Requires DB query <span class="pp">|</span></span>
<span id="cb21-739"><a href="#cb21-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-740"><a href="#cb21-740" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb21-741"><a href="#cb21-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-742"><a href="#cb21-742" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Next Steps**</span></span>
<span id="cb21-743"><a href="#cb21-743" aria-hidden="true" tabindex="-1"></a>🔥 **Would you like an admin panel in Shiny to edit validation rules directly?**  </span>
<span id="cb21-744"><a href="#cb21-744" aria-hidden="true" tabindex="-1"></a>🔥 **Would you like to store validation rules in a NoSQL database (MongoDB)?**  </span>
<span id="cb21-745"><a href="#cb21-745" aria-hidden="true" tabindex="-1"></a>🚀 Let me know what enhancements you’d like! 🚀</span>
<span id="cb21-746"><a href="#cb21-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-747"><a href="#cb21-747" aria-hidden="true" tabindex="-1"></a><span class="fu">## Prerequisites</span></span>
<span id="cb21-748"><a href="#cb21-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-749"><a href="#cb21-749" aria-hidden="true" tabindex="-1"></a>In development</span>
<span id="cb21-750"><a href="#cb21-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-751"><a href="#cb21-751" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step-by-Step Implementation</span></span>
<span id="cb21-752"><a href="#cb21-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-753"><a href="#cb21-753" aria-hidden="true" tabindex="-1"></a>In development</span>
<span id="cb21-754"><a href="#cb21-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-755"><a href="#cb21-755" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key Takeaways</span></span>
<span id="cb21-756"><a href="#cb21-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-757"><a href="#cb21-757" aria-hidden="true" tabindex="-1"></a>In development</span>
<span id="cb21-758"><a href="#cb21-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-759"><a href="#cb21-759" aria-hidden="true" tabindex="-1"></a><span class="fu">## Further Reading</span></span>
<span id="cb21-760"><a href="#cb21-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-761"><a href="#cb21-761" aria-hidden="true" tabindex="-1"></a>In development</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2023-2025, Ronald G. Thomas</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rgt47">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/rgt47">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>