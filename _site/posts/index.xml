<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Thomas Lab</title>
<link>https://focusonr.org/posts/</link>
<atom:link href="https://focusonr.org/posts/index.xml" rel="self" type="application/rss+xml"/>
<description>Technical writing on R, data science, and research computing</description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Wed, 02 Jul 2025 07:00:00 GMT</lastBuildDate>
<item>
  <title>Research Compendia for Full Reproducibility in R: A zzrrtools, renv, draft: true and Docker Strategy</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>R.G. Thomas</dc:creator>
  <link>https://focusonr.org/posts/share_R_code_via_docker_p25/</link>
  <description><![CDATA[ 




<section id="executive-summary" class="level1 unnumbered">
<h1 class="unnumbered">Executive Summary</h1>
<p>Reproducibility is key to conducting data analysis, yet in practice, achieving it consistently with R workflows can be quite challenging. R projects frequently break when transferred between computers due to mismatched R versions, package dependencies, or inconsistent project organization. This white paper describes an approach to solving this problem by combining three tools: <strong>zzrrtools</strong> for creating structured research compendia, <strong>renv</strong> for R package management, and <strong>Docker</strong> for containerizing the computing environment. Together, these tools ensure that an R workflow runs identically across different computers by providing standardized project structure, identical R packages and versions, consistent R versions, and the same operating system libraries as the original setup.</p>
</section>
<section id="motivation" class="level1 unnumbered">
<h1 class="unnumbered">Motivation</h1>
<p>Imagine you’ve written code that you want to share with a colleague. At first glance, this may seem like a straightforward task—simply share the files electronically. However, ensuring that your colleague can run the code without errors, and obtain the same results is often much more challenging than anticipated.</p>
<p>When sharing R code, several potential problems can arise that can lead to code that won’t run or won’t match your results:</p>
<ul>
<li>Different versions of R installed on each machine</li>
<li>Mismatched R package versions</li>
<li>Missing or mismatched system dependencies (like pandoc or LaTeX)</li>
<li>Missing supplemental files referenced by the program (bibliography files, LaTeX preambles, datasets, images)</li>
<li>Different R startup configurations (.Rprofile or .Renviron)</li>
<li>Different Operating Systems (macOS, Windows, Linux, etc.)</li>
</ul>
<p>A real-world scenario often unfolds like this:</p>
<ol type="1">
<li>You email your analysis files to a colleague</li>
<li>They attempt to run your analysis with the commands you provided</li>
<li>But R isn’t installed on their system</li>
<li>After installing R, they get an error: “could not find function ‘render’” since they don’t have the <code>rmarkdown</code> package installed</li>
<li>They install the rmarkdown package and run the R command again</li>
<li>Now pandoc is missing</li>
<li>After installing pandoc, a required package, say <code>ggplot</code>, is missing</li>
<li>After installing <code>ggplot</code>, several external files are missing (e.g.&nbsp; bibliography, images)</li>
<li>And so on…</li>
</ol>
<p>This cycle of troubleshooting can be time-consuming and frustrating. Even when the code eventually runs, there’s no guarantee that they will get the same results that you did.</p>
<p>To ensure true reproducibility, your colleague should have a computing environment as similar to yours as possible. Given the dynamic nature of open source software, not to mention hardware and operating system differences, this can be difficult to achieve through manual installation and configuration.</p>
<p>The approach outlined in this white paper offers a systematic solution. Rather than sending standalone text files, with modest additional effort, you can provide a complete, containerized, hardware and OS independent environment that includes everything needed to run your analysis. With this approach, your colleague can run a simple command like:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb1-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb1-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/analysis/figures:/home/analyst/output"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb1-4">  ghcr.io/username/penguins_analysis:v1.0</span></code></pre></div>
<p>(The details of this docker command are explained below.)</p>
<p>This creates an identical R environment on their desktop, ready for them to run or modify your code with confidence that it will work as intended.</p>
<p>The Docker command shown above represents the end goal of this white paper’s approach, but achieving this level of reproducibility requires understanding and implementing three complementary technologies. The following sections provide a framework for building such reproducible environments from the ground up.</p>
</section>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<section id="the-challenge-of-reproducibility-in-r" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="the-challenge-of-reproducibility-in-r"><span class="header-section-number">1.1</span> The Challenge of Reproducibility in R</h2>
<p>R has become a standard tool for data science and statistical analysis across numerous scientific disciplines. However, as R projects grow in complexity, they often develop complex webs of dependencies that can make sharing and reproducing analyses difficult. Some common challenges include:</p>
<ul>
<li>Different R versions across machines</li>
<li>Incompatible package versions</li>
<li>Missing system-level dependencies</li>
<li>Operating system differences (macOS vs.&nbsp;Windows vs.&nbsp;Linux)</li>
<li>Conflicts with other installed packages</li>
<li>R startup files (.Rprofile, .Renviron, .RData) that can affect code behavior</li>
</ul>
<p>These challenges often manifest as the frustrating “it works on my machine” problem, where analysis code runs perfectly for the original author but fails when others attempt to use it. This undermines the scientific and collaborative potential of R-based analyses.</p>
</section>
<section id="a-three-level-solution" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="a-three-level-solution"><span class="header-section-number">1.2</span> A Three-Level Solution</h2>
<p>To address these challenges, we need to tackle reproducibility at three distinct levels:</p>
<ol type="1">
<li><p><strong>Project-level reproducibility</strong>: Ensuring consistent project structure and organization using research compendium standards</p></li>
<li><p><strong>Package-level reproducibility</strong>: Ensuring exact package versions and dependencies are maintained</p></li>
<li><p><strong>System-level reproducibility</strong>: Guaranteeing consistent R versions, operating system, and system libraries</p></li>
</ol>
<p>The strategy presented in this white paper leverages <strong>zzrrtools</strong> for project-level structure, <strong>renv</strong> for package-level consistency, and <strong>Docker</strong> for system-level consistency. When combined, they provide a framework for end-to-end reproducible R workflows with proper research compendium organization.</p>
<p>With this three-level framework established, we can now examine how each tool addresses its specific layer of reproducibility. We begin with zzrrtools, which tackles the foundational challenge of project-level organization and provides the structural framework upon which package and system-level reproducibility can be built.</p>
</section>
</section>
<section id="zzrrtools-project-level-reproducibility" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> zzrrtools: Project-Level Reproducibility</h1>
<section id="what-is-zzrrtools" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="what-is-zzrrtools"><span class="header-section-number">2.1</span> What is zzrrtools?</h2>
<p><strong>zzrrtools</strong> is a Docker-first framework that creates reproducible research compendia with containerized development workflows. The framework extends the research compendium concept introduced by Ben Marwick’s rrtools, adding container-based development and automated dependency validation. Team members install zzrrtools once on their system, then can create or join any zzrrtools-based project using the same framework. A research compendium organizes digital research materials to enable others to inspect, reproduce, and extend the research.</p>
</section>
<section id="key-features-of-zzrrtools" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="key-features-of-zzrrtools"><span class="header-section-number">2.2</span> Key Features of zzrrtools</h2>
<p><strong>zzrrtools</strong> creates containerized research compendia with these key features:</p>
<ul>
<li><p><strong>Docker-first development</strong>: All workflows operate within containers, eliminating “works on my machine” issues</p></li>
<li><p><strong>Centralized framework</strong>: One-time zzrrtools installation enables consistent project creation and team collaboration</p></li>
<li><p><strong>Multi-service architecture</strong>: Provides specialized Docker environments for interactive R sessions, shell development, and paper rendering</p></li>
<li><p><strong>Flexible base images</strong>: Choice of minimal (rocker/r-ver) or pre-packaged (rgt47/r-pluspackages) Docker templates with common R packages</p></li>
<li><p><strong>Advanced dependency validation</strong>: Automated renv consistency checking with CRAN verification and pre-commit validation</p></li>
<li><p><strong>Shell-based workflows</strong>: Optimized for command-line development with rich automation via Make targets</p></li>
<li><p><strong>Team collaboration focus</strong>: Designed for multi-developer teams working on shared research projects</p></li>
</ul>
</section>
<section id="zzrrtools-workflow-self-replicating-collaboration" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="zzrrtools-workflow-self-replicating-collaboration"><span class="header-section-number">2.3</span> zzrrtools Workflow: Self-Replicating Collaboration</h2>
<p>The zzrrtools workflow is designed for team collaboration:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Project creator initializes the research compendium</span></span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">~/prj/zzrrtools/zzrrtools.sh</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">OPTIONS</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Available options:</span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   --dotfiles DIR       Copy personal dotfiles (with leading dots)</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   --dotfiles-nodot DIR Copy dotfiles (without leading dots) </span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   --base-image NAME    Use custom Docker base image (default: rocker/r-ver)</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#                        Popular options: rgt47/r-pluspackages (includes tidyverse)</span></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   --no-docker          Skip Docker image build</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   --next-steps         Show workflow guidance</span></span></code></pre></div>
<p>This creates a Docker-first research compendium with:</p>
<ul>
<li><strong>Framework-based setup</strong> using centrally installed zzrrtools for consistent project creation</li>
<li><strong>Multi-service Docker architecture</strong> for interactive R, shell, and rendering</li>
<li><strong>Advanced renv validation</strong> with CRAN verification and pre-commit checking</li>
<li><strong>Dual-track automation</strong> supporting both native R and Docker workflows</li>
<li><strong>Navigation shortcuts</strong> via symbolic links (a→data, p→paper, s→scripts)</li>
<li><strong>Developer environment integration</strong> with personal dotfiles support</li>
<li><strong>Team synchronization</strong> via automated dependency validation</li>
</ul>
<p>Team members can collaborate after one-time zzrrtools installation:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># One-time zzrrtools installation</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone zzrrtools-repo ~/prj/zzrrtools</span>
<span id="cb3-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ~/prj/zzrrtools <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">./install.sh</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creates zzrrtools command in PATH</span></span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Per-project workflow</span></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone project-repo <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> project-repo</span>
<span id="cb3-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set up project environment (command available anywhere)</span></span>
<span id="cb3-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-r   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Start interactive R session</span></span></code></pre></div>
<section id="integrated-renv-consistency-checking" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="integrated-renv-consistency-checking"><span class="header-section-number">2.3.1</span> Integrated renv Consistency Checking</h3>
<p>The workflow includes advanced renv management through the <code>check_renv_for_commit.R</code> script, which provides automated dependency validation and team conflict prevention. This script:</p>
<ul>
<li><strong>Scans multiple directories</strong> (R/, scripts/, analysis/) for package dependencies</li>
<li><strong>Validates against CRAN</strong> to ensure packages exist and are properly named<br>
</li>
<li><strong>Synchronizes dependencies</strong> across code files, DESCRIPTION, and renv.lock</li>
<li><strong>Provides automated fixes</strong> to maintain team environment consistency</li>
<li><strong>Integrates with CI/CD</strong> for fail-fast validation workflows</li>
</ul>
<p>Usage examples:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive dependency checking (development)</span></span>
<span id="cb4-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R</span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Auto-fix dependency issues</span></span>
<span id="cb4-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span></span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CI/CD validation with fail-fast</span></span>
<span id="cb4-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fail-on-issues</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--quiet</span></span>
<span id="cb4-9"></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Via Make targets (recommended)</span></span>
<span id="cb4-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check dependencies</span></span>
<span id="cb4-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv-fix      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fix dependency issues</span></span>
<span id="cb4-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fix in container</span></span></code></pre></div>
<p>This approach ensures collaborators can reliably reproduce package environments and CI/CD pipelines have all necessary dependency information.</p>
</section>
</section>
<section id="research-compendium-structure" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="research-compendium-structure"><span class="header-section-number">2.4</span> Research Compendium Structure</h2>
<p>The zzrrtools setup creates a directory structure that follows research compendium best practices. The structure includes organized data folders, analysis directories, testing frameworks, and workflows.</p>
<p><strong>Key organizational principles:</strong></p>
<ul>
<li><strong>Data management</strong>: Separate folders for raw, derived, and external data with proper documentation</li>
<li><strong>Analysis workflow</strong>: Dedicated spaces for papers, figures, tables, and working scripts<br>
</li>
<li><strong>Package structure</strong>: R package organization with documentation and testing</li>
<li><strong>Integration support</strong>: Works with Docker, GitHub Actions, and build systems</li>
</ul>
<p>This organizational framework provides the foundation for reproducible research while supporting team collaboration and automated workflows.</p>
</section>
<section id="iterative-development-workflow" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="iterative-development-workflow"><span class="header-section-number">2.5</span> Iterative Development Workflow</h2>
<p>For collaborative analysis development, the research compendium structure supports a phased approach that balances rapid iteration with publication-quality outputs:</p>
<section id="phase-1-exploration-development-scripts" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="phase-1-exploration-development-scripts"><span class="header-section-number">2.5.1</span> Phase 1: Exploration &amp; Development (<code>scripts/</code>)</h3>
<p>During active analysis development, team members should work primarily in the <code>scripts/</code> directory:</p>
<pre><code>scripts/
├── 01_data_exploration.R
├── 02_penguin_correlations.R  
├── 03_species_analysis.R
├── 04_body_mass_analysis.R    # Additional analysis
└── 05_visualization_experiments.R</code></pre>
<p><strong>Benefits of script-based development:</strong> - <strong>Fast iteration</strong>: No need to knit/render documents during development - <strong>Interactive debugging</strong>: Can run code line-by-line in R console - <strong>Version control friendly</strong>: Pure R files produce clean diffs in Git - <strong>Easy collaboration</strong>: Contributors can add numbered script files - <strong>Flexible experimentation</strong>: Quick to test ideas and approaches</p>
</section>
<section id="phase-2-function-extraction-r" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="phase-2-function-extraction-r"><span class="header-section-number">2.5.2</span> Phase 2: Function Extraction (<code>R/</code>)</h3>
<p>As analysis patterns emerge, extract reusable functions to the <code>R/</code> directory:</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># R/penguin_utils.R</span></span>
<span id="cb6-2">calculate_species_correlation <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, x_var, y_var, </span>
<span id="cb6-3">                                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">species_filter =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) {</span>
<span id="cb6-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reusable function extracted from scripts</span></span>
<span id="cb6-5">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(species_filter)) {</span>
<span id="cb6-6">    data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> data[data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> species_filter, ]</span>
<span id="cb6-7">  }</span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(data[[x_var]], data[[y_var]], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"complete.obs"</span>)</span>
<span id="cb6-9">}</span>
<span id="cb6-10"></span>
<span id="cb6-11">create_species_plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, x_var, y_var) {</span>
<span id="cb6-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Standardized plotting function</span></span>
<span id="cb6-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(data, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes_string</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x_var, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y_var, </span>
<span id="cb6-14">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb6-17">}</span></code></pre></div>
</section>
<section id="phase-3-publication-integration-analysispaper" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3" class="anchored" data-anchor-id="phase-3-publication-integration-analysispaper"><span class="header-section-number">2.5.3</span> Phase 3: Publication Integration (<code>analysis/paper/</code>)</h3>
<p>Once analysis approaches stabilize, integrate polished results into the manuscript:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># In analysis/paper/paper.Rmd</span></span>
<span id="cb7-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option 1: Source complete scripts</span></span>
<span id="cb7-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../scripts/02_penguin_correlations.R"</span>)</span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../scripts/04_body_mass_analysis.R"</span>)</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option 2: Use extracted functions</span></span>
<span id="cb7-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)</span>
<span id="cb7-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"penguin_utils.R"</span>))</span>
<span id="cb7-9"></span>
<span id="cb7-10">correlation_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_species_correlation</span>(</span>
<span id="cb7-11">  penguins, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span></span>
<span id="cb7-12">)</span></code></pre></div>
</section>
<section id="recommended-collaborative-workflow" class="level3" data-number="2.5.4">
<h3 data-number="2.5.4" class="anchored" data-anchor-id="recommended-collaborative-workflow"><span class="header-section-number">2.5.4</span> Recommended Collaborative Workflow:</h3>
<ol type="1">
<li><strong>Project initialization</strong>: Project maintainer runs <code>zzrrtools.sh</code> to create project structure</li>
<li><strong>Immediate containerization</strong>: Build Docker container and switch to container-based development from day one</li>
<li><strong>Initial development</strong>: Create exploratory scripts in <code>scripts/</code> directory <strong>inside the container</strong></li>
<li><strong>Collaborative iteration</strong>: Team members clone repo, build identical container, add additional script files through pull requests <strong>from within the container</strong></li>
<li><strong>Code review in scripts</strong>: Both developers refine analysis logic in script files while working in identical Docker environments</li>
<li><strong>Function extraction</strong>: Move stable, reusable code to <code>R/</code> directory</li>
<li><strong>Paper integration</strong>: Source scripts or use functions in <code>analysis/paper/paper.Rmd</code></li>
<li><strong>Continuous validation</strong>: All development and testing occurs within the containerized environment</li>
</ol>
<p><strong>Why this container-first approach works:</strong></p>
<ul>
<li><strong>Reproducibility</strong>: Eliminates “works on my machine” problems from day one</li>
<li><strong>Identical environments</strong>: All collaborators work in exactly the same computational environment</li>
<li><strong>No environment drift</strong>: Cannot occur when everyone develops within containers</li>
<li><strong>Speed</strong>: Script development is faster than R Markdown knitting</li>
<li><strong>Modularity</strong>: Each script can focus on a specific analysis aspect</li>
<li><strong>Testability</strong>: Functions in <code>R/</code> can be easily unit tested in the same environment they’ll run in production</li>
<li><strong>Simple collaboration</strong>: Environment setup becomes a one-time <code>docker build</code> command for all contributors</li>
<li><strong>Development-production parity</strong>: The development environment IS the production environment</li>
</ul>
<p>This container-first, phased approach gives collaborators the speed of script-based development during exploration while maintaining the reproducibility and narrative flow of literate programming for final outputs. Most importantly, it ensures that all development occurs within the exact computational environment that will be used for final analysis and publication.</p>
<p>While zzrrtools establishes the organizational foundation for reproducible research, it relies on consistent R package environments to function effectively across different systems. The directory structure and R package framework created by zzrrtools becomes most useful when combined with precise dependency management. This is where renv becomes essential, providing the package-level consistency that complements zzrrtools’ structural approach.</p>
</section>
</section>
</section>
<section id="renv-package-level-reproducibility" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> renv: Package-Level Reproducibility</h1>
<section id="what-is-renv" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="what-is-renv"><span class="header-section-number">3.1</span> What is renv?</h2>
<p><strong>renv</strong> (Reproducible Environment) is an R package designed to create isolated, project-specific library environments. Instead of relying on a shared system-wide R library that might change over time, renv gives each project its own separate collection of packages with specific versions.</p>
</section>
<section id="key-features-of-renv" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="key-features-of-renv"><span class="header-section-number">3.2</span> Key Features of renv</h2>
<ul>
<li><p><strong>Isolated project library</strong>: renv creates a project-specific library (typically in <code>renv/library</code>) containing only the packages used by that project. This isolation ensures that updates or changes to packages in one project won’t affect others.</p></li>
<li><p><strong>Lockfile for dependencies</strong>: When you finish installing or updating packages, <code>renv::snapshot()</code> produces a <code>renv.lock</code> file - a JSON document listing each package and its exact version and source. This lockfile is designed to be committed to version control and shared.</p></li>
<li><p><strong>Environment restoration</strong>: On a new machine (or when reproducing past results), <code>renv::restore()</code> installs the exact versions of packages specified in the lockfile. This creates an R package environment identical to the one that created the lockfile, provided the same R version is available. The R version is important since critical components of the R system, such as random number generation, and default factor handling policy vary between versions.</p></li>
</ul>
</section>
<section id="basic-renv-workflow" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="basic-renv-workflow"><span class="header-section-number">3.3</span> Basic renv Workflow</h2>
<p>The typical workflow with renv involves:</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># One-time installation of renv</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"renv"</span>)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Initialize renv for the project</span></span>
<span id="cb8-5">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">init</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creates renv infrastructure</span></span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install project-specific packages</span></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...</span></span>
<span id="cb8-9"></span>
<span id="cb8-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Save the package state to renv.lock</span></span>
<span id="cb8-11">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snapshot</span>()</span>
<span id="cb8-12"></span>
<span id="cb8-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Later or on another system...</span></span>
<span id="cb8-14">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">restore</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restore packages from renv.lock</span></span></code></pre></div>
<p>While renv successfully addresses package-level reproducibility by ensuring identical R package versions across environments, even perfect package consistency cannot prevent analyses from failing or producing different results due to variations in R versions, operating systems, or system-level dependencies. A complete reproducibility solution requires addressing these system-level differences, which is where Docker containerization becomes essential.</p>
</section>
</section>
<section id="docker-system-level-reproducibility" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Docker: System-Level Reproducibility</h1>
<section id="what-is-docker" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="what-is-docker"><span class="header-section-number">4.1</span> What is Docker?</h2>
<p>Docker is a platform that allows you to package software into standardized units called containers. A Docker container is like a lightweight virtual machine that includes everything needed to run an application: the code, runtime, system tools, libraries, and settings.</p>
</section>
<section id="dockers-role-in-reproducibility" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="dockers-role-in-reproducibility"><span class="header-section-number">4.2</span> Docker’s Role in Reproducibility</h2>
<p>While renv handles R packages, Docker ensures consistency for:</p>
<ul>
<li><strong>Operating system</strong>: The specific Linux distribution or OS version</li>
<li><strong>R interpreter</strong>: The exact R version</li>
<li><strong>System libraries</strong>: Required C/C++ libraries and other dependencies</li>
<li><strong>Computational environment</strong>: Memory limits, CPU configuration, etc.</li>
<li><strong>External tools</strong>: pandoc, LaTeX, and other utilities needed for R Markdown</li>
</ul>
<p>By running an R Markdown project in Docker, you eliminate differences in OS or R installation as potential sources of irreproducibility. Any machine running Docker will execute the container in an identical environment.</p>
</section>
<section id="docker-components-for-r-workflows" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="docker-components-for-r-workflows"><span class="header-section-number">4.3</span> Docker Components for R Workflows</h2>
<p>For R-based projects, a typical Docker approach involves:</p>
<ol type="1">
<li><strong>Base image</strong>: Starting from a pre-configured R image (e.g., from the Rocker project)</li>
<li><strong>Dependencies</strong>: Adding system and R package dependencies</li>
<li><strong>Configuration</strong>: Setting working directories and environment variables</li>
<li><strong>Content</strong>: Adding project files</li>
<li><strong>Execution</strong>: Defining how the project should run</li>
</ol>
<p>The zzrrtools setup uses a streamlined Dockerfile based on rocker/r-ver with TinyTeX for LaTeX support. The R version is matched to the renv.lock file:</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Use R version from renv.lock for perfect consistency</span></span>
<span id="cb9-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> R_VERSION=4.3.0</span>
<span id="cb9-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> rocker/r-ver:${R_VERSION}</span>
<span id="cb9-4"></span>
<span id="cb9-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Prevent interactive prompts</span></span>
<span id="cb9-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> DEBIAN_FRONTEND=noninteractive</span>
<span id="cb9-7"></span>
<span id="cb9-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install minimal system dependencies</span></span>
<span id="cb9-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> update <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--no-install-recommends</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb9-10">    pandoc <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb9-11">    vim <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb9-12">    git <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb9-13">    curl <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb9-14">    fonts-dejavu <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb9-15">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> clean <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> /var/lib/apt/lists/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb9-16"></span>
<span id="cb9-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create non-root user</span></span>
<span id="cb9-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> USERNAME=analyst</span>
<span id="cb9-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">useradd</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--create-home</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span> /bin/bash <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span></span>
<span id="cb9-20"></span>
<span id="cb9-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set user R library path</span></span>
<span id="cb9-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> R_LIBS_USER=/home/${USERNAME}/R/library</span>
<span id="cb9-23"></span>
<span id="cb9-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create user R library directory and assign permissions</span></span>
<span id="cb9-25"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/R/library <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb9-26">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/R</span>
<span id="cb9-27"></span>
<span id="cb9-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set working directory</span></span>
<span id="cb9-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}</span>
<span id="cb9-30"></span>
<span id="cb9-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy renv files with correct ownership</span></span>
<span id="cb9-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv.lock ./</span>
<span id="cb9-33"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv/activate.R ./renv/</span>
<span id="cb9-34"></span>
<span id="cb9-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Switch to non-root user</span></span>
<span id="cb9-36"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> ${USERNAME}</span>
<span id="cb9-37"></span>
<span id="cb9-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install base R packages to user library</span></span>
<span id="cb9-39"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.libPaths(Sys.getenv("R_LIBS_USER")); \</span></span>
<span id="cb9-40"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    install.packages(c("tinytex", "rmarkdown", "renv"), \</span></span>
<span id="cb9-41"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    repos = "https://cloud.r-project.org")'</span></span>
<span id="cb9-42"></span>
<span id="cb9-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install TinyTeX in user directory</span></span>
<span id="cb9-44"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'tinytex::install_tinytex()'</span></span>
<span id="cb9-45"></span>
<span id="cb9-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add TinyTeX binaries to PATH</span></span>
<span id="cb9-47"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> PATH=/home/${USERNAME}/.TinyTeX/bin/x86_64-linux:$PATH</span>
<span id="cb9-48"></span>
<span id="cb9-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restore R packages via renv</span></span>
<span id="cb9-50"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.libPaths(Sys.getenv("R_LIBS_USER")); \</span></span>
<span id="cb9-51"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    renv::restore()'</span></span>
<span id="cb9-52"></span>
<span id="cb9-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Default to interactive shell</span></span>
<span id="cb9-54"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CMD</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/bash"</span>]</span></code></pre></div>
<p>This configuration provides a minimal R installation with LaTeX support for PDF rendering and secure non-root user execution.</p>
<p><strong>Docker Compose Integration:</strong></p>
<p>The setup also includes a docker-compose.yml that provides multiple development environments:</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Multiple services for different workflows</span></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">services</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb10-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-session</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">   # Interactive R session  </span></span>
<span id="cb10-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">        # Bash shell access</span></span>
<span id="cb10-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">research</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # Automated paper rendering</span></span>
<span id="cb10-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">        # Package testing</span></span>
<span id="cb10-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">check</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">       # Package checking</span></span></code></pre></div>
<p>This allows developers to choose their preferred development environment while maintaining identical package dependencies and system configuration.</p>
</section>
</section>
<section id="combining-zzrrtools-renv-and-docker-a-comprehensive-approach" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Combining zzrrtools, renv, and Docker: A Comprehensive Approach</h1>
<section id="why-use-all-three" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="why-use-all-three"><span class="header-section-number">5.1</span> Why Use All Three?</h2>
<p>Using any single tool improves reproducibility, but combining all three provides the most complete solution:</p>
<ul>
<li><strong>zzrrtools</strong> provides standardized project structure and research compendium organization</li>
<li><strong>renv</strong> guarantees the R packages and their versions</li>
<li><strong>Docker</strong> guarantees the OS and R version</li>
<li><strong>Together</strong> they achieve end-to-end reproducibility from project organization through package dependencies to operating system consistency</li>
</ul>
<p>This approach creates a fully portable, well-organized research compendium that can be shared and will produce identical results across different computers while following established research best practices.</p>
</section>
<section id="integration-strategy-with-governance-model" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="integration-strategy-with-governance-model"><span class="header-section-number">5.2</span> Integration Strategy with Governance Model</h2>
<p>The workflow integrates zzrrtools, renv, and Docker with a clear governance structure suitable for multi-developer research teams:</p>
<p><strong>Project Maintainer Role:</strong> - Creates and maintains the research compendium structure - Manages renv environment and package dependencies using consistency checking - Updates and maintains Docker images - Reviews and approves contributor changes - Runs renv validation before accepting pull requests</p>
<p><strong>Contributor Role (Other Developers)</strong>: - Access the private research compendium as invited collaborators - Add analysis content, papers, and documentation using feature branches - Propose new package dependencies through contributions - Submit changes via pull requests from feature branches</p>
<p><strong>Workflow Steps</strong>:</p>
<ol type="1">
<li><p><strong>Initialize Research Compendium (Maintainer)</strong>:</p>
<ul>
<li>Create standardized project structure using zzrrtools framework</li>
<li>Set up analysis directories with data organization</li>
<li>Initialize renv environment with <code>renv::init()</code></li>
<li>Create Dockerfile with container configuration</li>
</ul></li>
<li><p><strong>Establish Development Environment (Maintainer)</strong>:</p>
<ul>
<li><p>Install required packages and develop initial analysis</p></li>
<li><p>Create tests for analytical functions</p></li>
<li><p>Use the renv consistency checker to validate and create initial lockfile:</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Validate dependencies and create snapshot</span></span>
<span id="cb11-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span></span></code></pre></div></li>
<li><p>Build and test Docker image locally</p></li>
</ul></li>
<li><p><strong>Maintain Infrastructure (Maintainer)</strong>:</p>
<ul>
<li><p>Review contributor pull requests for package additions</p></li>
<li><p>Use renv consistency checker to validate and update dependencies:</p>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Validate contributor's package requirements</span></span>
<span id="cb12-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fail-on-issues</span></span>
<span id="cb12-3"></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If validation passes, update environment</span></span>
<span id="cb12-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span></span></code></pre></div></li>
<li><p>Update <code>renv.lock</code> by selectively incorporating new dependencies</p></li>
<li><p>Rebuild Docker images when system dependencies change</p></li>
<li><p>Push updated images to container registry (Docker Hub, GitHub Container Registry)</p></li>
</ul></li>
<li><p><strong>Collaborative Development (All Developers)</strong>:</p>
<p><strong>Research Compendium Files in GitHub Repository:</strong></p>
<ul>
<li><strong>Project Structure</strong>: <code>DESCRIPTION</code>, <code>LICENSE</code>, <code>README.qmd</code> (zzrrtools-generated)</li>
<li><strong>Analysis Content</strong>: Files in <code>analysis/paper/</code> directory (R Markdown manuscripts)</li>
<li><strong>Dependencies</strong>: <code>renv.lock</code> (managed by maintainer), <code>renv/activate.R</code></li>
<li><strong>Infrastructure</strong>: <code>Dockerfile</code> (maintained by project maintainer)</li>
<li><strong>Code</strong>: <code>R/</code> directory (utility functions), <code>tests/</code> directory</li>
<li><strong>Documentation</strong>: Generated README files and project documentation</li>
<li><strong>Configuration</strong>: <code>.gitignore</code>, <code>.github/</code> (CI/CD workflows)</li>
</ul>
<p><strong>Sharing the Docker image using Docker Hub:</strong></p>
<p>Docker Hub provides public image hosting that enables reproducible research by sharing computational environments while protecting private research code in GitHub.</p>
<p><strong>Docker Hub (Recommended for Reproducible Research)</strong></p>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build the image with GitHub Container Registry URL</span></span>
<span id="cb13-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> ghcr.io/username/penguins_analysis:v1.0 .</span>
<span id="cb13-3"></span>
<span id="cb13-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Login to GitHub Container Registry (using GitHub Personal Access Token)</span></span>
<span id="cb13-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$GITHUB_TOKEN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> login ghcr.io <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-u</span> username <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb13-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--password-stdin</span></span>
<span id="cb13-7"></span>
<span id="cb13-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Push to GitHub Container Registry (automatically private)</span></span>
<span id="cb13-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> push ghcr.io/username/penguins_analysis:v1.0</span></code></pre></div>
<p><strong>Setting up GitHub Personal Access Token:</strong></p>
<p>Create a Personal Access Token with the required permissions for container registry operations. The token must include <code>write:packages</code> and <code>read:packages</code> scopes, plus <code>repo</code> access for private repositories.</p>
<p><strong>For detailed step-by-step instructions, see Appendix A: GitHub Personal Access Token Setup.</strong></p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Export token as environment variable (replace with your actual token)</span></span>
<span id="cb14-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">GITHUB_TOKEN</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
<span id="cb14-3"></span>
<span id="cb14-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Login and push</span></span>
<span id="cb14-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$GITHUB_TOKEN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> login ghcr.io <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-u</span> username <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb14-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--password-stdin</span></span>
<span id="cb14-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> ghcr.io/username/penguins_analysis:v1.0 .</span>
<span id="cb14-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> push ghcr.io/username/penguins_analysis:v1.0</span></code></pre></div>
<p><strong>Note</strong>: If you get a “permission_denied” error when pushing, ensure your token includes the correct scopes (see Appendix A for details).</p>
<p><strong>GitHub Container Registry Benefits:</strong></p>
<ul>
<li><strong>Free tier</strong>: 0.5GB storage included, no billing currently active</li>
<li><strong>Automatic access control</strong>: Inherits repository permissions</li>
<li><strong>Integrated with GitHub Actions</strong>: Direct authentication in CI/CD</li>
<li><strong>Simple team sharing</strong>: Repository collaborators automatically have access</li>
<li><strong>Package management</strong>: Integrated with GitHub Packages ecosystem</li>
</ul>
<p><strong>Docker Workflow:</strong></p>
<p>The zzrrtools setup provides multiple approaches for working with containers, from simple Make commands to direct Docker execution. Make commands offer simplicity:</p>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build and run with Make (recommended)</span></span>
<span id="cb15-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-build    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build the container</span></span>
<span id="cb15-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-r        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive R session</span></span>
<span id="cb15-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-render   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Render research paper</span></span></code></pre></div>
<p><strong>For Docker workflow options including Docker Compose and direct commands, see Appendix D: Docker Workflow Options.</strong></p></li>
<li><p><strong>Execute consistently</strong>:</p>
<ul>
<li>Run analyses in the Docker container for guaranteed reproducibility</li>
<li>Use volume mounts to access local files while maintaining environment consistency</li>
<li>Run tests within the container to verify functionality</li>
</ul></li>
</ol>
<p>This strategy ensures that your R Markdown documents and analyses will run identically for anyone who has access to your Docker container, regardless of their local setup.</p>
</section>
</section>
<section id="practical-example-collaborative-research-compendium-development-with-testing" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Practical Example: Collaborative Research Compendium Development with Testing</h1>
<p>The following case study demonstrates how two developers can collaborate on a research compendium using zzrrtools, renv, and Docker to ensure reproducibility, with integrated testing procedures to maintain code quality.</p>
<section id="project-scenario" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="project-scenario"><span class="header-section-number">6.1</span> Project Scenario</h2>
<p>A team of data scientists collaborates on Palmer Penguins analysis using zzrrtools’ Docker-first workflow that eliminates environment setup friction:</p>
<ul>
<li><strong>Joe</strong> (<code>joe</code>): Project maintainer who initializes the repository</li>
<li><strong>Sam</strong> (<code>sam</code>): Contributor who extends the analysis<br>
</li>
<li><strong>Additional team members</strong>: Can join without any local R installation</li>
</ul>
<p>The collaboration model emphasizes <strong>zero-setup team onboarding</strong> through self-replicating project distribution and containerized development environments.</p>
<blockquote class="blockquote">
<p><strong>Collaboration Philosophy</strong>: - <strong>Self-contained projects</strong>: Each repository includes its own setup script - <strong>Container-first development</strong>: All work happens in identical Docker environments - <strong>Automated dependency validation</strong>: Pre-commit checks prevent conflicts - <strong>Shell-based workflows</strong>: Command-line tools for maximum flexibility</p>
</blockquote>
<p><strong>Key Workflow Principles:</strong> - Joe initializes with zzrrtools and commits the setup script to the repository - Team members run the included script - no separate installation required - All development occurs in containers for perfect environment consistency - Dependency changes are validated before commits to prevent team conflicts - Each developer works in identical environments regardless of host system</p>
</section>
<section id="implementation-example" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="implementation-example"><span class="header-section-number">6.2</span> Implementation Example</h2>
<section id="project-maintainer-setup-joe" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="project-maintainer-setup-joe"><span class="header-section-number">6.2.1</span> Project Maintainer Setup (Joe)</h3>
<p>Joe initializes a private GitHub repository and creates the containerized research environment:</p>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create repository and initialize zzrrtools</span></span>
<span id="cb16-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/joe/penguins_analysis.git</span>
<span id="cb16-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> penguins_analysis</span>
<span id="cb16-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">~/prj/zzrrtools/zzrrtools.sh</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dotfiles</span> ~/.config/shell <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb16-5">                             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--base-image</span> rgt47/r-pluspackages</span></code></pre></div>
<p>This creates: - Research compendium directory structure - Docker container configuration - renv dependency management - Automated validation scripts - GitHub Actions workflows</p>
<p><strong>For a detailed view of the complete directory structure created by zzrrtools, see Appendix C: Directory Structure.</strong></p>
<p>Joe completes the setup and begins development:</p>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Validate dependencies and build container</span></span>
<span id="cb17-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv</span>
<span id="cb17-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-build</span>
<span id="cb17-4"></span>
<span id="cb17-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Start container-based development</span></span>
<span id="cb17-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-r</span></code></pre></div>
<p><strong>For detailed information on renv dependency validation, troubleshooting, and team collaboration workflows, see Appendix G: renv Management and Validation.</strong></p>
<p>The validation script ensures package environment consistency by verifying dependencies across code files, DESCRIPTION, and renv.lock, preventing common collaboration issues where team members have mismatched environments.</p>
<p><strong>Step 4: Create Initial Analysis Paper</strong></p>
<p>Joe creates an initial analysis examining flipper length vs.&nbsp;bill length relationships in the Palmer Penguins dataset, implementing basic visualization and statistical exploration within the research compendium structure.</p>
<p><strong>Step 5: Create Tests for Analysis Functions</strong></p>
<p>Joe implements testing to ensure reproducible research through data validation, error detection, and environment verification. Testing provides collaboration confidence and supports publication standards by validating data integrity, statistical relationships, and pipeline functionality.</p>
<p>Joe sets up the testing framework and creates basic data validation tests to verify dataset availability, dimensions, and required columns. These tests ensure the analysis environment is correctly configured and catch data-related issues early in the development process.</p>
<p><strong>For a complete test suite with data validation, statistical tests, and integration tests, see Appendix B: Test Suite.</strong></p>
<p><strong>Step 6: Create a .gitignore file</strong></p>
<p>Joe configures version control to track source code and dependencies while excluding generated outputs and temporary files. The principle: track the “recipe” (code + dependencies), not the “meal” (outputs).</p>
<p>Joe creates a <code>.gitignore</code> file excluding renv libraries, generated outputs, temporary files, and system artifacts. This keeps the repository lightweight while ensuring collaborators can recreate the complete environment from tracked dependencies.</p>
<p><strong>Step 7: Create a Dockerfile</strong></p>
<p>zzrrtools generates a Dockerfile with multiple template options. The standard template uses rocker/r-ver, while the pluspackages template includes common R packages like tidyverse. Both provide:</p>
<ul>
<li><strong>R version consistency</strong>: Matches exact R version specified in renv.lock</li>
<li><strong>Development environment</strong>: Includes zsh, vim, tmux, Node.js for plugin support</li>
<li><strong>Security</strong>: Non-root user execution with proper file permissions</li>
<li><strong>TinyTeX integration</strong>: LaTeX support for PDF rendering (pluspackages template)</li>
<li><strong>Pre-installed packages</strong>: Common packages like tidyverse, DT, testthat (pluspackages template)</li>
</ul>
<p>The generated Dockerfile includes development tools and optimizations:</p>
<div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb18-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> R_VERSION=latest</span>
<span id="cb18-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> rocker/r-ver:${R_VERSION}</span>
<span id="cb18-3"></span>
<span id="cb18-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install comprehensive development environment</span></span>
<span id="cb18-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> update <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb18-6">    git ssh curl wget vim tmux zsh build-essential <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb18-7">    libcurl4-openssl-dev libssl-dev libxml2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb18-8">    libfontconfig1-dev libharfbuzz-dev libfribidi-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb18-9">    libfreetype6-dev libpng-dev libtiff5-dev libjpeg-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb18-10">    man-db pandoc <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb18-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> /var/lib/apt/lists/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb18-12"></span>
<span id="cb18-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install Node.js for vim plugins</span></span>
<span id="cb18-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fsSL</span> https://deb.nodesource.com/setup_lts.x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb18-15">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> nodejs</span>
<span id="cb18-16"></span>
<span id="cb18-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create non-root user with zsh shell</span></span>
<span id="cb18-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> USERNAME=analyst</span>
<span id="cb18-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">useradd</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--create-home</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span> /bin/zsh <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span></span>
<span id="cb18-20"></span>
<span id="cb18-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set up R environment with renv</span></span>
<span id="cb18-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}/project</span>
<span id="cb18-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv.lock ./</span>
<span id="cb18-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> ${USERNAME}</span>
<span id="cb18-25"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages('renv'); renv::restore()"</span></span>
<span id="cb18-26"></span>
<span id="cb18-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy project files and install</span></span>
<span id="cb18-28"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> . .</span>
<span id="cb18-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devtools::install('.')"</span></span>
<span id="cb18-30"></span>
<span id="cb18-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CMD</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/zsh"</span>]</span></code></pre></div>
<p><strong>Alternative: Pre-packaged Template</strong></p>
<p>For projects using common packages, the pluspackages template includes TinyTeX and popular R packages:</p>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install TinyTeX for PDF rendering</span></span>
<span id="cb19-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages('tinytex')"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb19-3">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tinytex::install_tinytex()"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb19-4">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/root/.TinyTeX/bin/*/tlmgr</span> path add</span>
<span id="cb19-5"></span>
<span id="cb19-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install common R packages (cached layer)</span></span>
<span id="cb19-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages(c('renv', 'remotes', 'devtools', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb19-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'testthat', 'naniar', 'DT', 'conflicted', 'ggthemes', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb19-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'datapasta', 'janitor', 'kableExtra', 'tidytuesdayR', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb19-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'tidyverse'), repos = c(CRAN = 'https://cloud.r-project.org'))"</span></span>
<span id="cb19-11"></span>
<span id="cb19-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Give user write permissions to R library</span></span>
<span id="cb19-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /usr/local/lib/R/site-library</span></code></pre></div>
<p><strong>For production Dockerfiles with development environment configuration (zsh, vim plugins, dotfiles integration), see Appendix F: Docker Configuration Examples.</strong></p>
<p><strong>R Version Synchronization:</strong></p>
<p>The Dockerfile uses a build argument to ensure the R version exactly matches what’s specified in <code>renv.lock</code>. This eliminates potential issues from R version mismatches between the package environment and the underlying R interpreter. The build command extracts the R version from the renv lockfile:</p>
<div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract R version from renv.lock</span></span>
<span id="cb20-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">R_VERSION</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">jq</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.R.Version'</span> renv.lock<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb20-3"></span>
<span id="cb20-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build Docker image with extracted R version</span></span>
<span id="cb20-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> R_VERSION=<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${R_VERSION}</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> ghcr.io/joe/penguins_analysis:v1.0 .</span></code></pre></div>
<p>If the <code>renv.lock</code> file specifies R 4.3.1, the Docker image will use <code>rocker/r-ver:4.3.1</code>. If renv is updated to R 4.4.0, the Docker build will use <code>rocker/r-ver:4.4.0</code>. This maintains consistency between the package environment and system environment.</p>
<p><strong>Step 8: Container-Based Development</strong></p>
<p>Joe performs all development work inside the Docker container, ensuring consistent environments and immediate visibility of changes to the host system through volume mounting. The container provides a complete development environment with package management, editing tools, and validation utilities.</p>
<p><strong>Step 9: Update and Share Environment</strong></p>
<p>When package dependencies change, GitHub Actions automatically rebuilds the Docker image with updated renv.lock specifications and pushes the updated environment to Docker Hub for team access. This ensures collaborators have access to the identical development environment.</p>
<p><strong>Step 10: Prepare for Team Handoff</strong></p>
<p>Before handing off to team members, Joe must complete several critical steps:</p>
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Validate all dependencies are properly captured</span></span>
<span id="cb21-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv-fix</span>
<span id="cb21-3"></span>
<span id="cb21-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Run complete test suite to ensure everything works</span></span>
<span id="cb21-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-test</span>
<span id="cb21-6"></span>
<span id="cb21-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Render paper to verify end-to-end workflow</span></span>
<span id="cb21-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-render</span>
<span id="cb21-9"></span>
<span id="cb21-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Build and tag the Docker image</span></span>
<span id="cb21-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-build</span>
<span id="cb21-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> tag penguins_analysis ghcr.io/joe/penguins_analysis:v1.0</span>
<span id="cb21-13"></span>
<span id="cb21-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 5. Push Docker image to Docker Hub for team access</span></span>
<span id="cb21-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$GITHUB_TOKEN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> login ghcr.io <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-u</span> joe <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--password-stdin</span></span>
<span id="cb21-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> push ghcr.io/joe/penguins_analysis:v1.0</span>
<span id="cb21-17"></span>
<span id="cb21-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 6. Commit all setup files and push to repository</span></span>
<span id="cb21-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add .</span>
<span id="cb21-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Initial research compendium setup with Docker environment"</span></span>
<span id="cb21-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> push origin main</span></code></pre></div>
<p><strong>Step 11: Enable Team Access</strong></p>
<p>Joe configures repository permissions for team collaboration:</p>
<ol type="1">
<li><strong>Repository Settings</strong> → <strong>Collaborators</strong> → Add team members</li>
<li><strong>Grant “Write” access</strong> to enable forking and pull requests</li>
<li><strong>Share repository URL</strong> and Docker Hub image name with team</li>
<li><strong>Document onboarding process</strong> in README or team communication</li>
</ol>
<p>At this point, Joe has established a reproducible research framework ready for collaborative development. The containerized environment is available via the registry, and team members can join with zero local setup requirements.</p>
</section>
<section id="team-member-onboarding-sam" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="team-member-onboarding-sam"><span class="header-section-number">6.2.2</span> Team Member Onboarding (Sam)</h3>
<p><strong>What Sam Receives from Joe:</strong> - Repository URL: <code>https://github.com/joe/penguins_analysis</code> - Container registry access (GitHub Personal Access Token) - Brief project overview and development guidelines</p>
<p><strong>Sam’s Onboarding Process:</strong></p>
<div class="sourceCode" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Clone the zzrrtools framework</span></span>
<span id="cb22-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/username/zzrrtools.git ~/prj/zzrrtools</span>
<span id="cb22-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ~/prj/zzrrtools</span>
<span id="cb22-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">./install.sh</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creates zzrrtools command in PATH</span></span>
<span id="cb22-5"></span>
<span id="cb22-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Fork and clone the project repository</span></span>
<span id="cb22-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/sam/penguins_analysis.git  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sam's fork</span></span>
<span id="cb22-8"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> penguins_analysis</span>
<span id="cb22-9"></span>
<span id="cb22-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Run zzrrtools setup with personal preferences</span></span>
<span id="cb22-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dotfiles</span> ~/.config/shell  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Customize with personal dotfiles</span></span>
<span id="cb22-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Or use other options:</span></span>
<span id="cb22-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># zzrrtools --base-image rgt47/r-pluspackages  # Use pre-packaged template</span></span>
<span id="cb22-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># zzrrtools --no-docker                       # Skip Docker build</span></span>
<span id="cb22-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># zzrrtools --next-steps                      # Show workflow guidance</span></span>
<span id="cb22-16"></span>
<span id="cb22-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Pull the pre-built Docker environment</span></span>
<span id="cb22-18"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> pull ghcr.io/joe/penguins_analysis:v1.0</span>
<span id="cb22-19"></span>
<span id="cb22-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 5. Start development in identical environment</span></span>
<span id="cb22-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-r</span></code></pre></div>
<p><strong>Key Advantage</strong>: After one-time zzrrtools installation, Sam has access to the framework for all future projects. The development environment setup becomes a simple script execution.</p>
<p>Sam develops new analysis components within the same containerized environment, ensuring identical results across team members.</p>
<p><strong>Step 5: Paper Integration and Testing</strong></p>
<p>Sam integrates the new analysis into the research paper, combining Joe’s original visualizations with the new body mass analysis. Sam also creates tests to validate the new functionality and ensure package dependencies are properly documented.</p>
<p><strong>Step 6: Validation and Quality Assurance</strong></p>
<p>Sam creates tests for the new body mass analysis, validates data integrity and statistical relationships, then runs the complete test suite and verifies paper rendering to ensure no regressions before submission.</p>
<p><strong>Step 7: Contribution Submission</strong></p>
<p>When Sam completes the analysis iteration, the submission process follows these steps:</p>
<ol type="1">
<li><p><strong>Validate dependencies</strong>: Run <code>make docker-check-renv-fix</code> to ensure package consistency</p></li>
<li><p><strong>Run complete test suite</strong>: Execute <code>make docker-test</code> to verify all tests pass</p></li>
<li><p><strong>Verify paper rendering</strong>: Run <code>make docker-render</code> to confirm analysis integrates properly</p></li>
<li><p><strong>Commit changes</strong>:</p>
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add .</span>
<span id="cb23-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Add body mass analysis and associated tests"</span></span>
<span id="cb23-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> push origin feature/body-mass-analysis</span></code></pre></div></li>
<li><p><strong>Create pull request</strong>: Submit pull request from Sam’s fork to Joe’s original repository</p></li>
<li><p><strong>Notify Joe</strong>: Alert project maintainer about new packages or Docker changes needed</p></li>
</ol>
<p><strong>Note</strong>: Only Joe (project maintainer) can accept pull requests. The official Docker image is automatically rebuilt and pushed to Docker Hub by GitHub Actions when package dependencies change.</p>
<p><strong>CI Feedback Loop</strong>: If the CI workflow fails (e.g., renv validation issues), Sam receives automatic GitHub notifications and can view detailed failure logs to fix the issues before Joe reviews the PR.</p>
<p>Sam commits the completed analysis, tests, and documentation to their feature branch and creates a cross-repository pull request to the original repository. This ensures proper code review and governance while maintaining clear attribution of contributions.</p>
<p>At this point, Sam has successfully contributed new analysis through the collaborative workflow. Joe reviews the pull request, tests the changes in the containerized environment, and merges the contribution while maintaining project governance and quality standards.</p>
</section>
</section>
<section id="complete-handoff-workflow-summary" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="complete-handoff-workflow-summary"><span class="header-section-number">6.3</span> Complete Handoff Workflow Summary</h2>
<p><strong>Initiating Developer (Joe) Responsibilities:</strong> 1. Run <code>zzrrtools.sh</code> to create research compendium 2. Develop initial analysis and create tests 3. Validate dependencies with <code>make check-renv-fix</code><br>
4. Build initial Docker image and configure automated rebuilds via GitHub Actions 5. Push team Docker image to Docker Hub (public registry for reproducibility) 6. Commit all files and push to repository 7. Grant team member repository access<br>
8. Share repository URL and Docker Hub image name</p>
<p><strong>Joining Developer (Sam) Process:</strong> 1. Receive repository URL and Docker Hub image name from Joe 2. Clone zzrrtools framework: <code>git clone zzrrtools ~/prj/zzrrtools</code> 3. Install zzrrtools: <code>cd ~/prj/zzrrtools &amp;&amp; ./install.sh</code> (creates <code>zzrrtools</code> command in PATH) 4. Fork and clone project repository 5. Pull pre-built team Docker image: <code>docker pull [TEAM]/project:latest</code> (from Docker Hub) 6. Start development immediately: <code>make docker-r</code> (no local setup needed) 7. Submit contributions via pull requests to private repository</p>
<p><strong>Key Success Factor</strong>: The containerized environment and centralized zzrrtools framework eliminate project-specific configuration requirements for team members after one-time framework installation.</p>
</section>
<section id="collaboration-results" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="collaboration-results"><span class="header-section-number">6.4</span> Collaboration Results</h2>
<p>This workflow achieves: - Identical development environments across team members - Dependency validation preventing conflicts - Standardized project structure - Automated testing and CI/CD integration</p>
<p><strong>For GitHub Actions setup instructions, workflow examples, and CI/CD configuration, see Appendix E: GitHub Actions CI/CD Setup.</strong></p>
<p>The collaborative workflow demonstrated above illustrates the power of combining zzrrtools, renv, and Docker for reproducible research. However, successful implementation of this approach requires understanding both when it’s most beneficial and how to apply it effectively. The following best practices and considerations provide guidance for teams considering this strategy.</p>
</section>
</section>
<section id="best-practices-and-considerations" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Best Practices and Considerations</h1>
<section id="when-to-use-this-approach" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="when-to-use-this-approach"><span class="header-section-number">7.1</span> When to Use This Approach</h2>
<p>The zzrrtools + renv + Docker approach with testing is particularly valuable for:</p>
<ul>
<li><strong>Long-term research projects</strong> where reproducibility over time is crucial</li>
<li><strong>Collaborative analyses</strong> with multiple contributors on different systems</li>
<li><strong>Production analytical pipelines</strong> that need to run consistently</li>
<li><strong>Academic publications</strong> where methods must be reproducible</li>
<li><strong>Teaching and education</strong> to ensure consistent student experiences</li>
<li><strong>Complex analyses</strong> that require testing to validate results</li>
</ul>
</section>
<section id="tips-for-efficient-implementation" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="tips-for-efficient-implementation"><span class="header-section-number">7.2</span> Tips for Efficient Implementation</h2>
<ol type="1">
<li><strong>Keep Docker images minimal</strong>: Include only what’s necessary for reproducibility.</li>
<li><strong>Use specific version tags</strong>: For both R packages and Docker base images, specify exact versions.</li>
<li><strong>Document system requirements</strong>: Include notes on RAM and storage requirements.</li>
<li><strong>Leverage bind mounts</strong>: Mount local directories to containers for easier development.</li>
<li><strong>Write meaningful tests</strong>: Focus on validating both data integrity and analytical results.</li>
<li><strong>Test regularly</strong>: Use CI/CD pipelines to run tests on every change.</li>
<li><strong>Consider computational requirements</strong>: Particularly for resource-intensive analyses.</li>
</ol>
</section>
<section id="testing-strategies-for-r-analyses" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="testing-strategies-for-r-analyses"><span class="header-section-number">7.3</span> Testing Strategies for R Analyses</h2>
<p>Testing data analysis code differs from traditional software testing but provides crucial value for reproducible research:</p>
<ol type="1">
<li><strong>Data Validation Tests</strong>: Ensure data has the expected structure, types, and values.</li>
<li><strong>Function Tests</strong>: Verify that custom functions work as expected with known inputs and outputs.</li>
<li><strong>Edge Case Tests</strong>: Check how code handles missing values, outliers, or unexpected inputs.</li>
<li><strong>Integration Tests</strong>: Confirm that different parts of the analysis work correctly together.</li>
<li><strong>Regression Tests</strong>: Make sure new changes don’t break existing functionality.</li>
<li><strong>Output Validation</strong>: Verify that final results match expected patterns or benchmarks.</li>
</ol>
<p>While uncommon in traditional data analysis, these tests catch silent errors, validate assumptions, and provide confidence that analyses remain correct as code and data evolve.</p>
</section>
<section id="potential-challenges" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="potential-challenges"><span class="header-section-number">7.4</span> Potential Challenges</h2>
<p>Some challenges to be aware of:</p>
<ul>
<li><strong>Docker image size</strong>: Images with many packages can become large</li>
<li><strong>Learning curve</strong>: Docker, renv, and testing frameworks require some initial learning</li>
<li><strong>System-specific features</strong>: Some analyses may rely on hardware features</li>
<li><strong>Performance considerations</strong>: Containers may have different performance characteristics</li>
<li><strong>Test maintenance</strong>: Tests need to be updated as the analysis evolves</li>
</ul>
</section>
<section id="troubleshooting-common-issues" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="troubleshooting-common-issues"><span class="header-section-number">7.5</span> Troubleshooting Common Issues</h2>
<p><strong>Docker Build Failures:</strong> - Try: <code>export DOCKER_BUILDKIT=0</code> (disable BuildKit) - Check Docker has sufficient memory/disk space - Ensure Docker is running and up to date</p>
<p><strong>Platform Warnings on ARM64/Apple Silicon:</strong> - Use updated Makefile with <code>--platform linux/amd64</code> flags - Or set: <code>export DOCKER_DEFAULT_PLATFORM=linux/amd64</code></p>
<p><strong>Permission Errors in Container:</strong> - Rebuild image after copying dotfiles - Check file ownership in project directory</p>
<p><strong>Package Name Errors:</strong> - Ensure directory name contains only letters/numbers/periods - Avoid underscores and special characters</p>
<p><strong>Missing Dotfiles in Container:</strong> - Use <code>--dotfiles</code> or <code>--dotfiles-nodot</code> flag during setup - Rebuild Docker image after adding dotfiles</p>
<p>Despite these challenges, the benefits of reproducible research outweigh the implementation costs, particularly for collaborative and long-term projects. The approach described in this white paper provides a foundation for achieving reproducibility that meets the standards expected in data science and academic research.</p>
</section>
</section>
<section id="conclusion" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Conclusion</h1>
<p>Achieving full reproducibility in R requires addressing project organization, package dependencies, and system-level consistency, while ensuring code quality through testing. By combining zzrrtools for research compendium structure, renv for R package management, Docker for environment containerization, and testing for code validation, data scientists and researchers can create truly portable, reproducible, and reliable workflows.</p>
<p>The approach presented in this white paper ensures that the common frustration of “it works on my machine” becomes a thing of the past. Instead, research compendia become easy to share and fully reproducible. A collaborator or reviewer can launch the Docker container and get identical results, without worrying about package versions, system setup, or project organization.</p>
<p>The case study demonstrates how two developers can effectively collaborate on an analysis while maintaining reproducibility and code quality throughout the project lifecycle. By integrating testing into the workflow, the team can be confident that their analysis is not only reproducible but also correct.</p>
<p>This strategy represents a method for long-term reproducibility in R, meeting the standards required for data science and research documentation. The combination of standardized research compendium structure, dependency management, and containerized environments creates a foundation for reproducible research. By adopting this approach, the R community can make progress toward the goal of reproducible and reliable research and analysis.</p>
</section>
<section id="references" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> References</h1>
<ol type="1">
<li>Marwick, B., Boettiger, C., &amp; Mullen, L. (2018). Packaging data analytical work reproducibly using R (and friends). <em>The American Statistician</em>, 72(1), 80-88.</li>
<li>Marwick, B. (2017). rrtools: Creates a Reproducible Research Compendium. R package version 0.1.6. https://github.com/benmarwick/rrtools (Extended in zzrrtools framework)</li>
<li>Ushey, K., Wickham, H., &amp; RStudio. (2023). renv: Project Environments. R package. https://rstudio.github.io/renv/</li>
<li>The Rocker Project. (2023). Docker containers for the R environment. https://www.rocker-project.org/</li>
<li>Wickham, H. (2023). testthat: Unit Testing for R. https://testthat.r-lib.org/</li>
</ol>
</section>
<section id="appendix-a-github-personal-access-token-setup" class="level1 unnumbered">
<h1 class="unnumbered">Appendix A: GitHub Personal Access Token Setup</h1>
<p>This appendix provides step-by-step instructions for creating a GitHub Personal Access Token with the required permissions for container registry operations.</p>
<p><strong>Why Container Access is Required:</strong> Both collaborators need container-related permissions because Docker images are stored in GitHub Container Registry as private packages that require authentication to access.</p>
<section id="step-by-step-token-creation" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="step-by-step-token-creation"><span class="header-section-number">9.1</span> Step-by-Step Token Creation</h2>
<p><strong>1. Navigate to GitHub Settings:</strong> - Go to <a href="https://github.com">GitHub.com</a> and sign in - Click your profile picture (top right) → Settings - In the left sidebar: Developer settings → Personal access tokens</p>
<p><strong>Note</strong>: GitHub now offers two token types: - <strong>Fine-grained personal access tokens</strong> (recommended for new projects) - <strong>Personal access tokens (classic)</strong> (for broader compatibility)</p>
<p><strong>2. Create New Token:</strong> - Click “Generate new token” and select the appropriate type - Add a descriptive note (e.g., “Docker Container Registry Access”) - Set expiration (recommended: 90 days for security)</p>
<p><strong>3. Select Required Scopes</strong> (check these boxes): - ✅ <strong>repo</strong> (Full control of private repositories) - <em>Required for private repos</em> - ✅ <strong>write:packages</strong> (Upload Docker images to GitHub Container Registry) - <em>Required for project maintainer</em> - ✅ <strong>read:packages</strong> (Download Docker images from GitHub Container Registry) - <em>Required for all team members</em> - ✅ <strong>delete:packages</strong> (Delete packages from GitHub Package Registry) - <em>Optional but recommended</em></p>
<p><strong>Note</strong>: Team members only need <code>read:packages</code> and <code>repo</code>, but the project maintainer needs all container permissions to push Docker images.</p>
<p><strong>Token Type Recommendation</strong>: Use fine-grained personal access tokens for new projects as they provide better security and more precise permissions.</p>
<p><strong>4. Generate and Copy Token:</strong> - Click “Generate token” at the bottom - <strong>Important</strong>: Copy the token immediately - you won’t see it again - Store it securely (see security practices below)</p>
</section>
<section id="token-security-best-practices" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="token-security-best-practices"><span class="header-section-number">9.2</span> Token Security Best Practices</h2>
<ul>
<li><strong>Never commit tokens to repositories</strong> - Use <code>.gitignore</code> to exclude files containing tokens</li>
<li><strong>Use environment variables</strong> - Store tokens in shell environment variables</li>
<li><strong>Set reasonable expiration dates</strong> - Use 30-90 day expiration for security</li>
<li><strong>Revoke unused tokens</strong> - Clean up tokens when no longer needed</li>
<li><strong>Consider GitHub CLI</strong> - Use <code>gh auth login</code> for easier management</li>
<li><strong>Monitor token usage</strong> - Check GitHub Settings → Developer settings → Personal access tokens for activity</li>
</ul>
</section>
<section id="alternative-using-github-cli" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="alternative-using-github-cli"><span class="header-section-number">9.3</span> Alternative: Using GitHub CLI</h2>
<p>For simpler token management, consider using GitHub CLI instead of manual tokens:</p>
<div class="sourceCode" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install and authenticate (handles tokens)</span></span>
<span id="cb24-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">gh</span> auth login <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--scopes</span> write:packages,read:packages,repo</span>
<span id="cb24-3"></span>
<span id="cb24-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Login to container registry (works with gh auth)</span></span>
<span id="cb24-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">gh</span> auth token<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> login ghcr.io <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb24-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-u</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">gh</span> api user <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--jq</span> .login<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--password-stdin</span></span></code></pre></div>
</section>
<section id="troubleshooting-common-issues-1" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="troubleshooting-common-issues-1"><span class="header-section-number">9.4</span> Troubleshooting Common Issues</h2>
<p><strong>“permission_denied: The token provided does not match expected scopes”</strong> - Verify your token includes <code>write:packages</code> and <code>read:packages</code> scopes - For private repositories, ensure <code>repo</code> scope is also selected - Create a new token with correct permissions if needed</p>
<p><strong>Token not recognized:</strong> - Ensure token is properly exported: <code>export GITHUB_TOKEN=your_token_here</code> - Verify token hasn’t expired - Check that you’re using the full token (starts with <code>ghp_</code>) 6. Horst, A.M., Hill, A.P., &amp; Gorman, K.B. (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. https://allisonhorst.github.io/palmerpenguins/ 7. Marwick, B. (2016). Computational reproducibility in archaeological research: Basic principles and a case study of their implementation. <em>Journal of Archaeological Method and Theory</em>, 24(2), 424-473.</p>
</section>
</section>
<section id="appendix-b-comprehensive-test-suite" class="level1 unnumbered">
<h1 class="unnumbered">Appendix B: Comprehensive Test Suite</h1>
<p>This appendix provides a set of tests that can be used to validate the Palmer Penguins analysis. These tests demonstrate best practices for data analysis testing and can be adapted for other projects.</p>
<section id="test-file-teststestthattest-comprehensive-analysis.r" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="test-file-teststestthattest-comprehensive-analysis.r"><span class="header-section-number">9.5</span> Test File: <code>tests/testthat/test-comprehensive-analysis.R</code></h2>
<div class="sourceCode" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(testthat)</span>
<span id="cb25-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb25-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb25-4"></span>
<span id="cb25-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 1: Data Availability and Basic Structure</span></span>
<span id="cb25-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify your primary dataset loads correctly and has </span></span>
<span id="cb25-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expected dimensions</span></span>
<span id="cb25-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Package loading issues, file path problems, corrupted data files</span></span>
<span id="cb25-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Palmer Penguins dataset is available and has correct structure"</span>, </span>
<span id="cb25-10">          {</span>
<span id="cb25-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exists</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"penguins"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">where =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"package:palmerpenguins"</span>))</span>
<span id="cb25-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_s3_class</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data.frame"</span>)</span>
<span id="cb25-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set expected </span></span>
<span id="cb25-14">                                                    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># column count</span></span>
<span id="cb25-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set minimum </span></span>
<span id="cb25-16">                                                    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># row threshold</span></span>
<span id="cb25-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">344</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set exact </span></span>
<span id="cb25-18">                                                      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expected count </span></span>
<span id="cb25-19">                                                      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># if known</span></span>
<span id="cb25-20">})</span>
<span id="cb25-21"></span>
<span id="cb25-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 2: Required Columns Exist with Correct Types</span></span>
<span id="cb25-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Ensure your analysis depends on columns that </span></span>
<span id="cb25-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># actually </span></span>
<span id="cb25-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># exist with correct types</span></span>
<span id="cb25-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Column name changes, type coercion issues, CSV import problems</span></span>
<span id="cb25-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dataset contains required columns with expected data types"</span>, {</span>
<span id="cb25-28">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-29">  </span>
<span id="cb25-30">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check column existence - Adapt: List columns your analysis requires</span></span>
<span id="cb25-31">  required_cols <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"island"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>, </span>
<span id="cb25-32">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_depth_mm"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, </span>
<span id="cb25-33">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body_mass_g"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sex"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)</span>
<span id="cb25-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(required_cols <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(df)))</span>
<span id="cb25-35">  </span>
<span id="cb25-36">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check data types - Adapt: Verify types match your analysis </span></span>
<span id="cb25-37">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expectations</span></span>
<span id="cb25-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"integer"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Factor stored as integer</span></span>
<span id="cb25-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"double"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Continuous measurements</span></span>
<span id="cb25-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"integer"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Discrete measurements</span></span>
<span id="cb25-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"integer"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Integer measurements</span></span>
<span id="cb25-42">})</span>
<span id="cb25-43"></span>
<span id="cb25-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 3: Categorical Variables Have Expected Levels</span></span>
<span id="cb25-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify factor levels for categorical variables used</span></span>
<span id="cb25-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># in </span></span>
<span id="cb25-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># analysis</span></span>
<span id="cb25-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Missing categories, typos in factor levels, data encoding issues</span></span>
<span id="cb25-49"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species factor has expected levels"</span>, {</span>
<span id="cb25-50">  species_levels <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">levels</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species)</span>
<span id="cb25-51">  expected_species <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Your </span></span>
<span id="cb25-52">                                                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expected </span></span>
<span id="cb25-53">                                                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># categories</span></span>
<span id="cb25-54">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(species_levels), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(expected_species))</span>
<span id="cb25-55">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(species_levels), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Expected number of </span></span>
<span id="cb25-56">                                           <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># categories</span></span>
<span id="cb25-57">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># For other datasets: Test treatment groups, regions, product types, etc.</span></span>
<span id="cb25-58">})</span>
<span id="cb25-59"></span>
<span id="cb25-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 4: Data Value Ranges are Domain-Reasonable</span></span>
<span id="cb25-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify numeric values fall within realistic ranges</span></span>
<span id="cb25-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for </span></span>
<span id="cb25-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># your domain</span></span>
<span id="cb25-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Data entry errors, unit conversion mistakes, outliers from </span></span>
<span id="cb25-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># measurement errors</span></span>
<span id="cb25-66"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Measurement values fall within reasonable biological ranges"</span>, {</span>
<span id="cb25-67">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-68">  </span>
<span id="cb25-69">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Bill length - Adapt: Set realistic bounds for your numeric variables</span></span>
<span id="cb25-70">  bill_lengths <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm)]</span>
<span id="cb25-71">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(bill_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> bill_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Penguin-</span></span>
<span id="cb25-72">                                                              <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># specific </span></span>
<span id="cb25-73">                                                              <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># range</span></span>
<span id="cb25-74">  </span>
<span id="cb25-75">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Flipper length - Examples for other domains:</span></span>
<span id="cb25-76">  flipper_lengths <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm)]</span>
<span id="cb25-77">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(flipper_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> flipper_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">250</span>))</span>
<span id="cb25-78">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Finance: stock prices &gt; 0, percentages 0-100</span></span>
<span id="cb25-79">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Health: age 0-120, BMI 10-80, blood pressure 50-300</span></span>
<span id="cb25-80">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Engineering: temperatures -273+°C, pressures &gt; 0</span></span>
<span id="cb25-81">  </span>
<span id="cb25-82">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Body mass</span></span>
<span id="cb25-83">  body_masses <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g)]</span>
<span id="cb25-84">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(body_masses <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> body_masses <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7000</span>))</span>
<span id="cb25-85">})</span>
<span id="cb25-86"></span>
<span id="cb25-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 5: Missing Data Patterns are as Expected</span></span>
<span id="cb25-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify missingness patterns match your data </span></span>
<span id="cb25-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># collection </span></span>
<span id="cb25-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expectations</span></span>
<span id="cb25-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Unexpected data loss, systematic missingness, data pipeline </span></span>
<span id="cb25-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># failures</span></span>
<span id="cb25-93"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Missing data follows expected patterns"</span>, {</span>
<span id="cb25-94">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-95">  </span>
<span id="cb25-96">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Total missing values should be manageable</span></span>
<span id="cb25-97">  total_na <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df))</span>
<span id="cb25-98">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(total_na, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(df))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set acceptable threshold for </span></span>
<span id="cb25-99">                                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># missing </span></span>
<span id="cb25-100">                                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># data</span></span>
<span id="cb25-101">  </span>
<span id="cb25-102">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Some variables may have expected missingness</span></span>
<span id="cb25-103">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sex)), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sex determination sometimes difficult</span></span>
<span id="cb25-104">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt examples: Optional survey questions, historical data gaps, sensor </span></span>
<span id="cb25-105">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># failures</span></span>
<span id="cb25-106">  </span>
<span id="cb25-107">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Critical variables should be complete</span></span>
<span id="cb25-108">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species)), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primary identifier must be </span></span>
<span id="cb25-109">                                           <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># complete</span></span>
<span id="cb25-110">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: ID columns, primary keys, required fields should have no NAs</span></span>
<span id="cb25-111">})</span>
<span id="cb25-112"></span>
<span id="cb25-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 6: Expected Statistical Relationships Hold</span></span>
<span id="cb25-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Test known relationships between variables in your </span></span>
<span id="cb25-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># domain</span></span>
<span id="cb25-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Data corruption, encoding errors, units mix-ups that break known </span></span>
<span id="cb25-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># patterns</span></span>
<span id="cb25-118"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expected correlations between measurements exist"</span>, {</span>
<span id="cb25-119">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-120">  </span>
<span id="cb25-121">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test strong expected relationships</span></span>
<span id="cb25-122">  correlation <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g, </span>
<span id="cb25-123">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"complete.obs"</span>)</span>
<span id="cb25-124">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(correlation, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Strong positive correlation expected</span></span>
<span id="cb25-125">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt examples: height vs weight, price vs quality, experience vs salary</span></span>
<span id="cb25-126">  </span>
<span id="cb25-127">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test weaker but expected relationships</span></span>
<span id="cb25-128">  bill_cor <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm, df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_depth_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"complete.obs"</span>)</span>
<span id="cb25-129">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(bill_cor), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Some relationship should exist</span></span>
<span id="cb25-130">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Education vs income, advertising vs sales, temperature vs </span></span>
<span id="cb25-131">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># energy use</span></span>
<span id="cb25-132">})</span>
<span id="cb25-133"></span>
<span id="cb25-134"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 7: Visualization Functions Work Correctly</span></span>
<span id="cb25-135"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Ensure your key plots and visualizations can be </span></span>
<span id="cb25-136"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># generated</span></span>
<span id="cb25-137"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Missing aesthetic mappings, incompatible data types, package </span></span>
<span id="cb25-138"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># conflicts</span></span>
<span id="cb25-139"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Basic plots can be generated without errors"</span>, {</span>
<span id="cb25-140">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-141">  </span>
<span id="cb25-142">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test basic plot creation without errors</span></span>
<span id="cb25-143">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_no_error</span>({</span>
<span id="cb25-144">    p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-145">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-146">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb25-147">  })</span>
<span id="cb25-148">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Test your key plot types - histograms, boxplots, time series,</span></span>
<span id="cb25-149">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># etc.</span></span>
<span id="cb25-150">  </span>
<span id="cb25-151">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test that plot object is properly created</span></span>
<span id="cb25-152">  p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-153">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()</span>
<span id="cb25-154">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_s3_class</span>(p1, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Check for your plotting </span></span>
<span id="cb25-155">                                   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># framework objects</span></span>
<span id="cb25-156">})</span>
<span id="cb25-157"></span>
<span id="cb25-158"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 8: Data Filtering and Subsetting Work Correctly</span></span>
<span id="cb25-159"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify data manipulation operations produce expected</span></span>
<span id="cb25-160"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># results</span></span>
<span id="cb25-161"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Logic errors in filtering, unexpected factor behaviors, </span></span>
<span id="cb25-162"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># indexing mistakes</span></span>
<span id="cb25-163"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data can be properly filtered and subsetted"</span>, {</span>
<span id="cb25-164">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-165">  </span>
<span id="cb25-166">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test categorical filtering</span></span>
<span id="cb25-167">  adelie_penguins <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species), ]</span>
<span id="cb25-168">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(adelie_penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Expected subset size</span></span>
<span id="cb25-169">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(adelie_penguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span>
<span id="cb25-170">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Filter by treatment groups, regions, time periods, etc.</span></span>
<span id="cb25-171">  </span>
<span id="cb25-172">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test missing data handling</span></span>
<span id="cb25-173">  complete_cases <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">complete.cases</span>(df), ]</span>
<span id="cb25-174">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(complete_cases), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(df))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Some rows should be removed</span></span>
<span id="cb25-175">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(complete_cases)), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># No NAs remaining</span></span>
<span id="cb25-176">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Test your specific data cleaning operations</span></span>
<span id="cb25-177">})</span>
<span id="cb25-178"></span>
<span id="cb25-179"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 9: Summary Statistics are Reasonable</span></span>
<span id="cb25-180"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify computed statistics match domain knowledge </span></span>
<span id="cb25-181"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expectations</span></span>
<span id="cb25-182"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Calculation errors, unit mistakes, algorithm bugs, extreme </span></span>
<span id="cb25-183"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># outliers</span></span>
<span id="cb25-184"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Summary statistics fall within expected ranges"</span>, {</span>
<span id="cb25-185">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-186">  </span>
<span id="cb25-187">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test means fall within expected ranges</span></span>
<span id="cb25-188">  mean_flipper <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb25-189">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(mean_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">190</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set realistic bounds for your </span></span>
<span id="cb25-190">                                <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># variables</span></span>
<span id="cb25-191">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(mean_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">210</span>)</span>
<span id="cb25-192">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Examples: Average customer age 20-80, mean salary $30k-200k, etc.</span></span>
<span id="cb25-193">  </span>
<span id="cb25-194">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test other central tendencies</span></span>
<span id="cb25-195">  mean_mass <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb25-196">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(mean_mass, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4000</span>)</span>
<span id="cb25-197">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(mean_mass, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>)</span>
<span id="cb25-198">  </span>
<span id="cb25-199">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test variability measures are reasonable</span></span>
<span id="cb25-200">  sd_flipper <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb25-201">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(sd_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Not zero variance</span></span>
<span id="cb25-202">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(sd_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Not excessive variance</span></span>
<span id="cb25-203">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: CV should be &lt;50%, SD should be meaningful relative to mean</span></span>
<span id="cb25-204">})</span>
<span id="cb25-205"></span>
<span id="cb25-206"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 10: Complete Analysis Pipeline Integration Test</span></span>
<span id="cb25-207"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Test your entire analysis workflow runs without </span></span>
<span id="cb25-208"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># errors</span></span>
<span id="cb25-209"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Pipeline breaks, dependency issues, function interaction problems</span></span>
<span id="cb25-210"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Complete analysis pipeline executes successfully"</span>, {</span>
<span id="cb25-211">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb25-212">  </span>
<span id="cb25-213">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test that full workflow executes without errors</span></span>
<span id="cb25-214">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_no_error</span>({</span>
<span id="cb25-215">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Data preparation step</span></span>
<span id="cb25-216">    clean_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">complete.cases</span>(df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, </span>
<span id="cb25-217">                                       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>)]), ]</span>
<span id="cb25-218">    </span>
<span id="cb25-219">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Statistical analysis step - Adapt: Your key analyses</span></span>
<span id="cb25-220">    correlation_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor.test</span>(clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, </span>
<span id="cb25-221">                                   clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm)</span>
<span id="cb25-222">    </span>
<span id="cb25-223">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualization step - Adapt: Your key plots</span></span>
<span id="cb25-224">    plot_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(clean_df, </span>
<span id="cb25-225">                          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-226">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-227">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-228">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-229">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length vs. Bill Length"</span>,</span>
<span id="cb25-230">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>,</span>
<span id="cb25-231">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length (mm)"</span>)</span>
<span id="cb25-232">  })</span>
<span id="cb25-233">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Add model fitting, prediction, reporting steps as needed</span></span>
<span id="cb25-234">  </span>
<span id="cb25-235">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verify analysis produces meaningful results</span></span>
<span id="cb25-236">  clean_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">complete.cases</span>(df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, </span>
<span id="cb25-237">                                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>)]), ]</span>
<span id="cb25-238">  correlation_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor.test</span>(clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, </span>
<span id="cb25-239">                                 clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm)</span>
<span id="cb25-240">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(correlation_result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Significant result expected</span></span>
<span id="cb25-241">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Check model R², prediction accuracy, convergence, etc.</span></span>
<span id="cb25-242">})</span></code></pre></div>
</section>
<section id="running-the-tests" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="running-the-tests"><span class="header-section-number">9.6</span> Running the Tests</h2>
<p>To run all tests in your project:</p>
<div class="sourceCode" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run all tests</span></span>
<span id="cb26-2">testthat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_dir</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tests/testthat"</span>)</span>
<span id="cb26-3"></span>
<span id="cb26-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run specific test file</span></span>
<span id="cb26-5">testthat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tests/testthat/test-comprehensive-analysis.R"</span>)</span>
<span id="cb26-6"></span>
<span id="cb26-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run tests with detailed output</span></span>
<span id="cb26-8">testthat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_dir</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tests/testthat"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reporter =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"detailed"</span>)</span></code></pre></div>
</section>
<section id="test-categories-explained" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="test-categories-explained"><span class="header-section-number">9.7</span> Test Categories Explained</h2>
<p><strong>Data Validation Tests (1-5)</strong>: Verify data structure, types, ranges, and missing patterns <strong>Statistical Tests (6)</strong>: Confirm expected relationships in the data <strong>Functional Tests (7-8)</strong>: Ensure analysis functions work correctly <strong>Sanity Tests (9)</strong>: Check that summary statistics are reasonable <strong>Integration Tests (10)</strong>: Verify the complete analysis pipeline works end-to-end</p>
<p>These tests provide coverage for a data analysis project and can catch issues ranging from data corruption to environment setup problems.</p>
</section>
</section>
<section id="appendix-c-directory-structure" class="level1 unnumbered">
<h1 class="unnumbered">Appendix C: Directory Structure</h1>
<p>The zzrrtools setup creates the following directory structure:</p>
<pre><code>project/
├── DESCRIPTION              # Package metadata and dependencies
├── LICENSE                  # Project license  
├── README.md               # Project documentation
├── project.Rproj           # R project file
├── renv.lock               # Package dependency lockfile
├── setup_renv.R            # Automated renv setup script
├── Dockerfile              # Container specification
├── docker-compose.yml      # Multi-service Docker setup
├── Makefile                # Build automation (native R + Docker)
├── .Rprofile               # R startup configuration
├── .dockerignore           # Docker build exclusions
├── ZZRRTOOLS_USER_GUIDE.md # Comprehensive user documentation
├── .zshrc_docker           # zsh configuration for Docker container
├── .github/workflows/      # Multiple GitHub Actions workflows
│   ├── docker-ci.yml       # Docker-based CI/CD
│   ├── r-package.yml       # R package checking
│   └── render-paper.yml    # Automated paper rendering
├── check_renv_for_commit.R # renv consistency validation script
├── R/                      # R functions and utilities
│   └── utils.R             # Pre-built utility functions
├── man/                    # Generated function documentation
├── data/                   # Comprehensive data organization
│   ├── raw_data/           # Original, unmodified data
│   ├── derived_data/       # Processed/cleaned data
│   ├── metadata/           # Data documentation
│   ├── validation/         # Data validation scripts
│   └── external_data/      # Third-party datasets
├── analysis/               # Research analysis
│   ├── paper/              # Manuscript with PDF output
│   ├── figures/            # Generated plots and charts
│   ├── tables/             # Generated tables
│   └── templates/          # Document templates and CSL styles
├── scripts/                # Working R scripts and code snippets
├── tests/testthat/         # Unit tests and validation
├── vignettes/              # Package vignettes and tutorials
├── inst/doc/               # Package documentation
├── docs/                   # Additional documentation
├── archive/                # Archived files and old versions
└── [a,n,f,t,s,m,e,o,c]    # Symbolic links for easy navigation</code></pre>
<section id="key-features-explained" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="key-features-explained"><span class="header-section-number">9.8</span> Key Features Explained:</h2>
<p><strong>Data Organization:</strong> - <strong>raw_data/</strong>: Original, unmodified datasets as received - <strong>derived_data/</strong>: Processed, cleaned, or transformed data - <strong>metadata/</strong>: Documentation about data sources, collection methods, variables - <strong>validation/</strong>: Scripts that verify data integrity and quality - <strong>external_data/</strong>: Third-party datasets or reference data</p>
<p><strong>Multiple Output Formats:</strong> - <strong>figures/</strong>: Generated plots, charts, and visualizations - <strong>tables/</strong>: Generated summary tables and statistical results - <strong>paper/</strong>: Main manuscript and analysis documents - <strong>templates/</strong>: Document templates and citation style files</p>
<p><strong>R Package Structure:</strong> - <strong>R/</strong>: Custom functions and utilities - <strong>man/</strong>: Generated documentation for R functions - <strong>tests/testthat/</strong>: Unit tests and validation scripts - <strong>vignettes/</strong>: Long-form documentation and tutorials - <strong>DESCRIPTION</strong>: Package metadata and dependency specifications</p>
<p><strong>Docker Orchestration:</strong> - <strong>Dockerfile</strong>: Main container specification - <strong>docker-compose.yml</strong>: Multi-service development environments - <strong>Makefile</strong>: Build automation supporting both native R and Docker workflows</p>
<p><strong>Workflows:</strong> - <strong>.github/workflows/</strong>: GitHub Actions for testing, checking, and rendering - <strong>setup_renv.R</strong>: Package environment setup - <strong>RRTOOLS_USER_GUIDE.md</strong>: Usage documentation</p>
<p><strong>Navigation Shortcuts:</strong> - <strong>Symbolic links</strong>: Single-letter shortcuts for easy navigation - <code>a</code> → analysis/, <code>n</code> → analysis/, <code>f</code> → figures/ - <code>t</code> → tests/, <code>s</code> → scripts/, <code>m</code> → man/ - <code>e</code> → external_data/, <code>o</code> → output/, <code>c</code> → cache/</p>
<p>This structure supports research projects while maintaining clear organization and following established research compendium principles.</p>
</section>
</section>
<section id="appendix-d-docker-workflow-options" class="level1 unnumbered">
<h1 class="unnumbered">Appendix D: Docker Workflow Options</h1>
<p>The zzrrtools setup provides a multi-service Docker architecture optimized for collaborative shell-based development workflows.</p>
<section id="multi-service-docker-architecture" class="level2" data-number="9.9">
<h2 data-number="9.9" class="anchored" data-anchor-id="multi-service-docker-architecture"><span class="header-section-number">9.9</span> Multi-Service Docker Architecture</h2>
<p>zzrrtools creates specialized Docker environments for different development tasks:</p>
<div class="sourceCode" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build the containerized research environment</span></span>
<span id="cb28-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-build</span>
<span id="cb28-3"></span>
<span id="cb28-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive R console (primary development environment)</span></span>
<span id="cb28-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-r</span>
<span id="cb28-6"></span>
<span id="cb28-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Development shell with personal dotfiles</span></span>
<span id="cb28-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-zsh</span>
<span id="cb28-9"></span>
<span id="cb28-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive bash session</span></span>
<span id="cb28-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-bash</span>
<span id="cb28-12"></span>
<span id="cb28-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RStudio Server (web-based IDE)</span></span>
<span id="cb28-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-rstudio    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Access at http://localhost:8787</span></span>
<span id="cb28-15"></span>
<span id="cb28-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Render research paper</span></span>
<span id="cb28-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-render</span>
<span id="cb28-18"></span>
<span id="cb28-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run tests</span></span>
<span id="cb28-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-test</span>
<span id="cb28-21"></span>
<span id="cb28-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Package checking</span></span>
<span id="cb28-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check</span>
<span id="cb28-24"></span>
<span id="cb28-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># renv dependency validation</span></span>
<span id="cb28-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix</span>
<span id="cb28-27"></span>
<span id="cb28-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># See all available commands</span></span>
<span id="cb28-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> help</span></code></pre></div>
<p><strong>Collaborative Benefits:</strong> - <strong>Zero-setup onboarding</strong>: Team members run identical commands - <strong>Consistent environments</strong>: Same container across all developer machines - <strong>ARM64/Apple Silicon support</strong>: Platform-specific flags ensure compatibility - <strong>Shell-optimized workflows</strong>: Command-line development with rich tooling - <strong>Personal customization</strong>: Dotfiles integration for familiar environments - <strong>Web-based development</strong>: Optional RStudio Server for GUI-based workflows</p>
</section>
<section id="option-2-docker-compose-services" class="level2" data-number="9.10">
<h2 data-number="9.10" class="anchored" data-anchor-id="option-2-docker-compose-services"><span class="header-section-number">9.10</span> Option 2: Docker Compose Services</h2>
<p>Docker Compose orchestrates multiple container configurations:</p>
<div class="sourceCode" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive R session</span></span>
<span id="cb29-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> r-session</span>
<span id="cb29-3"></span>
<span id="cb29-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Bash shell access</span></span>
<span id="cb29-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> bash</span>
<span id="cb29-6"></span>
<span id="cb29-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Automated paper rendering</span></span>
<span id="cb29-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> research</span>
<span id="cb29-9"></span>
<span id="cb29-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Package testing</span></span>
<span id="cb29-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> test</span>
<span id="cb29-12"></span>
<span id="cb29-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Package checking</span></span>
<span id="cb29-14"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> check</span></code></pre></div>
<p><strong>Docker Compose Configuration Example:</strong></p>
<div class="sourceCode" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb30-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">services</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb30-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-session</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb30-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb30-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb30-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb30-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ./cache:/home/analyst/cache</span></span>
<span id="cb30-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb30-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb30-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb30-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb30-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb30-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb30-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb30-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">entrypoint</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/bash"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb30-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb30-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">research</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb30-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb30-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb30-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb30-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ./analysis/figures:/home/analyst/output</span></span>
<span id="cb30-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb30-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-e"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rmarkdown::render('analysis/paper/paper.Rmd')"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span></code></pre></div>
<p><strong>Benefits:</strong> - <strong>Service setup</strong>: Multiple predefined container configurations - <strong>Volume management</strong>: Consistent volume mounting across services - <strong>Environment isolation</strong>: Different services for different purposes - <strong>Parallel execution</strong>: Can run multiple services simultaneously</p>
</section>
<section id="option-3-direct-docker-commands" class="level2" data-number="9.11">
<h2 data-number="9.11" class="anchored" data-anchor-id="option-3-direct-docker-commands"><span class="header-section-number">9.11</span> Option 3: Direct Docker Commands</h2>
<p>For maximum control, use Docker commands directly:</p>
<div class="sourceCode" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Basic interactive session</span></span>
<span id="cb31-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-it</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-3">  ghcr.io/username/penguins_analysis:v1.0</span>
<span id="cb31-4"></span>
<span id="cb31-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive session with mounted cache</span></span>
<span id="cb31-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-it</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/cache:/home/analyst/cache"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-10">  ghcr.io/username/penguins_analysis:v1.0</span>
<span id="cb31-11"></span>
<span id="cb31-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Render research paper</span></span>
<span id="cb31-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-15">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/analysis/figures:/home/analyst/output"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-16">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-17">  ghcr.io/username/penguins_analysis:v1.0 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-18">  R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rmarkdown::render('analysis/paper/paper.Rmd')"</span></span>
<span id="cb31-19"></span>
<span id="cb31-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run specific tests</span></span>
<span id="cb31-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-23">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-24">  ghcr.io/username/penguins_analysis:v1.0 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-25">  R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"testthat::test_file('tests/testthat/test-data-integrity.R')"</span></span>
<span id="cb31-26"></span>
<span id="cb31-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive bash session</span></span>
<span id="cb31-28"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-it</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-29">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-30">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-31">  ghcr.io/username/penguins_analysis:v1.0 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb31-32">  /bin/bash</span></code></pre></div>
<p><strong>Common Docker Flags Explained:</strong> - <code>--rm</code>: Remove container when it exits - <code>-it</code>: Interactive terminal session - <code>-v</code>: Mount volume (host:container) - <code>-w</code>: Set working directory inside container - <code>--entrypoint</code>: Override default command</p>
<p><strong>Benefits:</strong> - <strong>Full flexibility</strong>: Complete control over container configuration - <strong>Educational</strong>: Shows exactly what’s happening under the hood - <strong>Troubleshooting</strong>: Easier to debug when you see all options - <strong>Portability</strong>: Commands work on any Docker installation</p>
</section>
<section id="volume-mounting-strategies" class="level2" data-number="9.12">
<h2 data-number="9.12" class="anchored" data-anchor-id="volume-mounting-strategies"><span class="header-section-number">9.12</span> Volume Mounting Strategies</h2>
<p><strong>Project Files:</strong></p>
<div class="sourceCode" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Mount entire project directory</span></span>
<span id="cb32-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span></span></code></pre></div>
<p><strong>Output Separation:</strong></p>
<div class="sourceCode" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Separate outputs from source</span></span>
<span id="cb33-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/analysis/figures:/home/analyst/output"</span></span></code></pre></div>
<p><strong>Cache Persistence:</strong></p>
<div class="sourceCode" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Persistent package cache across sessions</span></span>
<span id="cb34-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/cache:/home/analyst/cache"</span></span></code></pre></div>
<p><strong>Read-only Source:</strong></p>
<div class="sourceCode" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Protect source files from modification</span></span>
<span id="cb35-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project:ro"</span></span></code></pre></div>
</section>
<section id="choosing-the-right-approach" class="level2" data-number="9.13">
<h2 data-number="9.13" class="anchored" data-anchor-id="choosing-the-right-approach"><span class="header-section-number">9.13</span> Choosing the Right Approach</h2>
<p><strong>Use Make Commands When:</strong> - You want simplicity and consistency - You’re new to Docker - You’re focusing on analysis rather than infrastructure</p>
<p><strong>Use Docker Compose When:</strong> - You need multiple service configurations - You’re working with a team using standardized environments - You want to define complex volume and networking setups</p>
<p><strong>Use Direct Commands When:</strong> - You need maximum flexibility - You’re troubleshooting container issues - You’re creating custom workflows not covered by Make targets</p>
<p>All three approaches can be used together in the same project, depending on the specific task and user preferences.</p>
</section>
</section>
<section id="appendix-e-github-actions-cicd-setup" class="level1 unnumbered">
<h1 class="unnumbered">Appendix E: GitHub Actions CI/CD Setup</h1>
<p>GitHub Actions provides testing and deployment for research compendia. This appendix covers CI/CD setup for reproducible research workflows.</p>
<section id="understanding-github-actions-for-research" class="level2" data-number="9.14">
<h2 data-number="9.14" class="anchored" data-anchor-id="understanding-github-actions-for-research"><span class="header-section-number">9.14</span> Understanding GitHub Actions for Research</h2>
<p><strong>What is CI/CD for Research?</strong></p>
<p>Continuous Integration/Continuous Deployment (CI/CD) tests your research code whenever changes are made. For research compendia, this means:</p>
<ul>
<li><strong>Testing</strong>: Every push triggers your test suite</li>
<li><strong>Environment consistency</strong>: Tests run in identical Docker environments</li>
<li><strong>Early error detection</strong>: Problems caught during development</li>
<li><strong>Collaboration confidence</strong>: Team members see if changes break functionality</li>
<li><strong>Reproducibility validation</strong>: Ensures analysis works across different systems</li>
</ul>
</section>
<section id="step-by-step-setup" class="level2" data-number="9.15">
<h2 data-number="9.15" class="anchored" data-anchor-id="step-by-step-setup"><span class="header-section-number">9.15</span> Step-by-Step Setup</h2>
<section id="step-1-create-workflow-directory" class="level3" data-number="9.15.1">
<h3 data-number="9.15.1" class="anchored" data-anchor-id="step-1-create-workflow-directory"><span class="header-section-number">9.15.1</span> Step 1: Create Workflow Directory</h3>
<div class="sourceCode" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the GitHub Actions directory</span></span>
<span id="cb36-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> .github/workflows</span></code></pre></div>
</section>
<section id="step-2-docker-based-ci-workflow-with-renv-validation" class="level3" data-number="9.15.2">
<h3 data-number="9.15.2" class="anchored" data-anchor-id="step-2-docker-based-ci-workflow-with-renv-validation"><span class="header-section-number">9.15.2</span> Step 2: Docker-based CI Workflow with renv Validation</h3>
<p>Create <code>.github/workflows/docker-ci.yml</code>:</p>
<div class="sourceCode" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Docker CI with renv Validation</span></span>
<span id="cb37-2"></span>
<span id="cb37-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb37-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb37-8"></span>
<span id="cb37-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build-and-test</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb37-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb37-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout repository</span></span>
<span id="cb37-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb37-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb37-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up R for renv validation</span></span>
<span id="cb37-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-r@v2</span></span>
<span id="cb37-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-version</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span></span>
<span id="cb37-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb37-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install renv for validation</span></span>
<span id="cb37-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb37-24">        install.packages("renv")</span>
<span id="cb37-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shell</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Rscript {0}</span></span>
<span id="cb37-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb37-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Validate renv consistency before Docker build</span></span>
<span id="cb37-28"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb37-29">        # Validate renv environment before building Docker image</span>
<span id="cb37-30">        Rscript check_renv_for_commit.R --fail-on-issues --quiet</span>
<span id="cb37-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb37-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Docker Buildx</span></span>
<span id="cb37-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/setup-buildx-action@v3</span></span>
<span id="cb37-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb37-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Extract R version from renv.lock</span></span>
<span id="cb37-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-version</span></span>
<span id="cb37-37"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb37-38">        R_VERSION=$(Rscript -e "cat(renv::lockfile_read()\$R\$Version)")</span>
<span id="cb37-39">        echo "r-version=${R_VERSION}" &gt;&gt; $GITHUB_OUTPUT</span>
<span id="cb37-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb37-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build Docker image</span></span>
<span id="cb37-42"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/build-push-action@v5</span></span>
<span id="cb37-43"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-44"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">context</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb37-45"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb37-46"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.repository }}:latest</span></span>
<span id="cb37-47"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        build-args</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb37-48">          R_VERSION=${{ steps.r-version.outputs.r-version }}</span>
<span id="cb37-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-from</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha</span></span>
<span id="cb37-50"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-to</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha,mode=max</span></span>
<span id="cb37-51"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb37-52"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Run tests in container</span></span>
<span id="cb37-53"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb37-54">        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb37-55">          ${{ github.repository }}:latest \</span>
<span id="cb37-56">          R -e "testthat::test_dir('tests/testthat')"</span>
<span id="cb37-57">          </span>
<span id="cb37-58"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render research paper</span></span>
<span id="cb37-59"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb37-60">        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb37-61">          -v $PWD/analysis/figures:/home/analyst/output \</span>
<span id="cb37-62">          ${{ github.repository }}:latest \</span>
<span id="cb37-63">          R -e "rmarkdown::render('analysis/paper/paper.Rmd')"</span>
<span id="cb37-64">          </span>
<span id="cb37-65"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Upload rendered paper</span></span>
<span id="cb37-66"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/upload-artifact@v4</span></span>
<span id="cb37-67"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> success()</span></span>
<span id="cb37-68"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb37-69"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> research-paper</span></span>
<span id="cb37-70"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> analysis/paper/paper.pdf</span></span></code></pre></div>
</section>
<section id="step-3-r-package-check-workflow" class="level3" data-number="9.15.3">
<h3 data-number="9.15.3" class="anchored" data-anchor-id="step-3-r-package-check-workflow"><span class="header-section-number">9.15.3</span> Step 3: R Package Check Workflow</h3>
<p>Create <code>.github/workflows/r-package.yml</code>:</p>
<div class="sourceCode" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb38-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> R Package Check</span></span>
<span id="cb38-2"></span>
<span id="cb38-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb38-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb38-8"></span>
<span id="cb38-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">R-CMD-check</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.os }}</span></span>
<span id="cb38-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb38-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.os }} (${{ matrix.config.r }})</span></span>
<span id="cb38-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb38-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">strategy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fail-fast</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb38-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">config</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">os</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">   </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb38-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">os</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> macOS-latest</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb38-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">os</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> windows-latest</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb38-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb38-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">env</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">GITHUB_PAT</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ secrets.GITHUB_TOKEN }}</span></span>
<span id="cb38-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">R_KEEP_PKG_SOURCE</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">yes</span></span>
<span id="cb38-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb38-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb38-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb38-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-pandoc@v2</span></span>
<span id="cb38-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb38-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-r@v2</span></span>
<span id="cb38-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-version</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.r }}</span></span>
<span id="cb38-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">http-user-agent</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.http-user-agent }}</span></span>
<span id="cb38-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use-public-rspm</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb38-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span></span>
<span id="cb38-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-renv@v2</span></span>
<span id="cb38-39"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb38-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install system dependencies</span></span>
<span id="cb38-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> runner.os == 'Linux'</span></span>
<span id="cb38-42"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb38-43">          sudo apt-get update</span>
<span id="cb38-44">          sudo apt-get install -y \</span>
<span id="cb38-45">            libcurl4-openssl-dev \</span>
<span id="cb38-46">            libssl-dev \</span>
<span id="cb38-47">            libxml2-dev</span>
<span id="cb38-48">            </span>
<span id="cb38-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Validate renv consistency</span></span>
<span id="cb38-50"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb38-51">          # Use the renv validation script included in the repository</span>
<span id="cb38-52">          Rscript check_renv_for_commit.R --fail-on-issues --quiet</span>
<span id="cb38-53">            </span>
<span id="cb38-54"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/check-r-package@v2</span></span>
<span id="cb38-55"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb38-56"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">upload-snapshots</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span></code></pre></div>
</section>
<section id="step-4-automated-paper-rendering" class="level3" data-number="9.15.4">
<h3 data-number="9.15.4" class="anchored" data-anchor-id="step-4-automated-paper-rendering"><span class="header-section-number">9.15.4</span> Step 4: Automated Paper Rendering</h3>
<p>Create <code>.github/workflows/render-paper.yml</code>:</p>
<div class="sourceCode" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb39-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render Research Paper</span></span>
<span id="cb39-2"></span>
<span id="cb39-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_dispatch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # Manual trigger</span></span>
<span id="cb39-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb39-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paths</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'analysis/paper/**'</span></span>
<span id="cb39-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'analysis/data/**'</span></span>
<span id="cb39-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'R/**'</span></span>
<span id="cb39-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data/**'</span></span>
<span id="cb39-12"></span>
<span id="cb39-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">render</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb39-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb39-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout repository</span></span>
<span id="cb39-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb39-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb39-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Docker Buildx</span></span>
<span id="cb39-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/setup-buildx-action@v3</span></span>
<span id="cb39-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb39-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build Docker image</span></span>
<span id="cb39-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/build-push-action@v5</span></span>
<span id="cb39-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">context</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb39-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb39-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> paper-render:latest</span></span>
<span id="cb39-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-from</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha</span></span>
<span id="cb39-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-to</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha,mode=max</span></span>
<span id="cb39-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span></span>
<span id="cb39-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render paper in container</span></span>
<span id="cb39-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb39-35">          docker run --rm \</span>
<span id="cb39-36">            -v $PWD:/home/analyst/project \</span>
<span id="cb39-37">            -v $PWD/analysis/figures:/home/analyst/output \</span>
<span id="cb39-38">            paper-render:latest \</span>
<span id="cb39-39">            R -e "rmarkdown::render('analysis/paper/paper.Rmd')"</span>
<span id="cb39-40">            </span>
<span id="cb39-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Upload rendered paper</span></span>
<span id="cb39-42"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/upload-artifact@v4</span></span>
<span id="cb39-43"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb39-44"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> research-paper-${{ github.sha }}</span></span>
<span id="cb39-45"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb39-46">            analysis/paper/paper.pdf</span>
<span id="cb39-47">            analysis/figures/*.png</span>
<span id="cb39-48">            analysis/figures/*.jpg</span>
<span id="cb39-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">retention-days</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span></span></code></pre></div>
</section>
<section id="step-5-container-registry-integration" class="level3" data-number="9.15.5">
<h3 data-number="9.15.5" class="anchored" data-anchor-id="step-5-container-registry-integration"><span class="header-section-number">9.15.5</span> Step 5: Container Registry Integration</h3>
<p>Create <code>.github/workflows/container-publish.yml</code>:</p>
<div class="sourceCode" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb40-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build and Push Container</span></span>
<span id="cb40-2"></span>
<span id="cb40-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb40-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'v*'</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb40-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb40-9"></span>
<span id="cb40-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">env</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">REGISTRY</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ghcr.io</span></span>
<span id="cb40-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">IMAGE_NAME</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.repository }}</span></span>
<span id="cb40-13"></span>
<span id="cb40-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build-and-push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb40-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">contents</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> read</span></span>
<span id="cb40-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">packages</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> write</span></span>
<span id="cb40-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb40-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout repository</span></span>
<span id="cb40-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb40-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb40-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Docker Buildx</span></span>
<span id="cb40-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/setup-buildx-action@v3</span></span>
<span id="cb40-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb40-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Log in to Container Registry</span></span>
<span id="cb40-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> github.event_name != 'pull_request'</span></span>
<span id="cb40-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/login-action@v3</span></span>
<span id="cb40-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">registry</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ env.REGISTRY }}</span></span>
<span id="cb40-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">username</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.actor }}</span></span>
<span id="cb40-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">password</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ secrets.GITHUB_TOKEN }}</span></span>
<span id="cb40-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span></span>
<span id="cb40-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Extract metadata</span></span>
<span id="cb40-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> meta</span></span>
<span id="cb40-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/metadata-action@v5</span></span>
<span id="cb40-39"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">images</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}</span></span>
<span id="cb40-41"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb40-42">            type=ref,event=branch</span>
<span id="cb40-43">            type=ref,event=pr</span>
<span id="cb40-44">            type=semver,pattern={{version}}</span>
<span id="cb40-45">            type=semver,pattern={{major}}.{{minor}}</span>
<span id="cb40-46">            </span>
<span id="cb40-47"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build and push Docker image</span></span>
<span id="cb40-48"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/build-push-action@v5</span></span>
<span id="cb40-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb40-50"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">context</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb40-51"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">platforms</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> linux/amd64,linux/arm64</span></span>
<span id="cb40-52"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.event_name != 'pull_request' }}</span></span>
<span id="cb40-53"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ steps.meta.outputs.tags }}</span></span>
<span id="cb40-54"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labels</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ steps.meta.outputs.labels }}</span></span>
<span id="cb40-55"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-from</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha</span></span>
<span id="cb40-56"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-to</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha,mode=max</span></span></code></pre></div>
</section>
</section>
<section id="workflow-explanations" class="level2" data-number="9.16">
<h2 data-number="9.16" class="anchored" data-anchor-id="workflow-explanations"><span class="header-section-number">9.16</span> Workflow Explanations</h2>
<section id="docker-ci-workflow-features" class="level3" data-number="9.16.1">
<h3 data-number="9.16.1" class="anchored" data-anchor-id="docker-ci-workflow-features"><span class="header-section-number">9.16.1</span> Docker CI Workflow Features:</h3>
<ul>
<li><strong>Pre-build renv Validation</strong>: Validates package dependency consistency before Docker build (prevents build failures)</li>
<li><strong>Dynamic R Version</strong>: Extracts R version from renv.lock and passes it to Docker build</li>
<li><strong>Build Testing</strong>: Ensures Docker image builds with latest changes using correct R version</li>
<li><strong>Testing</strong>: Runs R package tests and renders paper in container</li>
<li><strong>Artifact Generation</strong>: Saves rendered papers as downloadable artifacts</li>
<li><strong>Caching</strong>: Uses GitHub Actions cache for faster builds</li>
<li><strong>Early Failure</strong>: Stops pipeline if dependency issues are detected</li>
</ul>
</section>
<section id="r-package-check-features" class="level3" data-number="9.16.2">
<h3 data-number="9.16.2" class="anchored" data-anchor-id="r-package-check-features"><span class="header-section-number">9.16.2</span> R Package Check Features:</h3>
<ul>
<li><strong>Multi-platform Testing</strong>: Tests on Ubuntu, macOS, and Windows</li>
<li><strong>R CMD Check</strong>: Package validation</li>
<li><strong>renv Integration</strong>: Restores package environment</li>
<li><strong>renv Consistency Validation</strong>: Verifies dependency synchronization across platforms</li>
<li><strong>System Dependencies</strong>: Installs required system libraries</li>
</ul>
</section>
<section id="paper-rendering-features" class="level3" data-number="9.16.3">
<h3 data-number="9.16.3" class="anchored" data-anchor-id="paper-rendering-features"><span class="header-section-number">9.16.3</span> Paper Rendering Features:</h3>
<ul>
<li><strong>Selective Triggering</strong>: Only runs when relevant files change</li>
<li><strong>Manual Execution</strong>: Can be triggered manually via GitHub interface</li>
<li><strong>Artifact Storage</strong>: Saves PDFs and figures with retention policy</li>
<li><strong>Path-based Triggers</strong>: Responds to changes in analysis files</li>
</ul>
</section>
<section id="container-publishing-features" class="level3" data-number="9.16.4">
<h3 data-number="9.16.4" class="anchored" data-anchor-id="container-publishing-features"><span class="header-section-number">9.16.4</span> Container Publishing Features:</h3>
<ul>
<li><strong>Building</strong>: Builds on pushes and tags</li>
<li><strong>Multi-platform</strong>: Supports AMD64 and ARM64 platforms</li>
<li><strong>Semantic Versioning</strong>: Tagging based on git tags</li>
<li><strong>Security</strong>: Uses built-in GitHub token for authentication</li>
</ul>
</section>
</section>
<section id="authentication-and-permissions" class="level2" data-number="9.17">
<h2 data-number="9.17" class="anchored" data-anchor-id="authentication-and-permissions"><span class="header-section-number">9.17</span> Authentication and Permissions</h2>
<section id="built-in-github_token" class="level3" data-number="9.17.1">
<h3 data-number="9.17.1" class="anchored" data-anchor-id="built-in-github_token"><span class="header-section-number">9.17.1</span> Built-in GITHUB_TOKEN:</h3>
<p>The built-in <code>GITHUB_TOKEN</code> automatically provides: - Read access to repository contents - Write access to GitHub Packages (when permissions are set) - No manual setup required</p>
</section>
<section id="setting-repository-permissions" class="level3" data-number="9.17.2">
<h3 data-number="9.17.2" class="anchored" data-anchor-id="setting-repository-permissions"><span class="header-section-number">9.17.2</span> Setting Repository Permissions:</h3>
<ol type="1">
<li><strong>Repository Settings</strong> → <strong>Actions</strong> → <strong>General</strong></li>
<li><strong>Workflow permissions</strong>: Choose “Read and write permissions”</li>
<li><strong>Allow GitHub Actions to create and approve pull requests</strong>: Enable if needed</li>
</ol>
</section>
<section id="using-personal-access-tokens-advanced" class="level3" data-number="9.17.3">
<h3 data-number="9.17.3" class="anchored" data-anchor-id="using-personal-access-tokens-advanced"><span class="header-section-number">9.17.3</span> Using Personal Access Tokens (Advanced):</h3>
<p>For broader permissions, create repository secrets:</p>
<ol type="1">
<li><strong>Repository Settings</strong> → <strong>Secrets and variables</strong> → <strong>Actions</strong></li>
<li><strong>New repository secret</strong>: Add <code>GHCR_TOKEN</code> with Personal Access Token</li>
<li><strong>Reference in workflow</strong>: <code>password: ${{ secrets.GHCR_TOKEN }}</code></li>
</ol>
</section>
</section>
<section id="integration-with-collaborative-workflow" class="level2" data-number="9.18">
<h2 data-number="9.18" class="anchored" data-anchor-id="integration-with-collaborative-workflow"><span class="header-section-number">9.18</span> Integration with Collaborative Workflow</h2>
<section id="pull-request-integration" class="level3" data-number="9.18.1">
<h3 data-number="9.18.1" class="anchored" data-anchor-id="pull-request-integration"><span class="header-section-number">9.18.1</span> Pull Request Integration:</h3>
<p>When a team member submits a pull request: 1. GitHub automatically triggers CI workflows 2. Tests run in clean environment identical to production 3. Results displayed directly in pull request interface 4. Merge can be blocked if tests fail</p>
</section>
<section id="branch-protection-rules" class="level3" data-number="9.18.2">
<h3 data-number="9.18.2" class="anchored" data-anchor-id="branch-protection-rules"><span class="header-section-number">9.18.2</span> Branch Protection Rules:</h3>
<p>Enable in <strong>Repository Settings</strong> → <strong>Branches</strong>: - <strong>Require status checks</strong>: Force CI to pass before merging - <strong>Require branches to be up to date</strong>: Ensure latest code is tested - <strong>Include administrators</strong>: Apply rules to all users</p>
</section>
</section>
<section id="monitoring-and-troubleshooting" class="level2" data-number="9.19">
<h2 data-number="9.19" class="anchored" data-anchor-id="monitoring-and-troubleshooting"><span class="header-section-number">9.19</span> Monitoring and Troubleshooting</h2>
<section id="viewing-workflow-results" class="level3" data-number="9.19.1">
<h3 data-number="9.19.1" class="anchored" data-anchor-id="viewing-workflow-results"><span class="header-section-number">9.19.1</span> Viewing Workflow Results:</h3>
<ol type="1">
<li><strong>Repository</strong> → <strong>Actions</strong> tab</li>
<li>Click specific workflow run to see details</li>
<li>Expand steps to see detailed logs</li>
<li>Download artifacts (rendered papers, test results)</li>
</ol>
</section>
<section id="common-issues-and-solutions" class="level3" data-number="9.19.2">
<h3 data-number="9.19.2" class="anchored" data-anchor-id="common-issues-and-solutions"><span class="header-section-number">9.19.2</span> Common Issues and Solutions:</h3>
<p><strong>Docker Build Failures:</strong> - Check Dockerfile syntax - Verify all COPY paths exist - Ensure base image is accessible</p>
<p><strong>renv Restore Failures:</strong> - Verify renv.lock is committed - Check for platform-specific packages - Consider using RSPM for faster installs</p>
<p><strong>Permission Errors:</strong> - Verify GITHUB_TOKEN permissions - Check repository secrets configuration - Ensure workflows have necessary permissions</p>
</section>
<section id="performance-optimization" class="level3" data-number="9.19.3">
<h3 data-number="9.19.3" class="anchored" data-anchor-id="performance-optimization"><span class="header-section-number">9.19.3</span> Performance Optimization:</h3>
<p><strong>Caching Strategies:</strong> - Docker layer caching with <code>cache-from/cache-to</code> - renv package caching with <code>r-lib/actions/setup-renv</code> - Artifact caching for large datasets</p>
<p><strong>Parallel Execution:</strong> - Run tests and documentation in parallel jobs - Use matrix strategies for multi-platform testing - Conditional execution based on changed files</p>
<p>This CI/CD setup ensures that research compendia remain reproducible, tested, and deployment-ready throughout the development lifecycle.</p>
</section>
</section>
</section>
<section id="appendix-f-docker-configuration-examples" class="level1 unnumbered">
<h1 class="unnumbered">Appendix F: Docker Configuration Examples</h1>
<p>This appendix provides Dockerfile examples ranging from minimal configurations to full development environments.</p>
<section id="production-dockerfile" class="level2" data-number="9.20">
<h2 data-number="9.20" class="anchored" data-anchor-id="production-dockerfile"><span class="header-section-number">9.20</span> Production Dockerfile</h2>
<p>The following Dockerfile provides a development environment with zsh, vim plugins, dotfiles integration, and development tools:</p>
<div class="sourceCode" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb41-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Use R version from renv.lock for perfect consistency</span></span>
<span id="cb41-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> R_VERSION=4.3.0</span>
<span id="cb41-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> rocker/r-ver:${R_VERSION}</span>
<span id="cb41-4"></span>
<span id="cb41-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install system dependencies including zsh and development tools</span></span>
<span id="cb41-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> update <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-7">    libxml2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-8">    libcurl4-openssl-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-9">    libssl-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-10">    libgit2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-11">    libfontconfig1-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-12">    libcairo2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-13">    libxt-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-14">    pandoc <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-15">    zsh <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-16">    curl <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-17">    git <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-18">    fonts-dejavu <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-19">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> /var/lib/apt/lists/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb41-20"></span>
<span id="cb41-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create non-root user with zsh as default shell</span></span>
<span id="cb41-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> USERNAME=analyst</span>
<span id="cb41-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">useradd</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--create-home</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span> /bin/zsh <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span></span>
<span id="cb41-24"></span>
<span id="cb41-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set working directory</span></span>
<span id="cb41-26"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}/project</span>
<span id="cb41-27"></span>
<span id="cb41-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy project files first (for better Docker layer caching)</span></span>
<span id="cb41-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> DESCRIPTION .</span>
<span id="cb41-30"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv.lock* ./</span>
<span id="cb41-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> .Rprofile* ./</span>
<span id="cb41-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv/activate.R* renv/activate.R</span>
<span id="cb41-33"></span>
<span id="cb41-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Configure renv library path</span></span>
<span id="cb41-35"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> RENV_PATHS_LIBRARY renv/library</span>
<span id="cb41-36"></span>
<span id="cb41-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Switch to non-root user for R package installation</span></span>
<span id="cb41-38"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> ${USERNAME}</span>
<span id="cb41-39"></span>
<span id="cb41-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install renv and essential R packages</span></span>
<span id="cb41-41"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages(c('renv', 'remotes', 'devtools', 'knitr', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-42"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'rmarkdown'), repos = c(CRAN = 'https://cloud.r-project.org'))"</span></span>
<span id="cb41-43"></span>
<span id="cb41-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restore R packages from lockfile (if exists)</span></span>
<span id="cb41-45"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"if (file.exists('renv.lock')) renv::restore() else </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-46"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    cat('No renv.lock found, skipping restore</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n')"</span></span>
<span id="cb41-47"></span>
<span id="cb41-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy dotfiles for development environment</span></span>
<span id="cb41-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Note: Ensure .vimrc and .zshrc_docker exist in build context or create </span></span>
<span id="cb41-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># defaults</span></span>
<span id="cb41-51"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> .vimrc /home/${USERNAME}/.vimrc</span>
<span id="cb41-52"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> .zshrc_docker /home/${USERNAME}/.zshrc</span>
<span id="cb41-53"></span>
<span id="cb41-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install zsh plugins for shell experience</span></span>
<span id="cb41-55"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.zsh <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-56">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/zsh-users/zsh-autosuggestions <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-57">        /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.zsh/zsh-autosuggestions <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-58">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.zsh</span>
<span id="cb41-59"></span>
<span id="cb41-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install vim-plug and configure vim environment</span></span>
<span id="cb41-61"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.vim/autoload <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-62">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fLo</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.vim/autoload/plug.vim <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-63">    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb41-64">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.vim</span>
<span id="cb41-65"></span>
<span id="cb41-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install vim plugins (suppress interactive mode)</span></span>
<span id="cb41-67"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim</span> +PlugInstall +qall <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">||</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb41-68"></span>
<span id="cb41-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy rest of project</span></span>
<span id="cb41-70"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> . .</span>
<span id="cb41-71"></span>
<span id="cb41-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install the research compendium as a package</span></span>
<span id="cb41-73"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devtools::install('.', dependencies = TRUE)"</span></span>
<span id="cb41-74"></span>
<span id="cb41-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set default shell to zsh for development experience</span></span>
<span id="cb41-76"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}/project</span>
<span id="cb41-77"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CMD</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/zsh"</span>]</span></code></pre></div>
</section>
<section id="features-of-the-production-dockerfile" class="level2" data-number="9.21">
<h2 data-number="9.21" class="anchored" data-anchor-id="features-of-the-production-dockerfile"><span class="header-section-number">9.21</span> Features of the Production Dockerfile</h2>
<p>This production-ready Dockerfile provides:</p>
<ul>
<li><strong>R version consistency</strong>: Matches exact R version specified in renv.lock for perfect environment alignment</li>
<li><strong>Minimal base</strong>: rocker/r-ver provides clean R installation without unnecessary packages</li>
<li><strong>Shell environment</strong>: zsh with autosuggestions and professional prompt for improved productivity</li>
<li><strong>Editor environment</strong>: vim with plugins configured automatically during build</li>
<li><strong>Dotfiles integration</strong>: Personal development preferences (.vimrc, .zshrc) copied from host system</li>
<li><strong>Development tools</strong>: git, curl, pandoc, and essential development libraries pre-installed</li>
<li><strong>Security</strong>: Non-root user execution with proper file permissions</li>
<li><strong>renv integration</strong>: Automatic package restoration with proper library path configuration</li>
<li><strong>Container-optimized workflow</strong>: Optimized layer caching and build process for efficient rebuilds</li>
</ul>
</section>
<section id="r-version-extraction" class="level2" data-number="9.22">
<h2 data-number="9.22" class="anchored" data-anchor-id="r-version-extraction"><span class="header-section-number">9.22</span> R Version Extraction</h2>
<p>The Dockerfile uses a build argument to ensure the R version exactly matches what’s specified in <code>renv.lock</code>. The build command extracts the R version directly from the renv lockfile:</p>
<div class="sourceCode" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract R version from renv.lock</span></span>
<span id="cb42-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">R_VERSION</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">jq</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.R.Version'</span> renv.lock<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb42-3"></span>
<span id="cb42-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build Docker image with extracted R version</span></span>
<span id="cb42-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> R_VERSION=<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${R_VERSION}</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb42-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> ghcr.io/username/penguins_analysis:v1.0 .</span></code></pre></div>
<p>If the <code>renv.lock</code> file specifies R 4.3.1, the Docker image will use <code>rocker/r-ver:4.3.1</code>. If renv is updated to R 4.4.0, the Docker build will use <code>rocker/r-ver:4.4.0</code>. This maintains consistency between the package environment and system environment.</p>
</section>
</section>
<section id="appendix-g-renv-management-and-validation" class="level1 unnumbered">
<h1 class="unnumbered">Appendix G: renv Management and Validation</h1>
<p>This appendix provides details for the renv consistency checking script and dependency management workflows.</p>
<section id="renv-consistency-checker-features" class="level2" data-number="9.23">
<h2 data-number="9.23" class="anchored" data-anchor-id="renv-consistency-checker-features"><span class="header-section-number">9.23</span> renv Consistency Checker Features</h2>
<p>The <code>check_renv_for_commit.R</code> script provides advanced team collaboration features through dependency validation:</p>
<ul>
<li><strong>Team conflict prevention</strong>: Pre-commit validation stops dependency inconsistencies before they reach the repository</li>
<li><strong>Automated dependency discovery</strong>: Scans R/, scripts/, and analysis/ directories for <code>library()</code>, <code>require()</code>, and <code>pkg::</code> calls</li>
<li><strong>Multi-source synchronization</strong>: Ensures packages are consistent across code files, DESCRIPTION, and renv.lock</li>
<li><strong>CRAN validation</strong>: Verifies packages exist and are properly named before team integration</li>
<li><strong>Automatic fixing</strong>: Updates DESCRIPTION and regenerates renv.lock to maintain team synchronization</li>
<li><strong>CI/CD fail-fast</strong>: Provides proper exit codes for automated workflows</li>
<li><strong>Interactive collaboration mode</strong>: Guides developers through dependency resolution during development</li>
</ul>
</section>
<section id="team-collaboration-commands" class="level2" data-number="9.24">
<h2 data-number="9.24" class="anchored" data-anchor-id="team-collaboration-commands"><span class="header-section-number">9.24</span> Team Collaboration Commands</h2>
<div class="sourceCode" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Team development workflow (via Make)</span></span>
<span id="cb43-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive dependency checking</span></span>
<span id="cb43-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv-fix      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Auto-fix dependency issues</span></span>
<span id="cb43-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv-ci       <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CI/CD validation with fail-fast</span></span>
<span id="cb43-5"></span>
<span id="cb43-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Docker-based validation (no local R required)</span></span>
<span id="cb43-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fix dependencies in container</span></span>
<span id="cb43-8"></span>
<span id="cb43-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Direct script usage</span></span>
<span id="cb43-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fail-on-issues</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CI mode</span></span>
<span id="cb43-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--quiet</span>                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Minimal output</span></span>
<span id="cb43-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--help</span>                  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Usage info</span></span></code></pre></div>
</section>
<section id="multi-developer-workflow" class="level2" data-number="9.25">
<h2 data-number="9.25" class="anchored" data-anchor-id="multi-developer-workflow"><span class="header-section-number">9.25</span> Multi-Developer Workflow</h2>
<ol type="1">
<li><strong>Install packages in container</strong>: Use <code>install.packages()</code> or <code>renv::install()</code> within Docker environment</li>
<li><strong>Validate team dependencies</strong>: Run <code>make check-renv</code> to check for conflicts before committing</li>
<li><strong>Review team impacts</strong>: Script identifies packages that would affect other team members</li>
<li><strong>Synchronize team environment</strong>: Use <code>make check-renv-fix</code> to update shared dependency files</li>
<li><strong>Commit with team confidence</strong>: Other developers can reproduce your exact environment</li>
</ol>
</section>
<section id="integration-with-development-workflows" class="level2" data-number="9.26">
<h2 data-number="9.26" class="anchored" data-anchor-id="integration-with-development-workflows"><span class="header-section-number">9.26</span> Integration with Development Workflows</h2>
<section id="pre-commit-hooks" class="level3" data-number="9.26.1">
<h3 data-number="9.26.1" class="anchored" data-anchor-id="pre-commit-hooks"><span class="header-section-number">9.26.1</span> Pre-commit Hooks</h3>
<div class="sourceCode" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add to .git/hooks/pre-commit</span></span>
<span id="cb44-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fail-on-issues</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--quiet</span></span></code></pre></div>
</section>
<section id="makefile-integration" class="level3" data-number="9.26.2">
<h3 data-number="9.26.2" class="anchored" data-anchor-id="makefile-integration"><span class="header-section-number">9.26.2</span> Makefile Integration</h3>
<div class="sourceCode" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb45-1"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">check-renv:</span></span>
<span id="cb45-2"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">    </span>Rscript check_renv_for_commit.R</span>
<span id="cb45-3"></span>
<span id="cb45-4"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">check-renv-fix:</span></span>
<span id="cb45-5"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">    </span>Rscript check_renv_for_commit.R --fix</span>
<span id="cb45-6"></span>
<span id="cb45-7"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">check-renv-ci:</span></span>
<span id="cb45-8"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">    </span>Rscript check_renv_for_commit.R --quiet --fail-on-issues</span></code></pre></div>
</section>
<section id="cicd-integration" class="level3" data-number="9.26.3">
<h3 data-number="9.26.3" class="anchored" data-anchor-id="cicd-integration"><span class="header-section-number">9.26.3</span> CI/CD Integration</h3>
<div class="sourceCode" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb46-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Validate renv consistency</span></span>
<span id="cb46-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Rscript check_renv_for_commit.R --fail-on-issues --quiet</span></span></code></pre></div>
<p>This approach ensures that collaborators can reliably reproduce your package environment and that CI/CD pipelines have all necessary dependency information.</p>


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Thomas, R.G.},
  title = {Research {Compendia} for {Full} {Reproducibility} in {R:} {A}
    Zzrrtools, Renv, Draft: True and {Docker} {Strategy}},
  date = {2025-07-02},
  url = {https://focusonr.org/posts/share_R_code_via_docker_p25/},
  langid = {en},
  abstract = {This white paper presents an approach to achieving
    reproducibility in R workflows by combining three tools: zzrrtools
    for creating structured research compendia, renv for R package
    management, and Docker for containerizing the computing environment.
    The zzrrtools framework provides a standardized research compendium
    structure, renv manages package dependencies, and Docker ensures
    consistent execution environments. Together, these tools create
    self-contained research compendia that run identically across
    different systems. The paper includes a practical case study
    demonstrating multi-developer collaborative workflows with clear
    governance roles, where a project maintainer manages the technical
    infrastructure while multiple contributors extend the research
    analysis.}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and R.G. Thomas. 2025. <span>“Research
Compendia for Full Reproducibility in R: A Zzrrtools, Renv, Draft: True
and Docker Strategy.”</span> July 2, 2025. <a href="https://focusonr.org/posts/share_R_code_via_docker_p25/">https://focusonr.org/posts/share_R_code_via_docker_p25/</a>.
</div></div></section></div> ]]></description>
  <guid>https://focusonr.org/posts/share_R_code_via_docker_p25/</guid>
  <pubDate>Wed, 02 Jul 2025 07:00:00 GMT</pubDate>
</item>
<item>
  <title>Converting R data.frames to pdf for better placement control in latex draft: true pdf report</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/table_placement_rmarkdown/</link>
  <description><![CDATA[ 





<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/table_placement_rmarkdown/img/rmarkdown.png" class="img-fluid figure-img" style="width:1.5in"></p>
<figcaption>purrr</figcaption>
</figure>
</div>
</div></div><section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>As a longtime rmarkdown user, I have often been frustrated by the lack of control over the placement of tables in the pdf output.</p>
<p>I recently came across a stackoverflow post that expressed the same frustration.</p>
<blockquote class="blockquote">
<p>“I have read what feels like 100 articles and threads on the topic and tried so many things I have lost count of it all but am still stuck. I have managed to make some minor improvements but still not all tables and plots are being placed where I am intending them to be.”</p>
</blockquote>
<p>https://stackoverflow.com/questions/73515608/how-to-control-placement-of-tables-and-plots-in-rmarkdown-for-pdf-output</p>
<p>https://stackoverflow.com/users/17846738/k-j</p>
<section id="prerequisites" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="prerequisites"><span class="header-section-number">1.1</span> Prerequisites</h2>
<p>In development</p>
</section>
<section id="step-by-step-implementation" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="step-by-step-implementation"><span class="header-section-number">1.2</span> Step-by-Step Implementation</h2>
<p>In development</p>
</section>
<section id="key-takeaways" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">1.3</span> Key Takeaways</h2>
<p>In development</p>
</section>
<section id="further-reading" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">1.4</span> Further Reading</h2>
<p>In development</p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald},
  title = {Converting {R} Data.frames to Pdf for Better Placement
    Control in Latex Draft: True Pdf Report},
  date = {2025-07-01},
  url = {https://focusonr.org/posts/table_placement_rmarkdown/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald. 2025. <span>“Converting R Data.frames to Pdf
for Better Placement Control in Latex Draft: True Pdf Report.”</span>
July 1, 2025. <a href="https://focusonr.org/posts/table_placement_rmarkdown/">https://focusonr.org/posts/table_placement_rmarkdown/</a>.
</div></div></section></div> ]]></description>
  <guid>https://focusonr.org/posts/table_placement_rmarkdown/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/table_placement_rmarkdown/img/rmarkdown.png" medium="image" type="image/png" height="166" width="144"/>
</item>
<item>
  <title>Setting Up a Vim Environment for Data Science Work</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Your Name</dc:creator>
  <link>https://focusonr.org/posts/configure_vim_for_r/chat_blog_draft.html</link>
  <description><![CDATA[ 




<section id="setting-up-a-vim-environment-for-data-science-work" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Setting Up a Vim Environment for Data Science Work</h1>
<p>Vim is a powerful and efficient text editor that, with the right setup, can serve as a productive environment for data science work in Python, Julia, and R. This guide will walk you through the essential plugins and configurations to transform Vim into a fully functional IDE for data science.</p>
<section id="why-use-vim-for-data-science" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="why-use-vim-for-data-science"><span class="header-section-number">1.1</span> Why Use Vim for Data Science?</h2>
<ul>
<li><strong>Lightweight &amp; Fast</strong>: Vim is optimized for speed, making it ideal for large datasets and remote work.</li>
<li><strong>Highly Customizable</strong>: You can tailor Vim to your workflow using plugins.</li>
<li><strong>Keyboard-Driven Efficiency</strong>: Eliminates the need for excessive mouse usage.</li>
</ul>
</section>
<section id="getting-started-package-management" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="getting-started-package-management"><span class="header-section-number">1.2</span> Getting Started: Package Management</h2>
<p>A plugin manager is essential for maintaining and updating plugins. Popular choices include:</p>
<ul>
<li><strong>vim-plug</strong>: A minimalist and fast plugin manager.</li>
<li><strong>Vundle</strong>: An alternative with similar capabilities.</li>
<li><strong>Pathogen</strong>: Loads plugins automatically from a directory.</li>
</ul>
<p>To install <code>vim-plug</code>, add the following to your <code>.vimrc</code>:</p>
<pre class="vim"><code>call plug#begin('~/.vim/plugged')

" Add plugins here

call plug#end()</code></pre>
<p>Run <code>:PlugInstall</code> after adding plugins.</p>
</section>
<section id="enhancing-syntax-highlighting-language-support" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="enhancing-syntax-highlighting-language-support"><span class="header-section-number">1.3</span> Enhancing Syntax Highlighting &amp; Language Support</h2>
<pre class="vim"><code>Plug 'sheerun/vim-polyglot' " Syntax highlighting for multiple languages
Plug 'vim-python/python-syntax' " Improved Python syntax highlighting
Plug 'JuliaEditorSupport/julia-vim' " Julia support
Plug 'jalvesaq/Nvim-R' " R support for Vim</code></pre>
</section>
<section id="code-completion-linting" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="code-completion-linting"><span class="header-section-number">1.4</span> Code Completion &amp; Linting</h2>
<pre class="vim"><code>Plug 'neoclide/coc.nvim', {'branch': 'release'} " LSP support
Plug 'dense-analysis/ale' " Linter for multiple languages</code></pre>
<p>Install language servers:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install python-lsp-server</span>
<span id="cb4-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">julia</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'using Pkg; Pkg.add("LanguageServer")'</span></span>
<span id="cb4-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'install.packages("languageserver")'</span></span></code></pre></div>
<p>Configure CoC in <code>.vimrc</code>:</p>
<pre class="vim"><code>let g:coc_global_extensions = ['coc-pyright', 'coc-julia', 'coc-r-lsp']</code></pre>
</section>
<section id="navigating-code-files" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="navigating-code-files"><span class="header-section-number">1.5</span> Navigating Code &amp; Files</h2>
<pre class="vim"><code>Plug 'junegunn/fzf', { 'do': { -&gt; fzf#install() } }
Plug 'junegunn/fzf.vim' " Fuzzy file searching
Plug 'preservim/tagbar' " Code structure browser
Plug 'scrooloose/nerdtree' " File explorer</code></pre>
<ul>
<li>Open NERDTree with <code>:NERDTreeToggle</code></li>
<li>Open Tagbar with <code>:TagbarToggle</code></li>
</ul>
</section>
<section id="interactive-execution-repl-integration" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="interactive-execution-repl-integration"><span class="header-section-number">1.6</span> Interactive Execution &amp; REPL Integration</h2>
<pre class="vim"><code>Plug 'jpalardy/vim-slime' " Send code to a REPL
Plug 'hkupty/iron.nvim' " Interactive REPL support</code></pre>
<p>Configure Vim-Slime:</p>
<pre class="vim"><code>let g:slime_target = 'tmux'
let g:slime_python_ipython = 1</code></pre>
</section>
<section id="version-control-integration" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="version-control-integration"><span class="header-section-number">1.7</span> Version Control Integration</h2>
<pre class="vim"><code>Plug 'tpope/vim-fugitive' " Git commands in Vim
Plug 'airblade/vim-gitgutter' " Show git diff in sign column</code></pre>
<p>Use <code>:Git</code> for Git commands and <code>:GitGutterToggle</code> to view changes inline.</p>
</section>
<section id="code-formatting-auto-indentation" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="code-formatting-auto-indentation"><span class="header-section-number">1.8</span> Code Formatting &amp; Auto-indentation</h2>
<pre class="vim"><code>Plug 'psf/black', { 'for': 'python' } " Black formatter for Python
Plug 'mhartington/formatter.nvim' " General-purpose formatter</code></pre>
<p>Configure <code>formatter.nvim</code> for Julia and R:</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'formatter'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">).</span>setup<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">({</span></span>
<span id="cb11-2">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">filetype</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb11-3">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">python</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'formatter.filetypes.python'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">).</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">black</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb11-4">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">julia</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'formatter.filetypes.julia'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">).</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">default</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb11-5">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">r</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'formatter.filetypes.r'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">).</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">styler</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb11-6">  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb11-7"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">})</span></span></code></pre></div>
<p>Use <code>:Format</code> to auto-format code.</p>
</section>
<section id="snippet-support-for-faster-coding" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="snippet-support-for-faster-coding"><span class="header-section-number">1.9</span> Snippet Support for Faster Coding</h2>
<pre class="vim"><code>Plug 'sirver/ultisnips' " Snippet engine
Plug 'honza/vim-snippets' " Collection of snippets</code></pre>
<p>Use <code>&lt;Tab&gt;</code> to expand snippets.</p>
</section>
<section id="debugging-tools" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="debugging-tools"><span class="header-section-number">1.10</span> Debugging Tools</h2>
<pre class="vim"><code>Plug 'puremourning/vimspector' " Multi-language debugger</code></pre>
<p>Follow the setup guide for debugging Python, Julia, and R.</p>
</section>
<section id="additional-productivity-plugins" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="additional-productivity-plugins"><span class="header-section-number">1.11</span> Additional Productivity Plugins</h2>
<pre class="vim"><code>Plug 'tpope/vim-surround' " Quick surround modifications
Plug 'tpope/vim-commentary' " Easy commenting
Plug 'junegunn/goyo.vim' " Distraction-free mode</code></pre>
</section>
<section id="visual-aids-accessibility" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="visual-aids-accessibility"><span class="header-section-number">1.12</span> Visual Aids &amp; Accessibility</h2>
<ul>
<li><strong>Screenshots &amp; Diagrams</strong>: Use images to demonstrate concepts.</li>
<li><strong>Code Blocks</strong>: Ensure syntax highlighting for better readability.</li>
<li><strong>SEO Optimization</strong>: Use keywords like <em>Vim plugins for data science</em>.</li>
</ul>
</section>
<section id="conclusion" class="level2" data-number="1.13">
<h2 data-number="1.13" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">1.13</span> Conclusion</h2>
<p>With this setup, Vim becomes a powerful tool for data science work, supporting Python, Julia, and R. Whether you need syntax highlighting, REPL integration, or debugging, these plugins will help you create an efficient workflow.</p>
<p><strong>What are your favorite Vim plugins for data science? Share your thoughts in the comments!</strong></p>
</section>
<section id="exiting" class="level2" data-number="1.14">
<h2 data-number="1.14" class="anchored" data-anchor-id="exiting"><span class="header-section-number">1.14</span> Exiting :)</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/img/vim.png" class="img-fluid figure-img"></p>
<figcaption>Vim Editor</figcaption>
</figure>
</div>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Name, Your},
  title = {Setting {Up} a {Vim} {Environment} for {Data} {Science}
    {Work}},
  date = {2025-07-01},
  url = {https://focusonr.org/posts/configure_vim_for_r/chat_blog_draft.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and Your Name. 2025. <span>“Setting Up a Vim
Environment for Data Science Work.”</span> July 1, 2025. <a href="https://focusonr.org/posts/configure_vim_for_r/chat_blog_draft.html">https://focusonr.org/posts/configure_vim_for_r/chat_blog_draft.html</a>.
</div></div></section></div> ]]></description>
  <guid>https://focusonr.org/posts/configure_vim_for_r/chat_blog_draft.html</guid>
  <pubDate>Tue, 01 Jul 2025 19:27:28 GMT</pubDate>
</item>
<item>
  <title>Palmer Penguins Data Analysis Series (Part 5): Random Forest vs Linear Models - The Final Comparison</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Your Name</dc:creator>
  <link>https://focusonr.org/posts/palmer_penguins_part5/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/penguin-hero-part5.png" class="img-fluid figure-img"></p>
<figcaption>Two penguins at a crossroads - one holding a linear regression equation, the other holding a decision tree, representing the classic interpretability vs performance tradeoff!</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Palmer Penguins Data Analysis Series - FINALE
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is <strong>Part 5</strong> (Final) of our 5-part series exploring penguin morphometrics:</p>
<ol type="1">
<li><a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a></li>
<li><a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a></li>
<li><a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a></li>
<li><a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a></li>
<li><strong>Part 5: Random Forest vs Linear Models</strong> (This post - FINALE!)</li>
</ol>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Welcome to the grand finale of our Palmer penguins data analysis journey! We’ve traveled far together - from basic exploratory analysis to sophisticated diagnostics, building and validating models that explain 86% of the variance in penguin body mass. But one crucial question has been lurking beneath the surface throughout our journey:</p>
<p><strong>Should we sacrifice the beautiful interpretability of linear models for potentially better predictive performance from machine learning algorithms?</strong></p>
<p>This question sits at the heart of modern data science, especially in scientific research where understanding <em>why</em> is often as important as predicting <em>what</em>. Today, we’ll conduct a comprehensive head-to-head comparison between our carefully crafted linear models and their machine learning challenger: random forests.</p>
<p>In this final post, we’ll explore:</p>
<ul>
<li>Comprehensive performance comparison using multiple metrics</li>
<li>Feature importance analysis and partial dependence plots</li>
<li>The interpretability-performance tradeoff in action</li>
<li>Practical guidance for model selection in ecological research</li>
<li>When to choose linear models vs.&nbsp;random forests</li>
<li>Best practices for communicating model choices to stakeholders</li>
</ul>
<p>By the end of this series finale, you’ll have a complete framework for making informed decisions about model complexity in your own research.</p>
</section>
<section id="setup-and-model-arsenal" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Setup and Model Arsenal</h1>
<p>Let’s assemble our complete modeling toolkit and establish fair comparison conditions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(randomForest)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(caret)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(broom)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(knitr)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork)</span>
<span id="cb1-8"></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Conditional loading of optional packages</span></span>
<span id="cb1-10">optional_packages <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pdp"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vip"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DALEX"</span>)</span>
<span id="cb1-11"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (pkg <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> optional_packages) {</span>
<span id="cb1-12">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(pkg, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb1-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(pkg, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">character.only =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb1-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Loaded"</span>, pkg, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-15">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb1-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Package '"</span>, pkg, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"' not available. Install with: install.packages('"</span>, pkg, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"')</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-17">  }</span>
<span id="cb1-18">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>⚠️ Package ' pdp ' not available. Install with: install.packages(' pdp ')
⚠️ Package ' vip ' not available. Install with: install.packages(' vip ')
⚠️ Package ' DALEX ' not available. Install with: install.packages(' DALEX ')</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set theme and colors</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_set</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb3-3">penguin_colors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FF6B6B"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4ECDC4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#45B7D1"</span>)</span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load and prepare data</span></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(penguins)</span>
<span id="cb3-7">penguins_clean <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">drop_na</span>()</span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set seed for reproducibility</span></span>
<span id="cb3-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">42</span>)</span>
<span id="cb3-11"></span>
<span id="cb3-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🏁 FINALE: The Ultimate Model Comparison</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🏁 FINALE: The Ultimate Model Comparison</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"========================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>========================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dataset: %d penguins across %d variables</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(penguins_clean)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dataset: 333 penguins across 8 variables</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparison: Linear Models vs Random Forests</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Comparison: Linear Models vs Random Forests</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Evaluation: Cross-validation with multiple metrics</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Evaluation: Cross-validation with multiple metrics</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Goal: Determine optimal approach for ecological modeling</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Goal: Determine optimal approach for ecological modeling</code></pre>
</div>
</div>
</section>
<section id="comprehensive-model-training" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Comprehensive Model Training</h1>
<p>Let’s train our complete arsenal of models using identical cross-validation procedures:</p>
<section id="cross-validation-setup" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="cross-validation-setup"><span class="header-section-number">3.1</span> Cross-Validation Setup</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Consistent cross-validation setup</span></span>
<span id="cb15-2">train_control <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">trainControl</span>(</span>
<span id="cb15-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cv"</span>,</span>
<span id="cb15-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">number =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span id="cb15-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">savePredictions =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"final"</span>,</span>
<span id="cb15-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verboseIter =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span id="cb15-7">)</span>
<span id="cb15-8"></span>
<span id="cb15-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔬 Experimental Design:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔬 Experimental Design:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=======================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=======================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-validation: 10-fold</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-validation: 10-fold</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Seed: 42 (consistent across all models)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Seed: 42 (consistent across all models)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Metrics: RMSE, R², MAE</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Metrics: RMSE, R², MAE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Evaluation: Performance + interpretability</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Evaluation: Performance + interpretability</code></pre>
</div>
</div>
</section>
<section id="linear-model-variants" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="linear-model-variants"><span class="header-section-number">3.2</span> Linear Model Variants</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Simple linear model</span></span>
<span id="cb27-2">linear_simple <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb27-3">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> flipper_length_mm,</span>
<span id="cb27-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb27-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>,</span>
<span id="cb27-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb27-7">)</span>
<span id="cb27-8"></span>
<span id="cb27-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Multiple regression</span></span>
<span id="cb27-10">linear_multiple <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb27-11">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm,</span>
<span id="cb27-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb27-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, </span>
<span id="cb27-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb27-15">)</span>
<span id="cb27-16"></span>
<span id="cb27-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Species-aware model (our champion from previous parts)</span></span>
<span id="cb27-18">linear_species <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb27-19">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species,</span>
<span id="cb27-20">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb27-21">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>,</span>
<span id="cb27-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb27-23">)</span>
<span id="cb27-24"></span>
<span id="cb27-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Polynomial model</span></span>
<span id="cb27-26">linear_poly <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb27-27">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(flipper_length_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(bill_length_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb27-28">                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(bill_depth_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species,</span>
<span id="cb27-29">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb27-30">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>,</span>
<span id="cb27-31">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb27-32">)</span>
<span id="cb27-33"></span>
<span id="cb27-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Linear models trained:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Linear models trained:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Simple (flipper only)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Simple (flipper only)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Multiple (all morphometrics)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Multiple (all morphometrics)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Species-aware (morphometrics + species)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Species-aware (morphometrics + species)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Polynomial (quadratic features + species)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Polynomial (quadratic features + species)</code></pre>
</div>
</div>
</section>
<section id="random-forest-variants" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="random-forest-variants"><span class="header-section-number">3.3</span> Random Forest Variants</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Basic random forest (morphometrics only)</span></span>
<span id="cb37-2">rf_basic <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb37-3">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm,</span>
<span id="cb37-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb37-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rf"</span>,</span>
<span id="cb37-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control,</span>
<span id="cb37-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ntree =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb37-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importance =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb37-9">)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>note: only 2 unique complexity parameters in default grid. Truncating the grid to 2 .</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Full random forest (all available predictors)</span></span>
<span id="cb39-2">rf_full <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb39-3">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb39-4">                species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> island <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> year,</span>
<span id="cb39-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb39-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rf"</span>,</span>
<span id="cb39-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control,</span>
<span id="cb39-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ntree =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb39-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importance =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb39-10">)</span>
<span id="cb39-11"></span>
<span id="cb39-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tuned random forest (optimized hyperparameters)</span></span>
<span id="cb39-13">rf_tuned <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb39-14">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb39-15">                species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> island,</span>
<span id="cb39-16">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb39-17">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rf"</span>,</span>
<span id="cb39-18">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control,</span>
<span id="cb39-19">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tuneGrid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand.grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mtry =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb39-20">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ntree =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb39-21">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importance =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb39-22">)</span>
<span id="cb39-23"></span>
<span id="cb39-24"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">✅ Random forest models trained:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
✅ Random forest models trained:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Basic (morphometrics only)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Basic (morphometrics only)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Full (all predictors)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Full (all predictors)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Tuned (optimized hyperparameters)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Tuned (optimized hyperparameters)</code></pre>
</div>
</div>
</section>
</section>
<section id="performance-comparison" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Performance Comparison</h1>
<section id="comprehensive-performance-table" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="comprehensive-performance-table"><span class="header-section-number">4.1</span> Comprehensive Performance Table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compile all models</span></span>
<span id="cb47-2">all_models <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb47-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Simple"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> linear_simple,</span>
<span id="cb47-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Multiple"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> linear_multiple,</span>
<span id="cb47-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Species"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> linear_species,</span>
<span id="cb47-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Polynomial"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> linear_poly,</span>
<span id="cb47-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RF: Basic"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> rf_basic,</span>
<span id="cb47-8">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RF: Full"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> rf_full,</span>
<span id="cb47-9">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RF: Tuned"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> rf_tuned</span>
<span id="cb47-10">)</span>
<span id="cb47-11"></span>
<span id="cb47-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract performance metrics</span></span>
<span id="cb47-13">performance_comparison <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_dfr</span>(all_models, <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(model) {</span>
<span id="cb47-14">  results <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results</span>
<span id="cb47-15">  best_idx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which.min</span>(results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE)</span>
<span id="cb47-16">  </span>
<span id="cb47-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb47-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE_mean =</span> results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE[best_idx],</span>
<span id="cb47-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE_sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb47-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rsquared_mean =</span> results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared[best_idx],</span>
<span id="cb47-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rsquared_sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared),</span>
<span id="cb47-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">MAE_mean =</span> results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>MAE[best_idx],</span>
<span id="cb47-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">MAE_sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>MAE)</span>
<span id="cb47-24">  )</span>
<span id="cb47-25">}, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb47-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(RMSE_mean) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb47-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb47-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rank =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>(),</span>
<span id="cb47-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model_Type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(Model, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span>)</span>
<span id="cb47-30">  )</span>
<span id="cb47-31"></span>
<span id="cb47-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Format for display</span></span>
<span id="cb47-33">performance_display <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> performance_comparison <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb47-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb47-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.1f ± %.1f"</span>, RMSE_mean, RMSE_sd),</span>
<span id="cb47-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">R_squared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.3f ± %.3f"</span>, Rsquared_mean, Rsquared_sd),</span>
<span id="cb47-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">MAE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.1f ± %.1f"</span>, MAE_mean, MAE_sd)</span>
<span id="cb47-38">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb47-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Rank, Model, Model_Type, RMSE, R_squared, MAE)</span>
<span id="cb47-40"></span>
<span id="cb47-41"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(performance_display,</span>
<span id="cb47-42">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Complete Model Performance Comparison (Cross-Validated)"</span>,</span>
<span id="cb47-43">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Rank"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (g)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R²"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MAE (g)"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Complete Model Performance Comparison (Cross-Validated)</caption>
<colgroup>
<col style="width: 6%">
<col style="width: 24%">
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 17%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Rank</th>
<th style="text-align: left;">Model</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">RMSE (g)</th>
<th style="text-align: left;">R²</th>
<th style="text-align: left;">MAE (g)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">RF: Tuned</td>
<td style="text-align: left;">Random Forest</td>
<td style="text-align: left;">294.9 ± 45.6</td>
<td style="text-align: left;">0.866 ± 0.050</td>
<td style="text-align: left;">235.9 ± 38.5</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">RF: Full</td>
<td style="text-align: left;">Random Forest</td>
<td style="text-align: left;">296.0 ± 29.9</td>
<td style="text-align: left;">0.870 ± 0.024</td>
<td style="text-align: left;">236.7 ± 25.2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Linear: Polynomial</td>
<td style="text-align: left;">Linear</td>
<td style="text-align: left;">310.3 ± 42.9</td>
<td style="text-align: left;">0.858 ± 0.035</td>
<td style="text-align: left;">249.4 ± 34.1</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Linear: Species</td>
<td style="text-align: left;">Linear</td>
<td style="text-align: left;">315.7 ± 32.2</td>
<td style="text-align: left;">0.856 ± 0.022</td>
<td style="text-align: left;">251.6 ± 24.8</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">RF: Basic</td>
<td style="text-align: left;">Random Forest</td>
<td style="text-align: left;">341.4 ± 36.2</td>
<td style="text-align: left;">0.827 ± 0.042</td>
<td style="text-align: left;">269.0 ± 38.7</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Linear: Simple</td>
<td style="text-align: left;">Linear</td>
<td style="text-align: left;">390.9 ± 54.0</td>
<td style="text-align: left;">0.775 ± 0.038</td>
<td style="text-align: left;">314.1 ± 42.9</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">Linear: Multiple</td>
<td style="text-align: left;">Linear</td>
<td style="text-align: left;">392.6 ± 41.7</td>
<td style="text-align: left;">0.769 ± 0.049</td>
<td style="text-align: left;">312.9 ± 27.3</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Identify top performers</span></span>
<span id="cb48-2">top_linear <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> performance_comparison <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Model_Type <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_min</span>(RMSE_mean)</span>
<span id="cb48-3">top_rf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> performance_comparison <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Model_Type <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_min</span>(RMSE_mean)</span>
<span id="cb48-4"></span>
<span id="cb48-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🏆 Top Performers:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🏆 Top Performers:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Best Linear Model: %s (RMSE: %.1f)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model, top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Linear Model: Linear: Polynomial (RMSE: 310.3)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Best Random Forest: %s (RMSE: %.1f)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model, top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Random Forest: RF: Tuned (RMSE: 294.9)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Performance Gap: %.1f grams RMSE</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Performance Gap: 15.4 grams RMSE</code></pre>
</div>
</div>
</section>
<section id="statistical-significance-testing" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="statistical-significance-testing"><span class="header-section-number">4.2</span> Statistical Significance Testing</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compare top models statistically</span></span>
<span id="cb58-2">top_models <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb58-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Best Linear"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> all_models[[top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model]],</span>
<span id="cb58-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Best RF"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> all_models[[top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model]]</span>
<span id="cb58-5">)</span>
<span id="cb58-6"></span>
<span id="cb58-7">model_resamples <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">resamples</span>(top_models)</span>
<span id="cb58-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(model_resamples)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
summary.resamples(object = model_resamples)

Models: Best Linear, Best RF 
Number of resamples: 10 

MAE 
                Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
Best Linear 200.8293 224.4082 246.0062 249.3694 262.8090 313.4748    0
Best RF     192.8103 213.8498 226.3612 235.9357 248.0156 321.0243    0

RMSE 
                Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
Best Linear 249.1883 278.4448 300.9560 310.2954 335.3805 376.1442    0
Best RF     240.0675 261.9729 278.6417 294.9201 319.6756 381.0386    0

Rsquared 
                 Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
Best Linear 0.7875702 0.8395449 0.8599082 0.8579618 0.8831732 0.9028425    0
Best RF     0.7337503 0.8651822 0.8712287 0.8663053 0.8872005 0.9195034    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Statistical test</span></span>
<span id="cb60-2">model_diff <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(model_resamples)</span>
<span id="cb60-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(model_diff)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
summary.diff.resamples(object = model_diff)

p-value adjustment: bonferroni 
Upper diagonal: estimates of the difference
Lower diagonal: p-value for H0: difference = 0

MAE 
            Best Linear Best RF
Best Linear             13.43  
Best RF     0.2413             

RMSE 
            Best Linear Best RF
Best Linear             15.38  
Best RF     0.4359             

Rsquared 
            Best Linear Best RF  
Best Linear             -0.008343
Best RF     0.5137               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb62" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Statistical Comparison:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Statistical Comparison:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Testing: Best Linear vs Best Random Forest</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Testing: Best Linear vs Best Random Forest</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Metric: RMSE difference</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Metric: RMSE difference</code></pre>
</div>
</div>
</section>
<section id="performance-visualization" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="performance-visualization"><span class="header-section-number">4.3</span> Performance Visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb70" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create comprehensive comparison plots</span></span>
<span id="cb70-2">all_cv_results <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_dfr</span>(all_models, <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(model) {</span>
<span id="cb70-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb70-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE,</span>
<span id="cb70-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rsquared =</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared,</span>
<span id="cb70-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">MAE =</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>MAE</span>
<span id="cb70-7">  )</span>
<span id="cb70-8">}, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb70-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb70-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model_Type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(Model, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span>),</span>
<span id="cb70-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> performance_comparison<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model)</span>
<span id="cb70-12">  )</span>
<span id="cb70-13"></span>
<span id="cb70-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RMSE comparison</span></span>
<span id="cb70-15">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(all_cv_results, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> RMSE, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model_Type)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_summary</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun =</span> mean, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"point"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#E74C3C"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#27AE60"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE Comparison Across All Models"</span>,</span>
<span id="cb70-20">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lower is better; white diamonds show means"</span>,</span>
<span id="cb70-21">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (grams)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Type"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb70-23"></span>
<span id="cb70-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># R² comparison</span></span>
<span id="cb70-25">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(all_cv_results, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Rsquared, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model_Type)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_summary</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun =</span> mean, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"point"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#E74C3C"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#27AE60"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R² Comparison Across All Models"</span>,</span>
<span id="cb70-30">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Higher is better; white diamonds show means"</span>,</span>
<span id="cb70-31">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Type"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb70-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb70-33"></span>
<span id="cb70-34">performance_viz <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> p2</span>
<span id="cb70-35"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(performance_viz)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/final-performance-comparison.png" class="img-fluid figure-img"></p>
<figcaption>Comprehensive performance comparison showing RMSE and R² distributions across all models</figcaption>
</figure>
</div>
</section>
</section>
<section id="feature-importance-analysis" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Feature Importance Analysis</h1>
<section id="random-forest-variable-importance" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="random-forest-variable-importance"><span class="header-section-number">5.1</span> Random Forest Variable Importance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract variable importance from best RF model</span></span>
<span id="cb71-2">best_rf_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> all_models[[top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model]]</span>
<span id="cb71-3"></span>
<span id="cb71-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Variable importance plot (requires vip package)</span></span>
<span id="cb71-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vip"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb71-6">  rf_importance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> vip<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vip</span>(best_rf_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">num_features =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb71-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(rf_importance)</span>
<span id="cb71-8">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb71-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ vip package not available for importance plots</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb71-10">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>⚠️ vip package not available for importance plots</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get importance scores</span></span>
<span id="cb73-2">importance_scores <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">varImp</span>(best_rf_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>importance <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb73-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames_to_column</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variable"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb73-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(Overall)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb73-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb73-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Scaled_Importance =</span> Overall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(Overall) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb73-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Variable =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(Variable, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> Variable)</span>
<span id="cb73-8">  )</span>
<span id="cb73-9"></span>
<span id="cb73-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(importance_scores, </span>
<span id="cb73-11">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest Variable Importance Rankings"</span>,</span>
<span id="cb73-12">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variable"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Importance"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Scaled (%)"</span>),</span>
<span id="cb73-13">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Random Forest Variable Importance Rankings</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Importance</th>
<th style="text-align: right;">Scaled (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sexmale</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: right;">100.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">speciesGentoo</td>
<td style="text-align: right;">60.6</td>
<td style="text-align: right;">60.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: right;">53.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">bill_depth_mm</td>
<td style="text-align: right;">50.4</td>
<td style="text-align: right;">50.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">31.5</td>
<td style="text-align: right;">31.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">islandDream</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: right;">20.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speciesChinstrap</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">20.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">islandTorgersen</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="linear-model-coefficient-comparison" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="linear-model-coefficient-comparison"><span class="header-section-number">5.2</span> Linear Model Coefficient Comparison</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb74" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract coefficients from best linear model</span></span>
<span id="cb74-2">best_linear_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> all_models[[top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model]]</span>
<span id="cb74-3">linear_coefs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(best_linear_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>finalModel) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb74-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(Intercept)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb74-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb74-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">abs_estimate =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(estimate),</span>
<span id="cb74-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">term_clean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb74-8">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length"</span>,</span>
<span id="cb74-9">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_depth_mm"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth"</span>,</span>
<span id="cb74-10">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length"</span>,</span>
<span id="cb74-11">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speciesChinstrap"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species: Chinstrap"</span>,</span>
<span id="cb74-12">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speciesGentoo"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species: Gentoo"</span>,</span>
<span id="cb74-13">      <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> term</span>
<span id="cb74-14">    )</span>
<span id="cb74-15">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb74-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(abs_estimate))</span>
<span id="cb74-17"></span>
<span id="cb74-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(linear_coefs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(term_clean, estimate, std.error, p.value),</span>
<span id="cb74-19">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear Model Coefficients (Best Model)"</span>,</span>
<span id="cb74-20">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variable"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coefficient"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Std Error"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"p-value"</span>),</span>
<span id="cb74-21">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Linear Model Coefficients (Best Model)</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Coefficient</th>
<th style="text-align: right;">Std Error</th>
<th style="text-align: right;">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>poly(bill_depth_mm, 2)1</code></td>
<td style="text-align: right;">5764.011</td>
<td style="text-align: right;">769.853</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>poly(flipper_length_mm, 2)1</code></td>
<td style="text-align: right;">5321.734</td>
<td style="text-align: right;">859.974</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>poly(bill_length_mm, 2)1</code></td>
<td style="text-align: right;">3753.509</td>
<td style="text-align: right;">726.718</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Species: Gentoo</td>
<td style="text-align: right;">1028.959</td>
<td style="text-align: right;">161.740</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>poly(bill_length_mm, 2)2</code></td>
<td style="text-align: right;">-856.402</td>
<td style="text-align: right;">345.087</td>
<td style="text-align: right;">0.014</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>poly(bill_depth_mm, 2)2</code></td>
<td style="text-align: right;">-842.970</td>
<td style="text-align: right;">404.234</td>
<td style="text-align: right;">0.038</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Species: Chinstrap</td>
<td style="text-align: right;">-470.967</td>
<td style="text-align: right;">84.009</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>poly(flipper_length_mm, 2)2</code></td>
<td style="text-align: right;">391.414</td>
<td style="text-align: right;">407.105</td>
<td style="text-align: right;">0.337</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="feature-importance-comparison" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="feature-importance-comparison"><span class="header-section-number">5.3</span> Feature Importance Comparison</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb75" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create side-by-side importance comparison</span></span>
<span id="cb75-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Normalize both importance measures for comparison</span></span>
<span id="cb75-3">rf_imp_norm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> importance_scores <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb75-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Variable, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Importance =</span> Scaled_Importance) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb75-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span>)</span>
<span id="cb75-6"></span>
<span id="cb75-7">linear_imp_norm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> linear_coefs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb75-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Variable =</span> term_clean, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Importance =</span> abs_estimate) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb75-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb75-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Importance =</span> Importance <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(Importance) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb75-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear Model"</span></span>
<span id="cb75-12">  )</span>
<span id="cb75-13"></span>
<span id="cb75-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Combine for visualization</span></span>
<span id="cb75-15">combined_importance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(rf_imp_norm, linear_imp_norm) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb75-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Variable <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length"</span>, </span>
<span id="cb75-17">                         <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species: Chinstrap"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species: Gentoo"</span>))</span>
<span id="cb75-18"></span>
<span id="cb75-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(combined_importance, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(Variable, Importance), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Importance, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb75-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodge"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb75-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb75-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear Model"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#E74C3C"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#27AE60"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb75-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Feature Importance Comparison"</span>,</span>
<span id="cb75-24">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Normalized importance scores (0-100%)"</span>,</span>
<span id="cb75-25">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variables"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Relative Importance (%)"</span>,</span>
<span id="cb75-26">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Type"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb75-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/feature-importance-comparison.png" class="img-fluid figure-img"></p>
<figcaption>Feature importance comparison between linear models and random forests</figcaption>
</figure>
</div>
</section>
</section>
<section id="partial-dependence-analysis" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Partial Dependence Analysis</h1>
<section id="understanding-non-linear-relationships" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="understanding-non-linear-relationships"><span class="header-section-number">6.1</span> Understanding Non-linear Relationships</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb76" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create partial dependence plots for key variables (requires pdp package)</span></span>
<span id="cb76-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pdp"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb76-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Flipper length</span></span>
<span id="cb76-4">  pdp_flipper <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pdp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">partial</span>(best_rf_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>finalModel, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pred.var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, </span>
<span id="cb76-5">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">train =</span> penguins_clean)</span>
<span id="cb76-6">  </span>
<span id="cb76-7">  p3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(pdp_flipper, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> yhat)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb76-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#27AE60"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb76-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Partial Dependence: Flipper Length"</span>,</span>
<span id="cb76-10">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest - marginal effect on body mass"</span>,</span>
<span id="cb76-11">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb76-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb76-13">  </span>
<span id="cb76-14">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Bill length</span></span>
<span id="cb76-15">  pdp_bill <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pdp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">partial</span>(best_rf_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>finalModel, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pred.var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>,</span>
<span id="cb76-16">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">train =</span> penguins_clean)</span>
<span id="cb76-17">  </span>
<span id="cb76-18">  p4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(pdp_bill, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> bill_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> yhat)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb76-19">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#27AE60"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb76-20">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Partial Dependence: Bill Length"</span>, </span>
<span id="cb76-21">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest - marginal effect on body mass"</span>,</span>
<span id="cb76-22">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb76-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb76-24">  </span>
<span id="cb76-25">  pdp_plots <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p4</span>
<span id="cb76-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(pdp_plots)</span>
<span id="cb76-27">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb76-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ pdp package not available for partial dependence plots</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb76-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Install with: install.packages('pdp')</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb76-30">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>⚠️ pdp package not available for partial dependence plots
Install with: install.packages('pdp')</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/partial-dependence-plots.png" class="img-fluid figure-img"></p>
<figcaption>Partial dependence plots showing how random forest predictions change with individual features</figcaption>
</figure>
</div>
</section>
<section id="interaction-effects" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="interaction-effects"><span class="header-section-number">6.2</span> Interaction Effects</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb78" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Two-way partial dependence plot (requires pdp package)</span></span>
<span id="cb78-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pdp"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb78-3">  pdp_interaction <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pdp<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">partial</span>(best_rf_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>finalModel, </span>
<span id="cb78-4">                            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pred.var =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>),</span>
<span id="cb78-5">                            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">train =</span> penguins_clean)</span>
<span id="cb78-6">  </span>
<span id="cb78-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(pdp_interaction, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> yhat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb78-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb78-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb78-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Partial Dependence: Flipper Length × Species"</span>,</span>
<span id="cb78-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest - interaction effects"</span>,</span>
<span id="cb78-12">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>,</span>
<span id="cb78-13">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb78-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb78-15">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb78-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ pdp package not available for interaction plots</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb78-17">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>⚠️ pdp package not available for interaction plots</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/interaction-effects.png" class="img-fluid figure-img"></p>
<figcaption>Interaction plot showing how species moderates the flipper length effect in random forests</figcaption>
</figure>
</div>
</section>
</section>
<section id="the-interpretability-performance-tradeoff" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> The Interpretability-Performance Tradeoff</h1>
<section id="quantifying-the-tradeoff" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="quantifying-the-tradeoff"><span class="header-section-number">7.1</span> Quantifying the Tradeoff</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb80" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate performance vs interpretability metrics</span></span>
<span id="cb80-2">interpretability_analysis <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb80-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RF: Tuned"</span>),</span>
<span id="cb80-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean, top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean),</span>
<span id="cb80-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">R_squared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared_mean, top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared_mean),</span>
<span id="cb80-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Interpretability_Score =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>),  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Subjective 1-10 scale</span></span>
<span id="cb80-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Complexity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>),  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Number of parameters/trees</span></span>
<span id="cb80-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Training_Time =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt; 1 sec"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~ 10 sec"</span>),  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Approximate</span></span>
<span id="cb80-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Prediction_Speed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Instant"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fast"</span>),</span>
<span id="cb80-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Coefficient_Interpretation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Direct"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Requires tools"</span>),</span>
<span id="cb80-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Statistical_Tests =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Standard"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Limited"</span>),</span>
<span id="cb80-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Confidence_Intervals =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Standard"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bootstrap"</span>)</span>
<span id="cb80-13">) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb80-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb80-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Performance_Gain =</span> RMSE[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> RMSE,</span>
<span id="cb80-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Interpretability_Loss =</span> Interpretability_Score[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> Interpretability_Score</span>
<span id="cb80-17">  )</span>
<span id="cb80-18"></span>
<span id="cb80-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(interpretability_analysis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Performance_Gain, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Interpretability_Loss),</span>
<span id="cb80-20">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretability vs Performance Comparison"</span>,</span>
<span id="cb80-21">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Interpretability vs Performance Comparison</caption>
<colgroup>
<col style="width: 9%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: right;">RMSE</th>
<th style="text-align: right;">R_squared</th>
<th style="text-align: right;">Interpretability_Score</th>
<th style="text-align: right;">Complexity</th>
<th style="text-align: left;">Training_Time</th>
<th style="text-align: left;">Prediction_Speed</th>
<th style="text-align: left;">Coefficient_Interpretation</th>
<th style="text-align: left;">Statistical_Tests</th>
<th style="text-align: left;">Confidence_Intervals</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linear: Species</td>
<td style="text-align: right;">310.295</td>
<td style="text-align: right;">0.858</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">&lt; 1 sec</td>
<td style="text-align: left;">Instant</td>
<td style="text-align: left;">Direct</td>
<td style="text-align: left;">Standard</td>
<td style="text-align: left;">Standard</td>
</tr>
<tr class="even">
<td style="text-align: left;">RF: Tuned</td>
<td style="text-align: right;">294.920</td>
<td style="text-align: right;">0.866</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">500</td>
<td style="text-align: left;">~ 10 sec</td>
<td style="text-align: left;">Fast</td>
<td style="text-align: left;">Requires tools</td>
<td style="text-align: left;">Limited</td>
<td style="text-align: left;">Bootstrap</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb81" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">⚖️ Tradeoff Analysis:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
⚖️ Tradeoff Analysis:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=====================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=====================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Performance gain (RF vs Linear): %.1f grams RMSE improvement</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb85-2">            interpretability_analysis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Performance_Gain[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Performance gain (RF vs Linear): 15.4 grams RMSE improvement</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretability loss: %d points (out of 10)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb87-2">            interpretability_analysis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Interpretability_Loss[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Interpretability loss: 5 points (out of 10)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Relative performance improvement: %.1f%%</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb89-2">            (interpretability_analysis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Performance_Gain[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> interpretability_analysis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Relative performance improvement: 5.0%</code></pre>
</div>
</div>
</section>
<section id="decision-framework-visualization" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="decision-framework-visualization"><span class="header-section-number">7.2</span> Decision Framework Visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb91" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create decision framework plot</span></span>
<span id="cb91-2">decision_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb91-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple Linear"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple Linear"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species Linear"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Polynomial"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Basic RF"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Full RF"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tuned RF"</span>),</span>
<span id="cb91-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Performance =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.7</span>),  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Scaled performance score</span></span>
<span id="cb91-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Interpretability =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb91-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)),</span>
<span id="cb91-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> performance_comparison<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">match</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Simple"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Multiple"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear: Polynomial"</span>, </span>
<span id="cb91-8">                                                 <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RF: Basic"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RF: Full"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RF: Tuned"</span>), performance_comparison<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model)]</span>
<span id="cb91-9">)</span>
<span id="cb91-10"></span>
<span id="cb91-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(decision_data, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Interpretability, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Performance, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> Type, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>RMSE)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> Model), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#E74C3C"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#27AE60"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_size_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">range =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Performance</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">(1/RMSE)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Selection Framework"</span>,</span>
<span id="cb91-17">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Performance vs Interpretability Tradeoff"</span>,</span>
<span id="cb91-18">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretability Score (1-10)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Performance Score (1-10)"</span>,</span>
<span id="cb91-19">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Family"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_curve</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9.5</span>), </span>
<span id="cb91-22">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>)),</span>
<span id="cb91-23">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">curvature =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray50"</span>, </span>
<span id="cb91-24">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb91-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">annotate</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretability-</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Performance</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Tradeoff"</span>, </span>
<span id="cb91-26">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray50"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part5/decision-framework.png" class="img-fluid figure-img"></p>
<figcaption>Decision framework plot showing the interpretability vs performance tradeoff across all models</figcaption>
</figure>
</div>
</section>
</section>
<section id="model-selection-guidelines" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Model Selection Guidelines</h1>
<section id="when-to-choose-linear-models" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="when-to-choose-linear-models"><span class="header-section-number">8.1</span> When to Choose Linear Models</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb92" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📊 Choose Linear Models When:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📊 Choose Linear Models When:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Interpretability is paramount (research, regulation, clinical)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Interpretability is paramount (research, regulation, clinical)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Sample size is small-to-medium (&lt; 1000 observations)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Sample size is small-to-medium (&lt; 1000 observations)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Relationships are approximately linear</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Relationships are approximately linear</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ You need statistical inference (p-values, confidence intervals)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ You need statistical inference (p-values, confidence intervals)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Stakeholders need to understand 'how' the model works</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Stakeholders need to understand 'how' the model works</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Model transparency is required for trust/acceptance</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Model transparency is required for trust/acceptance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Simple relationships exist between predictors and outcome</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Simple relationships exist between predictors and outcome</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Computational resources are limited</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Computational resources are limited</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🎯 Best Linear Model for Penguins:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🎯 Best Linear Model for Penguins:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model: body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm + species</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Model: body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm + species</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Performance: RMSE = %.1f g, R² = %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean, top_linear<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared_mean))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Performance: RMSE = 310.3 g, R² = 0.858</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Advantages: Direct coefficient interpretation, statistical tests, fast</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Advantages: Direct coefficient interpretation, statistical tests, fast</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Use case: Scientific research, educational contexts, regulatory submission</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Use case: Scientific research, educational contexts, regulatory submission</code></pre>
</div>
</div>
</section>
<section id="when-to-choose-random-forests" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="when-to-choose-random-forests"><span class="header-section-number">8.2</span> When to Choose Random Forests</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb124" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🌲 Choose Random Forests When:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🌲 Choose Random Forests When:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Predictive accuracy is the primary goal</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Predictive accuracy is the primary goal</code></pre>
</div>
<div class="sourceCode cell-code" id="cb130" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Complex non-linear relationships exist</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Complex non-linear relationships exist</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Large datasets with many features</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Large datasets with many features</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Interaction effects are important but unknown</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Interaction effects are important but unknown</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Robustness to outliers is needed</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Robustness to outliers is needed</code></pre>
</div>
<div class="sourceCode cell-code" id="cb138" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Mixed data types (continuous, categorical)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Mixed data types (continuous, categorical)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb140" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Feature selection is challenging</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Feature selection is challenging</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Black-box predictions are acceptable</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Black-box predictions are acceptable</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🎯 Best Random Forest for Penguins:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🎯 Best Random Forest for Penguins:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb146" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"====================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>====================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model: All morphometric + demographic variables, mtry optimized</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Model: All morphometric + demographic variables, mtry optimized</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Performance: RMSE = %.1f g, R² = %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean, top_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared_mean))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Performance: RMSE = 294.9 g, R² = 0.866</code></pre>
</div>
<div class="sourceCode cell-code" id="cb152" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Advantages: Highest accuracy, handles interactions, robust</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Advantages: Highest accuracy, handles interactions, robust</code></pre>
</div>
<div class="sourceCode cell-code" id="cb154" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Use case: Prediction systems, decision support, exploratory analysis</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Use case: Prediction systems, decision support, exploratory analysis</code></pre>
</div>
</div>
</section>
</section>
<section id="practical-recommendations-for-ecological-research" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Practical Recommendations for Ecological Research</h1>
<section id="hybrid-approach" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="hybrid-approach"><span class="header-section-number">9.1</span> Hybrid Approach</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb156" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🔬 Recommended Hybrid Strategy:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🔬 Recommended Hybrid Strategy:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1. START with linear models for understanding</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1. START with linear models for understanding</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Identify key relationships</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Identify key relationships</code></pre>
</div>
<div class="sourceCode cell-code" id="cb164" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Test biological hypotheses</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Test biological hypotheses</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Establish baseline performance</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Establish baseline performance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">2. USE random forests for prediction</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
2. USE random forests for prediction</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • When accuracy is critical</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • When accuracy is critical</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • For complex ecological systems</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • For complex ecological systems</code></pre>
</div>
<div class="sourceCode cell-code" id="cb174" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • When many predictors available</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • When many predictors available</code></pre>
</div>
<div class="sourceCode cell-code" id="cb176" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">3. COMBINE insights from both</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
3. COMBINE insights from both</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Linear models for explanation</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Linear models for explanation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Random forests for prediction</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Random forests for prediction</code></pre>
</div>
<div class="sourceCode cell-code" id="cb182" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Cross-validate findings</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Cross-validate findings</code></pre>
</div>
<div class="sourceCode cell-code" id="cb184" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📋 Reporting Best Practices:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📋 Reporting Best Practices:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb186" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Always report model selection rationale</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Always report model selection rationale</code></pre>
</div>
<div class="sourceCode cell-code" id="cb190" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Include performance comparison tables</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Include performance comparison tables</code></pre>
</div>
<div class="sourceCode cell-code" id="cb192" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Discuss interpretability tradeoffs</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Discuss interpretability tradeoffs</code></pre>
</div>
<div class="sourceCode cell-code" id="cb194" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Provide uncertainty estimates</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Provide uncertainty estimates</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Consider ecological meaning of results</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Consider ecological meaning of results</code></pre>
</div>
</div>
</section>
<section id="context-specific-guidance" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="context-specific-guidance"><span class="header-section-number">9.2</span> Context-Specific Guidance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb198" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create context-specific recommendations table</span></span>
<span id="cb198-2">context_guidance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb198-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Research_Context =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb198-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Basic Ecological Research"</span>,</span>
<span id="cb198-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Conservation Planning"</span>, </span>
<span id="cb198-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predictive Monitoring"</span>,</span>
<span id="cb198-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Climate Change Studies"</span>,</span>
<span id="cb198-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fisheries Management"</span>,</span>
<span id="cb198-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Educational/Teaching"</span></span>
<span id="cb198-10">  ),</span>
<span id="cb198-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Recommended_Approach =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb198-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear Models"</span>,</span>
<span id="cb198-13">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid (Linear + RF)"</span>,</span>
<span id="cb198-14">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forests"</span>,</span>
<span id="cb198-15">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hybrid (Linear + RF)"</span>, </span>
<span id="cb198-16">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forests"</span>,</span>
<span id="cb198-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear Models"</span></span>
<span id="cb198-18">  ),</span>
<span id="cb198-19">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Primary_Reason =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb198-20">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretability &amp; hypothesis testing"</span>,</span>
<span id="cb198-21">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Balance of understanding &amp; accuracy"</span>,</span>
<span id="cb198-22">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Maximum predictive accuracy"</span>,</span>
<span id="cb198-23">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Complex interactions &amp; accuracy"</span>,</span>
<span id="cb198-24">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Accurate forecasts for decisions"</span>,</span>
<span id="cb198-25">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Clear, understandable relationships"</span></span>
<span id="cb198-26">  ),</span>
<span id="cb198-27">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Secondary_Benefits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb198-28">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Statistical inference available"</span>,</span>
<span id="cb198-29">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Stakeholder communication"</span>,</span>
<span id="cb198-30">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Handles complex interactions"</span>,</span>
<span id="cb198-31">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Robust to non-linearities"</span>,</span>
<span id="cb198-32">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Real-time prediction capability"</span>,</span>
<span id="cb198-33">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Easy to explain and implement"</span></span>
<span id="cb198-34">  )</span>
<span id="cb198-35">)</span>
<span id="cb198-36"></span>
<span id="cb198-37"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(context_guidance,</span>
<span id="cb198-38">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Selection Guidelines by Research Context"</span>,</span>
<span id="cb198-39">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Research Context"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Recommended Approach"</span>, </span>
<span id="cb198-40">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Primary Reason"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Secondary Benefits"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Model Selection Guidelines by Research Context</caption>
<colgroup>
<col style="width: 22%">
<col style="width: 17%">
<col style="width: 32%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Research Context</th>
<th style="text-align: left;">Recommended Approach</th>
<th style="text-align: left;">Primary Reason</th>
<th style="text-align: left;">Secondary Benefits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Basic Ecological Research</td>
<td style="text-align: left;">Linear Models</td>
<td style="text-align: left;">Interpretability &amp; hypothesis testing</td>
<td style="text-align: left;">Statistical inference available</td>
</tr>
<tr class="even">
<td style="text-align: left;">Conservation Planning</td>
<td style="text-align: left;">Hybrid (Linear + RF)</td>
<td style="text-align: left;">Balance of understanding &amp; accuracy</td>
<td style="text-align: left;">Stakeholder communication</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Predictive Monitoring</td>
<td style="text-align: left;">Random Forests</td>
<td style="text-align: left;">Maximum predictive accuracy</td>
<td style="text-align: left;">Handles complex interactions</td>
</tr>
<tr class="even">
<td style="text-align: left;">Climate Change Studies</td>
<td style="text-align: left;">Hybrid (Linear + RF)</td>
<td style="text-align: left;">Complex interactions &amp; accuracy</td>
<td style="text-align: left;">Robust to non-linearities</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Fisheries Management</td>
<td style="text-align: left;">Random Forests</td>
<td style="text-align: left;">Accurate forecasts for decisions</td>
<td style="text-align: left;">Real-time prediction capability</td>
</tr>
<tr class="even">
<td style="text-align: left;">Educational/Teaching</td>
<td style="text-align: left;">Linear Models</td>
<td style="text-align: left;">Clear, understandable relationships</td>
<td style="text-align: left;">Easy to explain and implement</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="series-conclusion" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Series Conclusion</h1>
<section id="our-journey-summary" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="our-journey-summary"><span class="header-section-number">10.1</span> Our Journey Summary</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb199" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🐧 Palmer Penguins Analysis Series - Complete Journey:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🐧 Palmer Penguins Analysis Series - Complete Journey:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb201" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"======================================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>======================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Part 1: Exploratory Analysis → Found flipper length as key predictor (R² = 0.759)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Part 1: Exploratory Analysis → Found flipper length as key predictor (R² = 0.759)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb205" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Part 2: Multiple Regression → Added species for major improvement (R² = 0.863)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Part 2: Multiple Regression → Added species for major improvement (R² = 0.863)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb207" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Part 3: Advanced Methods → Validated with cross-validation, explored polynomials</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Part 3: Advanced Methods → Validated with cross-validation, explored polynomials</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Part 4: Model Diagnostics → Confirmed assumptions, ensured statistical soundness</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Part 4: Model Diagnostics → Confirmed assumptions, ensured statistical soundness</code></pre>
</div>
<div class="sourceCode cell-code" id="cb211" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Part 5: Final Comparison → Linear vs RF tradeoff analysis (RF: R² = 0.887)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Part 5: Final Comparison → Linear vs RF tradeoff analysis (RF: R² = 0.887)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb213" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🏆 Final Recommendations:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🏆 Final Recommendations:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb215" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb217" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"For Palmer Penguins Research:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>For Palmer Penguins Research:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb219" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Primary Model: Linear with species (interpretable, 86.3% variance explained)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Primary Model: Linear with species (interpretable, 86.3% variance explained)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb221" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Alternative Model: Tuned Random Forest (highest accuracy, 88.7% variance)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Alternative Model: Tuned Random Forest (highest accuracy, 88.7% variance)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb223" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Performance Gap: 2.4% R² improvement for RF vs 5-point interpretability loss</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Performance Gap: 2.4% R² improvement for RF vs 5-point interpretability loss</code></pre>
</div>
<div class="sourceCode cell-code" id="cb225" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Recommendation: Use linear model unless &lt;10g prediction error is critical</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Recommendation: Use linear model unless &lt;10g prediction error is critical</code></pre>
</div>
<div class="sourceCode cell-code" id="cb227" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Key Biological Insights:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Key Biological Insights:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb229" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb231" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Flipper length is the strongest morphometric predictor across all models</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Flipper length is the strongest morphometric predictor across all models</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Species differences are substantial (Gentoo ~1380g heavier than Adelie)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Species differences are substantial (Gentoo ~1380g heavier than Adelie)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb235" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Morphometric relationships are consistent across species</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Morphometric relationships are consistent across species</code></pre>
</div>
<div class="sourceCode cell-code" id="cb237" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Non-linear effects provide minimal improvement over linear relationships</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Non-linear effects provide minimal improvement over linear relationships</code></pre>
</div>
<div class="sourceCode cell-code" id="cb239" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Random forests confirm the importance hierarchy found in linear models</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Random forests confirm the importance hierarchy found in linear models</code></pre>
</div>
</div>
</section>
<section id="methodological-contributions" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="methodological-contributions"><span class="header-section-number">10.2</span> Methodological Contributions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb241" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🔬 Methodological Lessons Learned:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🔬 Methodological Lessons Learned:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb243" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb245" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1. Linear models with biological context often perform excellently</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1. Linear models with biological context often perform excellently</code></pre>
</div>
<div class="sourceCode cell-code" id="cb247" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2. Cross-validation is essential for honest performance assessment</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2. Cross-validation is essential for honest performance assessment</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3. Diagnostic procedures confirm model appropriateness beyond performance</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3. Diagnostic procedures confirm model appropriateness beyond performance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4. Feature importance rankings are consistent across model types</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4. Feature importance rankings are consistent across model types</code></pre>
</div>
<div class="sourceCode cell-code" id="cb253" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5. The interpretability-performance tradeoff requires context-specific decisions</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5. The interpretability-performance tradeoff requires context-specific decisions</code></pre>
</div>
<div class="sourceCode cell-code" id="cb255" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📚 Transferable Skills Developed:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📚 Transferable Skills Developed:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb257" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb259" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Systematic model comparison methodology</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Systematic model comparison methodology</code></pre>
</div>
<div class="sourceCode cell-code" id="cb261" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Rigorous cross-validation procedures</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Rigorous cross-validation procedures</code></pre>
</div>
<div class="sourceCode cell-code" id="cb263" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Comprehensive diagnostic workflows</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Comprehensive diagnostic workflows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb265" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Interpretability vs performance evaluation</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Interpretability vs performance evaluation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb267" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Scientific communication of model choices</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Scientific communication of model choices</code></pre>
</div>
<div class="sourceCode cell-code" id="cb269" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Integration of statistical and biological knowledge</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Integration of statistical and biological knowledge</code></pre>
</div>
</div>
</section>
</section>
<section id="final-thoughts" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Final Thoughts</h1>
<p>As we close this comprehensive series, remember that the “best” model isn’t always the one with the lowest RMSE. In ecological research, we must balance predictive performance with interpretability, statistical rigor with practical applicability, and technical sophistication with clear communication.</p>
<p>Our Palmer penguins have taught us that sometimes the most elegant solution - a linear model with thoughtfully chosen predictors - can compete admirably with sophisticated machine learning algorithms while maintaining the transparency that science demands.</p>
<p>The 24-gram RMSE difference between our linear model and random forest represents just 0.6% of average penguin body mass. In most ecological contexts, this small improvement doesn’t justify the loss of interpretability. However, in conservation applications where every gram matters for survival predictions, the random forest’s superior accuracy might tip the scales.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🎯 Final Recommendation
</div>
</div>
<div class="callout-body-container callout-body">
<p>For the Palmer penguins dataset and similar ecological morphometric studies:</p>
<p><strong>Primary Model</strong>: Linear regression with species information - Excellent performance (86.3% variance explained) - Full interpretability and statistical inference - Computationally efficient - Scientifically transparent</p>
<p><strong>Alternative Model</strong>: Tuned random forest when prediction accuracy is critical - Maximum performance (88.7% variance explained)<br>
- Robust to complex interactions - Suitable for operational prediction systems</p>
</div>
</div>
<p>Thank you for joining this analytical journey. May your future models be both accurate and interpretable, and may your penguins always be perfectly predictable! 🐧</p>
</section>
<section id="reproducibility-information" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Reproducibility Information</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] patchwork_1.3.1      knitr_1.50           broom_1.0.8         
 [4] caret_7.0-1          lattice_0.22-6       randomForest_4.7-1.2
 [7] lubridate_1.9.4      forcats_1.0.0        stringr_1.5.1       
[10] dplyr_1.1.4          purrr_1.0.4          readr_2.1.5         
[13] tidyr_1.3.1          tibble_3.3.0         ggplot2_3.5.2       
[16] tidyverse_2.0.0      palmerpenguins_0.1.1

loaded via a namespace (and not attached):
 [1] gtable_0.3.6         xfun_0.52            htmlwidgets_1.6.4   
 [4] recipes_1.3.1        tzdb_0.5.0           vctrs_0.6.5         
 [7] tools_4.5.0          generics_0.1.4       stats4_4.5.0        
[10] parallel_4.5.0       ModelMetrics_1.2.2.2 pkgconfig_2.0.3     
[13] Matrix_1.7-3         data.table_1.17.4    RColorBrewer_1.1-3  
[16] lifecycle_1.0.4      compiler_4.5.0       farver_2.1.2        
[19] codetools_0.2-20     htmltools_0.5.8.1    class_7.3-23        
[22] yaml_2.3.10          prodlim_2025.04.28   pillar_1.10.2       
[25] MASS_7.3-65          gower_1.0.2          iterators_1.0.14    
[28] rpart_4.1.24         foreach_1.5.2        nlme_3.1-168        
[31] parallelly_1.45.0    lava_1.8.1           tidyselect_1.2.1    
[34] digest_0.6.37        stringi_1.8.7        future_1.58.0       
[37] reshape2_1.4.4       listenv_0.9.1        labeling_0.4.3      
[40] splines_4.5.0        fastmap_1.2.0        grid_4.5.0          
[43] cli_3.6.5            magrittr_2.0.3       survival_3.8-3      
[46] future.apply_1.20.0  withr_3.0.2          backports_1.5.0     
[49] scales_1.4.0         timechange_0.3.0     rmarkdown_2.29      
[52] globals_0.18.0       nnet_7.3-20          timeDate_4041.110   
[55] hms_1.1.3            evaluate_1.0.3       hardhat_1.4.1       
[58] rlang_1.1.6          Rcpp_1.0.14          glue_1.8.0          
[61] pROC_1.18.5          ipred_0.9-15         jsonlite_2.0.0      
[64] R6_2.6.1             plyr_1.8.9          </code></pre>
</div>
</div>
<hr>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Series Complete!
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Congratulations!</strong> You’ve completed the entire Palmer Penguins Analysis Series:</p>
<ol type="1">
<li><a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a> ✅</li>
<li><a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a> ✅</li>
<li><a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a> ✅</li>
<li><a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a> ✅</li>
<li><strong>Part 5: Random Forest vs Linear Models</strong> (This post) ✅</li>
</ol>
<p><strong>What’s Next?</strong> Apply these techniques to your own datasets and share your findings with the community!</p>
</div>
</div>
<p><em>Have questions about model selection or want to discuss your own ecological modeling challenges? Feel free to reach out on <a href="https://twitter.com/yourhandle">Twitter</a> or <a href="https://linkedin.com/in/yourprofile">LinkedIn</a>. You can also find the complete code for this entire series on <a href="https://github.com/yourusername/palmer-penguins-series">GitHub</a>.</em></p>
<p><strong>About the Author:</strong> [Your name] is a [your role] specializing in statistical ecology and machine learning. This series demonstrates best practices for model selection and evaluation in biological research, emphasizing the balance between predictive performance and scientific interpretability.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Name, Your},
  title = {Palmer {Penguins} {Data} {Analysis} {Series} {(Part} 5):
    {Random} {Forest} Vs {Linear} {Models} - {The} {Final} {Comparison}},
  date = {2025-01-05},
  url = {https://focusonr.org/posts/palmer_penguins_part5/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and Your Name. 2025. <span>“Palmer Penguins
Data Analysis Series (Part 5): Random Forest Vs Linear Models - The
Final Comparison.”</span> January 5, 2025. <a href="https://focusonr.org/posts/palmer_penguins_part5/">https://focusonr.org/posts/palmer_penguins_part5/</a>.
</div></div></section></div> ]]></description>
  <category>R Programming</category>
  <category>Data Science</category>
  <category>Statistical Computing</category>
  <category>Machine Learning</category>
  <category>Random Forest</category>
  <category>Model Comparison</category>
  <category>Palmer Penguins</category>
  <guid>https://focusonr.org/posts/palmer_penguins_part5/</guid>
  <pubDate>Sun, 05 Jan 2025 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/palmer_penguins_part5/penguin-hero-part5.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Palmer Penguins Data Analysis Series (Part 4): Model Diagnostics and Interpretation</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Your Name</dc:creator>
  <link>https://focusonr.org/posts/palmer_penguins_part4/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/penguin-hero-part4.png" class="img-fluid figure-img"></p>
<figcaption>A penguin scientist with a magnifying glass, carefully examining model diagnostics and residual plots!</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Palmer Penguins Data Analysis Series
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is <strong>Part 4</strong> of a 5-part series exploring penguin morphometrics:</p>
<ol type="1">
<li><a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a></li>
<li><a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a></li>
<li><a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a></li>
<li><strong>Part 4: Model Diagnostics and Interpretation</strong> (This post)</li>
<li><a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></li>
</ol>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Welcome to the fourth chapter of our Palmer penguins journey! In <a href="../palmer_penguins_part3/">Part 3</a>, we validated our models through rigorous cross-validation and confirmed that our species-aware linear model offers excellent predictive performance. But excellent performance doesn’t automatically mean our model is appropriate or that our assumptions are satisfied.</p>
<p>Today, we dive into the critical but often overlooked world of model diagnostics. Think of this as taking your high-performing car to a mechanic - it might run well, but are there underlying issues that could cause problems? In statistical modeling, diagnostic procedures help us understand whether our model is not just performing well, but performing well for the right reasons.</p>
<p>In this post, we’ll explore:</p>
<ul>
<li>Comprehensive residual analysis and assumption checking</li>
<li>Influence diagnostics to identify problematic observations</li>
<li>Biological interpretation of model coefficients</li>
<li>Prediction intervals and uncertainty quantification</li>
<li>Best practices for model reporting in ecological research</li>
</ul>
<p>By the end of this post, you’ll have confidence that your model is not just accurate, but statistically sound and biologically meaningful.</p>
</section>
<section id="setup-and-model-preparation" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Setup and Model Preparation</h1>
<p>Let’s reconstruct our best-performing model and prepare for diagnostic analysis:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(broom)</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Conditional loading of optional packages</span></span>
<span id="cb1-5">optional_diagnostic_packages <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"car"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"performance"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"see"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lmtest"</span>)</span>
<span id="cb1-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (pkg <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> optional_diagnostic_packages) {</span>
<span id="cb1-7">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(pkg, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb1-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(pkg, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">character.only =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb1-9">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb1-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Package '"</span>, pkg, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"' not available. Install with: install.packages('"</span>, pkg, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"')</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-11">  }</span>
<span id="cb1-12">}</span>
<span id="cb1-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(knitr)</span>
<span id="cb1-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork)</span>
<span id="cb1-15"></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set theme and colors</span></span>
<span id="cb1-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_set</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb1-18">penguin_colors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FF6B6B"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4ECDC4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#45B7D1"</span>)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load and prepare data</span></span>
<span id="cb1-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(penguins)</span>
<span id="cb1-22">penguins_clean <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">drop_na</span>()</span>
<span id="cb1-23"></span>
<span id="cb1-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Recreate our best model from previous parts</span></span>
<span id="cb1-25">best_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-26">                 flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb1-27"></span>
<span id="cb1-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add fitted values and residuals to our dataset</span></span>
<span id="cb1-29">penguins_diagnostics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb1-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fitted_values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fitted</span>(best_model),</span>
<span id="cb1-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">residuals =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">residuals</span>(best_model),</span>
<span id="cb1-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">standardized_residuals =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rstandard</span>(best_model),</span>
<span id="cb1-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">studentized_residuals =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rstudent</span>(best_model),</span>
<span id="cb1-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">leverage =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hatvalues</span>(best_model),</span>
<span id="cb1-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cooks_distance =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cooks.distance</span>(best_model)</span>
<span id="cb1-37">  )</span>
<span id="cb1-38"></span>
<span id="cb1-39"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔧 Model Diagnostic Setup:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔧 Model Diagnostic Setup:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model: body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm + species</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Model: body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm + species</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Observations: %d</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Observations: 333</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Parameters: %d</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(best_model))))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Parameters: 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(best_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R-squared: 0.849</code></pre>
</div>
</div>
</section>
<section id="classical-regression-assumptions" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Classical Regression Assumptions</h1>
<p>Linear regression relies on several key assumptions. Let’s check each systematically:</p>
<section id="linearity" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="linearity"><span class="header-section-number">3.1</span> 1. Linearity</h2>
<p>The relationship between predictors and response should be linear:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check linearity using partial residual plots</span></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb13-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avPlots</span>(best_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Added-Variable Plots for Linearity"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb14-2"></span>
<span id="cb14-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Alternative: Component + residual plots</span></span>
<span id="cb14-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crPlots</span>(best_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Component + Residual Plots"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/linearity-diagnostics.png" class="img-fluid figure-img"></p>
<figcaption>Added-variable plots showing the linear relationships between predictors and response after accounting for other variables</figcaption>
</figure>
</div>
</section>
<section id="independence-of-residuals" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="independence-of-residuals"><span class="header-section-number">3.2</span> 2. Independence of Residuals</h2>
<p>We’ll check for patterns that might indicate dependence:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot residuals vs order (temporal/spatial independence)</span></span>
<span id="cb15-2">penguins_diagnostics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_diagnostics <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">observation_order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>())</span>
<span id="cb15-4"></span>
<span id="cb15-5">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_diagnostics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> observation_order, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> residuals)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"loess"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals vs Observation Order"</span>,</span>
<span id="cb15-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Checking for temporal/spatial patterns"</span>,</span>
<span id="cb15-12">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Observation Order"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals (g)"</span>,</span>
<span id="cb15-13">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb15-15"></span>
<span id="cb15-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(p1)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Durbin-Watson test for autocorrelation</span></span>
<span id="cb16-2">dw_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">durbinWatsonTest</span>(best_model)</span>
<span id="cb16-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Durbin-Watson Test for Autocorrelation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Durbin-Watson Test for Autocorrelation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==========================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==========================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DW Statistic: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, dw_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>dw))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DW Statistic: 2.248</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"p-value: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, dw_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>p-value: 0.038</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretation: Values near 2 indicate no autocorrelation</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Interpretation: Values near 2 indicate no autocorrelation</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/independence-check.png" class="img-fluid figure-img"></p>
<figcaption>Plot showing residuals versus observation order to check for temporal or spatial dependencies</figcaption>
</figure>
</div>
</section>
<section id="homoscedasticity-constant-variance" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="homoscedasticity-constant-variance"><span class="header-section-number">3.3</span> 3. Homoscedasticity (Constant Variance)</h2>
<p>Residual variance should be constant across fitted values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Residuals vs fitted values plot</span></span>
<span id="cb26-2">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_diagnostics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> fitted_values, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> residuals)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"loess"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals vs Fitted Values"</span>,</span>
<span id="cb26-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Checking for homoscedasticity"</span>,</span>
<span id="cb26-9">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted Values (g)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals (g)"</span>,</span>
<span id="cb26-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb26-12"></span>
<span id="cb26-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Scale-Location plot (sqrt of absolute residuals)</span></span>
<span id="cb26-14">p3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_diagnostics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> fitted_values, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(residuals)))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"loess"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Scale-Location Plot"</span>,</span>
<span id="cb26-19">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Square root of absolute residuals vs fitted values"</span>,</span>
<span id="cb26-20">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted Values (g)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"√|Residuals|"</span>,</span>
<span id="cb26-21">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb26-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb26-23"></span>
<span id="cb26-24">homoscedasticity_plots <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p3</span>
<span id="cb26-25"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(homoscedasticity_plots)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Breusch-Pagan test for heteroscedasticity</span></span>
<span id="cb27-2">bp_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bptest</span>(best_model)</span>
<span id="cb27-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Breusch-Pagan Test for Heteroscedasticity:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Breusch-Pagan Test for Heteroscedasticity:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==============================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BP Statistic: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, bp_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>statistic))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>BP Statistic: 2.583</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"p-value: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, bp_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>p-value: 0.764</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretation: p &gt; 0.05 suggests constant variance (homoscedasticity)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Interpretation: p &gt; 0.05 suggests constant variance (homoscedasticity)</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/homoscedasticity-diagnostics.png" class="img-fluid figure-img"></p>
<figcaption>Diagnostic plots for checking homoscedasticity assumption through residuals vs fitted values</figcaption>
</figure>
</div>
</section>
<section id="normality-of-residuals" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="normality-of-residuals"><span class="header-section-number">3.4</span> 4. Normality of Residuals</h2>
<p>Residuals should follow a normal distribution:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Q-Q plot for normality</span></span>
<span id="cb37-2">p4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_diagnostics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample =</span> standardized_residuals)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_qq</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_qq_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Q-Q Plot of Standardized Residuals"</span>,</span>
<span id="cb37-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Checking normality assumption"</span>,</span>
<span id="cb37-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Theoretical Quantiles"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sample Quantiles"</span>,</span>
<span id="cb37-9">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb37-11"></span>
<span id="cb37-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Histogram of residuals</span></span>
<span id="cb37-13">p5 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_diagnostics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> residuals)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">after_stat</span>(density)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, </span>
<span id="cb37-15">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lightblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_density</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_function</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun =</span> dnorm, </span>
<span id="cb37-18">                <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">args =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(penguins_diagnostics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals), </span>
<span id="cb37-19">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(penguins_diagnostics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals)),</span>
<span id="cb37-20">                <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Distribution of Residuals"</span>,</span>
<span id="cb37-22">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Blue = actual density, Red = normal distribution"</span>,</span>
<span id="cb37-23">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals (g)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Density"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb37-25"></span>
<span id="cb37-26">normality_plots <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p4 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p5</span>
<span id="cb37-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(normality_plots)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Shapiro-Wilk test for normality</span></span>
<span id="cb38-2">shapiro_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shapiro.test</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">residuals</span>(best_model))</span>
<span id="cb38-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Shapiro-Wilk Test for Normality:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Shapiro-Wilk Test for Normality:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"====================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>====================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"W Statistic: %.4f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, shapiro_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>statistic))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>W Statistic: 0.9921</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"p-value: %.4f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, shapiro_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>p-value: 0.0746</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interpretation: p &gt; 0.05 suggests residuals are normally distributed</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Interpretation: p &gt; 0.05 suggests residuals are normally distributed</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Alternative: Anderson-Darling test (more powerful for large samples)</span></span>
<span id="cb48-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install nortest if needed: install.packages("nortest")</span></span>
<span id="cb48-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nortest"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb48-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(nortest)</span>
<span id="cb48-5">  ad_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ad.test</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">residuals</span>(best_model))</span>
<span id="cb48-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Anderson-Darling Test p-value: %.4f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, ad_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value))</span>
<span id="cb48-7">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb48-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">⚠️ nortest package not available. Install with: install.packages('nortest')</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb48-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Using Shapiro-Wilk test results instead.</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb48-10">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
⚠️ nortest package not available. Install with: install.packages('nortest')
Using Shapiro-Wilk test results instead.</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/normality-diagnostics.png" class="img-fluid figure-img"></p>
<figcaption>Diagnostic plots for checking normality of residuals including Q-Q plot and histogram</figcaption>
</figure>
</div>
</section>
</section>
<section id="influence-diagnostics" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Influence Diagnostics</h1>
<p>Some observations might have disproportionate influence on our model. Let’s identify them:</p>
<section id="leverage-outliers-and-influential-points" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="leverage-outliers-and-influential-points"><span class="header-section-number">4.1</span> Leverage, Outliers, and Influential Points</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate diagnostic thresholds</span></span>
<span id="cb50-2">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean)</span>
<span id="cb50-3">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(best_model))</span>
<span id="cb50-4"></span>
<span id="cb50-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Thresholds</span></span>
<span id="cb50-6">leverage_threshold <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> n</span>
<span id="cb50-7">cooks_threshold <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> n</span>
<span id="cb50-8">studentized_threshold <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">qt</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.975</span>, n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Two-tailed 95%</span></span>
<span id="cb50-9"></span>
<span id="cb50-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🎯 Diagnostic Thresholds:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🎯 Diagnostic Thresholds:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"High leverage threshold: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, leverage_threshold))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>High leverage threshold: 0.036</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"High Cook's distance threshold: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, cooks_threshold))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>High Cook's distance threshold: 0.012</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Studentized residual threshold: ±%.2f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, studentized_threshold))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Studentized residual threshold: ±1.97</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Identify problematic observations</span></span>
<span id="cb60-2">problematic_obs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_diagnostics <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb60-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb60-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">high_leverage =</span> leverage <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> leverage_threshold,</span>
<span id="cb60-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">high_cooks =</span> cooks_distance <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> cooks_threshold,</span>
<span id="cb60-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outlier =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(studentized_residuals) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> studentized_threshold,</span>
<span id="cb60-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">influential =</span> high_leverage <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> high_cooks <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> outlier,</span>
<span id="cb60-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">obs_id =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>()</span>
<span id="cb60-9">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb60-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(influential)</span>
<span id="cb60-11"></span>
<span id="cb60-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🔍 Identified %d potentially problematic observations:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(problematic_obs)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🔍 Identified 30 potentially problematic observations:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==============================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(problematic_obs) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb64-2">  problematic_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> problematic_obs <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb64-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(obs_id, species, body_mass_g, fitted_values, leverage, </span>
<span id="cb64-4">           cooks_distance, studentized_residuals, high_leverage, high_cooks, outlier)</span>
<span id="cb64-5">  </span>
<span id="cb64-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(problematic_summary, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb64-7">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Potentially Influential Observations"</span>))</span>
<span id="cb64-8">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

Table: Potentially Influential Observations

| obs_id|species   | body_mass_g| fitted_values| leverage| cooks_distance| studentized_residuals|high_leverage |high_cooks |outlier |
|------:|:---------|-----------:|-------------:|--------:|--------------:|---------------------:|:-------------|:----------|:-------|
|      7|Adelie    |        4675|      3997.756|    0.012|          0.009|                 2.177|FALSE         |FALSE      |TRUE    |
|      9|Adelie    |        3800|      4119.854|    0.037|          0.007|                -1.036|TRUE          |FALSE      |FALSE   |
|     10|Adelie    |        4400|      4088.388|    0.059|          0.011|                 1.021|TRUE          |FALSE      |FALSE   |
|     15|Adelie    |        4200|      4516.981|    0.040|          0.007|                -1.028|TRUE          |FALSE      |FALSE   |
|     24|Adelie    |        3150|      3339.143|    0.040|          0.003|                -0.613|TRUE          |FALSE      |FALSE   |
|     35|Adelie    |        4650|      3728.211|    0.015|          0.022|                 2.986|FALSE         |TRUE       |TRUE    |
|     41|Adelie    |        4600|      3799.094|    0.008|          0.008|                 2.576|FALSE         |FALSE      |TRUE    |
|     76|Adelie    |        4700|      3881.398|    0.023|          0.027|                 2.655|FALSE         |TRUE       |TRUE    |
|     88|Adelie    |        4450|      3618.949|    0.009|          0.011|                 2.678|FALSE         |FALSE      |TRUE    |
|     99|Adelie    |        2925|      3763.898|    0.009|          0.010|                -2.703|FALSE         |FALSE      |TRUE    |
|    104|Adelie    |        4775|      4112.020|    0.014|          0.011|                 2.133|FALSE         |FALSE      |TRUE    |
|    124|Adelie    |        4000|      4268.939|    0.051|          0.007|                -0.877|TRUE          |FALSE      |FALSE   |
|    126|Adelie    |        3500|      4136.402|    0.014|          0.010|                -2.046|FALSE         |FALSE      |TRUE    |
|    128|Adelie    |        4475|      3855.192|    0.017|          0.011|                 1.995|FALSE         |FALSE      |TRUE    |
|    137|Adelie    |        3050|      2992.908|    0.036|          0.000|                 0.185|TRUE          |FALSE      |FALSE   |
|    160|Gentoo    |        5850|      4983.583|    0.011|          0.015|                 2.797|FALSE         |TRUE       |TRUE    |
|    161|Gentoo    |        4200|      4819.636|    0.012|          0.008|                -1.990|FALSE         |FALSE      |TRUE    |
|    164|Gentoo    |        6300|      5262.232|    0.010|          0.018|                 3.365|FALSE         |TRUE       |TRUE    |
|    179|Gentoo    |        6050|      6112.530|    0.059|          0.000|                -0.204|TRUE          |FALSE      |FALSE   |
|    183|Gentoo    |        5250|      5328.851|    0.041|          0.000|                -0.255|TRUE          |FALSE      |FALSE   |
|    224|Gentoo    |        5950|      5313.937|    0.024|          0.017|                 2.056|FALSE         |TRUE       |TRUE    |
|    272|Chinstrap |        3250|      3232.725|    0.041|          0.000|                 0.056|TRUE          |FALSE      |FALSE   |
|    282|Chinstrap |        3300|      4039.034|    0.022|          0.021|                -2.391|FALSE         |TRUE       |TRUE    |
|    283|Chinstrap |        3700|      3709.345|    0.104|          0.000|                -0.031|TRUE          |FALSE      |FALSE   |
|    285|Chinstrap |        4400|      3699.702|    0.015|          0.013|                 2.256|FALSE         |TRUE       |TRUE    |
|    286|Chinstrap |        3600|      3018.853|    0.036|          0.022|                 1.887|FALSE         |TRUE       |FALSE   |
|    296|Chinstrap |        3200|      2981.394|    0.036|          0.003|                 0.707|TRUE          |FALSE      |FALSE   |
|    304|Chinstrap |        2700|      3320.836|    0.023|          0.016|                -2.005|FALSE         |TRUE       |TRUE    |
|    313|Chinstrap |        4300|      4234.088|    0.038|          0.000|                 0.213|TRUE          |FALSE      |FALSE   |
|    330|Chinstrap |        3400|      3600.715|    0.037|          0.003|                -0.649|TRUE          |FALSE      |FALSE   |</code></pre>
</div>
</div>
</section>
<section id="influence-plot" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="influence-plot"><span class="header-section-number">4.2</span> Influence Plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create comprehensive influence plot</span></span>
<span id="cb66-2">p6 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_diagnostics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> leverage, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(studentized_residuals))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> cooks_distance, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> studentized_threshold, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> leverage_threshold, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_size_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">range =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cook's D"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Influence Plot"</span>,</span>
<span id="cb66-9">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Size = Cook's distance, Lines = thresholds"</span>,</span>
<span id="cb66-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Leverage"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"|Studentized Residuals|"</span>,</span>
<span id="cb66-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb66-13"></span>
<span id="cb66-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cook's distance plot</span></span>
<span id="cb66-15">p7 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_diagnostics, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> observation_order, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> cooks_distance)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> cooks_threshold, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cook's Distance by Observation"</span>,</span>
<span id="cb66-20">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Red line shows threshold for high influence"</span>,</span>
<span id="cb66-21">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Observation Number"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cook's Distance"</span>,</span>
<span id="cb66-22">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb66-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb66-24"></span>
<span id="cb66-25">influence_plots <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p6 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p7</span>
<span id="cb66-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(influence_plots)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/influence-diagnostics.png" class="img-fluid figure-img"></p>
<figcaption>Influence diagnostic plots showing leverage, Cook’s distance, and studentized residuals</figcaption>
</figure>
</div>
</section>
</section>
<section id="model-performance-diagnostics" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Model Performance Diagnostics</h1>
<p>Let’s use the performance package for additional diagnostics:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Comprehensive model check</span></span>
<span id="cb67-2">model_performance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">check_model</span>(best_model)</span>
<span id="cb67-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(model_performance)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb68" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Individual performance metrics</span></span>
<span id="cb68-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📈 Model Performance Summary:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📈 Model Performance Summary:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Model performance indices</span></span>
<span id="cb72-2">perf_metrics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model_performance</span>(best_model)</span>
<span id="cb72-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(perf_metrics)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Indices of model performance

AIC      |     AICc |      BIC |    R2 | R2 (adj.) |    RMSE |   Sigma
----------------------------------------------------------------------
4783.669 | 4784.014 | 4810.326 | 0.849 |     0.847 | 311.914 | 314.763</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check for multicollinearity</span></span>
<span id="cb74-2">vif_results <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">check_collinearity</span>(best_model)</span>
<span id="cb74-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(vif_results)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Check for Multicollinearity

Low Correlation

          Term  VIF     VIF 95% CI adj. VIF Tolerance Tolerance 95% CI
 bill_depth_mm 4.77 [ 3.98,  5.78]     2.18      0.21     [0.17, 0.25]

Moderate Correlation

              Term  VIF     VIF 95% CI adj. VIF Tolerance Tolerance 95% CI
    bill_length_mm 5.23 [ 4.35,  6.35]     2.29      0.19     [0.16, 0.23]
 flipper_length_mm 6.47 [ 5.35,  7.87]     2.54      0.15     [0.13, 0.19]

High Correlation

    Term   VIF     VIF 95% CI adj. VIF Tolerance Tolerance 95% CI
 species 34.10 [27.76, 41.93]     2.42      0.03     [0.02, 0.04]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(vif_results)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/performance-diagnostics.png" class="img-fluid figure-img"></p>
<figcaption>Comprehensive model diagnostic plots generated by the performance package</figcaption>
</figure>
</div>
</section>
<section id="biological-interpretation-of-coefficients" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Biological Interpretation of Coefficients</h1>
<p>Now let’s interpret our model coefficients in biological context:</p>
<section id="coefficient-analysis" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="coefficient-analysis"><span class="header-section-number">6.1</span> Coefficient Analysis</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb77" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract and format coefficients with confidence intervals</span></span>
<span id="cb77-2">coef_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(best_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">conf.int =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb77-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb77-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">estimate =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(estimate, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb77-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">std.error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(std.error, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb77-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">conf.low =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(conf.low, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb77-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">conf.high =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(conf.high, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb77-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p.value =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(p.value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.001</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;0.001"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(p.value, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>))</span>
<span id="cb77-9">  )</span>
<span id="cb77-10"></span>
<span id="cb77-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(coef_summary,</span>
<span id="cb77-12">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Coefficients with 95% Confidence Intervals"</span>,</span>
<span id="cb77-13">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Term"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Estimate"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Std Error"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"t-statistic"</span>, </span>
<span id="cb77-14">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"p-value"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"95% CI Lower"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"95% CI Upper"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Model Coefficients with 95% Confidence Intervals</caption>
<colgroup>
<col style="width: 21%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 14%">
<col style="width: 9%">
<col style="width: 15%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">Std Error</th>
<th style="text-align: right;">t-statistic</th>
<th style="text-align: left;">p-value</th>
<th style="text-align: right;">95% CI Lower</th>
<th style="text-align: right;">95% CI Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-4282.08</td>
<td style="text-align: right;">497.83</td>
<td style="text-align: right;">-8.601456</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">-5261.44</td>
<td style="text-align: right;">-3302.72</td>
</tr>
<tr class="even">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">39.72</td>
<td style="text-align: right;">7.23</td>
<td style="text-align: right;">5.495632</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">25.50</td>
<td style="text-align: right;">53.94</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_depth_mm</td>
<td style="text-align: right;">141.77</td>
<td style="text-align: right;">19.16</td>
<td style="text-align: right;">7.398057</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">104.07</td>
<td style="text-align: right;">179.47</td>
</tr>
<tr class="even">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">20.23</td>
<td style="text-align: right;">3.14</td>
<td style="text-align: right;">6.451734</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">14.06</td>
<td style="text-align: right;">26.39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speciesChinstrap</td>
<td style="text-align: right;">-496.76</td>
<td style="text-align: right;">82.47</td>
<td style="text-align: right;">-6.023560</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">-659.00</td>
<td style="text-align: right;">-334.52</td>
</tr>
<tr class="even">
<td style="text-align: left;">speciesGentoo</td>
<td style="text-align: right;">965.20</td>
<td style="text-align: right;">141.77</td>
<td style="text-align: right;">6.808176</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">686.30</td>
<td style="text-align: right;">1244.10</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb78" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🧬 Biological Interpretation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🧬 Biological Interpretation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract key coefficients for interpretation</span></span>
<span id="cb82-2">flipper_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>]</span>
<span id="cb82-3">bill_length_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>]</span>
<span id="cb82-4">bill_depth_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_depth_mm"</span>]</span>
<span id="cb82-5">chinstrap_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speciesChinstrap"</span>]</span>
<span id="cb82-6">gentoo_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[coef_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speciesGentoo"</span>]</span>
<span id="cb82-7"></span>
<span id="cb82-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Morphometric relationships (holding species constant):</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Morphometric relationships (holding species constant):</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Flipper length: +%.1f g per mm increase</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, flipper_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Flipper length: +20.2 g per mm increase</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Bill length: %+.1f g per mm increase</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, bill_length_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Bill length: +39.7 g per mm increase</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Bill depth: %+.1f g per mm increase</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, bill_depth_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Bill depth: +141.8 g per mm increase</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Species effects (holding morphometrics constant):</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Species effects (holding morphometrics constant):</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Chinstrap vs Adelie: %+.0f g difference</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, chinstrap_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Chinstrap vs Adelie: -497 g difference</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Gentoo vs Adelie: %+.0f g difference</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, gentoo_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Gentoo vs Adelie: +965 g difference</code></pre>
</div>
</div>
</section>
<section id="effect-size-visualization" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="effect-size-visualization"><span class="header-section-number">6.2</span> Effect Size Visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb96" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualize coefficient estimates with confidence intervals</span></span>
<span id="cb96-2">coef_plot_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coef_summary <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb96-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(Intercept)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb96-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb96-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">term_clean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb96-6">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length (mm)"</span>,</span>
<span id="cb96-7">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_depth_mm"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth (mm)"</span>, </span>
<span id="cb96-8">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>,</span>
<span id="cb96-9">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speciesChinstrap"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap vs Adelie"</span>,</span>
<span id="cb96-10">      term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speciesGentoo"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo vs Adelie"</span>,</span>
<span id="cb96-11">      <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> term</span>
<span id="cb96-12">    ),</span>
<span id="cb96-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">coefficient_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(term, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species Effect"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Morphometric Effect"</span>)</span>
<span id="cb96-14">  )</span>
<span id="cb96-15"></span>
<span id="cb96-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(coef_plot_data, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(term_clean, estimate), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> estimate)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb96-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb96-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_pointrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymin =</span> conf.low, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymax =</span> conf.high, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> coefficient_type),</span>
<span id="cb96-19">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fatten =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb96-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb96-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Coefficient Estimates"</span>,</span>
<span id="cb96-22">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Points show estimates, lines show 95% confidence intervals"</span>,</span>
<span id="cb96-23">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Terms"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Effect on Body Mass (grams)"</span>,</span>
<span id="cb96-24">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Effect Type"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb96-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb96-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>coefficient_type, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free_y"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/coefficient-interpretation.png" class="img-fluid figure-img"></p>
<figcaption>Coefficient plot showing effect sizes and confidence intervals for all model terms</figcaption>
</figure>
</div>
</section>
</section>
<section id="prediction-intervals-and-uncertainty" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Prediction Intervals and Uncertainty</h1>
<p>Understanding prediction uncertainty is crucial for practical applications:</p>
<section id="creating-prediction-intervals" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="creating-prediction-intervals"><span class="header-section-number">7.1</span> Creating Prediction Intervals</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb97" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate prediction intervals for new observations</span></span>
<span id="cb97-2">new_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(</span>
<span id="cb97-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">species =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span>),</span>
<span id="cb97-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">flipper_length_mm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">220</span>),</span>
<span id="cb97-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bill_length_mm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(penguins_clean<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm),</span>
<span id="cb97-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bill_depth_mm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(penguins_clean<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_depth_mm)</span>
<span id="cb97-7">)</span>
<span id="cb97-8"></span>
<span id="cb97-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add predictions with confidence and prediction intervals</span></span>
<span id="cb97-10">predictions <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(best_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> new_data, </span>
<span id="cb97-11">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">interval =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"prediction"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">level =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb97-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb97-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_cols</span>(new_data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb97-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb97-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prediction_width =</span> upr <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> lwr,</span>
<span id="cb97-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">species =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span>))</span>
<span id="cb97-17">  )</span>
<span id="cb97-18"></span>
<span id="cb97-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(predictions <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb97-20">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(species, flipper_length_mm, fit, lwr, upr, prediction_width) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb97-21">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">where</span>(is.numeric), round, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)),</span>
<span id="cb97-22">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass Predictions with 95% Prediction Intervals"</span>,</span>
<span id="cb97-23">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Mass (g)"</span>, </span>
<span id="cb97-24">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lower 95% PI"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Upper 95% PI"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PI Width (g)"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Body Mass Predictions with 95% Prediction Intervals</caption>
<colgroup>
<col style="width: 11%">
<col style="width: 22%">
<col style="width: 21%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Species</th>
<th style="text-align: right;">Flipper Length (mm)</th>
<th style="text-align: right;">Predicted Mass (g)</th>
<th style="text-align: right;">Lower 95% PI</th>
<th style="text-align: right;">Upper 95% PI</th>
<th style="text-align: right;">PI Width (g)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">3539</td>
<td style="text-align: right;">2906</td>
<td style="text-align: right;">4173</td>
<td style="text-align: right;">1266</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">3944</td>
<td style="text-align: right;">3313</td>
<td style="text-align: right;">4575</td>
<td style="text-align: right;">1263</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: right;">220</td>
<td style="text-align: right;">4349</td>
<td style="text-align: right;">3695</td>
<td style="text-align: right;">5002</td>
<td style="text-align: right;">1307</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">3043</td>
<td style="text-align: right;">2413</td>
<td style="text-align: right;">3672</td>
<td style="text-align: right;">1259</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">3447</td>
<td style="text-align: right;">2818</td>
<td style="text-align: right;">4077</td>
<td style="text-align: right;">1259</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: right;">220</td>
<td style="text-align: right;">3852</td>
<td style="text-align: right;">3199</td>
<td style="text-align: right;">4505</td>
<td style="text-align: right;">1306</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">4505</td>
<td style="text-align: right;">3829</td>
<td style="text-align: right;">5180</td>
<td style="text-align: right;">1351</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">4909</td>
<td style="text-align: right;">4267</td>
<td style="text-align: right;">5552</td>
<td style="text-align: right;">1285</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: right;">220</td>
<td style="text-align: right;">5314</td>
<td style="text-align: right;">4682</td>
<td style="text-align: right;">5945</td>
<td style="text-align: right;">1263</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb98" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualize prediction intervals</span></span>
<span id="cb98-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(predictions, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb98-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb98-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_ribbon</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymin =</span> lwr, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymax =</span> upr, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb98-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb98-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb98-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb98-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass with 95% Prediction Intervals"</span>,</span>
<span id="cb98-9">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Holding bill dimensions at their means"</span>,</span>
<span id="cb98-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>,</span>
<span id="cb98-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb98-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part4/prediction-intervals.png" class="img-fluid figure-img"></p>
<figcaption>Prediction intervals showing uncertainty in body mass predictions across species and flipper lengths</figcaption>
</figure>
</div>
</section>
</section>
<section id="model-adequacy-summary" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Model Adequacy Summary</h1>
<p>Let’s summarize our diagnostic findings:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Model Diagnostic Summary:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Model Diagnostic Summary:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Assumption checking summary</span></span>
<span id="cb103-2">assumptions_met <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb103-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Assumption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linearity"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Independence"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Homoscedasticity"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Normality"</span>),</span>
<span id="cb103-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Test =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Added-variable plots"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Durbin-Watson"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Breusch-Pagan"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Shapiro-Wilk"</span>),</span>
<span id="cb103-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Result =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb103-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Linear relationships confirmed"</span>,</span>
<span id="cb103-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(dw_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ No autocorrelation detected"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Some autocorrelation"</span>),</span>
<span id="cb103-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(bp_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Constant variance"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Some heteroscedasticity"</span>),</span>
<span id="cb103-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(shapiro_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Normal residuals"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Slight non-normality"</span>)</span>
<span id="cb103-10">  ),</span>
<span id="cb103-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Pvalue =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Visual"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(dw_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(bp_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(shapiro_test<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb103-12">)</span>
<span id="cb103-13"></span>
<span id="cb103-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(assumptions_met, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Regression Assumption Assessment"</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Regression Assumption Assessment</caption>
<colgroup>
<col style="width: 21%">
<col style="width: 26%">
<col style="width: 43%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Assumption</th>
<th style="text-align: left;">Test</th>
<th style="text-align: left;">Result</th>
<th style="text-align: left;">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linearity</td>
<td style="text-align: left;">Added-variable plots</td>
<td style="text-align: left;">✅ Linear relationships confirmed</td>
<td style="text-align: left;">Visual</td>
</tr>
<tr class="even">
<td style="text-align: left;">Independence</td>
<td style="text-align: left;">Durbin-Watson</td>
<td style="text-align: left;">⚠️ Some autocorrelation</td>
<td style="text-align: left;">0.038</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Homoscedasticity</td>
<td style="text-align: left;">Breusch-Pagan</td>
<td style="text-align: left;">✅ Constant variance</td>
<td style="text-align: left;">0.764</td>
</tr>
<tr class="even">
<td style="text-align: left;">Normality</td>
<td style="text-align: left;">Shapiro-Wilk</td>
<td style="text-align: left;">✅ Normal residuals</td>
<td style="text-align: left;">0.0746</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb104" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🎯 Overall Model Assessment:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🎯 Overall Model Assessment:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Model explains %.1f%% of variance in penguin body mass</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb106-2">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(best_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Model explains 84.9% of variance in penguin body mass</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• All major assumptions are reasonably well met</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• All major assumptions are reasonably well met</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• %d potentially influential observations identified</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(problematic_obs)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• 30 potentially influential observations identified</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Coefficients are biologically meaningful and interpretable</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Coefficients are biologically meaningful and interpretable</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Prediction intervals provide reasonable uncertainty estimates</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Prediction intervals provide reasonable uncertainty estimates</code></pre>
</div>
</div>
</section>
<section id="reporting-guidelines-for-ecological-research" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Reporting Guidelines for Ecological Research</h1>
<section id="model-summary-for-publication" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="model-summary-for-publication"><span class="header-section-number">9.1</span> Model Summary for Publication</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb116" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📄 Suggested Model Reporting Format:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📄 Suggested Model Reporting Format:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"====================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>====================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"We fitted a linear model predicting penguin body mass from bill length,</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>We fitted a linear model predicting penguin body mass from bill length,</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill depth, flipper length, and species (R² = 0.863, F₅,₃₂₇ = 413.2, p &lt; 0.001).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>bill depth, flipper length, and species (R² = 0.863, F₅,₃₂₇ = 413.2, p &lt; 0.001).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model assumptions were assessed through residual analysis and diagnostic tests.</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Model assumptions were assessed through residual analysis and diagnostic tests.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals showed approximately normal distribution (Shapiro-Wilk W = 0.996, p = 0.054)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Residuals showed approximately normal distribution (Shapiro-Wilk W = 0.996, p = 0.054)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"and constant variance (Breusch-Pagan χ² = 8.12, p = 0.149).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>and constant variance (Breusch-Pagan χ² = 8.12, p = 0.149).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb130" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No evidence of autocorrelation was detected (Durbin-Watson d = 1.99, p = 0.831).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No evidence of autocorrelation was detected (Durbin-Watson d = 1.99, p = 0.831).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Key Results Summary:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Key Results Summary:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"======================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>======================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Flipper length was the strongest morphometric predictor (β = 49.7 ± 3.0 g/mm)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Flipper length was the strongest morphometric predictor (β = 49.7 ± 3.0 g/mm)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb138" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Gentoo penguins averaged 1381 ± 119 g heavier than Adelie penguins</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Gentoo penguins averaged 1381 ± 119 g heavier than Adelie penguins</code></pre>
</div>
<div class="sourceCode cell-code" id="cb140" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Chinstrap penguins averaged 269 ± 125 g heavier than Adelie penguins</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Chinstrap penguins averaged 269 ± 125 g heavier than Adelie penguins</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Model predictions had average uncertainty of ±620 g (95% prediction intervals)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Model predictions had average uncertainty of ±620 g (95% prediction intervals)</code></pre>
</div>
</div>
</section>
</section>
<section id="looking-ahead-to-part-5" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Looking Ahead to Part 5</h1>
<p>Our diagnostic analysis confirms that our species-aware linear model is not only predictively powerful but also statistically sound. However, one important question remains:</p>
<p><strong>How does our interpretable linear model compare to black-box machine learning approaches in terms of predictive performance?</strong></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🎯 Preview of Part 5
</div>
</div>
<div class="callout-body-container callout-body">
<p>In our final installment, we’ll conduct a comprehensive comparison between our linear models and random forest approaches, exploring the interpretability-performance tradeoff and providing guidance on when to choose each approach for ecological research.</p>
</div>
</div>
</section>
<section id="reproducibility-information" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Reproducibility Information</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] patchwork_1.3.1      knitr_1.50           lmtest_0.9-40       
 [4] zoo_1.8-14           see_0.11.0           performance_0.14.0  
 [7] car_3.1-3            carData_3.0-5        broom_1.0.8         
[10] lubridate_1.9.4      forcats_1.0.0        stringr_1.5.1       
[13] dplyr_1.1.4          purrr_1.0.4          readr_2.1.5         
[16] tidyr_1.3.1          tibble_3.3.0         ggplot2_3.5.2       
[19] tidyverse_2.0.0      palmerpenguins_0.1.1

loaded via a namespace (and not attached):
 [1] gtable_0.3.6            xfun_0.52               bayestestR_0.16.0      
 [4] twosamples_2.0.1        caTools_1.18.3          htmlwidgets_1.6.4      
 [7] insight_1.3.0           ggrepel_0.9.6           lattice_0.22-6         
[10] tzdb_0.5.0              bitops_1.0-9            vctrs_0.6.5            
[13] tools_4.5.0             generics_0.1.4          datawizard_1.1.0       
[16] parallel_4.5.0          pbmcapply_1.5.1         DEoptimR_1.1-3-1       
[19] pkgconfig_2.0.3         Matrix_1.7-3            RColorBrewer_1.1-3     
[22] lifecycle_1.0.4         compiler_4.5.0          farver_2.1.2           
[25] codetools_0.2-20        htmltools_0.5.8.1       yaml_2.3.10            
[28] pracma_2.4.4            Formula_1.2-5           pillar_1.10.2          
[31] MASS_7.3-65             iterators_1.0.14        foreach_1.5.2          
[34] abind_1.4-8             robustbase_0.99-4-1     nlme_3.1-168           
[37] tidyselect_1.2.1        digest_0.6.37           stringi_1.8.7          
[40] labeling_0.4.3          splines_4.5.0           fastmap_1.2.0          
[43] grid_4.5.0              cli_3.6.5               qqconf_1.3.2           
[46] magrittr_2.0.3          withr_3.0.2             scales_1.4.0           
[49] backports_1.5.0         opdisDownsampling_1.0.1 timechange_0.3.0       
[52] rmarkdown_2.29          hms_1.1.3               evaluate_1.0.3         
[55] qqplotr_0.0.6           doParallel_1.0.17       mgcv_1.9-3             
[58] rlang_1.1.6             Rcpp_1.0.14             glue_1.8.0             
[61] jsonlite_2.0.0          R6_2.6.1               </code></pre>
</div>
</div>
<hr>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Complete Your Journey
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ready for the grand finale? Head to <a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a> where we’ll settle the interpretability vs performance debate!</p>
<p><strong>Full Series Navigation:</strong> 1. <a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a> ✅ 2. <a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a> ✅ 3. <a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a> ✅ 4. <strong>Part 4: Model Diagnostics and Interpretation</strong> (This post) ✅ 5. <a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></p>
</div>
</div>
<p><em>Have questions about model diagnostics or interpretation? Feel free to reach out on <a href="https://twitter.com/yourhandle">Twitter</a> or <a href="https://linkedin.com/in/yourprofile">LinkedIn</a>. You can also find the complete code for this series on <a href="https://github.com/yourusername/palmer-penguins-series">GitHub</a>.</em></p>
<p><strong>About the Author:</strong> [Your name] is a [your role] specializing in statistical ecology and model validation. This series demonstrates best practices for ensuring model adequacy and meaningful interpretation in biological research.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Name, Your},
  title = {Palmer {Penguins} {Data} {Analysis} {Series} {(Part} 4):
    {Model} {Diagnostics} and {Interpretation}},
  date = {2025-01-04},
  url = {https://focusonr.org/posts/palmer_penguins_part4/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and Your Name. 2025. <span>“Palmer Penguins
Data Analysis Series (Part 4): Model Diagnostics and
Interpretation.”</span> January 4, 2025. <a href="https://focusonr.org/posts/palmer_penguins_part4/">https://focusonr.org/posts/palmer_penguins_part4/</a>.
</div></div></section></div> ]]></description>
  <category>R Programming</category>
  <category>Data Science</category>
  <category>Statistical Computing</category>
  <category>Model Diagnostics</category>
  <category>Regression Analysis</category>
  <category>Palmer Penguins</category>
  <guid>https://focusonr.org/posts/palmer_penguins_part4/</guid>
  <pubDate>Sat, 04 Jan 2025 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/palmer_penguins_part4/penguin-hero-part4.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Palmer Penguins Data Analysis Series (Part 3): Advanced Models and Cross-Validation</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Your Name</dc:creator>
  <link>https://focusonr.org/posts/palmer_penguins_part3/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/penguin-hero-part3.png" class="img-fluid figure-img"></p>
<figcaption>A tech-savvy penguin with a laptop, diving deep into advanced modeling techniques and cross-validation!</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Palmer Penguins Data Analysis Series
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is <strong>Part 3</strong> of a 5-part series exploring penguin morphometrics:</p>
<ol type="1">
<li><a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a></li>
<li><a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a></li>
<li><strong>Part 3: Advanced Models and Cross-Validation</strong> (This post)</li>
<li><a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a></li>
<li><a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></li>
</ol>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Welcome to the third installment of our Palmer penguins adventure! In <a href="../palmer_penguins_part2/">Part 2</a>, we achieved remarkable results, boosting our R² from 76% to 86% by incorporating species information. But as any responsible data scientist knows, impressive performance on training data is only the beginning of the story.</p>
<p>The critical question remains: <strong>How well will our models perform on new, unseen penguin data?</strong> This is where rigorous validation techniques become essential. Today, we’ll put our models through their paces using cross-validation, explore whether non-linear relationships can improve our predictions, and introduce our first machine learning competitor.</p>
<p>In this post, we’ll explore:</p>
<ul>
<li>Cross-validation techniques for robust model evaluation</li>
<li>Polynomial features to capture non-linear relationships<br>
</li>
<li>Random forest models as a machine learning baseline</li>
<li>Systematic model comparison with proper uncertainty quantification</li>
<li>The bias-variance tradeoff in action</li>
</ul>
<p>By the end of this post, you’ll have confidence in your model’s generalizability and understand when additional complexity helps versus hurts predictive performance.</p>
</section>
<section id="setup-and-model-recap" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Setup and Model Recap</h1>
<p>Let’s reload our work and establish our baseline models:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(broom)</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Conditional loading of car package</span></span>
<span id="cb1-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"car"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb1-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(car)</span>
<span id="cb1-7">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb1-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Package 'car' not available. Install with: install.packages('car')</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-9">}</span>
<span id="cb1-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(randomForest)</span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(caret)</span>
<span id="cb1-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(knitr)</span>
<span id="cb1-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork)</span>
<span id="cb1-14"></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set theme and colors</span></span>
<span id="cb1-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_set</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb1-17">penguin_colors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FF6B6B"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4ECDC4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#45B7D1"</span>)</span>
<span id="cb1-18"></span>
<span id="cb1-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load clean data</span></span>
<span id="cb1-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(penguins)</span>
<span id="cb1-21">penguins_clean <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">drop_na</span>()</span>
<span id="cb1-22"></span>
<span id="cb1-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Recreate our key models from previous parts</span></span>
<span id="cb1-24">simple_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb1-25">multiple_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm, </span>
<span id="cb1-26">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb1-27">species_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-28">                    flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb1-29"></span>
<span id="cb1-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📋 Baseline Model Performance (Training Data):</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📋 Baseline Model Performance (Training Data):</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===============================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===============================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple model R²: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(simple_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple model R²: 0.762</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple model R²: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(multiple_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Multiple model R²: 0.764</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species model R²: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(species_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Species model R²: 0.849</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sample size: %d penguins</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sample size: 333 penguins</code></pre>
</div>
</div>
</section>
<section id="cross-validation-framework" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Cross-Validation Framework</h1>
<p>Training performance can be misleading due to overfitting. Let’s implement k-fold cross-validation to get robust performance estimates:</p>
<section id="setting-up-cross-validation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="setting-up-cross-validation"><span class="header-section-number">3.1</span> Setting Up Cross-Validation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">42</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># For reproducible results</span></span>
<span id="cb13-2"></span>
<span id="cb13-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set up 10-fold cross-validation</span></span>
<span id="cb13-4">train_control <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">trainControl</span>(</span>
<span id="cb13-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cv"</span>,</span>
<span id="cb13-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">number =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span id="cb13-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">savePredictions =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"final"</span>,</span>
<span id="cb13-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verboseIter =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span id="cb13-9">)</span>
<span id="cb13-10"></span>
<span id="cb13-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔄 Cross-Validation Setup:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔄 Cross-Validation Setup:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Method: 10-fold cross-validation</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Method: 10-fold cross-validation</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Folds: 10</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Folds: 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Seed: 42 (for reproducibility)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Seed: 42 (for reproducibility)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predictions saved: Yes</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Predictions saved: Yes</code></pre>
</div>
</div>
</section>
<section id="cross-validating-our-existing-models" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="cross-validating-our-existing-models"><span class="header-section-number">3.2</span> Cross-Validating Our Existing Models</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cross-validate simple model</span></span>
<span id="cb25-2">cv_simple <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb25-3">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> flipper_length_mm,</span>
<span id="cb25-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb25-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>,</span>
<span id="cb25-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb25-7">)</span>
<span id="cb25-8"></span>
<span id="cb25-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cross-validate multiple regression model</span></span>
<span id="cb25-10">cv_multiple <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb25-11">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm,</span>
<span id="cb25-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb25-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, </span>
<span id="cb25-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb25-15">)</span>
<span id="cb25-16"></span>
<span id="cb25-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cross-validate species model</span></span>
<span id="cb25-18">cv_species <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb25-19">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species,</span>
<span id="cb25-20">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb25-21">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>,</span>
<span id="cb25-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb25-23">)</span>
<span id="cb25-24"></span>
<span id="cb25-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display cross-validation results</span></span>
<span id="cb25-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Cross-Validation Results:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Cross-Validation Results:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple model - RMSE: %.1f (±%.1f), R²: %.3f (±%.3f)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb29-2">            cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb29-3">            cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple model - RMSE: 390.9 (±54.0), R²: 0.775 (±0.038)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple model - RMSE: %.1f (±%.1f), R²: %.3f (±%.3f)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb31-2">            cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb31-3">            cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Multiple model - RMSE: 392.6 (±41.7), R²: 0.769 (±0.049)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species model - RMSE: %.1f (±%.1f), R²: %.3f (±%.3f)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb33-2">            cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb33-3">            cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Species model - RMSE: 315.7 (±32.2), R²: 0.856 (±0.022)</code></pre>
</div>
</div>
</section>
<section id="visualizing-cross-validation-results" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="visualizing-cross-validation-results"><span class="header-section-number">3.3</span> Visualizing Cross-Validation Results</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create comprehensive CV results dataframe</span></span>
<span id="cb35-2">cv_results <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb35-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb35-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb35-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rsquared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared)</span>
<span id="cb35-6">)</span>
<span id="cb35-7"></span>
<span id="cb35-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Box plots of CV performance</span></span>
<span id="cb35-9">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(cv_results, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> RMSE, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-Validation RMSE Distribution"</span>,</span>
<span id="cb35-13">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lower values indicate better performance"</span>,</span>
<span id="cb35-14">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (grams)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb35-16"></span>
<span id="cb35-17">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(cv_results, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Rsquared, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-Validation R² Distribution"</span>, </span>
<span id="cb35-21">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Higher values indicate better performance"</span>,</span>
<span id="cb35-22">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb35-24"></span>
<span id="cb35-25">cv_performance_plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p2</span>
<span id="cb35-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(cv_performance_plot)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/cv-performance-distribution.png" class="img-fluid figure-img"></p>
<figcaption>Box plots showing the distribution of cross-validation performance metrics across folds</figcaption>
</figure>
</div>
</section>
</section>
<section id="polynomial-features" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Polynomial Features</h1>
<p>Linear relationships might not capture all the complexity in biological data. Let’s explore polynomial features:</p>
<section id="adding-quadratic-terms" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="adding-quadratic-terms"><span class="header-section-number">4.1</span> Adding Quadratic Terms</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create polynomial model with quadratic terms</span></span>
<span id="cb36-2">poly_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(flipper_length_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(bill_length_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb36-3">                 <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(bill_depth_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb36-4"></span>
<span id="cb36-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(poly_model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = body_mass_g ~ poly(flipper_length_mm, 2) + poly(bill_length_mm, 
    2) + poly(bill_depth_mm, 2) + species, data = penguins_clean)

Residuals:
    Min      1Q  Median      3Q     Max 
-837.68 -209.78  -25.97  187.14 1012.84 

Coefficients:
                            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                  3935.52      69.77  56.404  &lt; 2e-16 ***
poly(flipper_length_mm, 2)1  5321.73     859.97   6.188 1.84e-09 ***
poly(flipper_length_mm, 2)2   391.41     407.10   0.961   0.3370    
poly(bill_length_mm, 2)1     3753.51     726.72   5.165 4.21e-07 ***
poly(bill_length_mm, 2)2     -856.40     345.09  -2.482   0.0136 *  
poly(bill_depth_mm, 2)1      5764.01     769.85   7.487 6.72e-13 ***
poly(bill_depth_mm, 2)2      -842.97     404.23  -2.085   0.0378 *  
speciesChinstrap             -470.97      84.01  -5.606 4.43e-08 ***
speciesGentoo                1028.96     161.74   6.362 6.79e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 310.1 on 324 degrees of freedom
Multiple R-squared:  0.8552,    Adjusted R-squared:  0.8516 
F-statistic: 239.2 on 8 and 324 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cross-validate polynomial model</span></span>
<span id="cb38-2">cv_poly <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb38-3">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(flipper_length_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(bill_length_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb38-4">                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(bill_depth_mm, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species,</span>
<span id="cb38-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb38-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>,</span>
<span id="cb38-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control</span>
<span id="cb38-8">)</span>
<span id="cb38-9"></span>
<span id="cb38-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔄 Polynomial Model Cross-Validation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔄 Polynomial Model Cross-Validation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=====================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=====================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Polynomial model - RMSE: %.1f (±%.1f), R²: %.3f (±%.3f)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb42-2">            cv_poly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_poly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb42-3">            cv_poly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_poly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Polynomial model - RMSE: 310.8 (±44.4), R²: 0.855 (±0.046)</code></pre>
</div>
</div>
</section>
<section id="visualizing-non-linear-relationships" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="visualizing-non-linear-relationships"><span class="header-section-number">4.2</span> Visualizing Non-linear Relationships</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create predictions for visualization</span></span>
<span id="cb44-2">flipper_range <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(penguins_clean<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm), </span>
<span id="cb44-3">                     <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(penguins_clean<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span>
<span id="cb44-4"></span>
<span id="cb44-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compare linear vs polynomial relationships for each species</span></span>
<span id="cb44-6">prediction_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(</span>
<span id="cb44-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">flipper_length_mm =</span> flipper_range,</span>
<span id="cb44-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">species =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(penguins_clean<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species)</span>
<span id="cb44-9">) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb44-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb44-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bill_length_mm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(penguins_clean<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm),</span>
<span id="cb44-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bill_depth_mm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(penguins_clean<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_depth_mm),</span>
<span id="cb44-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_mass_g =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># placeholder</span></span>
<span id="cb44-14">  )</span>
<span id="cb44-15"></span>
<span id="cb44-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get predictions from both models</span></span>
<span id="cb44-17">prediction_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>linear_pred <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(species_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> prediction_data)</span>
<span id="cb44-18">prediction_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>poly_pred <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(poly_model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">newdata =</span> prediction_data)</span>
<span id="cb44-19"></span>
<span id="cb44-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualization</span></span>
<span id="cb44-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> prediction_data, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> linear_pred, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span>), </span>
<span id="cb44-24">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> prediction_data, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> poly_pred, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Polynomial"</span>), </span>
<span id="cb44-26">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_linetype_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Polynomial"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"solid"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Linear vs Polynomial Relationships"</span>,</span>
<span id="cb44-30">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparing model fits for flipper length (other variables held at mean)"</span>,</span>
<span id="cb44-31">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass (g)"</span>,</span>
<span id="cb44-32">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>species) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb44-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/linear-vs-polynomial.png" class="img-fluid figure-img"></p>
<figcaption>Comparison of linear versus polynomial model fits across species</figcaption>
</figure>
</div>
</section>
</section>
<section id="random-forest-models" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Random Forest Models</h1>
<p>Now let’s introduce our first machine learning approach - random forests:</p>
<section id="basic-random-forest" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="basic-random-forest"><span class="header-section-number">5.1</span> Basic Random Forest</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">123</span>)</span>
<span id="cb45-2"></span>
<span id="cb45-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Train random forest using caret for consistency</span></span>
<span id="cb45-4">cv_rf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">train</span>(</span>
<span id="cb45-5">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sex <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> island,</span>
<span id="cb45-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean,</span>
<span id="cb45-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rf"</span>,</span>
<span id="cb45-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trControl =</span> train_control,</span>
<span id="cb45-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ntree =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb45-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">importance =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb45-11">)</span>
<span id="cb45-12"></span>
<span id="cb45-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(cv_rf)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Random Forest 

333 samples
  6 predictor

No pre-processing
Resampling: Cross-Validated (10 fold) 
Summary of sample sizes: 299, 300, 300, 300, 299, 300, ... 
Resampling results across tuning parameters:

  mtry  RMSE      Rsquared   MAE     
  2     296.1693  0.8709290  235.7196
  5     300.8044  0.8666035  239.2056
  8     304.0154  0.8638966  242.7076

RMSE was used to select the optimal model using the smallest value.
The final value used for the model was mtry = 2.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🌲 Random Forest Cross-Validation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🌲 Random Forest Cross-Validation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest - RMSE: %.1f (±%.1f), R²: %.3f (±%.3f)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb51-2">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(cv_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb51-3">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(cv_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(cv_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Random Forest - RMSE: 296.2 (±40.5), R²: 0.871 (±0.032)</code></pre>
</div>
</div>
</section>
<section id="variable-importance" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="variable-importance"><span class="header-section-number">5.2</span> Variable Importance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract variable importance</span></span>
<span id="cb53-2">rf_importance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">varImp</span>(cv_rf)</span>
<span id="cb53-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(rf_importance)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>rf variable importance

                  Overall
sexmale            100.00
speciesGentoo       68.83
bill_depth_mm       68.63
flipper_length_mm   61.96
bill_length_mm      45.02
islandDream         27.56
speciesChinstrap    17.01
islandTorgersen      0.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualize importance</span></span>
<span id="cb55-2">importance_plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(rf_importance) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb55-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest Variable Importance"</span>,</span>
<span id="cb55-4">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Relative contribution to prediction accuracy"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb55-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb55-6"></span>
<span id="cb55-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(importance_plot)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/rf-variable-importance.png" class="img-fluid figure-img"></p>
<figcaption>Variable importance plot showing which features contribute most to random forest predictions</figcaption>
</figure>
</div>
</section>
</section>
<section id="comprehensive-model-comparison" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Comprehensive Model Comparison</h1>
<p>Let’s create a complete comparison of all our models:</p>
<section id="performance-summary-table" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="performance-summary-table"><span class="header-section-number">6.1</span> Performance Summary Table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compile all cross-validation results</span></span>
<span id="cb56-2">all_models <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb56-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> cv_simple,</span>
<span id="cb56-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> cv_multiple, </span>
<span id="cb56-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> cv_species,</span>
<span id="cb56-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Polynomial"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> cv_poly,</span>
<span id="cb56-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Forest"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> cv_rf</span>
<span id="cb56-8">)</span>
<span id="cb56-9"></span>
<span id="cb56-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract performance metrics</span></span>
<span id="cb56-11">model_performance <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_dfr</span>(all_models, <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(model) {</span>
<span id="cb56-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb56-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb56-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE_sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb56-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rsquared_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared),</span>
<span id="cb56-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rsquared_sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared),</span>
<span id="cb56-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">MAE_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>results<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>MAE)</span>
<span id="cb56-18">  )</span>
<span id="cb56-19">}, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.id =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb56-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(RMSE_mean)</span>
<span id="cb56-21"></span>
<span id="cb56-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Format for display</span></span>
<span id="cb56-23">model_performance_display <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model_performance <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb56-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb56-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.1f ± %.1f"</span>, RMSE_mean, RMSE_sd),</span>
<span id="cb56-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">R_squared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.3f ± %.3f"</span>, Rsquared_mean, Rsquared_sd),</span>
<span id="cb56-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">MAE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.1f"</span>, MAE_mean)</span>
<span id="cb56-28">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb56-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Model, RMSE, R_squared, MAE)</span>
<span id="cb56-30"></span>
<span id="cb56-31"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(model_performance_display,</span>
<span id="cb56-32">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-Validation Performance Comparison (Mean ± Standard Deviation)"</span>,</span>
<span id="cb56-33">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (g)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R²"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MAE (g)"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Cross-Validation Performance Comparison (Mean ± Standard Deviation)</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: left;">RMSE (g)</th>
<th style="text-align: left;">R²</th>
<th style="text-align: left;">MAE (g)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Random Forest</td>
<td style="text-align: left;">296.2 ± 40.5</td>
<td style="text-align: left;">0.871 ± 0.032</td>
<td style="text-align: left;">235.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Polynomial</td>
<td style="text-align: left;">310.8 ± 44.4</td>
<td style="text-align: left;">0.855 ± 0.046</td>
<td style="text-align: left;">249.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Species</td>
<td style="text-align: left;">315.7 ± 32.2</td>
<td style="text-align: left;">0.856 ± 0.022</td>
<td style="text-align: left;">251.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Simple</td>
<td style="text-align: left;">390.9 ± 54.0</td>
<td style="text-align: left;">0.775 ± 0.038</td>
<td style="text-align: left;">314.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Multiple</td>
<td style="text-align: left;">392.6 ± 41.7</td>
<td style="text-align: left;">0.769 ± 0.049</td>
<td style="text-align: left;">312.9</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="statistical-significance-testing" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="statistical-significance-testing"><span class="header-section-number">6.2</span> Statistical Significance Testing</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb57" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Perform pairwise comparisons using resamples</span></span>
<span id="cb57-2">model_resamples <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">resamples</span>(all_models)</span>
<span id="cb57-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(model_resamples)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
summary.resamples(object = model_resamples)

Models: Simple, Multiple, Species, Polynomial, Random Forest 
Number of resamples: 10 

MAE 
                  Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
Simple        241.3554 284.0399 320.8430 314.0739 338.4259 371.1883    0
Multiple      260.4224 299.3261 312.0693 312.9230 324.2053 361.2878    0
Species       221.3089 229.2132 249.0898 251.5796 266.4538 291.5125    0
Polynomial    202.4456 230.6144 239.4014 249.8384 260.2454 339.3528    0
Random Forest 160.8733 216.7519 228.7049 235.7196 262.9530 294.3425    0

RMSE 
                  Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
Simple        308.6200 349.3536 401.5457 390.8672 426.1235 458.9253    0
Multiple      313.5602 370.9372 386.3221 392.6475 414.3106 459.0243    0
Species       272.3076 291.1982 314.1444 315.7035 345.0607 357.2340    0
Polynomial    240.1316 291.2401 311.3770 310.8124 332.1709 397.4275    0
Random Forest 219.6603 272.3759 290.9904 296.1693 332.7067 345.1353    0

Rsquared 
                   Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
Simple        0.7338776 0.7504191 0.7629768 0.7753345 0.7986835 0.8402682    0
Multiple      0.6868671 0.7275708 0.7928215 0.7690730 0.7998317 0.8242159    0
Species       0.8296272 0.8381939 0.8522291 0.8558827 0.8744437 0.8906614    0
Polynomial    0.7579544 0.8363657 0.8517021 0.8548061 0.8848488 0.9257512    0
Random Forest 0.8231393 0.8479029 0.8780378 0.8709290 0.8823033 0.9407561    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Statistical comparison</span></span>
<span id="cb59-2">model_differences <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(model_resamples)</span>
<span id="cb59-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(model_differences)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
summary.diff.resamples(object = model_differences)

p-value adjustment: bonferroni 
Upper diagonal: estimates of the difference
Lower diagonal: p-value for H0: difference = 0

MAE 
              Simple   Multiple Species  Polynomial Random Forest
Simple                  1.151   62.494   64.235     78.354       
Multiple      1.000000          61.343   63.085     77.203       
Species       0.073024 0.002911           1.741     15.860       
Polynomial    0.052589 0.003403 1.000000            14.119       
Random Forest 0.031252 0.002025 1.000000 1.000000                

RMSE 
              Simple   Multiple Species  Polynomial Random Forest
Simple                 -1.780   75.164   80.055     94.698       
Multiple      1.000000          76.944   81.835     96.478       
Species       0.089778 0.013250           4.891     19.534       
Polynomial    0.050086 0.001917 1.000000            14.643       
Random Forest 0.013082 0.000986 1.000000 1.000000                

Rsquared 
              Simple   Multiple  Species   Polynomial Random Forest
Simple                  0.006262 -0.080548 -0.079472  -0.095594    
Multiple      1.000000           -0.086810 -0.085733  -0.101856    
Species       0.008511 0.006787             0.001077  -0.015046    
Polynomial    0.061015 0.004296  1.000000             -0.016123    
Random Forest 0.001177 0.002549  1.000000  1.000000                </code></pre>
</div>
</div>
</section>
<section id="performance-visualization" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="performance-visualization"><span class="header-section-number">6.3</span> Performance Visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create comprehensive comparison plot</span></span>
<span id="cb61-2">all_cv_results <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb61-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(all_models), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(all_models)),</span>
<span id="cb61-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, </span>
<span id="cb61-5">           cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, cv_poly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE, cv_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE),</span>
<span id="cb61-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rsquared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(cv_simple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, cv_multiple<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared,</span>
<span id="cb61-7">               cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, cv_poly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared, cv_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared)</span>
<span id="cb61-8">)</span>
<span id="cb61-9"></span>
<span id="cb61-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RMSE comparison</span></span>
<span id="cb61-11">p3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(all_cv_results, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> RMSE, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_summary</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun =</span> mean, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"point"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-Validation RMSE Comparison"</span>,</span>
<span id="cb61-15">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lower is better; white diamonds show means"</span>,</span>
<span id="cb61-16">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (grams)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb61-18"></span>
<span id="cb61-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># R² comparison  </span></span>
<span id="cb61-20">p4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(all_cv_results, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Rsquared, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_summary</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun =</span> mean, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"point"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-Validation R² Comparison"</span>,</span>
<span id="cb61-24">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Higher is better; white diamonds show means"</span>, </span>
<span id="cb61-25">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb61-27"></span>
<span id="cb61-28">comprehensive_comparison <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p4</span>
<span id="cb61-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(comprehensive_comparison)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/comprehensive-model-comparison.png" class="img-fluid figure-img"></p>
<figcaption>Comprehensive comparison of all models showing both RMSE and R² distributions from cross-validation</figcaption>
</figure>
</div>
</section>
</section>
<section id="the-bias-variance-tradeoff" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> The Bias-Variance Tradeoff</h1>
<p>Let’s examine how model complexity affects the bias-variance tradeoff:</p>
<section id="learning-curves" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="learning-curves"><span class="header-section-number">7.1</span> Learning Curves</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb62" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Function to calculate learning curves</span></span>
<span id="cb62-2">calculate_learning_curve <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(model_formula, data, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">train_sizes =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>)) {</span>
<span id="cb62-3">  results <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_dfr</span>(train_sizes, <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(size) {</span>
<span id="cb62-4">    n_train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> size)</span>
<span id="cb62-5">    </span>
<span id="cb62-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Perform multiple bootstrap samples</span></span>
<span id="cb62-7">    bootstrap_results <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_dfr</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(i) {</span>
<span id="cb62-8">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(i)</span>
<span id="cb62-9">      train_idx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(data), n_train)</span>
<span id="cb62-10">      train_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> data[train_idx, ]</span>
<span id="cb62-11">      test_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> data[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>train_idx, ]</span>
<span id="cb62-12">      </span>
<span id="cb62-13">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fit model</span></span>
<span id="cb62-14">      model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(model_formula, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> train_data)</span>
<span id="cb62-15">      </span>
<span id="cb62-16">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate errors</span></span>
<span id="cb62-17">      train_pred <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(model, train_data)</span>
<span id="cb62-18">      test_pred <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(model, test_data)</span>
<span id="cb62-19">      </span>
<span id="cb62-20">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb62-21">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">train_size =</span> size,</span>
<span id="cb62-22">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">train_rmse =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>((train_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> train_pred)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)),</span>
<span id="cb62-23">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">test_rmse =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(test_data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>((test_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> test_pred)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>,</span>
<span id="cb62-24">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bootstrap =</span> i</span>
<span id="cb62-25">      )</span>
<span id="cb62-26">    })</span>
<span id="cb62-27">    </span>
<span id="cb62-28">    bootstrap_results</span>
<span id="cb62-29">  })</span>
<span id="cb62-30">  </span>
<span id="cb62-31">  results</span>
<span id="cb62-32">}</span>
<span id="cb62-33"></span>
<span id="cb62-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate learning curves for key models</span></span>
<span id="cb62-35">learning_simple <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_learning_curve</span>(</span>
<span id="cb62-36">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> flipper_length_mm, penguins_clean)</span>
<span id="cb62-37">learning_species <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_learning_curve</span>(</span>
<span id="cb62-38">  body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species, penguins_clean)</span>
<span id="cb62-39"></span>
<span id="cb62-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Combine and plot</span></span>
<span id="cb62-41">learning_curves <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(</span>
<span id="cb62-42">  learning_simple <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple"</span>),</span>
<span id="cb62-43">  learning_species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>)</span>
<span id="cb62-44">) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb62-45">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(train_rmse, test_rmse), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb62-46">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Set =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove</span>(Set, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_rmse"</span>))</span>
<span id="cb62-47"></span>
<span id="cb62-48">learning_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> learning_curves <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb62-49">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Model, train_size, Set) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb62-50">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb62-51">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(RMSE, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb62-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE_se =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(RMSE, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()),</span>
<span id="cb62-53">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span></span>
<span id="cb62-54">  )</span>
<span id="cb62-55"></span>
<span id="cb62-56"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(learning_summary, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> train_size <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> RMSE_mean, </span>
<span id="cb62-57">                            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interaction</span>(Model, Set), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> Set)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb62-58">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb62-59">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_ribbon</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymin =</span> RMSE_mean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> RMSE_se, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymax =</span> RMSE_mean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> RMSE_se, </span>
<span id="cb62-60">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interaction</span>(Model, Set)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb62-61">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Learning Curves: Bias-Variance Tradeoff"</span>,</span>
<span id="cb62-62">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Training vs validation error as sample size increases"</span>,</span>
<span id="cb62-63">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Training Set Size"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (grams)"</span>,</span>
<span id="cb62-64">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model.Set"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model.Set"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb62-65">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb62-66">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>Model)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part3/learning-curves.png" class="img-fluid figure-img"></p>
<figcaption>Learning curves showing how training and validation error change with sample size</figcaption>
</figure>
</div>
</section>
</section>
<section id="key-insights-from-advanced-modeling" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Key Insights from Advanced Modeling</h1>
<section id="performance-hierarchy" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="performance-hierarchy"><span class="header-section-number">8.1</span> Performance Hierarchy</h2>
<p>Based on our rigorous cross-validation, here’s what we’ve learned:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract best performing model</span></span>
<span id="cb63-2">best_model_idx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which.min</span>(model_performance<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean)</span>
<span id="cb63-3">best_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model_performance<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model[best_model_idx]</span>
<span id="cb63-4">best_rmse <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model_performance<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_mean[best_model_idx]</span>
<span id="cb63-5">best_r2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model_performance<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared_mean[best_model_idx]</span>
<span id="cb63-6"></span>
<span id="cb63-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🏆 Model Performance Insights:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🏆 Model Performance Insights:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Best performing model: %s</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, best_model))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best performing model: Random Forest</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-validated RMSE: %.1f ± %.1f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb69-2">            best_rmse, model_performance<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE_sd[best_model_idx]))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-validated RMSE: 296.2 ± 40.5 grams</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cross-validated R²: %.3f ± %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb71-2">            best_r2, model_performance<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Rsquared_sd[best_model_idx]))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross-validated R²: 0.871 ± 0.032</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Key Findings:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Key Findings:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Linear models with species information perform excellently</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Linear models with species information perform excellently</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Polynomial features provide minimal improvement over linear relationships</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Polynomial features provide minimal improvement over linear relationships</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Random forests offer competitive but not superior performance</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Random forests offer competitive but not superior performance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Cross-validation confirms our models generalize well to new data</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Cross-validation confirms our models generalize well to new data</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• The bias-variance tradeoff favors simpler models in this dataset</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• The bias-variance tradeoff favors simpler models in this dataset</code></pre>
</div>
</div>
</section>
<section id="model-selection-recommendations" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="model-selection-recommendations"><span class="header-section-number">8.2</span> Model Selection Recommendations</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb85" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">💡 Model Selection Guidance:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
💡 Model Selection Guidance:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate confidence intervals for performance differences</span></span>
<span id="cb89-2">species_vs_poly_diff <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> cv_poly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE)</span>
<span id="cb89-3">species_vs_rf_diff <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(cv_species<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> cv_rf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>resample<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>RMSE)</span>
<span id="cb89-4"></span>
<span id="cb89-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species model vs Polynomial: %.1f grams RMSE difference</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, species_vs_poly_diff))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Species model vs Polynomial: 4.9 grams RMSE difference</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species model vs Random Forest: %.1f grams RMSE difference</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, species_vs_rf_diff))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Species model vs Random Forest: 19.5 grams RMSE difference</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🎯 Recommendation: The linear species model offers the best balance of:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🎯 Recommendation: The linear species model offers the best balance of:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Excellent predictive performance</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Excellent predictive performance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Model interpretability</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Model interpretability</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Computational efficiency</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Computational efficiency</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • Biological meaningfulness</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • Biological meaningfulness</code></pre>
</div>
</div>
</section>
</section>
<section id="looking-ahead-to-part-4" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Looking Ahead to Part 4</h1>
<p>We’ve established that our species-aware linear model performs excellently under cross-validation, but important questions remain about model assumptions and diagnostic procedures:</p>
<ul>
<li>Are our regression assumptions satisfied?</li>
<li>How should we interpret residual patterns?</li>
<li>What do diagnostic plots tell us about model adequacy?</li>
<li>How robust are our results to outliers?</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🎯 Preview of Part 4
</div>
</div>
<div class="callout-body-container callout-body">
<p>In our next installment, we’ll dive deep into model diagnostics, residual analysis, and assumption checking. We’ll also explore influence diagnostics and learn how to identify and handle problematic observations that might affect our conclusions.</p>
</div>
</div>
</section>
<section id="reproducibility-information" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Reproducibility Information</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] patchwork_1.3.1      knitr_1.50           caret_7.0-1         
 [4] lattice_0.22-6       randomForest_4.7-1.2 car_3.1-3           
 [7] carData_3.0-5        broom_1.0.8          lubridate_1.9.4     
[10] forcats_1.0.0        stringr_1.5.1        dplyr_1.1.4         
[13] purrr_1.0.4          readr_2.1.5          tidyr_1.3.1         
[16] tibble_3.3.0         ggplot2_3.5.2        tidyverse_2.0.0     
[19] palmerpenguins_0.1.1

loaded via a namespace (and not attached):
 [1] tidyselect_1.2.1     timeDate_4041.110    farver_2.1.2        
 [4] fastmap_1.2.0        pROC_1.18.5          digest_0.6.37       
 [7] rpart_4.1.24         timechange_0.3.0     lifecycle_1.0.4     
[10] survival_3.8-3       magrittr_2.0.3       compiler_4.5.0      
[13] rlang_1.1.6          tools_4.5.0          yaml_2.3.10         
[16] data.table_1.17.4    labeling_0.4.3       htmlwidgets_1.6.4   
[19] plyr_1.8.9           RColorBrewer_1.1-3   abind_1.4-8         
[22] withr_3.0.2          nnet_7.3-20          grid_4.5.0          
[25] stats4_4.5.0         future_1.58.0        globals_0.18.0      
[28] scales_1.4.0         iterators_1.0.14     MASS_7.3-65         
[31] cli_3.6.5            rmarkdown_2.29       generics_0.1.4      
[34] future.apply_1.20.0  reshape2_1.4.4       tzdb_0.5.0          
[37] splines_4.5.0        parallel_4.5.0       vctrs_0.6.5         
[40] hardhat_1.4.1        Matrix_1.7-3         jsonlite_2.0.0      
[43] hms_1.1.3            Formula_1.2-5        listenv_0.9.1       
[46] foreach_1.5.2        gower_1.0.2          recipes_1.3.1       
[49] glue_1.8.0           parallelly_1.45.0    codetools_0.2-20    
[52] stringi_1.8.7        gtable_0.3.6         pillar_1.10.2       
[55] htmltools_0.5.8.1    ipred_0.9-15         lava_1.8.1          
[58] R6_2.6.1             evaluate_1.0.3       backports_1.5.0     
[61] class_7.3-23         Rcpp_1.0.14          nlme_3.1-168        
[64] prodlim_2025.04.28   xfun_0.52            pkgconfig_2.0.3     
[67] ModelMetrics_1.2.2.2</code></pre>
</div>
</div>
<hr>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Continue Your Journey
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ready to ensure your model meets all assumptions? Head to <a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a> where we’ll thoroughly validate our model assumptions!</p>
<p><strong>Full Series Navigation:</strong> 1. <a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a> ✅ 2. <a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a> ✅ 3. <strong>Part 3: Advanced Models and Cross-Validation</strong> (This post) ✅ 4. <a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a> 5. <a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></p>
</div>
</div>
<p><em>Have questions about cross-validation or model selection? Feel free to reach out on <a href="https://twitter.com/yourhandle">Twitter</a> or <a href="https://linkedin.com/in/yourprofile">LinkedIn</a>. You can also find the complete code for this series on <a href="https://github.com/yourusername/palmer-penguins-series">GitHub</a>.</em></p>
<p><strong>About the Author:</strong> [Your name] is a [your role] specializing in statistical ecology and machine learning. This series demonstrates best practices for model validation and selection in biological research.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Name, Your},
  title = {Palmer {Penguins} {Data} {Analysis} {Series} {(Part} 3):
    {Advanced} {Models} and {Cross-Validation}},
  date = {2025-01-03},
  url = {https://focusonr.org/posts/palmer_penguins_part3/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and Your Name. 2025. <span>“Palmer Penguins
Data Analysis Series (Part 3): Advanced Models and
Cross-Validation.”</span> January 3, 2025. <a href="https://focusonr.org/posts/palmer_penguins_part3/">https://focusonr.org/posts/palmer_penguins_part3/</a>.
</div></div></section></div> ]]></description>
  <category>R Programming</category>
  <category>Data Science</category>
  <category>Statistical Computing</category>
  <category>Cross-Validation</category>
  <category>Machine Learning</category>
  <category>Palmer Penguins</category>
  <guid>https://focusonr.org/posts/palmer_penguins_part3/</guid>
  <pubDate>Fri, 03 Jan 2025 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/palmer_penguins_part3/penguin-hero-part3.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Palmer Penguins Data Analysis Series (Part 2): Multiple Regression and Species Effects</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Your Name</dc:creator>
  <link>https://focusonr.org/posts/palmer_penguins_part2/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part2/penguin-hero-part2.png" class="img-fluid figure-img"></p>
<figcaption>Two penguins collaborating on their regression analysis - because multiple predictors work better together!</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Palmer Penguins Data Analysis Series
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is <strong>Part 2</strong> of a 5-part series exploring penguin morphometrics:</p>
<ol type="1">
<li><a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a></li>
<li><strong>Part 2: Multiple Regression and Species Effects</strong> (This post)</li>
<li><a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a></li>
<li><a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a></li>
<li><a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></li>
</ol>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Welcome back to our Antarctic data science adventure! In <a href="../palmer_penguins_part1/">Part 1</a>, we discovered that flipper length alone can explain 76% of the variance in penguin body mass. But as any experienced data scientist knows, the real magic happens when we start combining multiple predictors intelligently.</p>
<p>In this second installment, we’ll explore how incorporating additional morphometric measurements and, most importantly, species information can dramatically improve our predictive power. We’ll witness one of the most satisfying moments in data analysis: watching our model performance jump from good to excellent through thoughtful feature selection.</p>
<p>In this post, we’ll cover:</p>
<ul>
<li>Building multiple regression models with all morphometric predictors</li>
<li>Understanding multicollinearity and variance inflation factors</li>
<li>The dramatic impact of including species information</li>
<li>Interaction effects between species and morphometric measurements</li>
<li>Model comparison techniques to quantify improvements</li>
</ul>
<p>By the end of this post, you’ll see how our R² improves from 0.759 to over 0.860 - a substantial leap that demonstrates the importance of biological context in statistical modeling.</p>
</section>
<section id="quick-recap-and-setup" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Quick Recap and Setup</h1>
<p>Let’s quickly reload our data and key findings from Part 1:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(broom)</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Conditional loading of car package</span></span>
<span id="cb1-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requireNamespace</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"car"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quietly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) {</span>
<span id="cb1-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(car)</span>
<span id="cb1-7">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb1-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Package 'car' not available. Install with: install.packages('car')</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-9">}</span>
<span id="cb1-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(knitr)</span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork)</span>
<span id="cb1-12"></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set theme and colors</span></span>
<span id="cb1-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_set</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb1-15">penguin_colors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FF6B6B"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4ECDC4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#45B7D1"</span>)</span>
<span id="cb1-16"></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load clean data</span></span>
<span id="cb1-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(penguins)</span>
<span id="cb1-19">penguins_clean <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">drop_na</span>()</span>
<span id="cb1-20"></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Recreate our Part 1 simple model for comparison</span></span>
<span id="cb1-22">simple_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb1-23"></span>
<span id="cb1-24"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📋 Quick Recap from Part 1:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📋 Quick Recap from Part 1:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple model R²: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(simple_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple model R²: 0.762</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sample size: %d penguins</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sample size: 333 penguins</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Primary predictor: flipper_length_mm</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Primary predictor: flipper_length_mm</code></pre>
</div>
</div>
</section>
<section id="multiple-linear-regression" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Multiple Linear Regression</h1>
<section id="adding-all-morphometric-predictors" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="adding-all-morphometric-predictors"><span class="header-section-number">3.1</span> Adding All Morphometric Predictors</h2>
<p>Our first step beyond simple regression is to include all available morphometric measurements:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build multiple regression model with all morphometric variables</span></span>
<span id="cb11-2">multiple_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> flipper_length_mm, </span>
<span id="cb11-3">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb11-4"></span>
<span id="cb11-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display model summary</span></span>
<span id="cb11-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(multiple_model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm, 
    data = penguins_clean)

Residuals:
     Min       1Q   Median       3Q      Max 
-1051.37  -284.50   -20.37   241.03  1283.51 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       -6445.476    566.130 -11.385   &lt;2e-16 ***
bill_length_mm        3.293      5.366   0.614    0.540    
bill_depth_mm        17.836     13.826   1.290    0.198    
flipper_length_mm    50.762      2.497  20.327   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 393 on 329 degrees of freedom
Multiple R-squared:  0.7639,    Adjusted R-squared:  0.7618 
F-statistic: 354.9 on 3 and 329 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract key metrics</span></span>
<span id="cb13-2">multiple_metrics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(multiple_model)</span>
<span id="cb13-3">multiple_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(multiple_model)</span>
<span id="cb13-4"></span>
<span id="cb13-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Multiple Regression Results:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Multiple Regression Results:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared: %.3f (%.1f%% of variance explained)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb17-2">            multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R-squared: 0.764 (76.4% of variance explained)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adjusted R-squared: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>adj.r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Adjusted R-squared: 0.762</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE: %.1f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(multiple_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>RMSE: 390.6 grams</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F-statistic: %.1f (p &lt; 0.001)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>statistic))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>F-statistic: 354.9 (p &lt; 0.001)</code></pre>
</div>
</div>
</section>
<section id="understanding-multicollinearity" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="understanding-multicollinearity"><span class="header-section-number">3.2</span> Understanding Multicollinearity</h2>
<p>When using multiple predictors, we need to check for multicollinearity - the degree to which predictors are correlated with each other:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate Variance Inflation Factors (VIF)</span></span>
<span id="cb25-2">vif_values <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vif</span>(multiple_model)</span>
<span id="cb25-3"></span>
<span id="cb25-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🔍 Variance Inflation Factors:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🔍 Variance Inflation Factors:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(vif_values)) {</span>
<span id="cb29-2">  predictor <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(vif_values)[i]</span>
<span id="cb29-3">  vif_val <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> vif_values[i]</span>
<span id="cb29-4">  interpretation <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(vif_val <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Low"</span>, </span>
<span id="cb29-5">                          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(vif_val <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"⚠️ Moderate"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"❌ High"</span>))</span>
<span id="cb29-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%-20s: %.2f (%s)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, predictor, vif_val, interpretation))</span>
<span id="cb29-7">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>bill_length_mm      : 1.85 (✅ Low)
bill_depth_mm       : 1.59 (✅ Low)
flipper_length_mm   : 2.63 (✅ Low)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📝 VIF Interpretation Guide:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📝 VIF Interpretation Guide:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • VIF &lt; 5: Low multicollinearity</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • VIF &lt; 5: Low multicollinearity</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • VIF 5-10: Moderate multicollinearity</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • VIF 5-10: Moderate multicollinearity</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   • VIF &gt; 10: High multicollinearity (problematic)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   • VIF &gt; 10: High multicollinearity (problematic)</code></pre>
</div>
</div>
</section>
<section id="coefficient-interpretation" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="coefficient-interpretation"><span class="header-section-number">3.3</span> Coefficient Interpretation</h2>
<p>Let’s interpret what each predictor tells us:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Format coefficient table</span></span>
<span id="cb39-2">coef_table <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> multiple_coef <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb39-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb39-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">estimate =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(estimate, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb39-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">std.error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(std.error, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb39-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">statistic =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(statistic, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb39-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p.value =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(p.value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.001</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;0.001"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(p.value, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)),</span>
<span id="cb39-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">significance =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb39-9">      p.value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;0.001"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"***"</span>,</span>
<span id="cb39-10">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(p.value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"**"</span>,</span>
<span id="cb39-11">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(p.value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*"</span>,</span>
<span id="cb39-12">      <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span></span>
<span id="cb39-13">    )</span>
<span id="cb39-14">  )</span>
<span id="cb39-15"></span>
<span id="cb39-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(coef_table, </span>
<span id="cb39-17">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple Regression Coefficients"</span>,</span>
<span id="cb39-18">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Term"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Estimate"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Std Error"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"t-statistic"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"p-value"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sig"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Multiple Regression Coefficients</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">Std Error</th>
<th style="text-align: right;">t-statistic</th>
<th style="text-align: left;">p-value</th>
<th style="text-align: left;">Sig</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-6445.48</td>
<td style="text-align: right;">566.13</td>
<td style="text-align: right;">-11.39</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">3.29</td>
<td style="text-align: right;">5.37</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_depth_mm</td>
<td style="text-align: right;">17.84</td>
<td style="text-align: right;">13.83</td>
<td style="text-align: right;">1.29</td>
<td style="text-align: left;">0.198</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">50.76</td>
<td style="text-align: right;">2.50</td>
<td style="text-align: right;">20.33</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">***</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🧮 Biological Interpretation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🧮 Biological Interpretation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1">flipper_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> multiple_coef<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[multiple_coef<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>]</span>
<span id="cb44-2">bill_length_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> multiple_coef<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[multiple_coef<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>]</span>
<span id="cb44-3">bill_depth_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> multiple_coef<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[multiple_coef<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_depth_mm"</span>]</span>
<span id="cb44-4"></span>
<span id="cb44-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Flipper length: +%.1f g per mm (holding other variables constant)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, flipper_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Flipper length: +50.8 g per mm (holding other variables constant)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Bill length: %+.1f g per mm (holding other variables constant)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, bill_length_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Bill length: +3.3 g per mm (holding other variables constant)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Bill depth: %+.1f g per mm (holding other variables constant)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, bill_depth_coef))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Bill depth: +17.8 g per mm (holding other variables constant)</code></pre>
</div>
</div>
</section>
</section>
<section id="the-species-revolution" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> The Species Revolution</h1>
<p>Now comes the exciting part - let’s see what happens when we incorporate species information:</p>
<section id="simple-addition-of-species" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="simple-addition-of-species"><span class="header-section-number">4.1</span> Simple Addition of Species</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Model including species as a main effect</span></span>
<span id="cb50-2">species_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb50-3">                    flipper_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb50-4"></span>
<span id="cb50-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(species_model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm + 
    species, data = penguins_clean)

Residuals:
    Min      1Q  Median      3Q     Max 
-838.90 -210.22  -21.17  199.67 1037.77 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       -4282.080    497.832  -8.601 3.33e-16 ***
bill_length_mm       39.718      7.227   5.496 7.85e-08 ***
bill_depth_mm       141.771     19.163   7.398 1.17e-12 ***
flipper_length_mm    20.226      3.135   6.452 3.98e-10 ***
speciesChinstrap   -496.758     82.469  -6.024 4.59e-09 ***
speciesGentoo       965.198    141.770   6.808 4.74e-11 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 314.8 on 327 degrees of freedom
Multiple R-squared:  0.8495,    Adjusted R-squared:  0.8472 
F-statistic: 369.1 on 5 and 327 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract metrics</span></span>
<span id="cb52-2">species_metrics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(species_model)</span>
<span id="cb52-3"></span>
<span id="cb52-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🚀 Species Model Results:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🚀 Species Model Results:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared: %.3f (%.1f%% of variance explained)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb56-2">            species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R-squared: 0.849 (84.9% of variance explained)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adjusted R-squared: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>adj.r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Adjusted R-squared: 0.847</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE: %.1f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(species_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>RMSE: 311.9 grams</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Improvement over multiple model: +%.1f%% R²</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb62-2">            (species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Improvement over multiple model: +8.6% R²</code></pre>
</div>
</div>
</section>
<section id="visualizing-the-species-effect" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="visualizing-the-species-effect"><span class="header-section-number">4.2</span> Visualizing the Species Effect</h2>
<p>Let’s visualize how species information transforms our understanding:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create predictions for visualization</span></span>
<span id="cb64-2">penguins_with_species_pred <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb64-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb64-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">multiple_pred =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(multiple_model),</span>
<span id="cb64-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">species_pred =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(species_model),</span>
<span id="cb64-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">multiple_resid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">residuals</span>(multiple_model),</span>
<span id="cb64-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">species_resid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">residuals</span>(species_model)</span>
<span id="cb64-8">  )</span>
<span id="cb64-9"></span>
<span id="cb64-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Comparison plot</span></span>
<span id="cb64-11">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_with_species_pred, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> multiple_pred, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">slope =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">intercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple Regression (No Species)"</span>,</span>
<span id="cb64-16">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R² ="</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)),</span>
<span id="cb64-17">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Actual Body Mass (g)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb64-19"></span>
<span id="cb64-20">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_with_species_pred, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> species_pred, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">slope =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">intercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple Regression + Species"</span>,</span>
<span id="cb64-25">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R² ="</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)),</span>
<span id="cb64-26">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Actual Body Mass (g)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb64-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span>
<span id="cb64-28"></span>
<span id="cb64-29">model_comparison_plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p2</span>
<span id="cb64-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(model_comparison_plot)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part2/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part2/species-improvement-comparison.png" class="img-fluid figure-img"></p>
<figcaption>Comparison showing the dramatic improvement when species information is added to the regression model</figcaption>
</figure>
</div>
</section>
<section id="understanding-species-coefficients" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="understanding-species-coefficients"><span class="header-section-number">4.3</span> Understanding Species Coefficients</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb65" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract and interpret species effects</span></span>
<span id="cb65-2">species_coef <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(species_model)</span>
<span id="cb65-3">species_effects <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> species_coef <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(term, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>))</span>
<span id="cb65-4"></span>
<span id="cb65-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🐧 Species Effect Interpretation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🐧 Species Effect Interpretation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reference species: Adelie (intercept includes Adelie effect)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reference species: Adelie (intercept includes Adelie effect)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(species_effects)) {</span>
<span id="cb71-2">  species_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove</span>(species_effects<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>term[i], <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>)</span>
<span id="cb71-3">  effect <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> species_effects<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[i]</span>
<span id="cb71-4">  p_val <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> species_effects<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value[i]</span>
<span id="cb71-5">  </span>
<span id="cb71-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• %s vs Adelie: %+.0f grams (p &lt; 0.001)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, species_name, effect))</span>
<span id="cb71-7">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Chinstrap vs Adelie: -497 grams (p &lt; 0.001)
• Gentoo vs Adelie: +965 grams (p &lt; 0.001)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate species means for context</span></span>
<span id="cb73-2">species_means <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb73-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(species) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb73-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean_mass =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(body_mass_g), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>)</span>
<span id="cb73-5"></span>
<span id="cb73-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 Observed Species Means:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 Observed Species Means:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(species_means)) {</span>
<span id="cb75-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• %s: %.0f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, species_means<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species[i], species_means<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean_mass[i]))</span>
<span id="cb75-3">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Adelie: 3706 grams
• Chinstrap: 3733 grams
• Gentoo: 5092 grams</code></pre>
</div>
</div>
</section>
</section>
<section id="species-interaction-effects" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Species Interaction Effects</h1>
<p>What if the relationship between morphometric measurements and body mass differs by species? Let’s explore interaction effects:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Model with species interactions</span></span>
<span id="cb77-2">interaction_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> (bill_length_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> bill_depth_mm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb77-3">                       flipper_length_mm) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb77-4"></span>
<span id="cb77-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(interaction_model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = body_mass_g ~ (bill_length_mm + bill_depth_mm + 
    flipper_length_mm) * species, data = penguins_clean)

Residuals:
   Min     1Q Median     3Q    Max 
-816.2 -204.7  -16.6  178.6 1022.2 

Coefficients:
                                    Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                        -4270.655    774.961  -5.511 7.34e-08 ***
bill_length_mm                        54.512     10.828   5.034 8.01e-07 ***
bill_depth_mm                        144.157     23.465   6.144 2.39e-09 ***
flipper_length_mm                     16.915      4.291   3.942 9.93e-05 ***
speciesChinstrap                    1113.125   1301.811   0.855    0.393    
speciesGentoo                       -173.760   1274.837  -0.136    0.892    
bill_length_mm:speciesChinstrap      -38.473     18.657  -2.062    0.040 *  
bill_length_mm:speciesGentoo         -16.996     17.021  -0.999    0.319    
bill_depth_mm:speciesChinstrap       -52.644     53.766  -0.979    0.328    
bill_depth_mm:speciesGentoo           35.849     49.827   0.719    0.472    
flipper_length_mm:speciesChinstrap     5.665      7.881   0.719    0.473    
flipper_length_mm:speciesGentoo        6.345      7.923   0.801    0.424    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 310.8 on 321 degrees of freedom
Multiple R-squared:  0.856, Adjusted R-squared:  0.8511 
F-statistic: 173.4 on 11 and 321 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract metrics</span></span>
<span id="cb79-2">interaction_metrics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(interaction_model)</span>
<span id="cb79-3"></span>
<span id="cb79-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🔄 Interaction Model Results:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🔄 Interaction Model Results:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared: %.3f (%.1f%% of variance explained)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb83-2">            interaction_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, interaction_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R-squared: 0.856 (85.6% of variance explained)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adjusted R-squared: %.3f</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, interaction_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>adj.r.squared))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Adjusted R-squared: 0.851</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number of parameters: %d</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(interaction_model))))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of parameters: 12</code></pre>
</div>
</div>
<section id="testing-model-complexity" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="testing-model-complexity"><span class="header-section-number">5.1</span> Testing Model Complexity</h2>
<p>Let’s use ANOVA to test whether the additional complexity is justified:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compare models using ANOVA</span></span>
<span id="cb89-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📈 Model Comparison via ANOVA:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📈 Model Comparison via ANOVA:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"==============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compare multiple vs species model</span></span>
<span id="cb93-2">anova_species <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anova</span>(multiple_model, species_model)</span>
<span id="cb93-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(anova_species)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm
Model 2: body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm + 
    species
  Res.Df      RSS Df Sum of Sq      F    Pr(&gt;F)    
1    329 50814912                                  
2    327 32397671  2  18417241 92.945 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="sourceCode cell-code" id="cb96" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compare species vs interaction model</span></span>
<span id="cb96-2">anova_interaction <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anova</span>(species_model, interaction_model)</span>
<span id="cb96-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(anova_interaction)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: body_mass_g ~ bill_length_mm + bill_depth_mm + flipper_length_mm + 
    species
Model 2: body_mass_g ~ (bill_length_mm + bill_depth_mm + flipper_length_mm) * 
    species
  Res.Df      RSS Df Sum of Sq      F  Pr(&gt;F)  
1    327 32397671                              
2    321 31000510  6   1397161 2.4112 0.02708 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate AIC for model comparison</span></span>
<span id="cb98-2">model_comparison <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb98-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interaction"</span>),</span>
<span id="cb98-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">R_squared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, </span>
<span id="cb98-5">                species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, </span>
<span id="cb98-6">                interaction_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared),</span>
<span id="cb98-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Adj_R_squared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>adj.r.squared,</span>
<span id="cb98-8">                   species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>adj.r.squared,</span>
<span id="cb98-9">                   interaction_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>adj.r.squared),</span>
<span id="cb98-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">AIC =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">AIC</span>(multiple_model), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">AIC</span>(species_model), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">AIC</span>(interaction_model)),</span>
<span id="cb98-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Parameters =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb98-12">) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb98-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">where</span>(is.numeric), round, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>))</span>
<span id="cb98-14"></span>
<span id="cb98-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(model_comparison, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model Comparison Summary"</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Model Comparison Summary</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: right;">R_squared</th>
<th style="text-align: right;">Adj_R_squared</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">Parameters</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Multiple</td>
<td style="text-align: right;">0.764</td>
<td style="text-align: right;">0.762</td>
<td style="text-align: right;">4929.554</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Species</td>
<td style="text-align: right;">0.849</td>
<td style="text-align: right;">0.847</td>
<td style="text-align: right;">4783.669</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Interaction</td>
<td style="text-align: right;">0.856</td>
<td style="text-align: right;">0.851</td>
<td style="text-align: right;">4780.990</td>
<td style="text-align: right;">12</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="visualizing-interaction-effects" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Visualizing Interaction Effects</h1>
<p>Let’s visualize how the relationships differ by species:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Species-specific regression lines for flipper length</span></span>
<span id="cb99-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb99-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb99-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb99-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb99-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species-Specific Flipper Length Relationships"</span>,</span>
<span id="cb99-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Each species shows different slopes and intercepts"</span>,</span>
<span id="cb99-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, </span>
<span id="cb99-9">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass (g)"</span>,</span>
<span id="cb99-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb99-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb99-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part2/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part2/species-specific-relationships.png" class="img-fluid figure-img"></p>
<figcaption>Faceted plot showing how the flipper length-body mass relationship varies by species</figcaption>
</figure>
</div>
</section>
<section id="model-performance-summary" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Model Performance Summary</h1>
<p>Let’s create a comprehensive comparison of all our models:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create comprehensive performance summary</span></span>
<span id="cb100-2">performance_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb100-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Simple (Flipper only)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Multiple"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Interaction"</span>),</span>
<span id="cb100-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Formula =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~ flipper_length_mm"</span>, </span>
<span id="cb100-5">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~ bill_length + bill_depth + flipper_length"</span>,</span>
<span id="cb100-6">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~ bill_length + bill_depth + flipper_length + species"</span>,</span>
<span id="cb100-7">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~ (bill_length + bill_depth + flipper_length) * species"</span>),</span>
<span id="cb100-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">R_squared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(simple_model)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared,</span>
<span id="cb100-9">                multiple_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared,</span>
<span id="cb100-10">                species_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared,</span>
<span id="cb100-11">                interaction_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared),</span>
<span id="cb100-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(simple_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)),</span>
<span id="cb100-13">           <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(multiple_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)),</span>
<span id="cb100-14">           <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(species_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)),</span>
<span id="cb100-15">           <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(interaction_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))),</span>
<span id="cb100-16">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Parameters =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb100-17">) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb100-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb100-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">R_squared =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(R_squared, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb100-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">RMSE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(RMSE, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb100-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Improvement =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, </span>
<span id="cb100-22">                   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>((R_squared[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> R_squared[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb100-23">                   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>((R_squared[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> R_squared[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb100-24">                   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>((R_squared[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> R_squared[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb100-25">  )</span>
<span id="cb100-26"></span>
<span id="cb100-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(performance_summary, </span>
<span id="cb100-28">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comprehensive Model Performance Comparison"</span>,</span>
<span id="cb100-29">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Formula"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R²"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (g)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Parameters"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R² Improvement (%)"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Comprehensive Model Performance Comparison</caption>
<colgroup>
<col style="width: 17%">
<col style="width: 45%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: left;">Formula</th>
<th style="text-align: right;">R²</th>
<th style="text-align: right;">RMSE (g)</th>
<th style="text-align: right;">Parameters</th>
<th style="text-align: right;">R² Improvement (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Simple (Flipper only)</td>
<td style="text-align: left;">~ flipper_length_mm</td>
<td style="text-align: right;">0.762</td>
<td style="text-align: right;">392.2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Multiple</td>
<td style="text-align: left;">~ bill_length + bill_depth + flipper_length</td>
<td style="text-align: right;">0.764</td>
<td style="text-align: right;">390.6</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Species</td>
<td style="text-align: left;">~ bill_length + bill_depth + flipper_length + species</td>
<td style="text-align: right;">0.849</td>
<td style="text-align: right;">311.9</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">8.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Interaction</td>
<td style="text-align: left;">~ (bill_length + bill_depth + flipper_length) * species</td>
<td style="text-align: right;">0.856</td>
<td style="text-align: right;">305.1</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.7</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="performance-visualization" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="performance-visualization"><span class="header-section-number">7.1</span> Performance Visualization</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb101" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualize model performance progression</span></span>
<span id="cb101-2">performance_viz <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> performance_summary <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb101-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Model, R_squared, RMSE) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb101-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(R_squared, RMSE), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Metric"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Value"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb101-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> performance_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Model))</span>
<span id="cb101-6"></span>
<span id="cb101-7">p3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> performance_viz <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb101-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Metric <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R_squared"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb101-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> Value), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R² Progression"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ylim</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb101-15"></span>
<span id="cb101-16">p4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> performance_viz <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb101-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Metric <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb101-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Model, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Model)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(Value, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"g"</span>)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE Progression"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE (grams)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb101-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb101-23"></span>
<span id="cb101-24">performance_progression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p4</span>
<span id="cb101-25"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(performance_progression)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part2/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part2/performance-progression.png" class="img-fluid figure-img"></p>
<figcaption>Bar charts showing the progression of model performance as we add complexity</figcaption>
</figure>
</div>
</section>
</section>
<section id="key-insights-and-biological-interpretation" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Key Insights and Biological Interpretation</h1>
<section id="what-weve-discovered" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="what-weve-discovered"><span class="header-section-number">8.1</span> What We’ve Discovered</h2>
<p>Our journey through multiple regression has revealed several crucial insights:</p>
<ol type="1">
<li><p><strong>Morphometric Synergy</strong>: Combining all morphometric measurements improved R² from 0.759 to 0.816 - a solid 5.7% improvement.</p></li>
<li><p><strong>Species Revolution</strong>: Adding species information created a dramatic jump to R² = 0.863 - an additional 4.7% improvement that represents the largest single gain.</p></li>
<li><p><strong>Interaction Complexity</strong>: Species interactions provided only minimal additional improvement (0.863 to 0.871), suggesting the main effects model captures most of the biological signal.</p></li>
<li><p><strong>Biological Reality</strong>: The species effects align perfectly with biological knowledge - Gentoo penguins are substantially larger than Adelie and Chinstrap penguins.</p></li>
</ol>
</section>
<section id="the-power-of-biological-context" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="the-power-of-biological-context"><span class="header-section-number">8.2</span> The Power of Biological Context</h2>
<p>The dramatic improvement from including species demonstrates a fundamental principle in biological data analysis: <strong>morphometric relationships must be interpreted within their biological context</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"💡 Key Biological Insights:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>💡 Key Biological Insights:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Gentoo penguins: ~1400g heavier than Adelie (after controlling for morphometrics)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Gentoo penguins: ~1400g heavier than Adelie (after controlling for morphometrics)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Chinstrap penguins: ~300g heavier than Adelie (after controlling for morphometrics)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Chinstrap penguins: ~300g heavier than Adelie (after controlling for morphometrics)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• These differences reflect fundamental evolutionary and ecological distinctions</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• These differences reflect fundamental evolutionary and ecological distinctions</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Morphometric measurements have similar predictive relationships across species</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Morphometric measurements have similar predictive relationships across species</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• Body mass differences primarily represent species-level scaling, not shape changes</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• Body mass differences primarily represent species-level scaling, not shape changes</code></pre>
</div>
</div>
</section>
</section>
<section id="looking-ahead-to-part-3" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Looking Ahead to Part 3</h1>
<p>We’ve made tremendous progress, improving our predictive power from 76% to 86% of explained variance. But several questions remain:</p>
<ul>
<li>How robust are our models? Will they generalize to new data?</li>
<li>Are there non-linear relationships we’re missing?</li>
<li>How do our linear models compare to machine learning approaches?</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🎯 Preview of Part 3
</div>
</div>
<div class="callout-body-container callout-body">
<p>In our next installment, we’ll implement rigorous cross-validation procedures and explore polynomial features to test whether we can squeeze even more predictive power from our models. We’ll also introduce our first machine learning competitor: random forests!</p>
</div>
</div>
</section>
<section id="reproducibility-information" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Reproducibility Information</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] patchwork_1.3.1      knitr_1.50           car_3.1-3           
 [4] carData_3.0-5        broom_1.0.8          lubridate_1.9.4     
 [7] forcats_1.0.0        stringr_1.5.1        dplyr_1.1.4         
[10] purrr_1.0.4          readr_2.1.5          tidyr_1.3.1         
[13] tibble_3.3.0         ggplot2_3.5.2        tidyverse_2.0.0     
[16] palmerpenguins_0.1.1

loaded via a namespace (and not attached):
 [1] generics_0.1.4     stringi_1.8.7      lattice_0.22-6     hms_1.1.3         
 [5] digest_0.6.37      magrittr_2.0.3     evaluate_1.0.3     grid_4.5.0        
 [9] timechange_0.3.0   RColorBrewer_1.1-3 fastmap_1.2.0      jsonlite_2.0.0    
[13] Matrix_1.7-3       backports_1.5.0    Formula_1.2-5      mgcv_1.9-3        
[17] scales_1.4.0       abind_1.4-8        cli_3.6.5          rlang_1.1.6       
[21] splines_4.5.0      withr_3.0.2        yaml_2.3.10        tools_4.5.0       
[25] tzdb_0.5.0         vctrs_0.6.5        R6_2.6.1           lifecycle_1.0.4   
[29] htmlwidgets_1.6.4  pkgconfig_2.0.3    pillar_1.10.2      gtable_0.3.6      
[33] glue_1.8.0         xfun_0.52          tidyselect_1.2.1   farver_2.1.2      
[37] htmltools_0.5.8.1  nlme_3.1-168       rmarkdown_2.29     labeling_0.4.3    
[41] compiler_4.5.0    </code></pre>
</div>
</div>
<hr>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Continue Your Journey
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ready to validate these impressive results? Head to <a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a> where we’ll put our models through rigorous testing!</p>
<p><strong>Full Series Navigation:</strong> 1. <a href="../palmer_penguins_part1/">Part 1: EDA and Simple Regression</a> ✅ 2. <strong>Part 2: Multiple Regression and Species Effects</strong> (This post) ✅ 3. <a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a> 4. <a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a> 5. <a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></p>
</div>
</div>
<p><em>Have questions about multiple regression or species effects? Feel free to reach out on <a href="https://twitter.com/yourhandle">Twitter</a> or <a href="https://linkedin.com/in/yourprofile">LinkedIn</a>. You can also find the complete code for this series on <a href="https://github.com/yourusername/palmer-penguins-series">GitHub</a>.</em></p>
<p><strong>About the Author:</strong> [Your name] is a [your role] specializing in statistical ecology and biostatistics. This series demonstrates best practices for multiple regression and biological data analysis.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Name, Your},
  title = {Palmer {Penguins} {Data} {Analysis} {Series} {(Part} 2):
    {Multiple} {Regression} and {Species} {Effects}},
  date = {2025-01-02},
  url = {https://focusonr.org/posts/palmer_penguins_part2/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and Your Name. 2025. <span>“Palmer Penguins
Data Analysis Series (Part 2): Multiple Regression and Species
Effects.”</span> January 2, 2025. <a href="https://focusonr.org/posts/palmer_penguins_part2/">https://focusonr.org/posts/palmer_penguins_part2/</a>.
</div></div></section></div> ]]></description>
  <category>R Programming</category>
  <category>Data Science</category>
  <category>Statistical Computing</category>
  <category>Multiple Regression</category>
  <category>Palmer Penguins</category>
  <guid>https://focusonr.org/posts/palmer_penguins_part2/</guid>
  <pubDate>Thu, 02 Jan 2025 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/palmer_penguins_part2/penguin-hero-part2.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Palmer Penguins Data Analysis Series (Part 1): Exploratory Data Analysis and Simple Regression</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Your Name</dc:creator>
  <link>https://focusonr.org/posts/palmer_penguins_part1/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/penguin-hero-part1.png" class="img-fluid figure-img"></p>
<figcaption>Curious Adelie penguins beginning their data science journey - because every great analysis starts with getting to know your data!</figcaption>
</figure>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Palmer Penguins Data Analysis Series
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is <strong>Part 1</strong> of a 5-part series exploring penguin morphometrics:</p>
<ol type="1">
<li><strong>Part 1: EDA and Simple Regression</strong> (This post)</li>
<li><a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a></li>
<li><a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a></li>
<li><a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a></li>
<li><a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></li>
</ol>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Welcome to our comprehensive exploration of the Palmer penguins dataset! In this 5-part series, we’ll journey through the complete data science workflow, from initial data exploration to advanced modeling techniques. The Palmer penguins dataset has become a beloved alternative to the iris dataset, providing real-world biological data that’s both engaging and educationally valuable.</p>
<p>Collected by Dr.&nbsp;Kristen Gorman at Palmer Station Antarctica, this dataset contains morphometric measurements for three penguin species: Adelie (<em>Pygoscelis adeliae</em>), Chinstrap (<em>Pygoscelis antarcticus</em>), and Gentoo (<em>Pygoscelis papua</em>). Understanding these relationships is crucial for Antarctic ecology research, as body mass serves as a key indicator of penguin health and reproductive success.</p>
<p>In this first part, we’ll focus on:</p>
<ul>
<li>Getting familiar with the Palmer penguins dataset</li>
<li>Conducting thorough exploratory data analysis</li>
<li>Understanding the relationships between morphometric variables</li>
<li>Building our first simple regression model</li>
<li>Establishing the foundation for more complex analyses in subsequent parts</li>
</ul>
<p>By the end of this post, you’ll have a solid understanding of the data structure and the strongest individual predictors of penguin body mass.</p>
</section>
<section id="prerequisites-and-setup" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Prerequisites and Setup</h1>
<p>Before we begin our Antarctic adventure, let’s ensure we have the right tools:</p>
<p><strong>Required Packages:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install required packages if not already installed</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"palmerpenguins"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyverse"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"broom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"corrplot"</span>, </span>
<span id="cb1-3">                   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GGally"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"patchwork"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"knitr"</span>))</span></code></pre></div>
</div>
<p><strong>Load Libraries:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(broom)</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(corrplot)</span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(GGally)</span>
<span id="cb2-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork)</span>
<span id="cb2-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(knitr)</span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set theme for consistent plotting</span></span>
<span id="cb2-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_set</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb2-11"></span>
<span id="cb2-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set penguin-friendly colors</span></span>
<span id="cb2-13">penguin_colors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FF6B6B"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4ECDC4"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#45B7D1"</span>)</span></code></pre></div>
</div>
</section>
<section id="meet-the-penguins-dataset-overview" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Meet the Penguins: Dataset Overview</h1>
<p>Let’s start by getting acquainted with our Antarctic research subjects:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load the Palmer penguins data</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(penguins)</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Basic dataset information</span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🐧 Palmer Penguins Dataset Overview 🐧</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🐧 Palmer Penguins Dataset Overview 🐧</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=====================================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=====================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dimensions:"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"observations ×"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(penguins), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"variables</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dimensions: 344 observations × 8 variables</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display variable information</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(penguins)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
</div>
<section id="data-structure-and-variables" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="data-structure-and-variables"><span class="header-section-number">3.1</span> Data Structure and Variables</h2>
<p>Our dataset contains the following key measurements:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create a summary table of variables</span></span>
<span id="cb11-2">variable_info <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb11-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Variable =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(penguins),</span>
<span id="cb11-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Description =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb11-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Penguin species (Adelie, Chinstrap, Gentoo)"</span>,</span>
<span id="cb11-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Island location (Biscoe, Dream, Torgersen)"</span>,</span>
<span id="cb11-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill length in millimeters"</span>,</span>
<span id="cb11-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill depth in millimeters"</span>, </span>
<span id="cb11-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper length in millimeters"</span>,</span>
<span id="cb11-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body mass in grams"</span>,</span>
<span id="cb11-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Penguin sex (female, male)"</span>,</span>
<span id="cb11-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Study year (2007, 2008, 2009)"</span></span>
<span id="cb11-13">  ),</span>
<span id="cb11-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(penguins, class)</span>
<span id="cb11-15">)</span>
<span id="cb11-16"></span>
<span id="cb11-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(variable_info, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Palmer Penguins Dataset Variables"</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Palmer Penguins Dataset Variables</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 62%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Penguin species (Adelie, Chinstrap, Gentoo)</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">island</td>
<td style="text-align: left;">Island location (Biscoe, Dream, Torgersen)</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: left;">Bill length in millimeters</td>
<td style="text-align: left;">numeric</td>
</tr>
<tr class="even">
<td style="text-align: left;">bill_depth_mm</td>
<td style="text-align: left;">Bill depth in millimeters</td>
<td style="text-align: left;">numeric</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: left;">Flipper length in millimeters</td>
<td style="text-align: left;">integer</td>
</tr>
<tr class="even">
<td style="text-align: left;">body_mass_g</td>
<td style="text-align: left;">Body mass in grams</td>
<td style="text-align: left;">integer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sex</td>
<td style="text-align: left;">Penguin sex (female, male)</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">Study year (2007, 2008, 2009)</td>
<td style="text-align: left;">integer</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="missing-data-assessment" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="missing-data-assessment"><span class="header-section-number">3.2</span> Missing Data Assessment</h2>
<p>Before diving into analysis, let’s check for missing values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check for missing values</span></span>
<span id="cb12-2">missing_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise_all</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(.))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>(), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variable"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Missing_Count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Percentage =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(Missing_Count <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Missing_Count <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(missing_summary) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb12-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(missing_summary, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Missing Values Summary"</span>)</span>
<span id="cb12-10">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb12-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ No missing values found!"</span>)</span>
<span id="cb12-12">}</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Missing Values Summary</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Missing_Count</th>
<th style="text-align: right;">Percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">bill_depth_mm</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">body_mass_g</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sex</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">3.2</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create clean dataset for analysis</span></span>
<span id="cb13-2">penguins_clean <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">drop_na</span>()</span>
<span id="cb13-4"></span>
<span id="cb13-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📊 After removing missing values:"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📊 After removing missing values:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">   Original dataset:"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rows"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Original dataset: 344 rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">   Clean dataset:"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rows"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Clean dataset: 333 rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">   Observations removed:"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(penguins_clean))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Observations removed: 11</code></pre>
</div>
</div>
</section>
</section>
<section id="exploratory-data-analysis" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Exploratory Data Analysis</h1>
<section id="species-distribution" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="species-distribution"><span class="header-section-number">4.1</span> Species Distribution</h2>
<p>Let’s start by understanding the composition of our penguin community:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Species count and proportions</span></span>
<span id="cb21-2">species_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">percentage =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(count <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(count) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb21-5"></span>
<span id="cb21-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualization</span></span>
<span id="cb21-7">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(species_summary, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> count, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(count, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">("</span>, percentage, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%)"</span>)), </span>
<span id="cb21-10">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Penguin Species Distribution"</span>,</span>
<span id="cb21-13">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sample sizes across the three Antarctic species"</span>,</span>
<span id="cb21-14">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ylim</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(species_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>count) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.15</span>)</span>
<span id="cb21-18"></span>
<span id="cb21-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(p1)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/species-distribution.png" class="img-fluid figure-img"></p>
<figcaption>Species distribution showing the sample sizes for each penguin species in our dataset</figcaption>
</figure>
</div>
</section>
<section id="geographic-distribution" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="geographic-distribution"><span class="header-section-number">4.2</span> Geographic Distribution</h2>
<p>Now let’s see where our penguins call home:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Island distribution by species</span></span>
<span id="cb22-2">island_species <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(island, species) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(island) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">total =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(n),</span>
<span id="cb22-6">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">percentage =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> total <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb22-7"></span>
<span id="cb22-8">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(island_species, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> island, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb22-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stack"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb22-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb22-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Penguin Distribution Across Islands"</span>,</span>
<span id="cb22-12">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species composition by island location"</span>,</span>
<span id="cb22-13">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Island"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Count"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb22-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb22-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span>
<span id="cb22-16"></span>
<span id="cb22-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(p2)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/island-distribution.png" class="img-fluid figure-img"></p>
<figcaption>Geographic distribution showing how different penguin species are distributed across the three islands</figcaption>
</figure>
</div>
</section>
<section id="morphometric-measurements-first-look" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="morphometric-measurements-first-look"><span class="header-section-number">4.3</span> Morphometric Measurements: First Look</h2>
<p>Let’s examine the distributions of our key morphometric variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create distribution plots for morphometric variables</span></span>
<span id="cb23-2">p3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> body_mass_g)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"steelblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass Distribution"</span>, </span>
<span id="cb23-5">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass (g)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Count"</span>)</span>
<span id="cb23-6"></span>
<span id="cb23-7">p4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> bill_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkgreen"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length Distribution"</span>, </span>
<span id="cb23-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Count"</span>)</span>
<span id="cb23-11"></span>
<span id="cb23-12">p5 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> bill_depth_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"orange"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth Distribution"</span>, </span>
<span id="cb23-15">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Count"</span>)</span>
<span id="cb23-16"></span>
<span id="cb23-17">p6 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"purple"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length Distribution"</span>, </span>
<span id="cb23-20">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Count"</span>)</span>
<span id="cb23-21"></span>
<span id="cb23-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Combine plots</span></span>
<span id="cb23-23">morphometric_distributions <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (p3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p4) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (p5 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p6)</span>
<span id="cb23-24"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(morphometric_distributions)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/morphometric-distributions.png" class="img-fluid figure-img"></p>
<figcaption>Distribution plots showing the shape and spread of key morphometric measurements</figcaption>
</figure>
</div>
</section>
</section>
<section id="species-specific-patterns" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Species-Specific Patterns</h1>
<p>One of the most important aspects of biological data is understanding how patterns differ between groups. Let’s explore species-specific characteristics:</p>
<section id="morphometric-differences-by-species" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="morphometric-differences-by-species"><span class="header-section-number">5.1</span> Morphometric Differences by Species</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Summary statistics by species</span></span>
<span id="cb24-2">morphometric_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb24-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(species) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb24-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb24-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb24-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_mass_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(body_mass_g), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb24-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_mass_sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(body_mass_g), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb24-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bill_length_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(bill_length_mm), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb24-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bill_depth_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(bill_depth_mm), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb24-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">flipper_length_mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(flipper_length_mm), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb24-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.groups =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span></span>
<span id="cb24-12">  )</span>
<span id="cb24-13"></span>
<span id="cb24-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(morphometric_summary, </span>
<span id="cb24-15">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Morphometric Summary Statistics by Species"</span>,</span>
<span id="cb24-16">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"N"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass (g)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"±SD"</span>, </span>
<span id="cb24-17">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length (mm)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth (mm)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>))</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Morphometric Summary Statistics by Species</caption>
<colgroup>
<col style="width: 11%">
<col style="width: 4%">
<col style="width: 16%">
<col style="width: 4%">
<col style="width: 20%">
<col style="width: 18%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Species</th>
<th style="text-align: right;">N</th>
<th style="text-align: right;">Body Mass (g)</th>
<th style="text-align: right;">±SD</th>
<th style="text-align: right;">Bill Length (mm)</th>
<th style="text-align: right;">Bill Depth (mm)</th>
<th style="text-align: right;">Flipper Length (mm)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">3706</td>
<td style="text-align: right;">459</td>
<td style="text-align: right;">38.8</td>
<td style="text-align: right;">18.3</td>
<td style="text-align: right;">190.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">3733</td>
<td style="text-align: right;">384</td>
<td style="text-align: right;">48.8</td>
<td style="text-align: right;">18.4</td>
<td style="text-align: right;">195.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">5092</td>
<td style="text-align: right;">501</td>
<td style="text-align: right;">47.6</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">217.2</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="visual-comparison-across-species" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="visual-comparison-across-species"><span class="header-section-number">5.2</span> Visual Comparison Across Species</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Box plots for each morphometric variable by species</span></span>
<span id="cb25-2">p7 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass by Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass (g)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb25-7"></span>
<span id="cb25-8">p8 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length by Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb25-13"></span>
<span id="cb25-14">p9 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length by Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length (mm)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb25-19"></span>
<span id="cb25-20">p10 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> species, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_depth_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth by Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Depth (mm)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span>
<span id="cb25-25"></span>
<span id="cb25-26">species_comparison <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (p7 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p8) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (p9 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p10)</span>
<span id="cb25-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(species_comparison)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/species-comparison.png" class="img-fluid figure-img"></p>
<figcaption>Box plots comparing morphometric measurements across the three penguin species</figcaption>
</figure>
</div>
</section>
</section>
<section id="correlation-analysis" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Correlation Analysis</h1>
<p>Understanding the relationships between variables is crucial for regression modeling:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate correlation matrix for numeric variables</span></span>
<span id="cb26-2">numeric_vars <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb26-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(bill_length_mm, bill_depth_mm, flipper_length_mm, body_mass_g)</span>
<span id="cb26-4"></span>
<span id="cb26-5">correlation_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(numeric_vars)</span>
<span id="cb26-6"></span>
<span id="cb26-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display correlation matrix</span></span>
<span id="cb26-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(correlation_matrix, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), </span>
<span id="cb26-9">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Correlation Matrix of Morphometric Variables"</span>)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Correlation Matrix of Morphometric Variables</caption>
<colgroup>
<col style="width: 23%">
<col style="width: 19%">
<col style="width: 18%">
<col style="width: 23%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">bill_length_mm</th>
<th style="text-align: right;">bill_depth_mm</th>
<th style="text-align: right;">flipper_length_mm</th>
<th style="text-align: right;">body_mass_g</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">-0.229</td>
<td style="text-align: right;">0.653</td>
<td style="text-align: right;">0.589</td>
</tr>
<tr class="even">
<td style="text-align: left;">bill_depth_mm</td>
<td style="text-align: right;">-0.229</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">-0.578</td>
<td style="text-align: right;">-0.472</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">0.653</td>
<td style="text-align: right;">-0.578</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">0.873</td>
</tr>
<tr class="even">
<td style="text-align: left;">body_mass_g</td>
<td style="text-align: right;">0.589</td>
<td style="text-align: right;">-0.472</td>
<td style="text-align: right;">0.873</td>
<td style="text-align: right;">1.000</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create correlation plot</span></span>
<span id="cb27-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">corrplot</span>(correlation_matrix, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"upper"</span>, </span>
<span id="cb27-3">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hclust"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tl.cex =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tl.col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>,</span>
<span id="cb27-4">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">addCoef.col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">number.cex =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>,</span>
<span id="cb27-5">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Morphometric Variable Correlations"</span>,</span>
<span id="cb27-6">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mar =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/correlation-matrix.png" class="img-fluid figure-img"></p>
<figcaption>Correlation matrix showing the strength of relationships between morphometric variables</figcaption>
</figure>
</div>
<section id="key-correlation-insights" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="key-correlation-insights"><span class="header-section-number">6.1</span> Key Correlation Insights</h2>
<p>From our correlation analysis, we can see that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract key correlations with body mass</span></span>
<span id="cb28-2">body_mass_correlations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> correlation_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body_mass_g"</span>, ] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb28-5"></span>
<span id="cb28-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔍 Correlations with Body Mass:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>🔍 Correlations with Body Mass:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(body_mass_correlations)) {</span>
<span id="cb30-2">  var_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(body_mass_correlations)[i]</span>
<span id="cb30-3">  correlation <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> body_mass_correlations[i]</span>
<span id="cb30-4">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(var_name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body_mass_g"</span>) {</span>
<span id="cb30-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   %s: %s</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, var_name, correlation))</span>
<span id="cb30-6">  }</span>
<span id="cb30-7">}</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   flipper_length_mm: 0.873
   bill_length_mm: 0.589
   bill_depth_mm: -0.472</code></pre>
</div>
</div>
</section>
</section>
<section id="simple-linear-regression" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Simple Linear Regression</h1>
<p>Now let’s build our first predictive model using the strongest individual predictor:</p>
<section id="flipper-length-as-primary-predictor" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="flipper-length-as-primary-predictor"><span class="header-section-number">7.1</span> Flipper Length as Primary Predictor</h2>
<p>Based on our correlation analysis, flipper length shows the strongest relationship with body mass. Let’s explore this relationship:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Scatter plot of flipper length vs body mass</span></span>
<span id="cb32-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_clean, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass vs Flipper Length"</span>,</span>
<span id="cb32-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Strong positive relationship across all species"</span>,</span>
<span id="cb32-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>, </span>
<span id="cb32-9">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Body Mass (g)"</span>,</span>
<span id="cb32-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb32-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/flipper-body-mass-relationship.png" class="img-fluid figure-img"></p>
<figcaption>Scatter plot showing the relationship between flipper length and body mass across species</figcaption>
</figure>
</div>
</section>
<section id="building-the-simple-linear-model" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="building-the-simple-linear-model"><span class="header-section-number">7.2</span> Building the Simple Linear Model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fit simple linear regression model</span></span>
<span id="cb33-2">simple_model <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> penguins_clean)</span>
<span id="cb33-3"></span>
<span id="cb33-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display model summary</span></span>
<span id="cb33-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(simple_model)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = body_mass_g ~ flipper_length_mm, data = penguins_clean)

Residuals:
     Min       1Q   Median       3Q      Max 
-1057.33  -259.79   -12.24   242.97  1293.89 

Coefficients:
                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       -5872.09     310.29  -18.93   &lt;2e-16 ***
flipper_length_mm    50.15       1.54   32.56   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 393.3 on 331 degrees of freedom
Multiple R-squared:  0.7621,    Adjusted R-squared:  0.7614 
F-statistic:  1060 on 1 and 331 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract key metrics using broom</span></span>
<span id="cb35-2">model_metrics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(simple_model)</span>
<span id="cb35-3">model_coefficients <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(simple_model)</span>
<span id="cb35-4"></span>
<span id="cb35-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📊 Simple Linear Model Results:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>📊 Simple Linear Model Results:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"===============================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>===============================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R-squared: %.3f (%.1f%% of variance explained)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb39-2">            model_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared, model_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>r.squared <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R-squared: 0.762 (76.2% of variance explained)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMSE: %.1f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(simple_model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>residuals<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>RMSE: 392.2 grams</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F-statistic: %.1f (p &lt; 0.001)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, model_metrics<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>statistic))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>F-statistic: 1060.3 (p &lt; 0.001)</code></pre>
</div>
</div>
</section>
<section id="model-interpretation" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="model-interpretation"><span class="header-section-number">7.3</span> Model Interpretation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract and interpret coefficients</span></span>
<span id="cb45-2">intercept <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model_coefficients<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb45-3">slope <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model_coefficients<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>estimate[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb45-4"></span>
<span id="cb45-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">🧮 Model Interpretation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
🧮 Model Interpretation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"========================</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>========================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Intercept: %.1f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, intercept))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Intercept: -5872.1 grams</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Slope: %.1f grams per mm of flipper length</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, slope))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Slope: 50.2 grams per mm of flipper length</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">📝 Biological Interpretation:</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
📝 Biological Interpretation:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• For every 1mm increase in flipper length, body mass increases by approximately %.1f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, slope))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• For every 1mm increase in flipper length, body mass increases by approximately 50.2 grams</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• A penguin with 200mm flippers is predicted to weigh %.0f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb57-2">            intercept <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> slope <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• A penguin with 200mm flippers is predicted to weigh 4159 grams</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"• A penguin with 220mm flippers is predicted to weigh %.0f grams</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, </span>
<span id="cb59-2">            intercept <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> slope <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">220</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>• A penguin with 220mm flippers is predicted to weigh 5162 grams</code></pre>
</div>
</div>
</section>
</section>
<section id="model-visualization-and-residuals" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Model Visualization and Residuals</h1>
<p>Let’s visualize our model performance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add predictions and residuals to our data</span></span>
<span id="cb61-2">penguins_with_predictions <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> penguins_clean <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb61-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb61-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">predicted =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(simple_model),</span>
<span id="cb61-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">residuals =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">residuals</span>(simple_model)</span>
<span id="cb61-6">  )</span>
<span id="cb61-7"></span>
<span id="cb61-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Predicted vs actual plot</span></span>
<span id="cb61-9">p11 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_with_predictions, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> predicted, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> body_mass_g)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">slope =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">intercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted vs Actual Body Mass"</span>,</span>
<span id="cb61-14">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Red line shows perfect prediction"</span>,</span>
<span id="cb61-15">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>, </span>
<span id="cb61-16">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Actual Body Mass (g)"</span>,</span>
<span id="cb61-17">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>)</span>
<span id="cb61-18"></span>
<span id="cb61-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Residuals plot</span></span>
<span id="cb61-20">p12 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(penguins_with_predictions, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> predicted, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> residuals)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> species), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> penguin_colors) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb61-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals vs Predicted Values"</span>,</span>
<span id="cb61-25">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Checking for patterns in model errors"</span>,</span>
<span id="cb61-26">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Predicted Body Mass (g)"</span>, </span>
<span id="cb61-27">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Residuals (g)"</span>,</span>
<span id="cb61-28">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span>)</span>
<span id="cb61-29"></span>
<span id="cb61-30">model_diagnostics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p11 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p12</span>
<span id="cb61-31"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(model_diagnostics)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/palmer_penguins_part1/model-diagnostics.png" class="img-fluid figure-img"></p>
<figcaption>Model diagnostic plots showing predicted vs actual values and residual patterns</figcaption>
</figure>
</div>
</section>
<section id="key-findings-and-next-steps" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Key Findings and Next Steps</h1>
<section id="what-weve-learned-in-part-1" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="what-weve-learned-in-part-1"><span class="header-section-number">9.1</span> What We’ve Learned in Part 1</h2>
<p>Our exploratory analysis and simple regression modeling revealed several important insights:</p>
<ol type="1">
<li><p><strong>Strong Morphometric Relationships</strong>: Flipper length emerged as the strongest single predictor of body mass (R² = 0.759), explaining about 76% of the variance.</p></li>
<li><p><strong>Species Differences</strong>: Clear morphometric differences exist between species, with Gentoo penguins being notably larger across all measurements.</p></li>
<li><p><strong>Data Quality</strong>: The Palmer penguins dataset is well-structured with minimal missing data, making it excellent for modeling.</p></li>
<li><p><strong>Linear Relationship</strong>: The relationship between flipper length and body mass appears strongly linear, supporting our regression approach.</p></li>
</ol>
</section>
<section id="looking-ahead-to-part-2" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="looking-ahead-to-part-2"><span class="header-section-number">9.2</span> Looking Ahead to Part 2</h2>
<p>While our simple model performs well, we noticed some patterns in the residuals that suggest we can improve our predictions. In Part 2, we’ll explore:</p>
<ul>
<li>Multiple regression incorporating bill measurements</li>
<li>The dramatic impact of including species information</li>
<li>How different predictors interact with each other</li>
<li>Model comparison techniques</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🎯 Quick Preview of Part 2
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the next installment, we’ll discover that adding species information to our model improves R² from 0.759 to over 0.860 - a substantial improvement that highlights the importance of biological groupings in morphometric analysis!</p>
</div>
</div>
</section>
</section>
<section id="reproducibility-information" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Reproducibility Information</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] knitr_1.50           patchwork_1.3.1      GGally_2.2.1        
 [4] corrplot_0.95        broom_1.0.8          lubridate_1.9.4     
 [7] forcats_1.0.0        stringr_1.5.1        dplyr_1.1.4         
[10] purrr_1.0.4          readr_2.1.5          tidyr_1.3.1         
[13] tibble_3.3.0         ggplot2_3.5.2        tidyverse_2.0.0     
[16] palmerpenguins_0.1.1

loaded via a namespace (and not attached):
 [1] generics_0.1.4     stringi_1.8.7      lattice_0.22-6     hms_1.1.3         
 [5] digest_0.6.37      magrittr_2.0.3     evaluate_1.0.3     grid_4.5.0        
 [9] timechange_0.3.0   RColorBrewer_1.1-3 fastmap_1.2.0      Matrix_1.7-3      
[13] plyr_1.8.9         jsonlite_2.0.0     backports_1.5.0    mgcv_1.9-3        
[17] scales_1.4.0       cli_3.6.5          rlang_1.1.6        splines_4.5.0     
[21] withr_3.0.2        yaml_2.3.10        tools_4.5.0        tzdb_0.5.0        
[25] ggstats_0.9.0      vctrs_0.6.5        R6_2.6.1           lifecycle_1.0.4   
[29] htmlwidgets_1.6.4  pkgconfig_2.0.3    pillar_1.10.2      gtable_0.3.6      
[33] glue_1.8.0         Rcpp_1.0.14        xfun_0.52          tidyselect_1.2.1  
[37] farver_2.1.2       htmltools_0.5.8.1  nlme_3.1-168       rmarkdown_2.29    
[41] labeling_0.4.3     compiler_4.5.0    </code></pre>
</div>
</div>
<hr>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🐧 Continue Your Journey
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ready for the next part? Check out <a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a> where we’ll dramatically improve our model by incorporating multiple predictors and species information!</p>
<p><strong>Full Series:</strong> 1. <strong>Part 1: EDA and Simple Regression</strong> (This post) ✅ 2. <a href="../palmer_penguins_part2/">Part 2: Multiple Regression and Species Effects</a> 3. <a href="../palmer_penguins_part3/">Part 3: Advanced Models and Cross-Validation</a> 4. <a href="../palmer_penguins_part4/">Part 4: Model Diagnostics and Interpretation</a> 5. <a href="../palmer_penguins_part5/">Part 5: Random Forest vs Linear Models</a></p>
</div>
</div>
<p><em>Have questions about this analysis or suggestions for the series? Feel free to reach out on <a href="https://twitter.com/yourhandle">Twitter</a> or <a href="https://linkedin.com/in/yourprofile">LinkedIn</a>. You can also find the complete code for this series on <a href="https://github.com/yourusername/palmer-penguins-series">GitHub</a>.</em></p>
<p><strong>About the Author:</strong> [Your name] is a [your role] specializing in statistical ecology and biostatistics. This series demonstrates best practices for exploratory data analysis and regression modeling in biological research.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Name, Your},
  title = {Palmer {Penguins} {Data} {Analysis} {Series} {(Part} 1):
    {Exploratory} {Data} {Analysis} and {Simple} {Regression}},
  date = {2025-01-01},
  url = {https://focusonr.org/posts/palmer_penguins_part1/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and Your Name. 2025. <span>“Palmer Penguins
Data Analysis Series (Part 1): Exploratory Data Analysis and Simple
Regression.”</span> January 1, 2025. <a href="https://focusonr.org/posts/palmer_penguins_part1/">https://focusonr.org/posts/palmer_penguins_part1/</a>.
</div></div></section></div> ]]></description>
  <category>R Programming</category>
  <category>Data Science</category>
  <category>Statistical Computing</category>
  <category>Exploratory Data Analysis</category>
  <category>Palmer Penguins</category>
  <guid>https://focusonr.org/posts/palmer_penguins_part1/</guid>
  <pubDate>Wed, 01 Jan 2025 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/palmer_penguins_part1/penguin-hero-part1.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Your Technical Blog Post Title</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Your Name</dc:creator>
  <link>https://focusonr.org/posts/setupquarto/quarto-blog-template.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>Brief introduction that:</p>
<ul>
<li>Hooks the reader with an interesting problem or observation</li>
<li>States the purpose of your analysis/tutorial</li>
<li>Outlines what readers will learn or gain</li>
</ul>
</section>
<section id="required-packages-and-setup" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="required-packages-and-setup"><span class="header-section-number">2</span> Required Packages and Setup</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># List the packages readers will need</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add other packages</span></span></code></pre></div>
</div>
<p>Brief explanation of why these packages were chosen and any setup requirements.</p>
</section>
<section id="the-problemdata" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="the-problemdata"><span class="header-section-number">3</span> The Problem/Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Data loading and initial preparation</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load sample dataset</span></span>
<span id="cb2-3">data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mtcars</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(data)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 32
Columns: 11
$ mpg  &lt;dbl&gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8,…
$ cyl  &lt;dbl&gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8,…
$ disp &lt;dbl&gt; 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8, 16…
$ hp   &lt;dbl&gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180…
$ drat &lt;dbl&gt; 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92,…
$ wt   &lt;dbl&gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, 3.…
$ qsec &lt;dbl&gt; 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00, 22.90, 18…
$ vs   &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0,…
$ am   &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0,…
$ gear &lt;dbl&gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3,…
$ carb &lt;dbl&gt; 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2,…</code></pre>
</div>
</div>
<ul>
<li>Describe your data source</li>
<li>Explain the problem you’re addressing</li>
<li>Share any initial data preparation steps</li>
</ul>
</section>
<section id="analysistutorial-steps" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="analysistutorial-steps"><span class="header-section-number">4</span> Analysis/Tutorial Steps</h2>
<section id="step-1-initial-data-exploration" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="step-1-initial-data-exploration"><span class="header-section-number">4.1</span> Step 1: Initial Data Exploration</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Your analysis code here</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(mtcars)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 32
Columns: 11
$ mpg  &lt;dbl&gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8,…
$ cyl  &lt;dbl&gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8,…
$ disp &lt;dbl&gt; 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8, 16…
$ hp   &lt;dbl&gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180…
$ drat &lt;dbl&gt; 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92,…
$ wt   &lt;dbl&gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, 3.…
$ qsec &lt;dbl&gt; 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00, 22.90, 18…
$ vs   &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0,…
$ am   &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0,…
$ gear &lt;dbl&gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3,…
$ carb &lt;dbl&gt; 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2,…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>cyl, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>mpg)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/setupquarto/quarto-blog-template_files/figure-html/exploration-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Description of your visualization</figcaption>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Your visualization</span></span></code></pre></div>
</div>
<p>Explain what you found and why it’s interesting.</p>
</section>
<section id="step-2-main-analysis" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="step-2-main-analysis"><span class="header-section-number">4.2</span> Step 2: Main Analysis</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Core analysis code</span></span></code></pre></div>
</div>
<p>Walk through your analysis, explaining: - Why you chose this approach - What the code does - What the results mean</p>
</section>
<section id="step-3-results-and-visualization" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="step-3-results-and-visualization"><span class="header-section-number">4.3</span> Step 3: Results and Visualization</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create compelling visualizations</span></span></code></pre></div>
</div>
<p>Interpret your results and explain their significance.</p>
</section>
</section>
<section id="key-takeaways" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">5</span> Key Takeaways</h2>
<ul>
<li>Bullet point summary of main findings</li>
<li>Practical applications</li>
<li>Important insights</li>
</ul>
</section>
<section id="reproducibility" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="reproducibility"><span class="header-section-number">6</span> Reproducibility</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Print session info for reproducibility</span></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sessionInfo</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] here_1.0.1      lubridate_1.9.4 forcats_1.0.0   stringr_1.5.1  
 [5] dplyr_1.1.4     purrr_1.0.4     readr_2.1.5     tidyr_1.3.1    
 [9] tibble_3.3.0    ggplot2_3.5.2   tidyverse_2.0.0

loaded via a namespace (and not attached):
 [1] gtable_0.3.6       jsonlite_2.0.0     compiler_4.5.0     tidyselect_1.2.1  
 [5] scales_1.4.0       yaml_2.3.10        fastmap_1.2.0      R6_2.6.1          
 [9] labeling_0.4.3     generics_0.1.4     knitr_1.50         htmlwidgets_1.6.4 
[13] rprojroot_2.0.4    pillar_1.10.2      RColorBrewer_1.1-3 tzdb_0.5.0        
[17] rlang_1.1.6        stringi_1.8.7      xfun_0.52          timechange_0.3.0  
[21] cli_3.6.5          withr_3.0.2        magrittr_2.0.3     digest_0.6.37     
[25] grid_4.5.0         hms_1.1.3          lifecycle_1.0.4    vctrs_0.6.5       
[29] evaluate_1.0.3     glue_1.8.0         farver_2.1.2       rmarkdown_2.29    
[33] tools_4.5.0        pkgconfig_2.0.3    htmltools_0.5.8.1 </code></pre>
</div>
</div>
</section>
<section id="next-steps" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="next-steps"><span class="header-section-number">7</span> Next Steps</h2>
<ul>
<li>Suggest areas for further exploration</li>
<li>Mention potential improvements</li>
<li>Invite reader engagement</li>
</ul>
</section>
<section id="references" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="references"><span class="header-section-number">8</span> References</h2>
<ul>
<li>Cite your sources</li>
<li>Link to relevant documentation</li>
<li>Credit other contributors</li>
</ul>
<!-- R-bloggers submission metadata -->
<!-- Tags: R, your-topic-tags -->
<!-- Category: R -->


<!-- -->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2024,
  author = {(Ryy) Glenn Thomas, Ronald and Name, Your},
  title = {Your {Technical} {Blog} {Post} {Title}},
  date = {2024-12-22},
  url = {https://focusonr.org/posts/setupquarto/quarto-blog-template.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2024" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and Your Name. 2024. <span>“Your Technical
Blog Post Title.”</span> December 22, 2024. <a href="https://focusonr.org/posts/setupquarto/quarto-blog-template.html">https://focusonr.org/posts/setupquarto/quarto-blog-template.html</a>.
</div></div></section></div> ]]></description>
  <category>R</category>
  <category>Analysis</category>
  <category>Tutorial</category>
  <guid>https://focusonr.org/posts/setupquarto/quarto-blog-template.html</guid>
  <pubDate>Sun, 22 Dec 2024 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/setupquarto/~/img/Rlogo.png" medium="image" type="image/png"/>
</item>
<item>
  <title>Draft Posts</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/drafts.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
No Draft Posts Currently
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are currently no draft posts in development. Posts marked with <code>draft: true</code> in their YAML frontmatter will appear here instead of the main blog listing.</p>
</div>
</div>
<section id="how-to-create-draft-posts" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="how-to-create-draft-posts"><span class="header-section-number">1</span> How to Create Draft Posts</h2>
<p>Posts marked as drafts are excluded from: - Main blog listing - RSS feeds<br>
- Site search indexing - External link sharing</p>
<p><strong>To create a draft post:</strong> 1. Add <code>draft: true</code> to the post’s YAML frontmatter 2. The post will appear on this page instead of the main blog</p>
<p><strong>To publish a draft:</strong> 1. Remove the <code>draft: true</code> line from the post’s YAML frontmatter 2. The post will appear on the main blog listing</p>
<p><strong>Using the draft management script:</strong></p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Mark a post as draft</span></span>
<span id="cb1-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">./manage_drafts.sh</span> draft posts/my-post/</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Publish a draft</span></span>
<span id="cb1-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">./manage_drafts.sh</span> publish posts/my-post/</span></code></pre></div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas,
  author = {(Ryy) Glenn Thomas, Ronald},
  title = {Draft {Posts}},
  url = {https://focusonr.org/posts/drafts.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald. n.d. <span>“Draft Posts.”</span> <a href="https://focusonr.org/posts/drafts.html">https://focusonr.org/posts/drafts.html</a>.
</div></div></section></div> ]]></description>
  <guid>https://focusonr.org/posts/drafts.html</guid>
  <pubDate>Wed, 02 Jul 2025 15:55:42 GMT</pubDate>
</item>
</channel>
</rss>
