<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Thomas Lab</title>
<link>https://focusonr.org/posts/</link>
<atom:link href="https://focusonr.org/posts/index.xml" rel="self" type="application/rss+xml"/>
<description>Technical writing on R, data science, and research computing</description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Sun, 06 Jul 2025 02:25:01 GMT</lastBuildDate>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/formula_parsing/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/formula_parsing/</guid>
  <pubDate>Sun, 06 Jul 2025 02:25:01 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/formula_parsing/img/Rlogo.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/ultisnips_python_post/</link>
  <description><![CDATA[ undefined ]]></description>
  <category>ultisnips</category>
  <category>python</category>
  <guid>https://focusonr.org/posts/ultisnips_python_post/</guid>
  <pubDate>Sun, 06 Jul 2025 02:25:01 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/ultisnips_python_post/img/python.png" medium="image" type="image/png" height="49" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/share_rmd_code_via_docker/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/share_rmd_code_via_docker/</guid>
  <pubDate>Sun, 06 Jul 2025 02:25:01 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/share_rmd_code_via_docker/img/Rlogo.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/share_shiny_code_via_docker/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/share_shiny_code_via_docker/</guid>
  <pubDate>Sun, 06 Jul 2025 02:25:01 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/share_shiny_code_via_docker/img/Rlogo.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Research Compendia for Full Reproducibility in R: A zzrrtools, renv, draft: true and Docker Strategy</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>R.G. Thomas</dc:creator>
  <link>https://focusonr.org/posts/share_R_code_via_docker_p25/</link>
  <description><![CDATA[ 




<section id="executive-summary" class="level1 unnumbered">
<h1 class="unnumbered">Executive Summary</h1>
<p>Reproducibility is key to conducting data analysis, yet in practice, achieving it consistently with R workflows can be quite challenging. R projects frequently break when transferred between computers due to mismatched R versions, package dependencies, or inconsistent project organization. This white paper describes an approach to solving this problem by combining three tools: <strong>zzrrtools</strong> for creating structured research compendia, <strong>renv</strong> for R package management, and <strong>Docker</strong> for containerizing the computing environment. Together, these tools ensure that an R workflow runs identically across different computers by providing standardized project structure, identical R packages and versions, consistent R versions, and the same operating system libraries as the original setup.</p>
</section>
<section id="motivation" class="level1 unnumbered">
<h1 class="unnumbered">Motivation</h1>
<p>Imagine you’ve written code that you want to share with a colleague. At first glance, this may seem like a straightforward task—simply share the files electronically. However, ensuring that your colleague can run the code without errors, and obtain the same results is often much more challenging than anticipated.</p>
<p>When sharing R code, several potential problems can arise that can lead to code that won’t run or won’t match your results:</p>
<ul>
<li>Different versions of R installed on each machine</li>
<li>Mismatched R package versions</li>
<li>Missing or mismatched system dependencies (like pandoc or LaTeX)</li>
<li>Missing supplemental files referenced by the program (bibliography files, LaTeX preambles, datasets, images)</li>
<li>Different R startup configurations (.Rprofile or .Renviron)</li>
<li>Different Operating Systems (macOS, Windows, Linux, etc.)</li>
</ul>
<p>A real-world scenario often unfolds like this:</p>
<ol type="1">
<li>You email your analysis files to a colleague</li>
<li>They attempt to run your analysis with the commands you provided</li>
<li>But R isn’t installed on their system</li>
<li>After installing R, they get an error: “could not find function ‘render’” since they don’t have the <code>rmarkdown</code> package installed</li>
<li>They install the rmarkdown package and run the R command again</li>
<li>Now pandoc is missing</li>
<li>After installing pandoc, a required package, say <code>ggplot</code>, is missing</li>
<li>After installing <code>ggplot</code>, several external files are missing (e.g.&nbsp; bibliography, images)</li>
<li>And so on…</li>
</ol>
<p>This cycle of troubleshooting can be time-consuming and frustrating. Even when the code eventually runs, there’s no guarantee that they will get the same results that you did.</p>
<p>To ensure true reproducibility, your colleague should have a computing environment as similar to yours as possible. Given the dynamic nature of open source software, not to mention hardware and operating system differences, this can be difficult to achieve through manual installation and configuration.</p>
<p>The approach outlined in this white paper offers a systematic solution. Rather than sending standalone text files, with modest additional effort, you can provide a complete, containerized, hardware and OS independent environment that includes everything needed to run your analysis. With this approach, your colleague can run a simple command like:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb1-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb1-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/analysis/figures:/home/analyst/output"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb1-4">  ghcr.io/username/penguins_analysis:v1.0</span></code></pre></div>
<p>(The details of this docker command are explained below.)</p>
<p>This creates an identical R environment on their desktop, ready for them to run or modify your code with confidence that it will work as intended.</p>
<p>The Docker command shown above represents the end goal of this white paper’s approach, but achieving this level of reproducibility requires understanding and implementing three complementary technologies. The following sections provide a framework for building such reproducible environments from the ground up.</p>
</section>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<section id="the-challenge-of-reproducibility-in-r" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="the-challenge-of-reproducibility-in-r"><span class="header-section-number">1.1</span> The Challenge of Reproducibility in R</h2>
<p>R has become a standard tool for data science and statistical analysis across numerous scientific disciplines. However, as R projects grow in complexity, they often develop complex webs of dependencies that can make sharing and reproducing analyses difficult. Some common challenges include:</p>
<ul>
<li>Different R versions across machines</li>
<li>Incompatible package versions</li>
<li>Missing system-level dependencies</li>
<li>Operating system differences (macOS vs.&nbsp;Windows vs.&nbsp;Linux)</li>
<li>Conflicts with other installed packages</li>
<li>R startup files (.Rprofile, .Renviron, .RData) that can affect code behavior</li>
</ul>
<p>These challenges often manifest as the frustrating “it works on my machine” problem, where analysis code runs perfectly for the original author but fails when others attempt to use it. This undermines the scientific and collaborative potential of R-based analyses.</p>
</section>
<section id="a-three-level-solution" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="a-three-level-solution"><span class="header-section-number">1.2</span> A Three-Level Solution</h2>
<p>To address these challenges, we need to tackle reproducibility at three distinct levels:</p>
<ol type="1">
<li><p><strong>Project-level reproducibility</strong>: Ensuring consistent project structure and organization using research compendium standards</p></li>
<li><p><strong>Package-level reproducibility</strong>: Ensuring exact package versions and dependencies are maintained</p></li>
<li><p><strong>System-level reproducibility</strong>: Guaranteeing consistent R versions, operating system, and system libraries</p></li>
</ol>
<p>The strategy presented in this white paper leverages <strong>zzrrtools</strong> for project-level structure, <strong>renv</strong> for package-level consistency, and <strong>Docker</strong> for system-level consistency. When combined, they provide a framework for end-to-end reproducible R workflows with proper research compendium organization.</p>
<p>With this three-level framework established, we can now examine how each tool addresses its specific layer of reproducibility. We begin with zzrrtools, which tackles the foundational challenge of project-level organization and provides the structural framework upon which package and system-level reproducibility can be built.</p>
</section>
</section>
<section id="zzrrtools-project-level-reproducibility" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> zzrrtools: Project-Level Reproducibility</h1>
<section id="what-is-zzrrtools" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="what-is-zzrrtools"><span class="header-section-number">2.1</span> What is zzrrtools?</h2>
<p><strong>zzrrtools</strong> is a Docker-first framework that creates reproducible research compendia with containerized development workflows. The framework extends the research compendium concept introduced by Ben Marwick’s rrtools, adding container-based development and automated dependency validation. Team members install zzrrtools once on their system, then can create or join any zzrrtools-based project using the same framework. A research compendium organizes digital research materials to enable others to inspect, reproduce, and extend the research.</p>
</section>
<section id="key-features-of-zzrrtools" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="key-features-of-zzrrtools"><span class="header-section-number">2.2</span> Key Features of zzrrtools</h2>
<p><strong>zzrrtools</strong> creates containerized research compendia with these key features:</p>
<ul>
<li><p><strong>Docker-first development</strong>: All workflows operate within containers, eliminating “works on my machine” issues</p></li>
<li><p><strong>Centralized framework</strong>: One-time zzrrtools installation enables consistent project creation and team collaboration</p></li>
<li><p><strong>Multi-service architecture</strong>: Provides specialized Docker environments for interactive R sessions, shell development, and paper rendering</p></li>
<li><p><strong>Flexible base images</strong>: Choice of minimal (rocker/r-ver) or pre-packaged (rgt47/r-pluspackages) Docker templates with common R packages</p></li>
<li><p><strong>Advanced dependency validation</strong>: Automated renv consistency checking with CRAN verification and pre-commit validation</p></li>
<li><p><strong>Shell-based workflows</strong>: Optimized for command-line development with rich automation via Make targets</p></li>
<li><p><strong>Team collaboration focus</strong>: Designed for multi-developer teams working on shared research projects</p></li>
</ul>
</section>
<section id="zzrrtools-workflow-enterprise-grade-team-collaboration" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="zzrrtools-workflow-enterprise-grade-team-collaboration"><span class="header-section-number">2.3</span> zzrrtools Workflow: Enterprise-Grade Team Collaboration</h2>
<p>The zzrrtools workflow implements a sophisticated two-tier Docker strategy designed for zero-friction team collaboration:</p>
<section id="two-tier-docker-architecture" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="two-tier-docker-architecture"><span class="header-section-number">2.3.1</span> <strong>Two-Tier Docker Architecture</strong></h3>
<p><strong>Tier 1: Team Core Images (Shared Infrastructure)</strong> - Project maintainer creates custom base images with team-specific packages - Published to Docker Hub for reproducible research and team access - Available in shell-optimized and RStudio-optimized variants - Automatically rebuilt and updated via GitHub Actions</p>
<p><strong>Tier 2: Personal Development Images (Individual Environments)</strong> - Built on top of team core images with personal dotfiles and preferences - Local-only images containing individual developer configurations - Instant setup for new team members with zero manual configuration</p>
</section>
<section id="project-initialization-workflow" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="project-initialization-workflow"><span class="header-section-number">2.3.2</span> <strong>Project Initialization Workflow</strong></h3>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Team lead creates custom core images for the project</span></span>
<span id="cb2-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">TEAM_NAME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rgt47"</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Docker Hub account for core images</span></span>
<span id="cb2-3"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">PROJECT_NAME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basename</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">))</span></span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy and customize team core template</span></span>
<span id="cb2-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cp</span> ~/bin/zzrrtools-support/templates/Dockerfile.pluspackages ./Dockerfile.teamcore</span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Edit Dockerfile.teamcore for team-specific packages:</span></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Add domain R packages (brms, targets, cmdstanr)</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Include system tools (JAGS, Stan, ImageMagick)</span></span>
<span id="cb2-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Set team R configurations</span></span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Build and publish team core images</span></span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Shell-optimized core (lightweight, fast startup)</span></span>
<span id="cb2-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-f</span> Dockerfile.teamcore <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> BASE_IMAGE=rocker/r-ver <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb2-16">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-shell:v1.0.0 .</span>
<span id="cb2-17"></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RStudio-optimized core (includes RStudio Server)</span></span>
<span id="cb2-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-f</span> Dockerfile.teamcore <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> BASE_IMAGE=rocker/rstudio <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb2-20">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-rstudio:v1.0.0 .</span>
<span id="cb2-21"></span>
<span id="cb2-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Push to Docker Hub for team access</span></span>
<span id="cb2-23"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> push <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-shell:v1.0.0</span>
<span id="cb2-24"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> push <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-rstudio:v1.0.0</span>
<span id="cb2-25"></span>
<span id="cb2-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Initialize zzrrtools project with custom team base</span></span>
<span id="cb2-27"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--base-image</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-shell <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dotfiles</span> ~/dotfiles</span></code></pre></div>
<p>This creates a complete research compendium with:</p>
<ul>
<li><strong>Automated team image management</strong> via GitHub Actions workflows</li>
<li><strong>Multi-service Docker architecture</strong> for different development interfaces</li>
<li><strong>Advanced renv validation</strong> with automated dependency synchronization</li>
<li><strong>Zero-setup team onboarding</strong> through pre-built core images</li>
<li><strong>Professional development environment</strong> with vim IDE and shell enhancements</li>
<li><strong>Hybrid privacy model</strong> with private code and public reproducible environments</li>
</ul>
</section>
<section id="team-member-onboarding-one-time-setup" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="team-member-onboarding-one-time-setup"><span class="header-section-number">2.3.3</span> <strong>Team Member Onboarding (One-Time Setup)</strong></h3>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. One-time zzrrtools framework installation</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">OWNER</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span>/zzrrtools.git ~/prj/zzrrtools</span>
<span id="cb3-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ~/prj/zzrrtools</span>
<span id="cb3-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">./install.sh</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adds zzrrtools command to system PATH</span></span>
<span id="cb3-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--help</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verify installation</span></span>
<span id="cb3-6"></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Per-project workflow (instant setup)</span></span>
<span id="cb3-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">TEAM</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span>/project.git</span>
<span id="cb3-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> project</span>
<span id="cb3-10"></span>
<span id="cb3-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Choose development interface and build personal environment</span></span>
<span id="cb3-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option A: Shell-based development (vim, zsh, command-line)</span></span>
<span id="cb3-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--base-image</span> team/projectcore-shell <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dotfiles</span> ~/.config/shell</span>
<span id="cb3-14"></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option B: RStudio-based development (web interface)</span></span>
<span id="cb3-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--base-image</span> team/projectcore-rstudio <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dotfiles</span> ~/.config/shell</span>
<span id="cb3-17"></span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Start development immediately</span></span>
<span id="cb3-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-zsh    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Enhanced shell environment</span></span>
<span id="cb3-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># OR</span></span>
<span id="cb3-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-rstudio  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Web-based RStudio at localhost:8787</span></span></code></pre></div>
</section>
<section id="integrated-renv-consistency-checking" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="integrated-renv-consistency-checking"><span class="header-section-number">2.3.4</span> Integrated renv Consistency Checking</h3>
<p>The workflow includes advanced renv management through the <code>check_renv_for_commit.R</code> script, which provides automated dependency validation and team conflict prevention. This script:</p>
<ul>
<li><strong>Scans multiple directories</strong> (R/, scripts/, analysis/) for package dependencies</li>
<li><strong>Validates against CRAN</strong> to ensure packages exist and are properly named<br>
</li>
<li><strong>Synchronizes dependencies</strong> across code files, DESCRIPTION, and renv.lock</li>
<li><strong>Provides automated fixes</strong> to maintain team environment consistency</li>
<li><strong>Integrates with CI/CD</strong> for fail-fast validation workflows</li>
</ul>
<p>Usage examples:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive dependency checking (development)</span></span>
<span id="cb4-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R</span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Auto-fix dependency issues</span></span>
<span id="cb4-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span></span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CI/CD validation with fail-fast</span></span>
<span id="cb4-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fail-on-issues</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--quiet</span></span>
<span id="cb4-9"></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Via Make targets (recommended)</span></span>
<span id="cb4-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check dependencies</span></span>
<span id="cb4-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv-fix      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fix dependency issues</span></span>
<span id="cb4-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fix in container</span></span></code></pre></div>
<p>This approach ensures collaborators can reliably reproduce package environments and CI/CD pipelines have all necessary dependency information.</p>
</section>
</section>
<section id="research-compendium-structure" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="research-compendium-structure"><span class="header-section-number">2.4</span> Research Compendium Structure</h2>
<p>The zzrrtools setup creates a directory structure that follows research compendium best practices. The structure includes organized data folders, analysis directories, testing frameworks, and workflows.</p>
<p><strong>Key organizational principles:</strong></p>
<ul>
<li><strong>Data management</strong>: Separate folders for raw, derived, and external data with proper documentation</li>
<li><strong>Analysis workflow</strong>: Dedicated spaces for papers, figures, tables, and working scripts<br>
</li>
<li><strong>Package structure</strong>: R package organization with documentation and testing</li>
<li><strong>Integration support</strong>: Works with Docker, GitHub Actions, and build systems</li>
</ul>
<p>This organizational framework provides the foundation for reproducible research while supporting team collaboration and automated workflows.</p>
</section>
<section id="iterative-development-workflow" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="iterative-development-workflow"><span class="header-section-number">2.5</span> Iterative Development Workflow</h2>
<p>For collaborative analysis development, the research compendium structure supports a phased approach that balances rapid iteration with publication-quality outputs:</p>
<section id="phase-1-exploration-development-scripts" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="phase-1-exploration-development-scripts"><span class="header-section-number">2.5.1</span> Phase 1: Exploration &amp; Development (<code>scripts/</code>)</h3>
<p>During active analysis development, team members should work primarily in the <code>scripts/</code> directory:</p>
<pre><code>scripts/
├── 01_data_exploration.R
├── 02_penguin_correlations.R  
├── 03_species_analysis.R
├── 04_body_mass_analysis.R    # Additional analysis
└── 05_visualization_experiments.R</code></pre>
<p><strong>Benefits of script-based development:</strong> - <strong>Fast iteration</strong>: No need to knit/render documents during development - <strong>Interactive debugging</strong>: Can run code line-by-line in R console - <strong>Version control friendly</strong>: Pure R files produce clean diffs in Git - <strong>Easy collaboration</strong>: Contributors can add numbered script files - <strong>Flexible experimentation</strong>: Quick to test ideas and approaches</p>
</section>
<section id="phase-2-function-extraction-r" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="phase-2-function-extraction-r"><span class="header-section-number">2.5.2</span> Phase 2: Function Extraction (<code>R/</code>)</h3>
<p>As analysis patterns emerge, extract reusable functions to the <code>R/</code> directory:</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># R/penguin_utils.R</span></span>
<span id="cb6-2">calculate_species_correlation <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, x_var, y_var, </span>
<span id="cb6-3">                                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">species_filter =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) {</span>
<span id="cb6-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reusable function extracted from scripts</span></span>
<span id="cb6-5">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(species_filter)) {</span>
<span id="cb6-6">    data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> data[data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> species_filter, ]</span>
<span id="cb6-7">  }</span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(data[[x_var]], data[[y_var]], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"complete.obs"</span>)</span>
<span id="cb6-9">}</span>
<span id="cb6-10"></span>
<span id="cb6-11">create_species_plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(data, x_var, y_var) {</span>
<span id="cb6-12">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Standardized plotting function</span></span>
<span id="cb6-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(data, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes_string</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x_var, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y_var, </span>
<span id="cb6-14">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb6-17">}</span></code></pre></div>
</section>
<section id="phase-3-publication-integration-analysispaper" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3" class="anchored" data-anchor-id="phase-3-publication-integration-analysispaper"><span class="header-section-number">2.5.3</span> Phase 3: Publication Integration (<code>analysis/paper/</code>)</h3>
<p>Once analysis approaches stabilize, integrate polished results into the manuscript:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># In analysis/paper/paper.Rmd</span></span>
<span id="cb7-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option 1: Source complete scripts</span></span>
<span id="cb7-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../scripts/02_penguin_correlations.R"</span>)</span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../scripts/04_body_mass_analysis.R"</span>)</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option 2: Use extracted functions</span></span>
<span id="cb7-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)</span>
<span id="cb7-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"penguin_utils.R"</span>))</span>
<span id="cb7-9"></span>
<span id="cb7-10">correlation_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_species_correlation</span>(</span>
<span id="cb7-11">  penguins, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span></span>
<span id="cb7-12">)</span></code></pre></div>
</section>
<section id="recommended-collaborative-workflow" class="level3" data-number="2.5.4">
<h3 data-number="2.5.4" class="anchored" data-anchor-id="recommended-collaborative-workflow"><span class="header-section-number">2.5.4</span> Recommended Collaborative Workflow:</h3>
<ol type="1">
<li><strong>Project initialization</strong>: Project maintainer runs <code>zzrrtools.sh</code> to create project structure</li>
<li><strong>Immediate containerization</strong>: Build Docker container and switch to container-based development from day one</li>
<li><strong>Initial development</strong>: Create exploratory scripts in <code>scripts/</code> directory <strong>inside the container</strong></li>
<li><strong>Collaborative iteration</strong>: Team members clone repo, build identical container, add additional script files through pull requests <strong>from within the container</strong></li>
<li><strong>Code review in scripts</strong>: Both developers refine analysis logic in script files while working in identical Docker environments</li>
<li><strong>Function extraction</strong>: Move stable, reusable code to <code>R/</code> directory</li>
<li><strong>Paper integration</strong>: Source scripts or use functions in <code>analysis/paper/paper.Rmd</code></li>
<li><strong>Continuous validation</strong>: All development and testing occurs within the containerized environment</li>
</ol>
<p><strong>Why this container-first approach works:</strong></p>
<ul>
<li><strong>Reproducibility</strong>: Eliminates “works on my machine” problems from day one</li>
<li><strong>Identical environments</strong>: All collaborators work in exactly the same computational environment</li>
<li><strong>No environment drift</strong>: Cannot occur when everyone develops within containers</li>
<li><strong>Speed</strong>: Script development is faster than R Markdown knitting</li>
<li><strong>Modularity</strong>: Each script can focus on a specific analysis aspect</li>
<li><strong>Testability</strong>: Functions in <code>R/</code> can be easily unit tested in the same environment they’ll run in production</li>
<li><strong>Simple collaboration</strong>: Environment setup becomes a one-time <code>docker build</code> command for all contributors</li>
<li><strong>Development-production parity</strong>: The development environment IS the production environment</li>
</ul>
<p>This container-first, phased approach gives collaborators the speed of script-based development during exploration while maintaining the reproducibility and narrative flow of literate programming for final outputs. Most importantly, it ensures that all development occurs within the exact computational environment that will be used for final analysis and publication.</p>
<p>While zzrrtools establishes the organizational foundation for reproducible research, it relies on consistent R package environments to function effectively across different systems. The directory structure and R package framework created by zzrrtools becomes most useful when combined with precise dependency management. This is where renv becomes essential, providing the package-level consistency that complements zzrrtools’ structural approach.</p>
</section>
</section>
</section>
<section id="renv-package-level-reproducibility" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> renv: Package-Level Reproducibility</h1>
<section id="what-is-renv" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="what-is-renv"><span class="header-section-number">3.1</span> What is renv?</h2>
<p><strong>renv</strong> (Reproducible Environment) is an R package designed to create isolated, project-specific library environments. Instead of relying on a shared system-wide R library that might change over time, renv gives each project its own separate collection of packages with specific versions.</p>
</section>
<section id="key-features-of-renv" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="key-features-of-renv"><span class="header-section-number">3.2</span> Key Features of renv</h2>
<ul>
<li><p><strong>Isolated project library</strong>: renv creates a project-specific library (typically in <code>renv/library</code>) containing only the packages used by that project. This isolation ensures that updates or changes to packages in one project won’t affect others.</p></li>
<li><p><strong>Lockfile for dependencies</strong>: When you finish installing or updating packages, <code>renv::snapshot()</code> produces a <code>renv.lock</code> file - a JSON document listing each package and its exact version and source. This lockfile is designed to be committed to version control and shared.</p></li>
<li><p><strong>Environment restoration</strong>: On a new machine (or when reproducing past results), <code>renv::restore()</code> installs the exact versions of packages specified in the lockfile. This creates an R package environment identical to the one that created the lockfile, provided the same R version is available. The R version is important since critical components of the R system, such as random number generation, and default factor handling policy vary between versions.</p></li>
</ul>
</section>
<section id="basic-renv-workflow" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="basic-renv-workflow"><span class="header-section-number">3.3</span> Basic renv Workflow</h2>
<p>The typical workflow with renv involves:</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># One-time installation of renv</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"renv"</span>)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Initialize renv for the project</span></span>
<span id="cb8-5">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">init</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creates renv infrastructure</span></span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install project-specific packages</span></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...</span></span>
<span id="cb8-9"></span>
<span id="cb8-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Save the package state to renv.lock</span></span>
<span id="cb8-11">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snapshot</span>()</span>
<span id="cb8-12"></span>
<span id="cb8-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Later or on another system...</span></span>
<span id="cb8-14">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">restore</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restore packages from renv.lock</span></span></code></pre></div>
<p>While renv successfully addresses package-level reproducibility by ensuring identical R package versions across environments, even perfect package consistency cannot prevent analyses from failing or producing different results due to variations in R versions, operating systems, or system-level dependencies. A complete reproducibility solution requires addressing these system-level differences, which is where Docker containerization becomes essential.</p>
</section>
</section>
<section id="docker-system-level-reproducibility" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Docker: System-Level Reproducibility</h1>
<section id="what-is-docker" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="what-is-docker"><span class="header-section-number">4.1</span> What is Docker?</h2>
<p>Docker is a platform that allows you to package software into standardized units called containers. A Docker container is like a lightweight virtual machine that includes everything needed to run an application: the code, runtime, system tools, libraries, and settings.</p>
</section>
<section id="dockers-role-in-reproducibility" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="dockers-role-in-reproducibility"><span class="header-section-number">4.2</span> Docker’s Role in Reproducibility</h2>
<p>While renv handles R packages, Docker ensures consistency for:</p>
<ul>
<li><strong>Operating system</strong>: The specific Linux distribution or OS version</li>
<li><strong>R interpreter</strong>: The exact R version</li>
<li><strong>System libraries</strong>: Required C/C++ libraries and other dependencies</li>
<li><strong>Computational environment</strong>: Memory limits, CPU configuration, etc.</li>
<li><strong>External tools</strong>: pandoc, LaTeX, and other utilities needed for R Markdown</li>
</ul>
<p>By running an R Markdown project in Docker, you eliminate differences in OS or R installation as potential sources of irreproducibility. Any machine running Docker will execute the container in an identical environment.</p>
</section>
<section id="automated-team-docker-image-management" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="automated-team-docker-image-management"><span class="header-section-number">4.3</span> Automated Team Docker Image Management</h2>
<p>The zzrrtools framework implements enterprise-grade Docker automation that eliminates manual container management while ensuring perfect environment consistency across research teams. This system automatically detects package changes, rebuilds Docker images, and notifies team members.</p>
<section id="key-automation-features" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="key-automation-features"><span class="header-section-number">4.3.1</span> <strong>Key Automation Features</strong></h3>
<ul>
<li><strong>Intelligent Change Detection</strong>: Monitors <code>renv.lock</code>, <code>DESCRIPTION</code>, and <code>Dockerfile</code> changes</li>
<li><strong>Zero Manual Intervention</strong>: Complete automation of Docker image lifecycle</li>
<li><strong>Multi-Platform Support</strong>: Builds for AMD64 (Intel/AMD) and ARM64 (Apple Silicon)</li>
<li><strong>Advanced Caching</strong>: GitHub Actions cache with BuildKit optimization</li>
<li><strong>Team Notification</strong>: Detailed change summaries and usage instructions</li>
<li><strong>Comprehensive Tagging</strong>: Version-specific, date-based, and commit-based tags</li>
</ul>
</section>
<section id="automated-workflow-triggers" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="automated-workflow-triggers"><span class="header-section-number">4.3.2</span> <strong>Automated Workflow Triggers</strong></h3>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># GitHub Actions automatically rebuilds team images when:</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb9-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb9-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb9-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paths</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb9-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'renv.lock'</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">           # R package changes</span></span>
<span id="cb9-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'DESCRIPTION'</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">         # Package metadata changes</span></span>
<span id="cb9-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Dockerfile'</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">          # Container configuration changes</span></span>
<span id="cb9-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'docker-compose.yml'</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # Service changes</span></span>
<span id="cb9-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_dispatch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">           # Manual triggering</span></span></code></pre></div>
</section>
<section id="team-core-image-templates" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="team-core-image-templates"><span class="header-section-number">4.3.3</span> <strong>Team Core Image Templates</strong></h3>
<p>The zzrrtools setup provides optimized Dockerfile templates for team collaboration:</p>
<p><strong>Team Core Image Template (<code>Dockerfile.teamcore</code>)</strong></p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Supports both shell and RStudio variants via BASE_IMAGE argument</span></span>
<span id="cb10-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> BASE_IMAGE=rocker/r-ver</span>
<span id="cb10-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> R_VERSION=latest  </span>
<span id="cb10-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> ${BASE_IMAGE}:${R_VERSION}</span>
<span id="cb10-5"></span>
<span id="cb10-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install comprehensive development environment</span></span>
<span id="cb10-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> update <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-8">    git ssh curl wget vim tmux zsh build-essential <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-9">    libcurl4-openssl-dev libssl-dev libxml2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-10">    libfontconfig1-dev libharfbuzz-dev libfribidi-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-11">    libfreetype6-dev libpng-dev libtiff5-dev libjpeg-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-12">    man-db pandoc <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> /var/lib/apt/lists/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb10-14"></span>
<span id="cb10-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install Node.js for vim plugins</span></span>
<span id="cb10-16"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fsSL</span> https://deb.nodesource.com/setup_lts.x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-17">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> nodejs</span>
<span id="cb10-18"></span>
<span id="cb10-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install TinyTeX for PDF rendering</span></span>
<span id="cb10-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages('tinytex')"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-21">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tinytex::install_tinytex()"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-22">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/root/.TinyTeX/bin/*/tlmgr</span> path add</span>
<span id="cb10-23"></span>
<span id="cb10-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install team-specific R packages (customize for your domain)</span></span>
<span id="cb10-25"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages(c('renv', 'remotes', 'devtools', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-26"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'testthat', 'tidyverse', 'DT', 'conflicted', 'ggthemes', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-27"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'datapasta', 'janitor', 'kableExtra'), </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-28"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    repos = c(CRAN = 'https://cloud.r-project.org'))"</span></span>
<span id="cb10-29"></span>
<span id="cb10-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create non-root user with zsh shell</span></span>
<span id="cb10-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> USERNAME=analyst</span>
<span id="cb10-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">useradd</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--create-home</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span> /bin/zsh <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span></span>
<span id="cb10-33"></span>
<span id="cb10-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Give user write permissions to R library</span></span>
<span id="cb10-35"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /usr/local/lib/R/site-library</span>
<span id="cb10-36"></span>
<span id="cb10-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set working directory and switch to user</span></span>
<span id="cb10-38"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}/project</span>
<span id="cb10-39"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> ${USERNAME}</span>
<span id="cb10-40"></span>
<span id="cb10-41"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CMD</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/zsh"</span>]</span></code></pre></div>
</section>
<section id="multi-service-development-architecture" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="multi-service-development-architecture"><span class="header-section-number">4.3.4</span> <strong>Multi-Service Development Architecture</strong></h3>
<p>The automated system provides specialized Docker environments optimized for different development workflows:</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># docker-compose.yml automatically maintained by GitHub Actions</span></span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">services</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-session</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">image</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${TEAM_NAME}/${PROJECT_NAME}:latest</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # Auto-updated reference</span></span>
<span id="cb11-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb11-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb11-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb11-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zsh-dev</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">image</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${TEAM_NAME}/${PROJECT_NAME}:latest</span></span>
<span id="cb11-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb11-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ./cache:/home/analyst/cache</span></span>
<span id="cb11-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb11-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">entrypoint</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/zsh"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb11-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb11-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rstudio</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">image</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${TEAM_NAME}/${PROJECT_NAME}core-rstudio:latest</span></span>
<span id="cb11-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ports</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"8787:8787"</span></span>
<span id="cb11-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb11-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">environment</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb11-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> DISABLE_AUTH=true</span></span></code></pre></div>
</section>
<section id="zero-friction-team-synchronization" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="zero-friction-team-synchronization"><span class="header-section-number">4.3.5</span> <strong>Zero-Friction Team Synchronization</strong></h3>
<p>When any team member adds packages:</p>
<ol type="1">
<li><strong>Automatic Detection</strong>: GitHub Actions detects <code>renv.lock</code> changes in merged PRs</li>
<li><strong>Intelligent Rebuilding</strong>: Only rebuilds when actual dependencies change</li>
<li><strong>Team Notification</strong>: Detailed commit comments with change summaries</li>
<li><strong>Instant Access</strong>: Other developers simply run <code>docker pull team/project:latest</code></li>
<li><strong>Environment Parity</strong>: Everyone immediately has identical development environments</li>
</ol>
<p>This automation eliminates manual Docker image management while ensuring perfect reproducibility across team members.</p>
</section>
</section>
</section>
<section id="combining-zzrrtools-renv-and-docker-a-comprehensive-approach" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Combining zzrrtools, renv, and Docker: A Comprehensive Approach</h1>
<section id="why-use-all-three" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="why-use-all-three"><span class="header-section-number">5.1</span> Why Use All Three?</h2>
<p>Using any single tool improves reproducibility, but combining all three provides the most complete solution:</p>
<ul>
<li><strong>zzrrtools</strong> provides standardized project structure and research compendium organization</li>
<li><strong>renv</strong> guarantees the R packages and their versions</li>
<li><strong>Docker</strong> guarantees the OS and R version</li>
<li><strong>Together</strong> they achieve end-to-end reproducibility from project organization through package dependencies to operating system consistency</li>
</ul>
<p>This approach creates a fully portable, well-organized research compendium that can be shared and will produce identical results across different computers while following established research best practices.</p>
</section>
<section id="integration-strategy-with-automated-governance" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="integration-strategy-with-automated-governance"><span class="header-section-number">5.2</span> Integration Strategy with Automated Governance</h2>
<p>The workflow integrates zzrrtools, renv, and Docker with automated governance suitable for enterprise research teams:</p>
<p><strong>Project Maintainer Role (Enhanced with Automation):</strong> - Creates team core images and manages automated rebuilding infrastructure - Reviews contributor pull requests with automated dependency validation - Maintains hybrid privacy model with public reproducible environments - Oversees automated team image updates via GitHub Actions - Provides team access to Docker Hub images and development guidance</p>
<p><strong>Contributor Role (Streamlined Onboarding):</strong> - One-time zzrrtools framework installation for all future projects - Instant project setup using pre-built team core images - Choice of development interface (shell-based or RStudio-based) - Automated dependency validation prevents team conflicts - Submit changes via professional pull request workflows</p>
<p><strong>Workflow Steps</strong>:</p>
<ol type="1">
<li><p><strong>Initialize Research Compendium (Maintainer)</strong>:</p>
<ul>
<li>Create standardized project structure using zzrrtools framework</li>
<li>Set up analysis directories with data organization</li>
<li>Initialize renv environment with <code>renv::init()</code></li>
<li>Create Dockerfile with container configuration</li>
</ul></li>
<li><p><strong>Establish Development Environment (Maintainer)</strong>:</p>
<ul>
<li><p>Install required packages and develop initial analysis</p></li>
<li><p>Create tests for analytical functions</p></li>
<li><p>Use the renv consistency checker to validate and create initial lockfile:</p>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Validate dependencies and create snapshot</span></span>
<span id="cb12-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span></span></code></pre></div></li>
<li><p>Build and test Docker image locally</p></li>
</ul></li>
<li><p><strong>Automated Infrastructure Management</strong>:</p>
<ul>
<li>GitHub Actions automatically detects dependency changes in merged PRs</li>
<li>Intelligent rebuilding only when <code>renv.lock</code>, <code>DESCRIPTION</code>, or container config changes</li>
<li>Multi-platform image building (AMD64 + ARM64) with advanced caching</li>
<li>Automatic pushing to Docker Hub with comprehensive tagging system</li>
<li>Team notification via commit comments with detailed change summaries</li>
<li>Zero manual Docker image management required</li>
</ul></li>
<li><p><strong>Collaborative Development (All Developers)</strong>:</p>
<p><strong>Research Compendium Files in GitHub Repository:</strong></p>
<ul>
<li><strong>Project Structure</strong>: <code>DESCRIPTION</code>, <code>LICENSE</code>, <code>README.qmd</code> (zzrrtools-generated)</li>
<li><strong>Analysis Content</strong>: Files in <code>analysis/paper/</code> directory (R Markdown manuscripts)</li>
<li><strong>Dependencies</strong>: <code>renv.lock</code> (managed by maintainer), <code>renv/activate.R</code></li>
<li><strong>Infrastructure</strong>: <code>Dockerfile</code> (maintained by project maintainer)</li>
<li><strong>Code</strong>: <code>R/</code> directory (utility functions), <code>tests/</code> directory</li>
<li><strong>Documentation</strong>: Generated README files and project documentation</li>
<li><strong>Configuration</strong>: <code>.gitignore</code>, <code>.github/</code> (CI/CD workflows)</li>
</ul>
<p><strong>Hybrid Privacy Model for Reproducible Research:</strong></p>
<p>The zzrrtools framework implements a sophisticated privacy strategy that balances research confidentiality with scientific reproducibility:</p>
<p>🔒 <strong>Private GitHub Repository</strong> (Research Protection):</p>
<ul>
<li>Protects unpublished research and sensitive methodologies</li>
<li>Secures proprietary data analysis and preliminary results</li>
<li>Controls access to research collaborators only</li>
<li>Maintains confidentiality during peer review process</li>
</ul>
<p>🌍 <strong>Public Docker Images</strong> (Reproducible Science):</p>
<ul>
<li>Enables validation of computational environments by reviewers</li>
<li>Supports open science through transparent methodology</li>
<li>Allows replication after publication</li>
<li>Contains no sensitive data - only software packages and configurations</li>
</ul>
<p><strong>Automated Container Registry Strategy:</strong></p>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># GitHub Actions automatically handles container publishing:</span></span>
<span id="cb13-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Builds multi-platform images (AMD64 + ARM64)</span></span>
<span id="cb13-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Pushes to Docker Hub with public visibility</span></span>
<span id="cb13-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Tags with comprehensive versioning system</span></span>
<span id="cb13-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Updates docker-compose.yml references</span></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 5. Notifies team of new image availability</span></span>
<span id="cb13-7"></span>
<span id="cb13-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Team members simply pull updated images:</span></span>
<span id="cb13-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> pull team/project:latest</span>
<span id="cb13-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> pull team/projectcore-shell:latest</span>
<span id="cb13-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> pull team/projectcore-rstudio:latest</span></code></pre></div>
<p><strong>Container Registry Authentication (Automated):</strong></p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Repository secrets for automated publishing:</span></span>
<span id="cb14-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DOCKERHUB_USERNAME</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> team-dockerhub-account</span></span>
<span id="cb14-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DOCKERHUB_TOKEN</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> dockerhub-access-token</span></span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># GitHub Actions workflow automatically:</span></span>
<span id="cb14-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Authenticates with Docker Hub</span></span>
<span id="cb14-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Builds and pushes team core images</span></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Updates project development images</span></span>
<span id="cb14-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Manages image lifecycle and cleanup</span></span></code></pre></div>
<p><strong>Security Benefits:</strong></p>
<ul>
<li><strong>Separate authentication systems</strong>: GitHub and Docker Hub use different credentials</li>
<li><strong>No sensitive data exposure</strong>: Docker images contain only computational environments</li>
<li><strong>Cryptographic integrity</strong>: SBOM generation and provenance attestation</li>
<li><strong>Team access control</strong>: Repository collaborators get automatic image access</li>
<li><strong>Automated security updates</strong>: Dependabot for base image vulnerability management</li>
</ul>
<p><strong>Enhanced Development Workflows:</strong></p>
<p>The zzrrtools framework provides comprehensive development environments optimized for research collaboration:</p>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Multi-service development options</span></span>
<span id="cb15-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-zsh      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Enhanced shell with vim IDE and dotfiles</span></span>
<span id="cb15-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-r        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive R console</span></span>
<span id="cb15-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-rstudio  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Web-based RStudio at localhost:8787</span></span>
<span id="cb15-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-render   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Automated paper rendering</span></span>
<span id="cb15-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-test     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Comprehensive test suite</span></span>
<span id="cb15-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Automated dependency validation</span></span></code></pre></div>
<p><strong>Professional Development Environment Features:</strong></p>
<ul>
<li><strong>Vim IDE Integration</strong>: Complete vim setup with R plugins, syntax highlighting, and git integration</li>
<li><strong>Enhanced Shell</strong>: zsh with autosuggestions, professional prompt, and development shortcuts</li>
<li><strong>Multi-file Workflows</strong>: Tab-based editing, split windows, and project navigation</li>
<li><strong>Integrated Testing</strong>: Test-driven development cycle from within the container</li>
<li><strong>Personal Customization</strong>: Dotfiles integration for familiar development environments</li>
</ul>
<p><strong>For comprehensive Docker workflow options and development environment setup, see Appendix D: Docker Workflow Options.</strong></p></li>
<li><p><strong>Execute consistently</strong>:</p>
<ul>
<li>Run analyses in the Docker container for guaranteed reproducibility</li>
<li>Use volume mounts to access local files while maintaining environment consistency</li>
<li>Run tests within the container to verify functionality</li>
</ul></li>
</ol>
<p>This strategy ensures that your R Markdown documents and analyses will run identically for anyone who has access to your Docker container, regardless of their local setup.</p>
</section>
</section>
<section id="practical-example-collaborative-research-compendium-development-with-testing" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Practical Example: Collaborative Research Compendium Development with Testing</h1>
<p>The following case study demonstrates how two developers can collaborate on a research compendium using zzrrtools, renv, and Docker to ensure reproducibility, with integrated testing procedures to maintain code quality.</p>
<section id="project-scenario" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="project-scenario"><span class="header-section-number">6.1</span> Project Scenario</h2>
<p>A team of data scientists collaborates on Palmer Penguins analysis using zzrrtools’ Docker-first workflow that eliminates environment setup friction:</p>
<ul>
<li><strong>Joe</strong> (<code>joe</code>): Project maintainer who initializes the repository</li>
<li><strong>Sam</strong> (<code>sam</code>): Contributor who extends the analysis<br>
</li>
<li><strong>Additional team members</strong>: Can join without any local R installation</li>
</ul>
<p>The collaboration model emphasizes <strong>zero-setup team onboarding</strong> through self-replicating project distribution and containerized development environments.</p>
<blockquote class="blockquote">
<p><strong>Collaboration Philosophy</strong>: - <strong>Self-contained projects</strong>: Each repository includes its own setup script - <strong>Container-first development</strong>: All work happens in identical Docker environments - <strong>Automated dependency validation</strong>: Pre-commit checks prevent conflicts - <strong>Shell-based workflows</strong>: Command-line tools for maximum flexibility</p>
</blockquote>
<p><strong>Key Workflow Principles (Enhanced):</strong> - Joe creates team core images and automated infrastructure management - Team members install zzrrtools framework once for all future projects - All development occurs in enhanced containerized environments with professional tooling - Automated dependency validation and team image rebuilding prevents conflicts - Zero manual Docker management - GitHub Actions handles complete image lifecycle - Choice of development interface (shell-based vim or web-based RStudio)</p>
</section>
<section id="implementation-example" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="implementation-example"><span class="header-section-number">6.2</span> Implementation Example</h2>
<section id="project-maintainer-setup-joe" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="project-maintainer-setup-joe"><span class="header-section-number">6.2.1</span> Project Maintainer Setup (Joe)</h3>
<p>Joe implements the enterprise-grade two-tier Docker strategy for team collaboration:</p>
<p><strong>Step 1: Create Team Core Images</strong></p>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Set up project and team infrastructure</span></span>
<span id="cb16-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> penguins_analysis <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> penguins_analysis</span>
<span id="cb16-3"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">TEAM_NAME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rgt47"</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Docker Hub account for hosting core images</span></span>
<span id="cb16-4"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">PROJECT_NAME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basename</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">))</span></span>
<span id="cb16-5"></span>
<span id="cb16-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Create custom team core image configuration</span></span>
<span id="cb16-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cp</span> ~/bin/zzrrtools-support/templates/Dockerfile.pluspackages ./Dockerfile.teamcore</span>
<span id="cb16-8"></span>
<span id="cb16-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Edit Dockerfile.teamcore for Palmer Penguins analysis requirements:</span></span>
<span id="cb16-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Add specialized R packages (palmerpenguins, tidymodels, plotly)</span></span>
<span id="cb16-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Include statistical modeling packages (brms, rstanarm)</span></span>
<span id="cb16-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Set team-specific R configurations and themes</span></span>
<span id="cb16-13"></span>
<span id="cb16-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Build and publish team core images for reproducible science</span></span>
<span id="cb16-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Shell-optimized core (lightweight, fast startup)</span></span>
<span id="cb16-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-f</span> Dockerfile.teamcore <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> BASE_IMAGE=rocker/r-ver <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb16-17">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-shell:v1.0.0 .</span>
<span id="cb16-18"></span>
<span id="cb16-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RStudio-optimized core (includes RStudio Server)</span></span>
<span id="cb16-20"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-f</span> Dockerfile.teamcore <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> BASE_IMAGE=rocker/rstudio <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb16-21">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-rstudio:v1.0.0 .</span>
<span id="cb16-22"></span>
<span id="cb16-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Push to Docker Hub for public reproducible research</span></span>
<span id="cb16-24"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> login  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Login to Docker Hub</span></span>
<span id="cb16-25"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> push <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-shell:v1.0.0</span>
<span id="cb16-26"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> push <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-rstudio:v1.0.0</span></code></pre></div>
<p><strong>Step 2: Initialize Research Compendium with Custom Base</strong></p>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 5. Initialize zzrrtools project using team core image</span></span>
<span id="cb17-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--base-image</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span>/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-shell <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb17-3">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dotfiles</span> ~/.config/shell</span>
<span id="cb17-4"></span>
<span id="cb17-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This automatically:</span></span>
<span id="cb17-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Creates complete research compendium structure</span></span>
<span id="cb17-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Builds LOCAL development image (inherits from core + adds dotfiles)</span></span>
<span id="cb17-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Sets up automated GitHub Actions for team image rebuilds</span></span>
<span id="cb17-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Configures CI/CD for dependency validation</span></span>
<span id="cb17-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Local image NOT pushed - contains personal dotfiles</span></span></code></pre></div>
<p><strong>Step 3: Initialize Repository and Automated Infrastructure</strong></p>
<div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 6. Set up private GitHub repository for research code</span></span>
<span id="cb18-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> init</span>
<span id="cb18-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add .</span>
<span id="cb18-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🎉 Initial research project setup with automated team infrastructure</span></span>
<span id="cb18-5"></span>
<span id="cb18-6"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Complete zzrrtools research compendium</span></span>
<span id="cb18-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Team core images published: </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${TEAM_NAME}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">core:v1.0.0</span></span>
<span id="cb18-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Automated GitHub Actions for team image management</span></span>
<span id="cb18-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Private repository protects unpublished research</span></span>
<span id="cb18-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Hybrid privacy model: private code, public environments"</span></span>
<span id="cb18-11"></span>
<span id="cb18-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create private repository on GitHub, then:</span></span>
<span id="cb18-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> remote add origin https://github.com/joe/penguins_analysis.git</span>
<span id="cb18-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> push <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-u</span> origin main</span></code></pre></div>
<p><strong>Step 4: Begin Development in Enhanced Environment</strong></p>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 7. Start development immediately in professional environment</span></span>
<span id="cb19-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-zsh  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Enhanced zsh with vim IDE, dotfiles, and development tools</span></span></code></pre></div>
<p>This creates: - <strong>Two-tier Docker architecture</strong> with team core + personal development images - <strong>Automated team image management</strong> via sophisticated GitHub Actions workflows - <strong>Professional development environment</strong> with vim IDE, zsh enhancements, and testing integration - <strong>Zero-setup team onboarding</strong> through pre-built, publicly available core images - <strong>Hybrid privacy model</strong> protecting research while enabling computational reproducibility</p>
<p><strong>For detailed information on renv dependency validation, troubleshooting, and team collaboration workflows, see Appendix G: renv Management and Validation.</strong></p>
<p>The validation script ensures package environment consistency by verifying dependencies across code files, DESCRIPTION, and renv.lock, preventing common collaboration issues where team members have mismatched environments.</p>
<p><strong>Step 4: Create Initial Analysis Paper</strong></p>
<p>Joe creates an initial analysis examining flipper length vs.&nbsp;bill length relationships in the Palmer Penguins dataset, implementing basic visualization and statistical exploration within the research compendium structure.</p>
<p><strong>Step 5: Create Tests for Analysis Functions</strong></p>
<p>Joe implements testing to ensure reproducible research through data validation, error detection, and environment verification. Testing provides collaboration confidence and supports publication standards by validating data integrity, statistical relationships, and pipeline functionality.</p>
<p>Joe sets up the testing framework and creates basic data validation tests to verify dataset availability, dimensions, and required columns. These tests ensure the analysis environment is correctly configured and catch data-related issues early in the development process.</p>
<p><strong>For a complete test suite with data validation, statistical tests, and integration tests, see Appendix B: Test Suite.</strong></p>
<p><strong>Step 6: Create a .gitignore file</strong></p>
<p>Joe configures version control to track source code and dependencies while excluding generated outputs and temporary files. The principle: track the “recipe” (code + dependencies), not the “meal” (outputs).</p>
<p>Joe creates a <code>.gitignore</code> file excluding renv libraries, generated outputs, temporary files, and system artifacts. This keeps the repository lightweight while ensuring collaborators can recreate the complete environment from tracked dependencies.</p>
<p><strong>Step 7: Create a Dockerfile</strong></p>
<p>zzrrtools generates a Dockerfile with multiple template options. The standard template uses rocker/r-ver, while the pluspackages template includes common R packages like tidyverse. Both provide:</p>
<ul>
<li><strong>R version consistency</strong>: Matches exact R version specified in renv.lock</li>
<li><strong>Development environment</strong>: Includes zsh, vim, tmux, Node.js for plugin support</li>
<li><strong>Security</strong>: Non-root user execution with proper file permissions</li>
<li><strong>TinyTeX integration</strong>: LaTeX support for PDF rendering (pluspackages template)</li>
<li><strong>Pre-installed packages</strong>: Common packages like tidyverse, DT, testthat (pluspackages template)</li>
</ul>
<p>The generated Dockerfile includes development tools and optimizations:</p>
<div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb20-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> R_VERSION=latest</span>
<span id="cb20-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> rocker/r-ver:${R_VERSION}</span>
<span id="cb20-3"></span>
<span id="cb20-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install comprehensive development environment</span></span>
<span id="cb20-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> update <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-6">    git ssh curl wget vim tmux zsh build-essential <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-7">    libcurl4-openssl-dev libssl-dev libxml2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-8">    libfontconfig1-dev libharfbuzz-dev libfribidi-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-9">    libfreetype6-dev libpng-dev libtiff5-dev libjpeg-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-10">    man-db pandoc <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> /var/lib/apt/lists/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb20-12"></span>
<span id="cb20-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install Node.js for vim plugins</span></span>
<span id="cb20-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fsSL</span> https://deb.nodesource.com/setup_lts.x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb20-15">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> nodejs</span>
<span id="cb20-16"></span>
<span id="cb20-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create non-root user with zsh shell</span></span>
<span id="cb20-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> USERNAME=analyst</span>
<span id="cb20-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">useradd</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--create-home</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span> /bin/zsh <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span></span>
<span id="cb20-20"></span>
<span id="cb20-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set up R environment with renv</span></span>
<span id="cb20-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}/project</span>
<span id="cb20-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv.lock ./</span>
<span id="cb20-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> ${USERNAME}</span>
<span id="cb20-25"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages('renv'); renv::restore()"</span></span>
<span id="cb20-26"></span>
<span id="cb20-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy project files and install</span></span>
<span id="cb20-28"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> . .</span>
<span id="cb20-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devtools::install('.')"</span></span>
<span id="cb20-30"></span>
<span id="cb20-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CMD</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/zsh"</span>]</span></code></pre></div>
<p><strong>Alternative: Pre-packaged Template</strong></p>
<p>For projects using common packages, the pluspackages template includes TinyTeX and popular R packages:</p>
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install TinyTeX for PDF rendering</span></span>
<span id="cb21-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages('tinytex')"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb21-3">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tinytex::install_tinytex()"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb21-4">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/root/.TinyTeX/bin/*/tlmgr</span> path add</span>
<span id="cb21-5"></span>
<span id="cb21-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install common R packages (cached layer)</span></span>
<span id="cb21-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages(c('renv', 'remotes', 'devtools', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb21-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'testthat', 'naniar', 'DT', 'conflicted', 'ggthemes', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb21-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'datapasta', 'janitor', 'kableExtra', 'tidytuesdayR', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb21-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'tidyverse'), repos = c(CRAN = 'https://cloud.r-project.org'))"</span></span>
<span id="cb21-11"></span>
<span id="cb21-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Give user write permissions to R library</span></span>
<span id="cb21-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /usr/local/lib/R/site-library</span></code></pre></div>
<p><strong>For production Dockerfiles with development environment configuration (zsh, vim plugins, dotfiles integration), see Appendix F: Docker Configuration Examples.</strong></p>
<p><strong>R Version Synchronization:</strong></p>
<p>The Dockerfile uses a build argument to ensure the R version exactly matches what’s specified in <code>renv.lock</code>. This eliminates potential issues from R version mismatches between the package environment and the underlying R interpreter. The build command extracts the R version from the renv lockfile:</p>
<div class="sourceCode" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract R version from renv.lock</span></span>
<span id="cb22-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">R_VERSION</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">jq</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.R.Version'</span> renv.lock<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb22-3"></span>
<span id="cb22-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build Docker image with extracted R version</span></span>
<span id="cb22-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> R_VERSION=<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${R_VERSION}</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb22-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> ghcr.io/joe/penguins_analysis:v1.0 .</span></code></pre></div>
<p>If the <code>renv.lock</code> file specifies R 4.3.1, the Docker image will use <code>rocker/r-ver:4.3.1</code>. If renv is updated to R 4.4.0, the Docker build will use <code>rocker/r-ver:4.4.0</code>. This maintains consistency between the package environment and system environment.</p>
<p><strong>Step 8: Container-Based Development</strong></p>
<p>Joe performs all development work inside the Docker container, ensuring consistent environments and immediate visibility of changes to the host system through volume mounting. The container provides a complete development environment with package management, editing tools, and validation utilities.</p>
<p><strong>Step 9: Update and Share Environment</strong></p>
<p>When package dependencies change, GitHub Actions automatically rebuilds the Docker image with updated renv.lock specifications and pushes the updated environment to Docker Hub for team access. This ensures collaborators have access to the identical development environment.</p>
<p><strong>Step 5: Automated Validation and Quality Assurance</strong></p>
<p>Joe validates the complete automated infrastructure:</p>
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Validate all dependencies with automated checking</span></span>
<span id="cb23-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix</span>
<span id="cb23-3"></span>
<span id="cb23-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Run comprehensive test suite in enhanced environment</span></span>
<span id="cb23-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-test</span>
<span id="cb23-6"></span>
<span id="cb23-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Render paper to verify end-to-end workflow</span></span>
<span id="cb23-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-render</span>
<span id="cb23-9"></span>
<span id="cb23-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Verify automated GitHub Actions workflows</span></span>
<span id="cb23-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Push triggers team image rebuilding</span></span>
<span id="cb23-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Dependency changes trigger notifications</span></span>
<span id="cb23-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># - Multi-platform builds complete successfully</span></span></code></pre></div>
<p><strong>Step 6: Enable Team Access and Documentation</strong></p>
<p>Joe configures repository permissions and documents the automated workflow:</p>
<ol type="1">
<li><strong>Repository Settings</strong> → <strong>Collaborators</strong> → Add team members with “Write” access</li>
<li><strong>Configure repository secrets</strong> for automated Docker Hub publishing:
<ul>
<li><code>DOCKERHUB_USERNAME</code>: Team Docker Hub account</li>
<li><code>DOCKERHUB_TOKEN</code>: Docker Hub access token for automated publishing</li>
</ul></li>
<li><strong>Document team onboarding</strong> with zzrrtools installation and interface choices</li>
<li><strong>Share public Docker Hub images</strong> for reproducible research access</li>
</ol>
<p>At this point, Joe has established an enterprise-grade automated research infrastructure. Team members can join with zero manual setup through the automated system.</p>
</section>
<section id="team-member-onboarding-sam" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="team-member-onboarding-sam"><span class="header-section-number">6.2.2</span> Team Member Onboarding (Sam)</h3>
<p><strong>What Sam Receives from Joe:</strong> - Repository URL: <code>https://github.com/joe/penguins_analysis</code> - Public Docker Hub image names for core environments - Team development guidelines and interface choices</p>
<p><strong>Sam’s Streamlined Onboarding Process:</strong></p>
<p><strong>📝 Developer Checklist for Sam:</strong></p>
<ul class="task-list">
<li><label><input type="checkbox">Install zzrrtools framework (one-time setup for all future projects)</label></li>
<li><label><input type="checkbox">Fork and clone project repository</label></li>
<li><label><input type="checkbox">Choose development interface (shell vs RStudio)</label></li>
<li><label><input type="checkbox">Build personal development image with dotfiles</label></li>
<li><label><input type="checkbox">Start development immediately</label></li>
</ul>
<div class="sourceCode" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. One-time zzrrtools framework installation</span></span>
<span id="cb24-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">OWNER</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span>/zzrrtools.git ~/prj/zzrrtools</span>
<span id="cb24-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ~/prj/zzrrtools</span>
<span id="cb24-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">./install.sh</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adds zzrrtools command to system PATH</span></span>
<span id="cb24-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--help</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verify installation</span></span>
<span id="cb24-6"></span>
<span id="cb24-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Fork and clone the project repository</span></span>
<span id="cb24-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/sam/penguins_analysis.git  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sam's fork</span></span>
<span id="cb24-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> penguins_analysis</span>
<span id="cb24-10"></span>
<span id="cb24-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Choose development interface and build personal environment</span></span>
<span id="cb24-12"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">PROJECT_NAME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basename</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">))</span></span>
<span id="cb24-13"></span>
<span id="cb24-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option A: Shell-based development (vim, zsh, command-line)</span></span>
<span id="cb24-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zzrrtools</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--base-image</span> rgt47/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${PROJECT_NAME}</span>core-shell <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb24-16">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dotfiles</span> ~/.config/shell</span>
<span id="cb24-17"></span>
<span id="cb24-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Option B: RStudio-based development (web interface)</span></span>
<span id="cb24-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># zzrrtools --base-image rgt47/${PROJECT_NAME}core-rstudio \</span></span>
<span id="cb24-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#           --dotfiles ~/.config/shell</span></span>
<span id="cb24-21"></span>
<span id="cb24-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Start development immediately (no setup required)</span></span>
<span id="cb24-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-zsh      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Enhanced shell environment with vim IDE</span></span>
<span id="cb24-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># OR</span></span>
<span id="cb24-25"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-rstudio  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Web-based RStudio at localhost:8787</span></span></code></pre></div>
<p><strong>Key Advantages for Sam:</strong></p>
<ul>
<li><strong>Zero manual setup</strong>: Pre-built team core images eliminate environment configuration</li>
<li><strong>Instant productivity</strong>: Professional development environment ready immediately</li>
<li><strong>Interface choice</strong>: Select shell-based or web-based development as preferred</li>
<li><strong>Automated synchronization</strong>: Future package updates happen transparently</li>
<li><strong>Personal customization</strong>: Dotfiles integration maintains familiar development environment</li>
</ul>
<p><strong>Enterprise Benefits for Sam:</strong></p>
<ul>
<li><strong>Framework reusability</strong>: One-time zzrrtools installation enables instant setup for all future research projects</li>
<li><strong>Professional tooling</strong>: Complete vim IDE with R integration, zsh enhancements, and development shortcuts</li>
<li><strong>Automated dependency management</strong>: Never worry about package conflicts or environment drift</li>
<li><strong>Choice and flexibility</strong>: Select development interface that matches personal workflow preferences</li>
<li><strong>Zero infrastructure management</strong>: GitHub Actions handles all Docker image lifecycle automatically</li>
</ul>
<p>Sam develops new analysis components within the enhanced containerized environment, with automated testing and validation ensuring quality and reproducibility.</p>
<p><strong>Step 4: Enhanced Development Environment Workflow</strong></p>
<p>Sam works within the professional containerized development environment that includes:</p>
<p><strong>Vim IDE Integration:</strong></p>
<div class="sourceCode" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Inside the container (after make docker-zsh):</span></span>
<span id="cb25-2"></span>
<span id="cb25-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Multi-file development workflow</span></span>
<span id="cb25-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> R/analysis_functions.R scripts/02_body_mass_analysis.R analysis/paper/paper.Rmd</span>
<span id="cb25-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Opens multiple files in tabs for simultaneous editing</span></span>
<span id="cb25-6"></span>
<span id="cb25-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Vim + R integration workflow:</span></span>
<span id="cb25-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:terminal</span>                    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Open terminal in vim</span></span>
<span id="cb25-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span>                           <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Start R session in terminal</span></span>
<span id="cb25-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># devtools::load_all()       # Load package functions (in R)</span></span>
<span id="cb25-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># source("scripts/02_body_mass_analysis.R")  # Test scripts</span></span>
<span id="cb25-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># quit()                     # Exit R, back to vim</span></span>
<span id="cb25-13"></span>
<span id="cb25-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Git workflow integration:</span></span>
<span id="cb25-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>!git status                <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check git status from vim</span></span>
<span id="cb25-16"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>!git add %                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add current file to git</span></span>
<span id="cb25-17"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>!git commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Update analysis"</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Commit changes</span></span></code></pre></div>
<p><strong>Test-Driven Development Cycle:</strong></p>
<div class="sourceCode" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Write tests first (inside vim)</span></span>
<span id="cb26-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim</span> tests/testthat/test-body_mass_functions.R</span>
<span id="cb26-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Write unit tests for new functions</span></span>
<span id="cb26-4"></span>
<span id="cb26-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Write functions to pass tests</span></span>
<span id="cb26-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim</span> R/body_mass_utils.R</span>
<span id="cb26-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Implement functions to satisfy test requirements</span></span>
<span id="cb26-8"></span>
<span id="cb26-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Run tests from vim</span></span>
<span id="cb26-10"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>!make docker-test          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run all package tests from vim</span></span>
<span id="cb26-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:terminal</span>                   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Open terminal for interactive testing</span></span>
<span id="cb26-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span>                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Start R in terminal</span></span>
<span id="cb26-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># devtools::load_all()      # Load package functions</span></span>
<span id="cb26-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># devtools::test()          # Run specific tests</span></span>
<span id="cb26-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># testthat::test_dir("tests/integration")  # Run integration tests</span></span>
<span id="cb26-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># quit()                    # Exit R, back to vim</span></span>
<span id="cb26-17"></span>
<span id="cb26-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Iterate until tests pass</span></span>
<span id="cb26-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Edit functions, run tests, repeat</span></span></code></pre></div>
<p><strong>Project Navigation and File Management:</strong></p>
<div class="sourceCode" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Enhanced file navigation in vim:</span></span>
<span id="cb27-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:Explore</span>                    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># File browser</span></span>
<span id="cb27-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:split</span> scripts/data.R       <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Split window editing</span></span>
<span id="cb27-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:vsplit</span> analysis/report.Rmd <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Vertical split for manuscript</span></span>
<span id="cb27-5"></span>
<span id="cb27-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Multi-tab workflow:</span></span>
<span id="cb27-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># gt (next tab), gT (previous tab)</span></span>
<span id="cb27-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ctrl+w+w (switch windows)</span></span>
<span id="cb27-9"></span>
<span id="cb27-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Quick project navigation:</span></span>
<span id="cb27-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Symbolic links for easy access:</span></span>
<span id="cb27-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a → analysis/, s → scripts/, t → tests/, r → R/</span></span></code></pre></div>
<p><strong>Step 5: Paper Integration and Testing</strong></p>
<p>Sam integrates the new analysis into the research paper, combining Joe’s original visualizations with the new body mass analysis. Sam also creates tests to validate the new functionality and ensure package dependencies are properly documented.</p>
<p><strong>Step 6: Validation and Quality Assurance</strong></p>
<p>Sam creates tests for the new body mass analysis, validates data integrity and statistical relationships, then runs the complete test suite and verifies paper rendering to ensure no regressions before submission.</p>
<p><strong>Step 7: Professional Contribution Workflow</strong></p>
<p>When Sam completes the analysis iteration, the automated submission process follows these steps:</p>
<ol type="1">
<li><p><strong>Automated dependency validation</strong>: Run <code>make docker-check-renv-fix</code> to ensure package consistency</p></li>
<li><p><strong>Comprehensive test suite</strong>: Execute <code>make docker-test</code> to verify all tests pass</p></li>
<li><p><strong>Paper rendering validation</strong>: Run <code>make docker-render</code> to confirm analysis integrates properly</p></li>
<li><p><strong>Professional commit workflow</strong>:</p>
<div class="sourceCode" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> add .</span>
<span id="cb28-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> commit <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Add body mass analysis with comprehensive testing</span></span>
<span id="cb28-3"></span>
<span id="cb28-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Implemented body mass prediction models using tidymodels</span></span>
<span id="cb28-5"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Added statistical validation tests for model performance</span></span>
<span id="cb28-6"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- Integrated visualizations with existing Palmer Penguins analysis</span></span>
<span id="cb28-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">- All tests passing and paper renders successfully"</span></span>
<span id="cb28-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> push origin feature/body-mass-analysis</span></code></pre></div></li>
<li><p><strong>Professional pull request</strong>: Submit detailed pull request with analysis impact assessment</p></li>
<li><p><strong>Automated infrastructure updates</strong>: GitHub Actions automatically handles Docker image updates</p></li>
</ol>
<p><strong>Automated CI/CD Benefits:</strong></p>
<ul>
<li><strong>Zero manual Docker management</strong>: GitHub Actions detects package changes and rebuilds team images automatically</li>
<li><strong>Intelligent change detection</strong>: Only rebuilds when actual dependencies change, saving time and resources</li>
<li><strong>Multi-platform support</strong>: Automatically builds for AMD64 and ARM64 architectures</li>
<li><strong>Team notification</strong>: Detailed commit comments notify team of environment updates</li>
<li><strong>Instant synchronization</strong>: Other team members simply run <code>docker pull team/project:latest</code> for updated environment</li>
</ul>
<p><strong>Enhanced Feedback Loop</strong>: If CI workflows fail, Sam receives detailed GitHub notifications with specific failure logs, automated suggestions for fixes, and clear next steps for resolution.</p>
<p>Sam commits the completed analysis, tests, and documentation to their feature branch and creates a cross-repository pull request to the original repository. This ensures proper code review and governance while maintaining clear attribution of contributions.</p>
<p>At this point, Sam has successfully contributed new analysis through the collaborative workflow. Joe reviews the pull request, tests the changes in the containerized environment, and merges the contribution while maintaining project governance and quality standards.</p>
</section>
</section>
<section id="complete-handoff-workflow-summary" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="complete-handoff-workflow-summary"><span class="header-section-number">6.3</span> Complete Handoff Workflow Summary</h2>
<p><strong>Initiating Developer (Joe) - Enterprise Setup:</strong> 1. Create team core images with domain-specific packages and publish to Docker Hub 2. Initialize zzrrtools research compendium with automated GitHub Actions infrastructure 3. Configure automated team image management with intelligent change detection 4. Set up hybrid privacy model: private code repository, public reproducible environments 5. Validate complete automated workflow with dependency checking and CI/CD 6. Grant team member repository access and document onboarding process 7. Share team core image names and development guidelines</p>
<p><strong>Joining Developer (Sam) - Streamlined Onboarding:</strong> 1. One-time zzrrtools framework installation: <code>git clone</code> + <code>./install.sh</code> 2. Fork and clone project repository 3. Choose development interface (shell-based vim or web-based RStudio) 4. Build personal development image using team core: <code>zzrrtools --base-image team/projectcore-shell</code> 5. Start immediate development: <code>make docker-zsh</code> (professional environment ready) 6. Develop with enhanced vim IDE, automated testing, and dependency validation 7. Submit professional pull requests with automated infrastructure updates 8. Benefit from zero manual Docker management through GitHub Actions automation</p>
<p><strong>Key Success Factor</strong>: The containerized environment and centralized zzrrtools framework eliminate project-specific configuration requirements for team members after one-time framework installation.</p>
</section>
<section id="collaboration-results" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="collaboration-results"><span class="header-section-number">6.4</span> Collaboration Results</h2>
<p>This workflow achieves: - Identical development environments across team members - Dependency validation preventing conflicts - Standardized project structure - Automated testing and CI/CD integration</p>
<p><strong>For GitHub Actions setup instructions, workflow examples, and CI/CD configuration, see Appendix E: GitHub Actions CI/CD Setup.</strong></p>
<p>The collaborative workflow demonstrated above illustrates the power of combining zzrrtools, renv, and Docker for reproducible research. However, successful implementation of this approach requires understanding both when it’s most beneficial and how to apply it effectively. The following best practices and considerations provide guidance for teams considering this strategy.</p>
</section>
</section>
<section id="best-practices-and-considerations" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Best Practices and Considerations</h1>
<section id="when-to-use-this-approach" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="when-to-use-this-approach"><span class="header-section-number">7.1</span> When to Use This Approach</h2>
<p>The zzrrtools + renv + Docker approach with testing is particularly valuable for:</p>
<ul>
<li><strong>Long-term research projects</strong> where reproducibility over time is crucial</li>
<li><strong>Collaborative analyses</strong> with multiple contributors on different systems</li>
<li><strong>Production analytical pipelines</strong> that need to run consistently</li>
<li><strong>Academic publications</strong> where methods must be reproducible</li>
<li><strong>Teaching and education</strong> to ensure consistent student experiences</li>
<li><strong>Complex analyses</strong> that require testing to validate results</li>
</ul>
</section>
<section id="tips-for-efficient-implementation" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="tips-for-efficient-implementation"><span class="header-section-number">7.2</span> Tips for Efficient Implementation</h2>
<ol type="1">
<li><strong>Keep Docker images minimal</strong>: Include only what’s necessary for reproducibility.</li>
<li><strong>Use specific version tags</strong>: For both R packages and Docker base images, specify exact versions.</li>
<li><strong>Document system requirements</strong>: Include notes on RAM and storage requirements.</li>
<li><strong>Leverage bind mounts</strong>: Mount local directories to containers for easier development.</li>
<li><strong>Write meaningful tests</strong>: Focus on validating both data integrity and analytical results.</li>
<li><strong>Test regularly</strong>: Use CI/CD pipelines to run tests on every change.</li>
<li><strong>Consider computational requirements</strong>: Particularly for resource-intensive analyses.</li>
</ol>
</section>
<section id="testing-strategies-for-r-analyses" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="testing-strategies-for-r-analyses"><span class="header-section-number">7.3</span> Testing Strategies for R Analyses</h2>
<p>Testing data analysis code differs from traditional software testing but provides crucial value for reproducible research:</p>
<ol type="1">
<li><strong>Data Validation Tests</strong>: Ensure data has the expected structure, types, and values.</li>
<li><strong>Function Tests</strong>: Verify that custom functions work as expected with known inputs and outputs.</li>
<li><strong>Edge Case Tests</strong>: Check how code handles missing values, outliers, or unexpected inputs.</li>
<li><strong>Integration Tests</strong>: Confirm that different parts of the analysis work correctly together.</li>
<li><strong>Regression Tests</strong>: Make sure new changes don’t break existing functionality.</li>
<li><strong>Output Validation</strong>: Verify that final results match expected patterns or benchmarks.</li>
</ol>
<p>While uncommon in traditional data analysis, these tests catch silent errors, validate assumptions, and provide confidence that analyses remain correct as code and data evolve.</p>
</section>
<section id="potential-challenges" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="potential-challenges"><span class="header-section-number">7.4</span> Potential Challenges</h2>
<p>Some challenges to be aware of:</p>
<ul>
<li><strong>Docker image size</strong>: Images with many packages can become large</li>
<li><strong>Learning curve</strong>: Docker, renv, and testing frameworks require some initial learning</li>
<li><strong>System-specific features</strong>: Some analyses may rely on hardware features</li>
<li><strong>Performance considerations</strong>: Containers may have different performance characteristics</li>
<li><strong>Test maintenance</strong>: Tests need to be updated as the analysis evolves</li>
</ul>
</section>
<section id="troubleshooting-common-issues" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="troubleshooting-common-issues"><span class="header-section-number">7.5</span> Troubleshooting Common Issues</h2>
<p><strong>Docker Build Failures:</strong> - Try: <code>export DOCKER_BUILDKIT=0</code> (disable BuildKit) - Check Docker has sufficient memory/disk space - Ensure Docker is running and up to date</p>
<p><strong>Platform Warnings on ARM64/Apple Silicon:</strong> - Use updated Makefile with <code>--platform linux/amd64</code> flags - Or set: <code>export DOCKER_DEFAULT_PLATFORM=linux/amd64</code></p>
<p><strong>Permission Errors in Container:</strong> - Rebuild image after copying dotfiles - Check file ownership in project directory</p>
<p><strong>Package Name Errors:</strong> - Ensure directory name contains only letters/numbers/periods - Avoid underscores and special characters</p>
<p><strong>Missing Dotfiles in Container:</strong> - Use <code>--dotfiles</code> or <code>--dotfiles-nodot</code> flag during setup - Rebuild Docker image after adding dotfiles</p>
<p>Despite these challenges, the benefits of reproducible research outweigh the implementation costs, particularly for collaborative and long-term projects. The approach described in this white paper provides a foundation for achieving reproducibility that meets the standards expected in data science and academic research.</p>
</section>
</section>
<section id="conclusion" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Conclusion</h1>
<p>Achieving full reproducibility in R requires addressing project organization, package dependencies, and system-level consistency, while ensuring code quality through testing. By combining zzrrtools for research compendium structure, renv for R package management, Docker for environment containerization, and testing for code validation, data scientists and researchers can create truly portable, reproducible, and reliable workflows.</p>
<p>The approach presented in this white paper ensures that the common frustration of “it works on my machine” becomes a thing of the past. Instead, research compendia become easy to share and fully reproducible. A collaborator or reviewer can launch the Docker container and get identical results, without worrying about package versions, system setup, or project organization.</p>
<p>The case study demonstrates how two developers can effectively collaborate on an analysis while maintaining reproducibility and code quality throughout the project lifecycle. By integrating testing into the workflow, the team can be confident that their analysis is not only reproducible but also correct.</p>
<p>This strategy represents a method for long-term reproducibility in R, meeting the standards required for data science and research documentation. The combination of standardized research compendium structure, dependency management, and containerized environments creates a foundation for reproducible research. By adopting this approach, the R community can make progress toward the goal of reproducible and reliable research and analysis.</p>
</section>
<section id="references" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> References</h1>
<ol type="1">
<li>Marwick, B., Boettiger, C., &amp; Mullen, L. (2018). Packaging data analytical work reproducibly using R (and friends). <em>The American Statistician</em>, 72(1), 80-88.</li>
<li>Marwick, B. (2017). rrtools: Creates a Reproducible Research Compendium. R package version 0.1.6. https://github.com/benmarwick/rrtools (Extended in zzrrtools framework)</li>
<li>Ushey, K., Wickham, H., &amp; RStudio. (2023). renv: Project Environments. R package. https://rstudio.github.io/renv/</li>
<li>The Rocker Project. (2023). Docker containers for the R environment. https://www.rocker-project.org/</li>
<li>Wickham, H. (2023). testthat: Unit Testing for R. https://testthat.r-lib.org/</li>
</ol>
</section>
<section id="appendix-a-github-personal-access-token-setup" class="level1 unnumbered">
<h1 class="unnumbered">Appendix A: GitHub Personal Access Token Setup</h1>
<p>This appendix provides step-by-step instructions for creating a GitHub Personal Access Token with the required permissions for container registry operations.</p>
<p><strong>Why Container Access is Required:</strong> Both collaborators need container-related permissions because Docker images are stored in GitHub Container Registry as private packages that require authentication to access.</p>
<section id="step-by-step-token-creation" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="step-by-step-token-creation"><span class="header-section-number">9.1</span> Step-by-Step Token Creation</h2>
<p><strong>1. Navigate to GitHub Settings:</strong> - Go to <a href="https://github.com">GitHub.com</a> and sign in - Click your profile picture (top right) → Settings - In the left sidebar: Developer settings → Personal access tokens</p>
<p><strong>Note</strong>: GitHub now offers two token types: - <strong>Fine-grained personal access tokens</strong> (recommended for new projects) - <strong>Personal access tokens (classic)</strong> (for broader compatibility)</p>
<p><strong>2. Create New Token:</strong> - Click “Generate new token” and select the appropriate type - Add a descriptive note (e.g., “Docker Container Registry Access”) - Set expiration (recommended: 90 days for security)</p>
<p><strong>3. Select Required Scopes</strong> (check these boxes): - ✅ <strong>repo</strong> (Full control of private repositories) - <em>Required for private repos</em> - ✅ <strong>write:packages</strong> (Upload Docker images to GitHub Container Registry) - <em>Required for project maintainer</em> - ✅ <strong>read:packages</strong> (Download Docker images from GitHub Container Registry) - <em>Required for all team members</em> - ✅ <strong>delete:packages</strong> (Delete packages from GitHub Package Registry) - <em>Optional but recommended</em></p>
<p><strong>Note</strong>: Team members only need <code>read:packages</code> and <code>repo</code>, but the project maintainer needs all container permissions to push Docker images.</p>
<p><strong>Token Type Recommendation</strong>: Use fine-grained personal access tokens for new projects as they provide better security and more precise permissions.</p>
<p><strong>4. Generate and Copy Token:</strong> - Click “Generate token” at the bottom - <strong>Important</strong>: Copy the token immediately - you won’t see it again - Store it securely (see security practices below)</p>
</section>
<section id="token-security-best-practices" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="token-security-best-practices"><span class="header-section-number">9.2</span> Token Security Best Practices</h2>
<ul>
<li><strong>Never commit tokens to repositories</strong> - Use <code>.gitignore</code> to exclude files containing tokens</li>
<li><strong>Use environment variables</strong> - Store tokens in shell environment variables</li>
<li><strong>Set reasonable expiration dates</strong> - Use 30-90 day expiration for security</li>
<li><strong>Revoke unused tokens</strong> - Clean up tokens when no longer needed</li>
<li><strong>Consider GitHub CLI</strong> - Use <code>gh auth login</code> for easier management</li>
<li><strong>Monitor token usage</strong> - Check GitHub Settings → Developer settings → Personal access tokens for activity</li>
</ul>
</section>
<section id="alternative-using-github-cli" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="alternative-using-github-cli"><span class="header-section-number">9.3</span> Alternative: Using GitHub CLI</h2>
<p>For simpler token management, consider using GitHub CLI instead of manual tokens:</p>
<div class="sourceCode" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install and authenticate (handles tokens)</span></span>
<span id="cb29-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">gh</span> auth login <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--scopes</span> write:packages,read:packages,repo</span>
<span id="cb29-3"></span>
<span id="cb29-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Login to container registry (works with gh auth)</span></span>
<span id="cb29-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">gh</span> auth token<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> login ghcr.io <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb29-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-u</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">gh</span> api user <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--jq</span> .login<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--password-stdin</span></span></code></pre></div>
</section>
<section id="troubleshooting-common-issues-1" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="troubleshooting-common-issues-1"><span class="header-section-number">9.4</span> Troubleshooting Common Issues</h2>
<p><strong>“permission_denied: The token provided does not match expected scopes”</strong> - Verify your token includes <code>write:packages</code> and <code>read:packages</code> scopes - For private repositories, ensure <code>repo</code> scope is also selected - Create a new token with correct permissions if needed</p>
<p><strong>Token not recognized:</strong> - Ensure token is properly exported: <code>export GITHUB_TOKEN=your_token_here</code> - Verify token hasn’t expired - Check that you’re using the full token (starts with <code>ghp_</code>) 6. Horst, A.M., Hill, A.P., &amp; Gorman, K.B. (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. https://allisonhorst.github.io/palmerpenguins/ 7. Marwick, B. (2016). Computational reproducibility in archaeological research: Basic principles and a case study of their implementation. <em>Journal of Archaeological Method and Theory</em>, 24(2), 424-473.</p>
</section>
</section>
<section id="appendix-b-comprehensive-test-suite" class="level1 unnumbered">
<h1 class="unnumbered">Appendix B: Comprehensive Test Suite</h1>
<p>This appendix provides a set of tests that can be used to validate the Palmer Penguins analysis. These tests demonstrate best practices for data analysis testing and can be adapted for other projects.</p>
<section id="test-file-teststestthattest-comprehensive-analysis.r" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="test-file-teststestthattest-comprehensive-analysis.r"><span class="header-section-number">9.5</span> Test File: <code>tests/testthat/test-comprehensive-analysis.R</code></h2>
<div class="sourceCode" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(testthat)</span>
<span id="cb30-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb30-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb30-4"></span>
<span id="cb30-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 1: Data Availability and Basic Structure</span></span>
<span id="cb30-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify your primary dataset loads correctly and has </span></span>
<span id="cb30-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expected dimensions</span></span>
<span id="cb30-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Package loading issues, file path problems, corrupted data files</span></span>
<span id="cb30-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Palmer Penguins dataset is available and has correct structure"</span>, </span>
<span id="cb30-10">          {</span>
<span id="cb30-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exists</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"penguins"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">where =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"package:palmerpenguins"</span>))</span>
<span id="cb30-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_s3_class</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data.frame"</span>)</span>
<span id="cb30-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set expected </span></span>
<span id="cb30-14">                                                    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># column count</span></span>
<span id="cb30-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set minimum </span></span>
<span id="cb30-16">                                                    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># row threshold</span></span>
<span id="cb30-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">344</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set exact </span></span>
<span id="cb30-18">                                                      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expected count </span></span>
<span id="cb30-19">                                                      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># if known</span></span>
<span id="cb30-20">})</span>
<span id="cb30-21"></span>
<span id="cb30-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 2: Required Columns Exist with Correct Types</span></span>
<span id="cb30-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Ensure your analysis depends on columns that </span></span>
<span id="cb30-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># actually </span></span>
<span id="cb30-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># exist with correct types</span></span>
<span id="cb30-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Column name changes, type coercion issues, CSV import problems</span></span>
<span id="cb30-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dataset contains required columns with expected data types"</span>, {</span>
<span id="cb30-28">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-29">  </span>
<span id="cb30-30">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check column existence - Adapt: List columns your analysis requires</span></span>
<span id="cb30-31">  required_cols <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"species"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"island"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>, </span>
<span id="cb30-32">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_depth_mm"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, </span>
<span id="cb30-33">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body_mass_g"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sex"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)</span>
<span id="cb30-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(required_cols <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(df)))</span>
<span id="cb30-35">  </span>
<span id="cb30-36">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check data types - Adapt: Verify types match your analysis </span></span>
<span id="cb30-37">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expectations</span></span>
<span id="cb30-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"integer"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Factor stored as integer</span></span>
<span id="cb30-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"double"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Continuous measurements</span></span>
<span id="cb30-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"integer"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Discrete measurements</span></span>
<span id="cb30-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_type</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"integer"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Integer measurements</span></span>
<span id="cb30-42">})</span>
<span id="cb30-43"></span>
<span id="cb30-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 3: Categorical Variables Have Expected Levels</span></span>
<span id="cb30-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify factor levels for categorical variables used</span></span>
<span id="cb30-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># in </span></span>
<span id="cb30-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># analysis</span></span>
<span id="cb30-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Missing categories, typos in factor levels, data encoding issues</span></span>
<span id="cb30-49"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species factor has expected levels"</span>, {</span>
<span id="cb30-50">  species_levels <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">levels</span>(palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species)</span>
<span id="cb30-51">  expected_species <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Your </span></span>
<span id="cb30-52">                                                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expected </span></span>
<span id="cb30-53">                                                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># categories</span></span>
<span id="cb30-54">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(species_levels), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(expected_species))</span>
<span id="cb30-55">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(species_levels), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Expected number of </span></span>
<span id="cb30-56">                                           <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># categories</span></span>
<span id="cb30-57">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># For other datasets: Test treatment groups, regions, product types, etc.</span></span>
<span id="cb30-58">})</span>
<span id="cb30-59"></span>
<span id="cb30-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 4: Data Value Ranges are Domain-Reasonable</span></span>
<span id="cb30-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify numeric values fall within realistic ranges</span></span>
<span id="cb30-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for </span></span>
<span id="cb30-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># your domain</span></span>
<span id="cb30-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Data entry errors, unit conversion mistakes, outliers from </span></span>
<span id="cb30-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># measurement errors</span></span>
<span id="cb30-66"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Measurement values fall within reasonable biological ranges"</span>, {</span>
<span id="cb30-67">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-68">  </span>
<span id="cb30-69">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Bill length - Adapt: Set realistic bounds for your numeric variables</span></span>
<span id="cb30-70">  bill_lengths <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm)]</span>
<span id="cb30-71">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(bill_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> bill_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Penguin-</span></span>
<span id="cb30-72">                                                              <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># specific </span></span>
<span id="cb30-73">                                                              <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># range</span></span>
<span id="cb30-74">  </span>
<span id="cb30-75">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Flipper length - Examples for other domains:</span></span>
<span id="cb30-76">  flipper_lengths <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm)]</span>
<span id="cb30-77">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(flipper_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> flipper_lengths <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">250</span>))</span>
<span id="cb30-78">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Finance: stock prices &gt; 0, percentages 0-100</span></span>
<span id="cb30-79">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Health: age 0-120, BMI 10-80, blood pressure 50-300</span></span>
<span id="cb30-80">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Engineering: temperatures -273+°C, pressures &gt; 0</span></span>
<span id="cb30-81">  </span>
<span id="cb30-82">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Body mass</span></span>
<span id="cb30-83">  body_masses <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g)]</span>
<span id="cb30-84">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(body_masses <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> body_masses <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7000</span>))</span>
<span id="cb30-85">})</span>
<span id="cb30-86"></span>
<span id="cb30-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 5: Missing Data Patterns are as Expected</span></span>
<span id="cb30-88"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify missingness patterns match your data </span></span>
<span id="cb30-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># collection </span></span>
<span id="cb30-90"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expectations</span></span>
<span id="cb30-91"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Unexpected data loss, systematic missingness, data pipeline </span></span>
<span id="cb30-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># failures</span></span>
<span id="cb30-93"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Missing data follows expected patterns"</span>, {</span>
<span id="cb30-94">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-95">  </span>
<span id="cb30-96">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Total missing values should be manageable</span></span>
<span id="cb30-97">  total_na <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df))</span>
<span id="cb30-98">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(total_na, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(df))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set acceptable threshold for </span></span>
<span id="cb30-99">                                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># missing </span></span>
<span id="cb30-100">                                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># data</span></span>
<span id="cb30-101">  </span>
<span id="cb30-102">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Some variables may have expected missingness</span></span>
<span id="cb30-103">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sex)), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sex determination sometimes difficult</span></span>
<span id="cb30-104">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt examples: Optional survey questions, historical data gaps, sensor </span></span>
<span id="cb30-105">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># failures</span></span>
<span id="cb30-106">  </span>
<span id="cb30-107">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Critical variables should be complete</span></span>
<span id="cb30-108">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species)), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primary identifier must be </span></span>
<span id="cb30-109">                                           <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># complete</span></span>
<span id="cb30-110">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: ID columns, primary keys, required fields should have no NAs</span></span>
<span id="cb30-111">})</span>
<span id="cb30-112"></span>
<span id="cb30-113"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 6: Expected Statistical Relationships Hold</span></span>
<span id="cb30-114"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Test known relationships between variables in your </span></span>
<span id="cb30-115"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># domain</span></span>
<span id="cb30-116"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Data corruption, encoding errors, units mix-ups that break known </span></span>
<span id="cb30-117"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># patterns</span></span>
<span id="cb30-118"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expected correlations between measurements exist"</span>, {</span>
<span id="cb30-119">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-120">  </span>
<span id="cb30-121">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test strong expected relationships</span></span>
<span id="cb30-122">  correlation <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g, </span>
<span id="cb30-123">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"complete.obs"</span>)</span>
<span id="cb30-124">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(correlation, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Strong positive correlation expected</span></span>
<span id="cb30-125">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt examples: height vs weight, price vs quality, experience vs salary</span></span>
<span id="cb30-126">  </span>
<span id="cb30-127">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test weaker but expected relationships</span></span>
<span id="cb30-128">  bill_cor <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm, df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_depth_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"complete.obs"</span>)</span>
<span id="cb30-129">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(bill_cor), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Some relationship should exist</span></span>
<span id="cb30-130">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Education vs income, advertising vs sales, temperature vs </span></span>
<span id="cb30-131">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># energy use</span></span>
<span id="cb30-132">})</span>
<span id="cb30-133"></span>
<span id="cb30-134"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 7: Visualization Functions Work Correctly</span></span>
<span id="cb30-135"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Ensure your key plots and visualizations can be </span></span>
<span id="cb30-136"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># generated</span></span>
<span id="cb30-137"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Missing aesthetic mappings, incompatible data types, package </span></span>
<span id="cb30-138"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># conflicts</span></span>
<span id="cb30-139"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Basic plots can be generated without errors"</span>, {</span>
<span id="cb30-140">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-141">  </span>
<span id="cb30-142">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test basic plot creation without errors</span></span>
<span id="cb30-143">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_no_error</span>({</span>
<span id="cb30-144">    p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb30-145">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb30-146">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb30-147">  })</span>
<span id="cb30-148">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Test your key plot types - histograms, boxplots, time series,</span></span>
<span id="cb30-149">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># etc.</span></span>
<span id="cb30-150">  </span>
<span id="cb30-151">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test that plot object is properly created</span></span>
<span id="cb30-152">  p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb30-153">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()</span>
<span id="cb30-154">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_s3_class</span>(p1, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot"</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Check for your plotting </span></span>
<span id="cb30-155">                                   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># framework objects</span></span>
<span id="cb30-156">})</span>
<span id="cb30-157"></span>
<span id="cb30-158"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 8: Data Filtering and Subsetting Work Correctly</span></span>
<span id="cb30-159"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify data manipulation operations produce expected</span></span>
<span id="cb30-160"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># results</span></span>
<span id="cb30-161"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Logic errors in filtering, unexpected factor behaviors, </span></span>
<span id="cb30-162"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># indexing mistakes</span></span>
<span id="cb30-163"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data can be properly filtered and subsetted"</span>, {</span>
<span id="cb30-164">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-165">  </span>
<span id="cb30-166">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test categorical filtering</span></span>
<span id="cb30-167">  adelie_penguins <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species), ]</span>
<span id="cb30-168">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(adelie_penguins), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Expected subset size</span></span>
<span id="cb30-169">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_true</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all</span>(adelie_penguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>species <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span>
<span id="cb30-170">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Filter by treatment groups, regions, time periods, etc.</span></span>
<span id="cb30-171">  </span>
<span id="cb30-172">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test missing data handling</span></span>
<span id="cb30-173">  complete_cases <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">complete.cases</span>(df), ]</span>
<span id="cb30-174">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(complete_cases), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(df))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Some rows should be removed</span></span>
<span id="cb30-175">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(complete_cases)), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># No NAs remaining</span></span>
<span id="cb30-176">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Test your specific data cleaning operations</span></span>
<span id="cb30-177">})</span>
<span id="cb30-178"></span>
<span id="cb30-179"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 9: Summary Statistics are Reasonable</span></span>
<span id="cb30-180"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Verify computed statistics match domain knowledge </span></span>
<span id="cb30-181"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># expectations</span></span>
<span id="cb30-182"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Calculation errors, unit mistakes, algorithm bugs, extreme </span></span>
<span id="cb30-183"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># outliers</span></span>
<span id="cb30-184"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Summary statistics fall within expected ranges"</span>, {</span>
<span id="cb30-185">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-186">  </span>
<span id="cb30-187">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test means fall within expected ranges</span></span>
<span id="cb30-188">  mean_flipper <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb30-189">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(mean_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">190</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Set realistic bounds for your </span></span>
<span id="cb30-190">                                <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># variables</span></span>
<span id="cb30-191">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(mean_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">210</span>)</span>
<span id="cb30-192">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Examples: Average customer age 20-80, mean salary $30k-200k, etc.</span></span>
<span id="cb30-193">  </span>
<span id="cb30-194">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test other central tendencies</span></span>
<span id="cb30-195">  mean_mass <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>body_mass_g, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb30-196">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(mean_mass, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4000</span>)</span>
<span id="cb30-197">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(mean_mass, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>)</span>
<span id="cb30-198">  </span>
<span id="cb30-199">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test variability measures are reasonable</span></span>
<span id="cb30-200">  sd_flipper <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sd</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb30-201">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_gt</span>(sd_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Not zero variance</span></span>
<span id="cb30-202">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(sd_flipper, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Not excessive variance</span></span>
<span id="cb30-203">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: CV should be &lt;50%, SD should be meaningful relative to mean</span></span>
<span id="cb30-204">})</span>
<span id="cb30-205"></span>
<span id="cb30-206"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test 10: Complete Analysis Pipeline Integration Test</span></span>
<span id="cb30-207"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generic application: Test your entire analysis workflow runs without </span></span>
<span id="cb30-208"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># errors</span></span>
<span id="cb30-209"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Catches: Pipeline breaks, dependency issues, function interaction problems</span></span>
<span id="cb30-210"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_that</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Complete analysis pipeline executes successfully"</span>, {</span>
<span id="cb30-211">  df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> palmerpenguins<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>penguins</span>
<span id="cb30-212">  </span>
<span id="cb30-213">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Test that full workflow executes without errors</span></span>
<span id="cb30-214">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_no_error</span>({</span>
<span id="cb30-215">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Data preparation step</span></span>
<span id="cb30-216">    clean_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">complete.cases</span>(df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, </span>
<span id="cb30-217">                                       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>)]), ]</span>
<span id="cb30-218">    </span>
<span id="cb30-219">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Statistical analysis step - Adapt: Your key analyses</span></span>
<span id="cb30-220">    correlation_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor.test</span>(clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, </span>
<span id="cb30-221">                                   clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm)</span>
<span id="cb30-222">    </span>
<span id="cb30-223">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualization step - Adapt: Your key plots</span></span>
<span id="cb30-224">    plot_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(clean_df, </span>
<span id="cb30-225">                          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> flipper_length_mm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> bill_length_mm)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb30-226">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb30-227">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb30-228">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb30-229">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length vs. Bill Length"</span>,</span>
<span id="cb30-230">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Flipper Length (mm)"</span>,</span>
<span id="cb30-231">           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bill Length (mm)"</span>)</span>
<span id="cb30-232">  })</span>
<span id="cb30-233">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Add model fitting, prediction, reporting steps as needed</span></span>
<span id="cb30-234">  </span>
<span id="cb30-235">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verify analysis produces meaningful results</span></span>
<span id="cb30-236">  clean_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">complete.cases</span>(df[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flipper_length_mm"</span>, </span>
<span id="cb30-237">                                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bill_length_mm"</span>)]), ]</span>
<span id="cb30-238">  correlation_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cor.test</span>(clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>flipper_length_mm, </span>
<span id="cb30-239">                                 clean_df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bill_length_mm)</span>
<span id="cb30-240">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expect_lt</span>(correlation_result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>p.value, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Significant result expected</span></span>
<span id="cb30-241">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adapt: Check model R², prediction accuracy, convergence, etc.</span></span>
<span id="cb30-242">})</span></code></pre></div>
</section>
<section id="running-the-tests" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="running-the-tests"><span class="header-section-number">9.6</span> Running the Tests</h2>
<p>To run all tests in your project:</p>
<div class="sourceCode" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run all tests</span></span>
<span id="cb31-2">testthat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_dir</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tests/testthat"</span>)</span>
<span id="cb31-3"></span>
<span id="cb31-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run specific test file</span></span>
<span id="cb31-5">testthat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tests/testthat/test-comprehensive-analysis.R"</span>)</span>
<span id="cb31-6"></span>
<span id="cb31-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run tests with detailed output</span></span>
<span id="cb31-8">testthat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">test_dir</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tests/testthat"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reporter =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"detailed"</span>)</span></code></pre></div>
</section>
<section id="test-categories-explained" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="test-categories-explained"><span class="header-section-number">9.7</span> Test Categories Explained</h2>
<p><strong>Data Validation Tests (1-5)</strong>: Verify data structure, types, ranges, and missing patterns <strong>Statistical Tests (6)</strong>: Confirm expected relationships in the data <strong>Functional Tests (7-8)</strong>: Ensure analysis functions work correctly <strong>Sanity Tests (9)</strong>: Check that summary statistics are reasonable <strong>Integration Tests (10)</strong>: Verify the complete analysis pipeline works end-to-end</p>
<p>These tests provide coverage for a data analysis project and can catch issues ranging from data corruption to environment setup problems.</p>
</section>
</section>
<section id="appendix-c-directory-structure" class="level1 unnumbered">
<h1 class="unnumbered">Appendix C: Directory Structure</h1>
<p>The zzrrtools setup creates the following directory structure:</p>
<pre><code>project/
├── DESCRIPTION              # Package metadata and dependencies
├── LICENSE                  # Project license  
├── README.md               # Project documentation
├── project.Rproj           # R project file
├── renv.lock               # Package dependency lockfile
├── setup_renv.R            # Automated renv setup script
├── Dockerfile              # Container specification
├── docker-compose.yml      # Multi-service Docker setup
├── Makefile                # Build automation (native R + Docker)
├── .Rprofile               # R startup configuration
├── .dockerignore           # Docker build exclusions
├── ZZRRTOOLS_USER_GUIDE.md # Comprehensive user documentation
├── .zshrc_docker           # zsh configuration for Docker container
├── .github/workflows/      # Multiple GitHub Actions workflows
│   ├── docker-ci.yml       # Docker-based CI/CD
│   ├── r-package.yml       # R package checking
│   └── render-paper.yml    # Automated paper rendering
├── check_renv_for_commit.R # renv consistency validation script
├── R/                      # R functions and utilities
│   └── utils.R             # Pre-built utility functions
├── man/                    # Generated function documentation
├── data/                   # Comprehensive data organization
│   ├── raw_data/           # Original, unmodified data
│   ├── derived_data/       # Processed/cleaned data
│   ├── metadata/           # Data documentation
│   ├── validation/         # Data validation scripts
│   └── external_data/      # Third-party datasets
├── analysis/               # Research analysis
│   ├── paper/              # Manuscript with PDF output
│   ├── figures/            # Generated plots and charts
│   ├── tables/             # Generated tables
│   └── templates/          # Document templates and CSL styles
├── scripts/                # Working R scripts and code snippets
├── tests/testthat/         # Unit tests and validation
├── vignettes/              # Package vignettes and tutorials
├── inst/doc/               # Package documentation
├── docs/                   # Additional documentation
├── archive/                # Archived files and old versions
└── [a,n,f,t,s,m,e,o,c]    # Symbolic links for easy navigation</code></pre>
<section id="key-features-explained" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="key-features-explained"><span class="header-section-number">9.8</span> Key Features Explained:</h2>
<p><strong>Data Organization:</strong> - <strong>raw_data/</strong>: Original, unmodified datasets as received - <strong>derived_data/</strong>: Processed, cleaned, or transformed data - <strong>metadata/</strong>: Documentation about data sources, collection methods, variables - <strong>validation/</strong>: Scripts that verify data integrity and quality - <strong>external_data/</strong>: Third-party datasets or reference data</p>
<p><strong>Multiple Output Formats:</strong> - <strong>figures/</strong>: Generated plots, charts, and visualizations - <strong>tables/</strong>: Generated summary tables and statistical results - <strong>paper/</strong>: Main manuscript and analysis documents - <strong>templates/</strong>: Document templates and citation style files</p>
<p><strong>R Package Structure:</strong> - <strong>R/</strong>: Custom functions and utilities - <strong>man/</strong>: Generated documentation for R functions - <strong>tests/testthat/</strong>: Unit tests and validation scripts - <strong>vignettes/</strong>: Long-form documentation and tutorials - <strong>DESCRIPTION</strong>: Package metadata and dependency specifications</p>
<p><strong>Docker Orchestration:</strong> - <strong>Dockerfile</strong>: Main container specification - <strong>docker-compose.yml</strong>: Multi-service development environments - <strong>Makefile</strong>: Build automation supporting both native R and Docker workflows</p>
<p><strong>Workflows:</strong> - <strong>.github/workflows/</strong>: GitHub Actions for testing, checking, and rendering - <strong>setup_renv.R</strong>: Package environment setup - <strong>RRTOOLS_USER_GUIDE.md</strong>: Usage documentation</p>
<p><strong>Navigation Shortcuts:</strong> - <strong>Symbolic links</strong>: Single-letter shortcuts for easy navigation - <code>a</code> → analysis/, <code>n</code> → analysis/, <code>f</code> → figures/ - <code>t</code> → tests/, <code>s</code> → scripts/, <code>m</code> → man/ - <code>e</code> → external_data/, <code>o</code> → output/, <code>c</code> → cache/</p>
<p>This structure supports research projects while maintaining clear organization and following established research compendium principles.</p>
</section>
</section>
<section id="appendix-d-docker-workflow-options" class="level1 unnumbered">
<h1 class="unnumbered">Appendix D: Docker Workflow Options</h1>
<p>The zzrrtools setup provides a multi-service Docker architecture optimized for collaborative shell-based development workflows.</p>
<section id="multi-service-docker-architecture" class="level2" data-number="9.9">
<h2 data-number="9.9" class="anchored" data-anchor-id="multi-service-docker-architecture"><span class="header-section-number">9.9</span> Multi-Service Docker Architecture</h2>
<p>zzrrtools creates specialized Docker environments for different development tasks:</p>
<div class="sourceCode" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build the containerized research environment</span></span>
<span id="cb33-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-build</span>
<span id="cb33-3"></span>
<span id="cb33-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive R console (primary development environment)</span></span>
<span id="cb33-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-r</span>
<span id="cb33-6"></span>
<span id="cb33-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Development shell with personal dotfiles</span></span>
<span id="cb33-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-zsh</span>
<span id="cb33-9"></span>
<span id="cb33-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive bash session</span></span>
<span id="cb33-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-bash</span>
<span id="cb33-12"></span>
<span id="cb33-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RStudio Server (web-based IDE)</span></span>
<span id="cb33-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-rstudio    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Access at http://localhost:8787</span></span>
<span id="cb33-15"></span>
<span id="cb33-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Render research paper</span></span>
<span id="cb33-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-render</span>
<span id="cb33-18"></span>
<span id="cb33-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run tests</span></span>
<span id="cb33-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-test</span>
<span id="cb33-21"></span>
<span id="cb33-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Package checking</span></span>
<span id="cb33-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check</span>
<span id="cb33-24"></span>
<span id="cb33-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># renv dependency validation</span></span>
<span id="cb33-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix</span>
<span id="cb33-27"></span>
<span id="cb33-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># See all available commands</span></span>
<span id="cb33-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> help</span></code></pre></div>
<p><strong>Collaborative Benefits:</strong> - <strong>Zero-setup onboarding</strong>: Team members run identical commands - <strong>Consistent environments</strong>: Same container across all developer machines - <strong>ARM64/Apple Silicon support</strong>: Platform-specific flags ensure compatibility - <strong>Shell-optimized workflows</strong>: Command-line development with rich tooling - <strong>Personal customization</strong>: Dotfiles integration for familiar environments - <strong>Web-based development</strong>: Optional RStudio Server for GUI-based workflows</p>
</section>
<section id="option-2-docker-compose-services" class="level2" data-number="9.10">
<h2 data-number="9.10" class="anchored" data-anchor-id="option-2-docker-compose-services"><span class="header-section-number">9.10</span> Option 2: Docker Compose Services</h2>
<p>Docker Compose orchestrates multiple container configurations:</p>
<div class="sourceCode" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive R session</span></span>
<span id="cb34-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> r-session</span>
<span id="cb34-3"></span>
<span id="cb34-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Bash shell access</span></span>
<span id="cb34-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> bash</span>
<span id="cb34-6"></span>
<span id="cb34-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Automated paper rendering</span></span>
<span id="cb34-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> research</span>
<span id="cb34-9"></span>
<span id="cb34-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Package testing</span></span>
<span id="cb34-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> test</span>
<span id="cb34-12"></span>
<span id="cb34-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Package checking</span></span>
<span id="cb34-14"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker-compose</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> check</span></code></pre></div>
<p><strong>Docker Compose Configuration Example:</strong></p>
<div class="sourceCode" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">services</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb35-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-session</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb35-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb35-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb35-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb35-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ./cache:/home/analyst/cache</span></span>
<span id="cb35-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb35-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb35-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bash</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb35-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb35-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb35-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb35-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb35-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">entrypoint</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/bash"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb35-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb35-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">research</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb35-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb35-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb35-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .:/home/analyst/project</span></span>
<span id="cb35-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ./analysis/figures:/home/analyst/output</span></span>
<span id="cb35-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">working_dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/analyst/project</span></span>
<span id="cb35-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-e"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rmarkdown::render('analysis/paper/paper.Rmd')"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span></code></pre></div>
<p><strong>Benefits:</strong> - <strong>Service setup</strong>: Multiple predefined container configurations - <strong>Volume management</strong>: Consistent volume mounting across services - <strong>Environment isolation</strong>: Different services for different purposes - <strong>Parallel execution</strong>: Can run multiple services simultaneously</p>
</section>
<section id="option-3-direct-docker-commands" class="level2" data-number="9.11">
<h2 data-number="9.11" class="anchored" data-anchor-id="option-3-direct-docker-commands"><span class="header-section-number">9.11</span> Option 3: Direct Docker Commands</h2>
<p>For maximum control, use Docker commands directly:</p>
<div class="sourceCode" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Basic interactive session</span></span>
<span id="cb36-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-it</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-3">  ghcr.io/username/penguins_analysis:v1.0</span>
<span id="cb36-4"></span>
<span id="cb36-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive session with mounted cache</span></span>
<span id="cb36-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-it</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/cache:/home/analyst/cache"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-10">  ghcr.io/username/penguins_analysis:v1.0</span>
<span id="cb36-11"></span>
<span id="cb36-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Render research paper</span></span>
<span id="cb36-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-15">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/analysis/figures:/home/analyst/output"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-16">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-17">  ghcr.io/username/penguins_analysis:v1.0 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-18">  R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rmarkdown::render('analysis/paper/paper.Rmd')"</span></span>
<span id="cb36-19"></span>
<span id="cb36-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run specific tests</span></span>
<span id="cb36-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-23">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-24">  ghcr.io/username/penguins_analysis:v1.0 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-25">  R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"testthat::test_file('tests/testthat/test-data-integrity.R')"</span></span>
<span id="cb36-26"></span>
<span id="cb36-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive bash session</span></span>
<span id="cb36-28"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> run <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-it</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-29">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-30">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-w</span> /home/analyst/project <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-31">  ghcr.io/username/penguins_analysis:v1.0 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb36-32">  /bin/bash</span></code></pre></div>
<p><strong>Common Docker Flags Explained:</strong> - <code>--rm</code>: Remove container when it exits - <code>-it</code>: Interactive terminal session - <code>-v</code>: Mount volume (host:container) - <code>-w</code>: Set working directory inside container - <code>--entrypoint</code>: Override default command</p>
<p><strong>Benefits:</strong> - <strong>Full flexibility</strong>: Complete control over container configuration - <strong>Educational</strong>: Shows exactly what’s happening under the hood - <strong>Troubleshooting</strong>: Easier to debug when you see all options - <strong>Portability</strong>: Commands work on any Docker installation</p>
</section>
<section id="volume-mounting-strategies" class="level2" data-number="9.12">
<h2 data-number="9.12" class="anchored" data-anchor-id="volume-mounting-strategies"><span class="header-section-number">9.12</span> Volume Mounting Strategies</h2>
<p><strong>Project Files:</strong></p>
<div class="sourceCode" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Mount entire project directory</span></span>
<span id="cb37-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project"</span></span></code></pre></div>
<p><strong>Output Separation:</strong></p>
<div class="sourceCode" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Separate outputs from source</span></span>
<span id="cb38-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/analysis/figures:/home/analyst/output"</span></span></code></pre></div>
<p><strong>Cache Persistence:</strong></p>
<div class="sourceCode" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb39-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Persistent package cache across sessions</span></span>
<span id="cb39-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/cache:/home/analyst/cache"</span></span></code></pre></div>
<p><strong>Read-only Source:</strong></p>
<div class="sourceCode" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Protect source files from modification</span></span>
<span id="cb40-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-v</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">pwd</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">:/home/analyst/project:ro"</span></span></code></pre></div>
</section>
<section id="choosing-the-right-approach" class="level2" data-number="9.13">
<h2 data-number="9.13" class="anchored" data-anchor-id="choosing-the-right-approach"><span class="header-section-number">9.13</span> Choosing the Right Approach</h2>
<p><strong>Use Make Commands When:</strong> - You want simplicity and consistency - You’re new to Docker - You’re focusing on analysis rather than infrastructure</p>
<p><strong>Use Docker Compose When:</strong> - You need multiple service configurations - You’re working with a team using standardized environments - You want to define complex volume and networking setups</p>
<p><strong>Use Direct Commands When:</strong> - You need maximum flexibility - You’re troubleshooting container issues - You’re creating custom workflows not covered by Make targets</p>
<p>All three approaches can be used together in the same project, depending on the specific task and user preferences.</p>
</section>
</section>
<section id="appendix-e-github-actions-cicd-setup" class="level1 unnumbered">
<h1 class="unnumbered">Appendix E: GitHub Actions CI/CD Setup</h1>
<p>GitHub Actions provides testing and deployment for research compendia. This appendix covers CI/CD setup for reproducible research workflows.</p>
<section id="understanding-github-actions-for-research" class="level2" data-number="9.14">
<h2 data-number="9.14" class="anchored" data-anchor-id="understanding-github-actions-for-research"><span class="header-section-number">9.14</span> Understanding GitHub Actions for Research</h2>
<p><strong>What is CI/CD for Research?</strong></p>
<p>Continuous Integration/Continuous Deployment (CI/CD) tests your research code whenever changes are made. For research compendia, this means:</p>
<ul>
<li><strong>Testing</strong>: Every push triggers your test suite</li>
<li><strong>Environment consistency</strong>: Tests run in identical Docker environments</li>
<li><strong>Early error detection</strong>: Problems caught during development</li>
<li><strong>Collaboration confidence</strong>: Team members see if changes break functionality</li>
<li><strong>Reproducibility validation</strong>: Ensures analysis works across different systems</li>
</ul>
</section>
<section id="step-by-step-setup" class="level2" data-number="9.15">
<h2 data-number="9.15" class="anchored" data-anchor-id="step-by-step-setup"><span class="header-section-number">9.15</span> Step-by-Step Setup</h2>
<section id="step-1-create-workflow-directory" class="level3" data-number="9.15.1">
<h3 data-number="9.15.1" class="anchored" data-anchor-id="step-1-create-workflow-directory"><span class="header-section-number">9.15.1</span> Step 1: Create Workflow Directory</h3>
<div class="sourceCode" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the GitHub Actions directory</span></span>
<span id="cb41-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> .github/workflows</span></code></pre></div>
</section>
<section id="step-2-docker-based-ci-workflow-with-renv-validation" class="level3" data-number="9.15.2">
<h3 data-number="9.15.2" class="anchored" data-anchor-id="step-2-docker-based-ci-workflow-with-renv-validation"><span class="header-section-number">9.15.2</span> Step 2: Docker-based CI Workflow with renv Validation</h3>
<p>Create <code>.github/workflows/docker-ci.yml</code>:</p>
<div class="sourceCode" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb42-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Docker CI with renv Validation</span></span>
<span id="cb42-2"></span>
<span id="cb42-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb42-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb42-8"></span>
<span id="cb42-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build-and-test</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb42-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb42-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout repository</span></span>
<span id="cb42-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb42-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb42-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up R for renv validation</span></span>
<span id="cb42-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-r@v2</span></span>
<span id="cb42-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-version</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span></span>
<span id="cb42-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb42-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install renv for validation</span></span>
<span id="cb42-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb42-24">        install.packages("renv")</span>
<span id="cb42-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shell</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Rscript {0}</span></span>
<span id="cb42-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb42-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Validate renv consistency before Docker build</span></span>
<span id="cb42-28"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb42-29">        # Validate renv environment before building Docker image</span>
<span id="cb42-30">        Rscript check_renv_for_commit.R --fail-on-issues --quiet</span>
<span id="cb42-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb42-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Docker Buildx</span></span>
<span id="cb42-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/setup-buildx-action@v3</span></span>
<span id="cb42-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb42-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Extract R version from renv.lock</span></span>
<span id="cb42-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-version</span></span>
<span id="cb42-37"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb42-38">        R_VERSION=$(Rscript -e "cat(renv::lockfile_read()\$R\$Version)")</span>
<span id="cb42-39">        echo "r-version=${R_VERSION}" &gt;&gt; $GITHUB_OUTPUT</span>
<span id="cb42-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb42-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build Docker image</span></span>
<span id="cb42-42"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/build-push-action@v5</span></span>
<span id="cb42-43"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-44"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">context</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb42-45"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb42-46"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.repository }}:latest</span></span>
<span id="cb42-47"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        build-args</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb42-48">          R_VERSION=${{ steps.r-version.outputs.r-version }}</span>
<span id="cb42-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-from</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha</span></span>
<span id="cb42-50"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-to</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha,mode=max</span></span>
<span id="cb42-51"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb42-52"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Run tests in container</span></span>
<span id="cb42-53"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb42-54">        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb42-55">          ${{ github.repository }}:latest \</span>
<span id="cb42-56">          R -e "testthat::test_dir('tests/testthat')"</span>
<span id="cb42-57">          </span>
<span id="cb42-58"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render research paper</span></span>
<span id="cb42-59"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb42-60">        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb42-61">          -v $PWD/analysis/figures:/home/analyst/output \</span>
<span id="cb42-62">          ${{ github.repository }}:latest \</span>
<span id="cb42-63">          R -e "rmarkdown::render('analysis/paper/paper.Rmd')"</span>
<span id="cb42-64">          </span>
<span id="cb42-65"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Upload rendered paper</span></span>
<span id="cb42-66"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/upload-artifact@v4</span></span>
<span id="cb42-67"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> success()</span></span>
<span id="cb42-68"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb42-69"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> research-paper</span></span>
<span id="cb42-70"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> analysis/paper/paper.pdf</span></span></code></pre></div>
</section>
<section id="step-3-r-package-check-workflow" class="level3" data-number="9.15.3">
<h3 data-number="9.15.3" class="anchored" data-anchor-id="step-3-r-package-check-workflow"><span class="header-section-number">9.15.3</span> Step 3: R Package Check Workflow</h3>
<p>Create <code>.github/workflows/r-package.yml</code>:</p>
<div class="sourceCode" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb43-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> R Package Check</span></span>
<span id="cb43-2"></span>
<span id="cb43-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb43-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb43-8"></span>
<span id="cb43-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">R-CMD-check</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.os }}</span></span>
<span id="cb43-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb43-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.os }} (${{ matrix.config.r }})</span></span>
<span id="cb43-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb43-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">strategy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fail-fast</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb43-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">config</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">os</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">   </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb43-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">os</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> macOS-latest</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb43-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">os</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> windows-latest</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'release'</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb43-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb43-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">env</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">GITHUB_PAT</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ secrets.GITHUB_TOKEN }}</span></span>
<span id="cb43-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">R_KEEP_PKG_SOURCE</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">yes</span></span>
<span id="cb43-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb43-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb43-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb43-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-pandoc@v2</span></span>
<span id="cb43-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb43-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-r@v2</span></span>
<span id="cb43-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">r-version</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.r }}</span></span>
<span id="cb43-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">http-user-agent</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ matrix.config.http-user-agent }}</span></span>
<span id="cb43-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use-public-rspm</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb43-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span></span>
<span id="cb43-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/setup-renv@v2</span></span>
<span id="cb43-39"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb43-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install system dependencies</span></span>
<span id="cb43-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> runner.os == 'Linux'</span></span>
<span id="cb43-42"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb43-43">          sudo apt-get update</span>
<span id="cb43-44">          sudo apt-get install -y \</span>
<span id="cb43-45">            libcurl4-openssl-dev \</span>
<span id="cb43-46">            libssl-dev \</span>
<span id="cb43-47">            libxml2-dev</span>
<span id="cb43-48">            </span>
<span id="cb43-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Validate renv consistency</span></span>
<span id="cb43-50"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb43-51">          # Use the renv validation script included in the repository</span>
<span id="cb43-52">          Rscript check_renv_for_commit.R --fail-on-issues --quiet</span>
<span id="cb43-53">            </span>
<span id="cb43-54"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> r-lib/actions/check-r-package@v2</span></span>
<span id="cb43-55"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb43-56"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">upload-snapshots</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span></code></pre></div>
</section>
<section id="step-4-automated-paper-rendering" class="level3" data-number="9.15.4">
<h3 data-number="9.15.4" class="anchored" data-anchor-id="step-4-automated-paper-rendering"><span class="header-section-number">9.15.4</span> Step 4: Automated Paper Rendering</h3>
<p>Create <code>.github/workflows/render-paper.yml</code>:</p>
<div class="sourceCode" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb44-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render Research Paper</span></span>
<span id="cb44-2"></span>
<span id="cb44-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_dispatch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # Manual trigger</span></span>
<span id="cb44-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> master </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb44-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paths</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'analysis/paper/**'</span></span>
<span id="cb44-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'analysis/data/**'</span></span>
<span id="cb44-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'R/**'</span></span>
<span id="cb44-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data/**'</span></span>
<span id="cb44-12"></span>
<span id="cb44-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">render</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb44-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb44-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout repository</span></span>
<span id="cb44-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb44-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb44-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Docker Buildx</span></span>
<span id="cb44-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/setup-buildx-action@v3</span></span>
<span id="cb44-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb44-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build Docker image</span></span>
<span id="cb44-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/build-push-action@v5</span></span>
<span id="cb44-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">context</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb44-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb44-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> paper-render:latest</span></span>
<span id="cb44-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-from</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha</span></span>
<span id="cb44-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-to</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha,mode=max</span></span>
<span id="cb44-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span></span>
<span id="cb44-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render paper in container</span></span>
<span id="cb44-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb44-35">          docker run --rm \</span>
<span id="cb44-36">            -v $PWD:/home/analyst/project \</span>
<span id="cb44-37">            -v $PWD/analysis/figures:/home/analyst/output \</span>
<span id="cb44-38">            paper-render:latest \</span>
<span id="cb44-39">            R -e "rmarkdown::render('analysis/paper/paper.Rmd')"</span>
<span id="cb44-40">            </span>
<span id="cb44-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Upload rendered paper</span></span>
<span id="cb44-42"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/upload-artifact@v4</span></span>
<span id="cb44-43"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb44-44"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> research-paper-${{ github.sha }}</span></span>
<span id="cb44-45"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb44-46">            analysis/paper/paper.pdf</span>
<span id="cb44-47">            analysis/figures/*.png</span>
<span id="cb44-48">            analysis/figures/*.jpg</span>
<span id="cb44-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">retention-days</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span></span></code></pre></div>
</section>
<section id="step-5-container-registry-integration" class="level3" data-number="9.15.5">
<h3 data-number="9.15.5" class="anchored" data-anchor-id="step-5-container-registry-integration"><span class="header-section-number">9.15.5</span> Step 5: Container Registry Integration</h3>
<p>Create <code>.github/workflows/container-publish.yml</code>:</p>
<div class="sourceCode" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb45-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build and Push Container</span></span>
<span id="cb45-2"></span>
<span id="cb45-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb45-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'v*'</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb45-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb45-9"></span>
<span id="cb45-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">env</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">REGISTRY</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ghcr.io</span></span>
<span id="cb45-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">IMAGE_NAME</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.repository }}</span></span>
<span id="cb45-13"></span>
<span id="cb45-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build-and-push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb45-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">contents</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> read</span></span>
<span id="cb45-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">packages</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> write</span></span>
<span id="cb45-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span></span>
<span id="cb45-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout repository</span></span>
<span id="cb45-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb45-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb45-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Docker Buildx</span></span>
<span id="cb45-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/setup-buildx-action@v3</span></span>
<span id="cb45-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span></span>
<span id="cb45-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Log in to Container Registry</span></span>
<span id="cb45-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> github.event_name != 'pull_request'</span></span>
<span id="cb45-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/login-action@v3</span></span>
<span id="cb45-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">registry</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ env.REGISTRY }}</span></span>
<span id="cb45-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">username</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.actor }}</span></span>
<span id="cb45-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">password</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ secrets.GITHUB_TOKEN }}</span></span>
<span id="cb45-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span></span>
<span id="cb45-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Extract metadata</span></span>
<span id="cb45-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> meta</span></span>
<span id="cb45-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/metadata-action@v5</span></span>
<span id="cb45-39"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">images</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}</span></span>
<span id="cb45-41"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb45-42">            type=ref,event=branch</span>
<span id="cb45-43">            type=ref,event=pr</span>
<span id="cb45-44">            type=semver,pattern={{version}}</span>
<span id="cb45-45">            type=semver,pattern={{major}}.{{minor}}</span>
<span id="cb45-46">            </span>
<span id="cb45-47"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Build and push Docker image</span></span>
<span id="cb45-48"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> docker/build-push-action@v5</span></span>
<span id="cb45-49"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb45-50"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">context</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> .</span></span>
<span id="cb45-51"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">platforms</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> linux/amd64,linux/arm64</span></span>
<span id="cb45-52"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.event_name != 'pull_request' }}</span></span>
<span id="cb45-53"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tags</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ steps.meta.outputs.tags }}</span></span>
<span id="cb45-54"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labels</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ steps.meta.outputs.labels }}</span></span>
<span id="cb45-55"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-from</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha</span></span>
<span id="cb45-56"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache-to</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> type=gha,mode=max</span></span></code></pre></div>
</section>
</section>
<section id="workflow-explanations" class="level2" data-number="9.16">
<h2 data-number="9.16" class="anchored" data-anchor-id="workflow-explanations"><span class="header-section-number">9.16</span> Workflow Explanations</h2>
<section id="docker-ci-workflow-features" class="level3" data-number="9.16.1">
<h3 data-number="9.16.1" class="anchored" data-anchor-id="docker-ci-workflow-features"><span class="header-section-number">9.16.1</span> Docker CI Workflow Features:</h3>
<ul>
<li><strong>Pre-build renv Validation</strong>: Validates package dependency consistency before Docker build (prevents build failures)</li>
<li><strong>Dynamic R Version</strong>: Extracts R version from renv.lock and passes it to Docker build</li>
<li><strong>Build Testing</strong>: Ensures Docker image builds with latest changes using correct R version</li>
<li><strong>Testing</strong>: Runs R package tests and renders paper in container</li>
<li><strong>Artifact Generation</strong>: Saves rendered papers as downloadable artifacts</li>
<li><strong>Caching</strong>: Uses GitHub Actions cache for faster builds</li>
<li><strong>Early Failure</strong>: Stops pipeline if dependency issues are detected</li>
</ul>
</section>
<section id="r-package-check-features" class="level3" data-number="9.16.2">
<h3 data-number="9.16.2" class="anchored" data-anchor-id="r-package-check-features"><span class="header-section-number">9.16.2</span> R Package Check Features:</h3>
<ul>
<li><strong>Multi-platform Testing</strong>: Tests on Ubuntu, macOS, and Windows</li>
<li><strong>R CMD Check</strong>: Package validation</li>
<li><strong>renv Integration</strong>: Restores package environment</li>
<li><strong>renv Consistency Validation</strong>: Verifies dependency synchronization across platforms</li>
<li><strong>System Dependencies</strong>: Installs required system libraries</li>
</ul>
</section>
<section id="paper-rendering-features" class="level3" data-number="9.16.3">
<h3 data-number="9.16.3" class="anchored" data-anchor-id="paper-rendering-features"><span class="header-section-number">9.16.3</span> Paper Rendering Features:</h3>
<ul>
<li><strong>Selective Triggering</strong>: Only runs when relevant files change</li>
<li><strong>Manual Execution</strong>: Can be triggered manually via GitHub interface</li>
<li><strong>Artifact Storage</strong>: Saves PDFs and figures with retention policy</li>
<li><strong>Path-based Triggers</strong>: Responds to changes in analysis files</li>
</ul>
</section>
<section id="container-publishing-features" class="level3" data-number="9.16.4">
<h3 data-number="9.16.4" class="anchored" data-anchor-id="container-publishing-features"><span class="header-section-number">9.16.4</span> Container Publishing Features:</h3>
<ul>
<li><strong>Building</strong>: Builds on pushes and tags</li>
<li><strong>Multi-platform</strong>: Supports AMD64 and ARM64 platforms</li>
<li><strong>Semantic Versioning</strong>: Tagging based on git tags</li>
<li><strong>Security</strong>: Uses built-in GitHub token for authentication</li>
</ul>
</section>
</section>
<section id="authentication-and-permissions" class="level2" data-number="9.17">
<h2 data-number="9.17" class="anchored" data-anchor-id="authentication-and-permissions"><span class="header-section-number">9.17</span> Authentication and Permissions</h2>
<section id="built-in-github_token" class="level3" data-number="9.17.1">
<h3 data-number="9.17.1" class="anchored" data-anchor-id="built-in-github_token"><span class="header-section-number">9.17.1</span> Built-in GITHUB_TOKEN:</h3>
<p>The built-in <code>GITHUB_TOKEN</code> automatically provides: - Read access to repository contents - Write access to GitHub Packages (when permissions are set) - No manual setup required</p>
</section>
<section id="setting-repository-permissions" class="level3" data-number="9.17.2">
<h3 data-number="9.17.2" class="anchored" data-anchor-id="setting-repository-permissions"><span class="header-section-number">9.17.2</span> Setting Repository Permissions:</h3>
<ol type="1">
<li><strong>Repository Settings</strong> → <strong>Actions</strong> → <strong>General</strong></li>
<li><strong>Workflow permissions</strong>: Choose “Read and write permissions”</li>
<li><strong>Allow GitHub Actions to create and approve pull requests</strong>: Enable if needed</li>
</ol>
</section>
<section id="using-personal-access-tokens-advanced" class="level3" data-number="9.17.3">
<h3 data-number="9.17.3" class="anchored" data-anchor-id="using-personal-access-tokens-advanced"><span class="header-section-number">9.17.3</span> Using Personal Access Tokens (Advanced):</h3>
<p>For broader permissions, create repository secrets:</p>
<ol type="1">
<li><strong>Repository Settings</strong> → <strong>Secrets and variables</strong> → <strong>Actions</strong></li>
<li><strong>New repository secret</strong>: Add <code>GHCR_TOKEN</code> with Personal Access Token</li>
<li><strong>Reference in workflow</strong>: <code>password: ${{ secrets.GHCR_TOKEN }}</code></li>
</ol>
</section>
</section>
<section id="integration-with-collaborative-workflow" class="level2" data-number="9.18">
<h2 data-number="9.18" class="anchored" data-anchor-id="integration-with-collaborative-workflow"><span class="header-section-number">9.18</span> Integration with Collaborative Workflow</h2>
<section id="pull-request-integration" class="level3" data-number="9.18.1">
<h3 data-number="9.18.1" class="anchored" data-anchor-id="pull-request-integration"><span class="header-section-number">9.18.1</span> Pull Request Integration:</h3>
<p>When a team member submits a pull request: 1. GitHub automatically triggers CI workflows 2. Tests run in clean environment identical to production 3. Results displayed directly in pull request interface 4. Merge can be blocked if tests fail</p>
</section>
<section id="branch-protection-rules" class="level3" data-number="9.18.2">
<h3 data-number="9.18.2" class="anchored" data-anchor-id="branch-protection-rules"><span class="header-section-number">9.18.2</span> Branch Protection Rules:</h3>
<p>Enable in <strong>Repository Settings</strong> → <strong>Branches</strong>: - <strong>Require status checks</strong>: Force CI to pass before merging - <strong>Require branches to be up to date</strong>: Ensure latest code is tested - <strong>Include administrators</strong>: Apply rules to all users</p>
</section>
</section>
<section id="monitoring-and-troubleshooting" class="level2" data-number="9.19">
<h2 data-number="9.19" class="anchored" data-anchor-id="monitoring-and-troubleshooting"><span class="header-section-number">9.19</span> Monitoring and Troubleshooting</h2>
<section id="viewing-workflow-results" class="level3" data-number="9.19.1">
<h3 data-number="9.19.1" class="anchored" data-anchor-id="viewing-workflow-results"><span class="header-section-number">9.19.1</span> Viewing Workflow Results:</h3>
<ol type="1">
<li><strong>Repository</strong> → <strong>Actions</strong> tab</li>
<li>Click specific workflow run to see details</li>
<li>Expand steps to see detailed logs</li>
<li>Download artifacts (rendered papers, test results)</li>
</ol>
</section>
<section id="common-issues-and-solutions" class="level3" data-number="9.19.2">
<h3 data-number="9.19.2" class="anchored" data-anchor-id="common-issues-and-solutions"><span class="header-section-number">9.19.2</span> Common Issues and Solutions:</h3>
<p><strong>Docker Build Failures:</strong> - Check Dockerfile syntax - Verify all COPY paths exist - Ensure base image is accessible</p>
<p><strong>renv Restore Failures:</strong> - Verify renv.lock is committed - Check for platform-specific packages - Consider using RSPM for faster installs</p>
<p><strong>Permission Errors:</strong> - Verify GITHUB_TOKEN permissions - Check repository secrets configuration - Ensure workflows have necessary permissions</p>
</section>
<section id="performance-optimization" class="level3" data-number="9.19.3">
<h3 data-number="9.19.3" class="anchored" data-anchor-id="performance-optimization"><span class="header-section-number">9.19.3</span> Performance Optimization:</h3>
<p><strong>Caching Strategies:</strong> - Docker layer caching with <code>cache-from/cache-to</code> - renv package caching with <code>r-lib/actions/setup-renv</code> - Artifact caching for large datasets</p>
<p><strong>Parallel Execution:</strong> - Run tests and documentation in parallel jobs - Use matrix strategies for multi-platform testing - Conditional execution based on changed files</p>
<p>This CI/CD setup ensures that research compendia remain reproducible, tested, and deployment-ready throughout the development lifecycle.</p>
</section>
</section>
</section>
<section id="appendix-f-docker-configuration-examples" class="level1 unnumbered">
<h1 class="unnumbered">Appendix F: Docker Configuration Examples</h1>
<p>This appendix provides Dockerfile examples ranging from minimal configurations to full development environments.</p>
<section id="production-dockerfile" class="level2" data-number="9.20">
<h2 data-number="9.20" class="anchored" data-anchor-id="production-dockerfile"><span class="header-section-number">9.20</span> Production Dockerfile</h2>
<p>The following Dockerfile provides a development environment with zsh, vim plugins, dotfiles integration, and development tools:</p>
<div class="sourceCode" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb46-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Use R version from renv.lock for perfect consistency</span></span>
<span id="cb46-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> R_VERSION=4.3.0</span>
<span id="cb46-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> rocker/r-ver:${R_VERSION}</span>
<span id="cb46-4"></span>
<span id="cb46-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install system dependencies including zsh and development tools</span></span>
<span id="cb46-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> update <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt-get</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-7">    libxml2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-8">    libcurl4-openssl-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-9">    libssl-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-10">    libgit2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-11">    libfontconfig1-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-12">    libcairo2-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-13">    libxt-dev <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-14">    pandoc <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-15">    zsh <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-16">    curl <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-17">    git <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-18">    fonts-dejavu <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-19">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> /var/lib/apt/lists/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb46-20"></span>
<span id="cb46-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create non-root user with zsh as default shell</span></span>
<span id="cb46-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> USERNAME=analyst</span>
<span id="cb46-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">useradd</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--create-home</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span> /bin/zsh <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span></span>
<span id="cb46-24"></span>
<span id="cb46-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set working directory</span></span>
<span id="cb46-26"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}/project</span>
<span id="cb46-27"></span>
<span id="cb46-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy project files first (for better Docker layer caching)</span></span>
<span id="cb46-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> DESCRIPTION .</span>
<span id="cb46-30"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv.lock* ./</span>
<span id="cb46-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> .Rprofile* ./</span>
<span id="cb46-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> renv/activate.R* renv/activate.R</span>
<span id="cb46-33"></span>
<span id="cb46-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Configure renv library path</span></span>
<span id="cb46-35"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> RENV_PATHS_LIBRARY renv/library</span>
<span id="cb46-36"></span>
<span id="cb46-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Switch to non-root user for R package installation</span></span>
<span id="cb46-38"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> ${USERNAME}</span>
<span id="cb46-39"></span>
<span id="cb46-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install renv and essential R packages</span></span>
<span id="cb46-41"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages(c('renv', 'remotes', 'devtools', 'knitr', </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-42"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    'rmarkdown'), repos = c(CRAN = 'https://cloud.r-project.org'))"</span></span>
<span id="cb46-43"></span>
<span id="cb46-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restore R packages from lockfile (if exists)</span></span>
<span id="cb46-45"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"if (file.exists('renv.lock')) renv::restore() else </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-46"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    cat('No renv.lock found, skipping restore</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n')"</span></span>
<span id="cb46-47"></span>
<span id="cb46-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy dotfiles for development environment</span></span>
<span id="cb46-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Note: Ensure .vimrc and .zshrc_docker exist in build context or create </span></span>
<span id="cb46-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># defaults</span></span>
<span id="cb46-51"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> .vimrc /home/${USERNAME}/.vimrc</span>
<span id="cb46-52"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> .zshrc_docker /home/${USERNAME}/.zshrc</span>
<span id="cb46-53"></span>
<span id="cb46-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install zsh plugins for shell experience</span></span>
<span id="cb46-55"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.zsh <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-56">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/zsh-users/zsh-autosuggestions <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-57">        /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.zsh/zsh-autosuggestions <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-58">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.zsh</span>
<span id="cb46-59"></span>
<span id="cb46-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install vim-plug and configure vim environment</span></span>
<span id="cb46-61"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.vim/autoload <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-62">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fLo</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.vim/autoload/plug.vim <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-63">    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb46-64">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>:<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span> /home/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${USERNAME}</span>/.vim</span>
<span id="cb46-65"></span>
<span id="cb46-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install vim plugins (suppress interactive mode)</span></span>
<span id="cb46-67"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vim</span> +PlugInstall +qall <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">||</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb46-68"></span>
<span id="cb46-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy rest of project</span></span>
<span id="cb46-70"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--chown=${USERNAME}:${USERNAME}</span> . .</span>
<span id="cb46-71"></span>
<span id="cb46-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install the research compendium as a package</span></span>
<span id="cb46-73"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"devtools::install('.', dependencies = TRUE)"</span></span>
<span id="cb46-74"></span>
<span id="cb46-75"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set default shell to zsh for development experience</span></span>
<span id="cb46-76"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /home/${USERNAME}/project</span>
<span id="cb46-77"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CMD</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/bin/zsh"</span>]</span></code></pre></div>
</section>
<section id="features-of-the-production-dockerfile" class="level2" data-number="9.21">
<h2 data-number="9.21" class="anchored" data-anchor-id="features-of-the-production-dockerfile"><span class="header-section-number">9.21</span> Features of the Production Dockerfile</h2>
<p>This production-ready Dockerfile provides:</p>
<ul>
<li><strong>R version consistency</strong>: Matches exact R version specified in renv.lock for perfect environment alignment</li>
<li><strong>Minimal base</strong>: rocker/r-ver provides clean R installation without unnecessary packages</li>
<li><strong>Shell environment</strong>: zsh with autosuggestions and professional prompt for improved productivity</li>
<li><strong>Editor environment</strong>: vim with plugins configured automatically during build</li>
<li><strong>Dotfiles integration</strong>: Personal development preferences (.vimrc, .zshrc) copied from host system</li>
<li><strong>Development tools</strong>: git, curl, pandoc, and essential development libraries pre-installed</li>
<li><strong>Security</strong>: Non-root user execution with proper file permissions</li>
<li><strong>renv integration</strong>: Automatic package restoration with proper library path configuration</li>
<li><strong>Container-optimized workflow</strong>: Optimized layer caching and build process for efficient rebuilds</li>
</ul>
</section>
<section id="r-version-extraction" class="level2" data-number="9.22">
<h2 data-number="9.22" class="anchored" data-anchor-id="r-version-extraction"><span class="header-section-number">9.22</span> R Version Extraction</h2>
<p>The Dockerfile uses a build argument to ensure the R version exactly matches what’s specified in <code>renv.lock</code>. The build command extracts the R version directly from the renv lockfile:</p>
<div class="sourceCode" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract R version from renv.lock</span></span>
<span id="cb47-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">R_VERSION</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">jq</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.R.Version'</span> renv.lock<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb47-3"></span>
<span id="cb47-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build Docker image with extracted R version</span></span>
<span id="cb47-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> build <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--build-arg</span> R_VERSION=<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${R_VERSION}</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb47-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> ghcr.io/username/penguins_analysis:v1.0 .</span></code></pre></div>
<p>If the <code>renv.lock</code> file specifies R 4.3.1, the Docker image will use <code>rocker/r-ver:4.3.1</code>. If renv is updated to R 4.4.0, the Docker build will use <code>rocker/r-ver:4.4.0</code>. This maintains consistency between the package environment and system environment.</p>
</section>
</section>
<section id="appendix-g-renv-management-and-validation" class="level1 unnumbered">
<h1 class="unnumbered">Appendix G: renv Management and Validation</h1>
<p>This appendix provides details for the renv consistency checking script and dependency management workflows.</p>
<section id="renv-consistency-checker-features" class="level2" data-number="9.23">
<h2 data-number="9.23" class="anchored" data-anchor-id="renv-consistency-checker-features"><span class="header-section-number">9.23</span> renv Consistency Checker Features</h2>
<p>The <code>check_renv_for_commit.R</code> script provides advanced team collaboration features through dependency validation:</p>
<ul>
<li><strong>Team conflict prevention</strong>: Pre-commit validation stops dependency inconsistencies before they reach the repository</li>
<li><strong>Automated dependency discovery</strong>: Scans R/, scripts/, and analysis/ directories for <code>library()</code>, <code>require()</code>, and <code>pkg::</code> calls</li>
<li><strong>Multi-source synchronization</strong>: Ensures packages are consistent across code files, DESCRIPTION, and renv.lock</li>
<li><strong>CRAN validation</strong>: Verifies packages exist and are properly named before team integration</li>
<li><strong>Automatic fixing</strong>: Updates DESCRIPTION and regenerates renv.lock to maintain team synchronization</li>
<li><strong>CI/CD fail-fast</strong>: Provides proper exit codes for automated workflows</li>
<li><strong>Interactive collaboration mode</strong>: Guides developers through dependency resolution during development</li>
</ul>
</section>
<section id="team-collaboration-commands" class="level2" data-number="9.24">
<h2 data-number="9.24" class="anchored" data-anchor-id="team-collaboration-commands"><span class="header-section-number">9.24</span> Team Collaboration Commands</h2>
<div class="sourceCode" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Team development workflow (via Make)</span></span>
<span id="cb48-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Interactive dependency checking</span></span>
<span id="cb48-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv-fix      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Auto-fix dependency issues</span></span>
<span id="cb48-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> check-renv-ci       <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CI/CD validation with fail-fast</span></span>
<span id="cb48-5"></span>
<span id="cb48-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Docker-based validation (no local R required)</span></span>
<span id="cb48-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-check-renv-fix  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fix dependencies in container</span></span>
<span id="cb48-8"></span>
<span id="cb48-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Direct script usage</span></span>
<span id="cb48-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fail-on-issues</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># CI mode</span></span>
<span id="cb48-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--quiet</span>                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Minimal output</span></span>
<span id="cb48-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--help</span>                  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Usage info</span></span></code></pre></div>
</section>
<section id="multi-developer-workflow" class="level2" data-number="9.25">
<h2 data-number="9.25" class="anchored" data-anchor-id="multi-developer-workflow"><span class="header-section-number">9.25</span> Multi-Developer Workflow</h2>
<ol type="1">
<li><strong>Install packages in container</strong>: Use <code>install.packages()</code> or <code>renv::install()</code> within Docker environment</li>
<li><strong>Validate team dependencies</strong>: Run <code>make check-renv</code> to check for conflicts before committing</li>
<li><strong>Review team impacts</strong>: Script identifies packages that would affect other team members</li>
<li><strong>Synchronize team environment</strong>: Use <code>make check-renv-fix</code> to update shared dependency files</li>
<li><strong>Commit with team confidence</strong>: Other developers can reproduce your exact environment</li>
</ol>
</section>
<section id="integration-with-development-workflows" class="level2" data-number="9.26">
<h2 data-number="9.26" class="anchored" data-anchor-id="integration-with-development-workflows"><span class="header-section-number">9.26</span> Integration with Development Workflows</h2>
<section id="pre-commit-hooks" class="level3" data-number="9.26.1">
<h3 data-number="9.26.1" class="anchored" data-anchor-id="pre-commit-hooks"><span class="header-section-number">9.26.1</span> Pre-commit Hooks</h3>
<div class="sourceCode" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add to .git/hooks/pre-commit</span></span>
<span id="cb49-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Rscript</span> check_renv_for_commit.R <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fail-on-issues</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--quiet</span></span></code></pre></div>
</section>
<section id="makefile-integration" class="level3" data-number="9.26.2">
<h3 data-number="9.26.2" class="anchored" data-anchor-id="makefile-integration"><span class="header-section-number">9.26.2</span> Makefile Integration</h3>
<div class="sourceCode" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb50-1"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">check-renv:</span></span>
<span id="cb50-2"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">    </span>Rscript check_renv_for_commit.R</span>
<span id="cb50-3"></span>
<span id="cb50-4"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">check-renv-fix:</span></span>
<span id="cb50-5"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">    </span>Rscript check_renv_for_commit.R --fix</span>
<span id="cb50-6"></span>
<span id="cb50-7"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">check-renv-ci:</span></span>
<span id="cb50-8"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">    </span>Rscript check_renv_for_commit.R --quiet --fail-on-issues</span></code></pre></div>
</section>
<section id="cicd-integration" class="level3" data-number="9.26.3">
<h3 data-number="9.26.3" class="anchored" data-anchor-id="cicd-integration"><span class="header-section-number">9.26.3</span> CI/CD Integration</h3>
<div class="sourceCode" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb51-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Validate renv consistency</span></span>
<span id="cb51-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Rscript check_renv_for_commit.R --fail-on-issues --quiet</span></span></code></pre></div>
<p>This approach ensures that collaborators can reliably reproduce your package environment and that CI/CD pipelines have all necessary dependency information.</p>


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Thomas, R.G.},
  title = {Research {Compendia} for {Full} {Reproducibility} in {R:} {A}
    Zzrrtools, Renv, Draft: True and {Docker} {Strategy}},
  date = {2025-07-05},
  url = {https://focusonr.org/posts/share_R_code_via_docker_p25/},
  langid = {en},
  abstract = {This white paper presents an approach to achieving
    reproducibility in R workflows by combining three tools: zzrrtools
    for creating structured research compendia, renv for R package
    management, and Docker for containerizing the computing environment.
    The zzrrtools framework provides a standardized research compendium
    structure, renv manages package dependencies, and Docker ensures
    consistent execution environments. Together, these tools create
    self-contained research compendia that run identically across
    different systems. The paper includes a practical case study
    demonstrating multi-developer collaborative workflows with clear
    governance roles, where a project maintainer manages the technical
    infrastructure while multiple contributors extend the research
    analysis.}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and R.G. Thomas. 2025. <span>“Research
Compendia for Full Reproducibility in R: A Zzrrtools, Renv, Draft: True
and Docker Strategy.”</span> July 5, 2025. <a href="https://focusonr.org/posts/share_R_code_via_docker_p25/">https://focusonr.org/posts/share_R_code_via_docker_p25/</a>.
</div></div></section></div> ]]></description>
  <guid>https://focusonr.org/posts/share_R_code_via_docker_p25/</guid>
  <pubDate>Sat, 05 Jul 2025 07:00:00 GMT</pubDate>
</item>
<item>
  <title>Rapid conversion of draft R scripts to formal Rmd reports</title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>R.G. Thomas</dc:creator>
  <link>https://focusonr.org/posts/rapid_conversion_R_to_Rmd_p35/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/images/posts/ucsd-geisel-library.jpg" class="img-fluid figure-img"></p>
<figcaption>Caption for your hero image - either conceptual or a preview of main results</figcaption>
</figure>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<!-- Context setting and motivation (150-200 words)
- Why this topic matters
- What gap this fills
- What readers will learn
- Brief overview of approach -->
<p>Three things many R developers are often reluctant to tackle: code documentation, testing, and report preparation.</p>
<p>In this post, we’ll explore [topic/technique/problem]. This is particularly relevant for [target audience] because [motivation/problem statement].</p>
<p>By the end of this post, you’ll be able to:</p>
<ul>
<li>[Learning objective 1]</li>
<li>[Learning objective 2]</li>
<li>[Learning objective 3]</li>
</ul>
<p>In this post we’ll consider some processes and tools to quickly move from code focused data analysis development to formalization of results for sharing and presentation purposes.</p>
</section>
<section id="prerequisites-and-setup" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Prerequisites and Setup</h1>
<!-- Include this section if applicable -->
<p>Before we begin, ensure you have the following:</p>
<p><strong>Required Packages:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install required packages if not already installed</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"package1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"package2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"package3"</span>))</span></code></pre></div>
</div>
<p><strong>Load Libraries:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Replace with your actual packages</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># library(dplyr)</span></span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># library(ggplot2)</span></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># library(readr)</span></span></code></pre></div>
</div>
<p><strong>Sample Data:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Replace with your actual data loading</span></span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># data &lt;- read_csv("your_data.csv")</span></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># data &lt;- mtcars  # Example with built-in data</span></span></code></pre></div>
</div>
</section>
<section id="main-section-1-descriptive-heading" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Main Section 1: [Descriptive Heading]</h1>
<!-- First major concept/step
- Explain the theory/concept
- Provide simple examples
- Include 1-2 code blocks -->
<p>[Explanation of first main concept]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Replace with your actual example code</span></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># result &lt;- your_function(data)</span></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(result)</span></span></code></pre></div>
</div>
<section id="subsection-1.1-more-specific-topic" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="subsection-1.1-more-specific-topic"><span class="header-section-number">3.1</span> Subsection 1.1: [More Specific Topic]</h2>
<!-- Use subsections for detailed breakdowns when needed -->
<p>[More detailed explanation or variation]</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/images/posts/ucsd-geisel-library.jpg" class="img-fluid figure-img"></p>
<figcaption>Optional supporting visualization</figcaption>
</figure>
</div>
</section>
</section>
<section id="main-section-2-implementationanalysis" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Main Section 2: [Implementation/Analysis]</h1>
<!-- Second major section
- Build on previous concepts
- Show practical application
- Include technical visualization -->
<p>[Detailed implementation or analysis]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Replace with your actual advanced example</span></span>
<span id="cb5-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># advanced_result &lt;- complex_analysis(data)</span></span>
<span id="cb5-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># summary(advanced_result)</span></span></code></pre></div>
</div>
<section id="subsection-2.1-handling-edge-cases" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="subsection-2.1-handling-edge-cases"><span class="header-section-number">4.1</span> Subsection 2.1: [Handling Edge Cases]</h2>
<!-- Common pattern: addressing limitations or special cases -->
<p>[Discussion of potential issues and solutions]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Replace with your actual error handling code</span></span>
<span id="cb6-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tryCatch({</span></span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   risky_operation(data)</span></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># }, error = function(e) {</span></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   message("Error handled: ", e$message)</span></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># })</span></span></code></pre></div>
</div>
</section>
</section>
<section id="main-section-3-resultsadvanced-applications" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Main Section 3: [Results/Advanced Applications]</h1>
<!-- Third major section
- Show results or advanced usage
- Include main technical visualization
- Demonstrate real-world application -->
<p>[Analysis of results or advanced applications]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Replace with your actual final analysis</span></span>
<span id="cb7-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># final_plot &lt;- ggplot(data, aes(x, y)) + </span></span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   geom_point() +</span></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   theme_minimal()</span></span>
<span id="cb7-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(final_plot)</span></span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/rapid_conversion_R_to_Rmd_p35/main-result-plot.png" class="img-fluid figure-img"></p>
<figcaption>Main technical visualization showing key results</figcaption>
</figure>
</div>
</section>
<section id="main-section-4-performancecomparison" class="level1 optional" data-number="6">
<h1 class="optional" data-number="6"><span class="header-section-number">6</span> Main Section 4: [Performance/Comparison]</h1>
<!-- Optional section for performance analysis or comparisons -->
<p>[Performance analysis or comparison with alternative approaches]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Replace with your actual benchmarking code</span></span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># system.time(method1(data))</span></span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># system.time(method2(data))</span></span></code></pre></div>
</div>
</section>
<section id="results-and-key-findings" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Results and Key Findings</h1>
<!-- Summary of main results (100-150 words)
- Highlight key insights
- Quantify improvements/findings
- Address original objectives -->
<p>Our analysis revealed several key findings:</p>
<ol type="1">
<li><strong>[Key finding 1]</strong>: [Brief explanation with numbers if applicable]</li>
<li><strong>[Key finding 2]</strong>: [Brief explanation]</li>
<li><strong>[Key finding 3]</strong>: [Brief explanation]</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/rapid_conversion_R_to_Rmd_p35/summary-plot.png" class="img-fluid figure-img"></p>
<figcaption>Summary visualization highlighting main results</figcaption>
</figure>
</div>
</section>
<section id="limitations-and-considerations" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Limitations and Considerations</h1>
<!-- Honest assessment of limitations -->
<p>While this approach is effective, there are some considerations:</p>
<ul>
<li><strong>[Limitation 1]</strong>: [Explanation and potential workarounds]</li>
<li><strong>[Limitation 2]</strong>: [Explanation]</li>
<li><strong>[Performance considerations]</strong>: [When this approach works best]</li>
</ul>
</section>
<section id="future-extensions" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Future Extensions</h1>
<!-- Potential next steps or improvements -->
<p>This work could be extended in several directions:</p>
<ul>
<li>[Extension idea 1]</li>
<li>[Extension idea 2]</li>
<li>[Extension idea 3]</li>
</ul>
</section>
<section id="conclusion" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Conclusion</h1>
<!-- Wrap-up and call to action (100-150 words)
- Reinforce key takeaways
- Encourage experimentation
- Provide next steps -->
<p>In this post, we’ve demonstrated [brief summary of what was accomplished]. The key advantages of this approach are [main benefits].</p>
<p><strong>Next Steps:</strong> - Try this technique with your own data - Experiment with different parameters - Explore the additional resources below</p>
<p>I encourage you to adapt this approach to your specific use case and share your experiences in the comments below.</p>
</section>
<section id="additional-resources" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Additional Resources</h1>
<!-- Links to related content and further reading -->
<p><strong>Documentation and Tutorials:</strong> - <a href="https://example.com">Package documentation</a> - <a href="https://example.com">Related tutorial</a> - <a href="https://example.com">Official vignette</a></p>
<p><strong>Academic References:</strong> - Author, A. (Year). “Paper Title”. <em>Journal Name</em>, Volume(Issue), pages. - Author, B. (Year). “Another Paper”. <em>Conference Proceedings</em>.</p>
<p><strong>Community Resources:</strong> - <a href="https://stackoverflow.com">Stack Overflow discussion</a> - <a href="https://github.com">GitHub repository</a> - <a href="https://r-bloggers.com">R-bloggers related post</a></p>
</section>
<section id="reproducibility-information" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Reproducibility Information</h1>
<!-- Session info for reproducibility -->
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS Sequoia 15.5

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
 [1] htmlwidgets_1.6.4 compiler_4.5.0    fastmap_1.2.0     cli_3.6.5        
 [5] tools_4.5.0       htmltools_0.5.8.1 yaml_2.3.10       rmarkdown_2.29   
 [9] knitr_1.50        jsonlite_2.0.0    xfun_0.52         digest_0.6.37    
[13] rlang_1.1.6       evaluate_1.0.3   </code></pre>
</div>
</div>
</section>
<section id="appendix-optional-detailed-information" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Appendix: [Optional Detailed Information]</h1>
<!-- Use appendices sparingly - only for:
- Detailed technical specifications
- Extended code examples
- Mathematical derivations
- Additional data or tables -->
<section id="appendix-a-complete-code" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="appendix-a-complete-code"><span class="header-section-number">13.1</span> Appendix A: Complete Code</h2>
<!-- Full, uncommented code for easy copying -->
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Complete code for easy reproduction - replace with your actual code</span></span>
<span id="cb10-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># library(your_packages)</span></span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># data &lt;- load_your_data()</span></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># results &lt;- your_analysis(data)</span></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plot(results)</span></span></code></pre></div>
</div>
</section>
<section id="appendix-b-mathematical-details" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="appendix-b-mathematical-details"><span class="header-section-number">13.2</span> Appendix B: Mathematical Details</h2>
<!-- Mathematical formulations if applicable -->
<p>[Detailed mathematical explanations or derivations]</p>
</section>
<section id="appendix-c-additional-data" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="appendix-c-additional-data"><span class="header-section-number">13.3</span> Appendix C: Additional Data</h2>
<!-- Extended results or data tables -->
<p>[Additional tables, charts, or data summaries]</p>
<hr>
<p><em>Have questions or suggestions? Feel free to reach out on <a href="https://twitter.com/yourhandle">Twitter</a> or <a href="https://linkedin.com/in/yourprofile">LinkedIn</a>. You can also find the complete code for this analysis on <a href="https://github.com/yourusername/repository">GitHub</a>.</em></p>
<!-- Optional: Brief author bio -->
<p><strong>About the Author:</strong> [Your name] is a [your role] specializing in [your expertise]. [Brief background and interests.]</p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas2025,
  author = {(Ryy) Glenn Thomas, Ronald and Thomas, R.G.},
  title = {Rapid Conversion of Draft {R} Scripts to Formal {Rmd}
    Reports},
  date = {2025-07-04},
  url = {https://focusonr.org/posts/rapid_conversion_R_to_Rmd_p35/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas2025" class="csl-entry quarto-appendix-citeas">
(Ryy) Glenn Thomas, Ronald, and R.G. Thomas. 2025. <span>“Rapid
Conversion of Draft R Scripts to Formal Rmd Reports.”</span> July 4,
2025. <a href="https://focusonr.org/posts/rapid_conversion_R_to_Rmd_p35/">https://focusonr.org/posts/rapid_conversion_R_to_Rmd_p35/</a>.
</div></div></section></div> ]]></description>
  <category>R Programming</category>
  <category>Data Science</category>
  <category>Statistical Computing</category>
  <guid>https://focusonr.org/posts/rapid_conversion_R_to_Rmd_p35/</guid>
  <pubDate>Fri, 04 Jul 2025 16:47:11 GMT</pubDate>
  <media:content url="https://focusonr.org/images/posts/ucsd-geisel-library.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/simple_shiny_app_with_chatgpt/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/simple_shiny_app_with_chatgpt/</guid>
  <pubDate>Wed, 02 Jul 2025 04:33:17 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/simple_shiny_app_with_chatgpt/img/chatGPT" medium="image"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/chatbots_in_stats/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/chatbots_in_stats/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/chatbots_in_stats/img/chatGPT" medium="image"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/coding_with_genAI/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/coding_with_genAI/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/coding_with_genAI/img/chatgpt.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/config_term_zsh_p11/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/config_term_zsh_p11/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/config_term_zsh_p11/img/iterm2.png" medium="image" type="image/png" height="75" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/configure_vim_for_r/</link>
  <description><![CDATA[ undefined ]]></description>
  <category>Vim</category>
  <guid>https://focusonr.org/posts/configure_vim_for_r/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/configure_vim_for_r/img/vim.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/dual_boot_thinkpad/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/dual_boot_thinkpad/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/dual_boot_thinkpad/img/windows.png" medium="image" type="image/png" height="26" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/mimicsoftmood/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/mimicsoftmood/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/mimicsoftmood/img/softmood.png" medium="image" type="image/png" height="94" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/power_analysis_shiny_app/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/power_analysis_shiny_app/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/power_analysis_shiny_app/img/shiny.png" medium="image" type="image/png" height="167" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>R.G. Thomas</dc:creator>
  <link>https://focusonr.org/posts/r_code_package_updating_p34/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/r_code_package_updating_p34/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/r_code_package_updating_p34/img/Rlogo.png" medium="image" type="image/png" height="135" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/rct_validation_lang/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/rct_validation_lang/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/rct_validation_lang/img/lua.png" medium="image" type="image/png" height="96" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <dc:creator>Ronald G. Thomas</dc:creator>
  <link>https://focusonr.org/posts/research_backup_system_p32/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/research_backup_system_p32/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/research_backup_system_p32/img/Data-backup.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/research_management/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/research_management/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/research_management/img/organized.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/setup_R_vimtex/</link>
  <description><![CDATA[ undefined ]]></description>
  <category>vim</category>
  <category>R</category>
  <category>Tex</category>
  <category>Ultisnips</category>
  <guid>https://focusonr.org/posts/setup_R_vimtex/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/setup_R_vimtex/img/vimR.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title></title>
  <dc:creator>Ronald (Ryy) Glenn Thomas</dc:creator>
  <link>https://focusonr.org/posts/setup_obs_p09/</link>
  <description><![CDATA[ undefined ]]></description>
  <guid>https://focusonr.org/posts/setup_obs_p09/</guid>
  <pubDate>Wed, 02 Jul 2025 04:32:54 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/setup_obs_p09/img/obs.png" medium="image" type="image/png" height="144" width="144"/>
</item>
</channel>
</rss>
