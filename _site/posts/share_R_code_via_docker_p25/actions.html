<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ronald (Ryy) Glenn Thomas">

<title>actions – Thomas Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400&amp;family=Open+Sans:ital,wght@0,400;0,600;1,400&amp;family=Fira+Mono:wght@400;500&amp;display=swap" rel="stylesheet">
<script src="https://kit.fontawesome.com/0fba9333d8.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

<!-- Custom meta tags for social sharing -->
<meta property="og:site_name" content="Thomas Lab">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@rgt47">

<!-- Add responsive features -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Add analytics if needed -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXX');
</script> -->

<!-- Add custom javascript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add any custom JavaScript functionality here
  
  // Example: Add smooth scrolling
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      
      document.querySelector(this.getAttribute('href')).scrollIntoView({
        behavior: 'smooth'
      });
    });
  });
});
</script>


<meta property="og:title" content="Thomas Lab">
<meta property="og:description" content="">
<meta property="og:image" content="https://focusonr.org/posts/share_R_code_via_docker_p25/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==">
<meta property="og:site_name" content="Thomas Lab">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Thomas Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/rgt47"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rgt47"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Categories</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Programming &amp; Development</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Data Analysis &amp; Visualization</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Deployment &amp; Operations</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Development Environment</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Shiny Applications</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">AI &amp; Automation</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">System Administration</span></span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#simplified-penguins-workflow---step-by-step-learning" id="toc-simplified-penguins-workflow---step-by-step-learning" class="nav-link active" data-scroll-target="#simplified-penguins-workflow---step-by-step-learning"><span class="header-section-number">1</span> Simplified Penguins Workflow - Step by Step Learning</a>
  <ul class="collapse">
  <li><a href="#learning-strategy" id="toc-learning-strategy" class="nav-link" data-scroll-target="#learning-strategy"><span class="header-section-number">1.1</span> 🎯 Learning Strategy</a></li>
  <li><a href="#step-1-hello-world-workflow" id="toc-step-1-hello-world-workflow" class="nav-link" data-scroll-target="#step-1-hello-world-workflow"><span class="header-section-number">1.2</span> Step 1: Hello World Workflow</a></li>
  <li><a href="#step-2-basic-r-testing" id="toc-step-2-basic-r-testing" class="nav-link" data-scroll-target="#step-2-basic-r-testing"><span class="header-section-number">1.3</span> Step 2: Basic R Testing</a></li>
  <li><a href="#step-3-add-docker" id="toc-step-3-add-docker" class="nav-link" data-scroll-target="#step-3-add-docker"><span class="header-section-number">1.4</span> Step 3: Add Docker</a></li>
  <li><a href="#step-4-add-real-tests" id="toc-step-4-add-real-tests" class="nav-link" data-scroll-target="#step-4-add-real-tests"><span class="header-section-number">1.5</span> Step 4: Add Real Tests</a></li>
  <li><a href="#step-5-add-package-detection" id="toc-step-5-add-package-detection" class="nav-link" data-scroll-target="#step-5-add-package-detection"><span class="header-section-number">1.6</span> Step 5: Add Package Detection</a></li>
  <li><a href="#step-6-add-pr-comments" id="toc-step-6-add-pr-comments" class="nav-link" data-scroll-target="#step-6-add-pr-comments"><span class="header-section-number">1.7</span> Step 6: Add PR Comments</a></li>
  <li><a href="#step-7-complete-system" id="toc-step-7-complete-system" class="nav-link" data-scroll-target="#step-7-complete-system"><span class="header-section-number">1.8</span> Step 7: Complete System</a></li>
  <li><a href="#how-to-practice" id="toc-how-to-practice" class="nav-link" data-scroll-target="#how-to-practice"><span class="header-section-number">1.9</span> 🎯 How to Practice</a>
  <ul class="collapse">
  <li><a href="#week-1-start-simple" id="toc-week-1-start-simple" class="nav-link" data-scroll-target="#week-1-start-simple"><span class="header-section-number">1.9.1</span> Week 1: Start Simple</a></li>
  <li><a href="#week-2-add-complexity" id="toc-week-2-add-complexity" class="nav-link" data-scroll-target="#week-2-add-complexity"><span class="header-section-number">1.9.2</span> Week 2: Add Complexity</a></li>
  <li><a href="#week-3-complete-system" id="toc-week-3-complete-system" class="nav-link" data-scroll-target="#week-3-complete-system"><span class="header-section-number">1.9.3</span> Week 3: Complete System</a></li>
  </ul></li>
  <li><a href="#testing-each-step" id="toc-testing-each-step" class="nav-link" data-scroll-target="#testing-each-step"><span class="header-section-number">1.10</span> 🔧 Testing Each Step</a></li>
  <li><a href="#common-issues-and-solutions" id="toc-common-issues-and-solutions" class="nav-link" data-scroll-target="#common-issues-and-solutions"><span class="header-section-number">1.11</span> 🚨 Common Issues and Solutions</a>
  <ul class="collapse">
  <li><a href="#issue-yaml-syntax-errors" id="toc-issue-yaml-syntax-errors" class="nav-link" data-scroll-target="#issue-yaml-syntax-errors"><span class="header-section-number">1.11.1</span> Issue: YAML syntax errors</a></li>
  <li><a href="#issue-workflow-not-running" id="toc-issue-workflow-not-running" class="nav-link" data-scroll-target="#issue-workflow-not-running"><span class="header-section-number">1.11.2</span> Issue: Workflow not running</a></li>
  <li><a href="#issue-docker-build-fails" id="toc-issue-docker-build-fails" class="nav-link" data-scroll-target="#issue-docker-build-fails"><span class="header-section-number">1.11.3</span> Issue: Docker build fails</a></li>
  <li><a href="#issue-tests-fail-in-ci-but-pass-locally" id="toc-issue-tests-fail-in-ci-but-pass-locally" class="nav-link" data-scroll-target="#issue-tests-fail-in-ci-but-pass-locally"><span class="header-section-number">1.11.4</span> Issue: Tests fail in CI but pass locally</a></li>
  <li><a href="#issue-permissions-errors" id="toc-issue-permissions-errors" class="nav-link" data-scroll-target="#issue-permissions-errors"><span class="header-section-number">1.11.5</span> Issue: Permissions errors</a></li>
  </ul></li>
  <li><a href="#key-concepts-reinforcement" id="toc-key-concepts-reinforcement" class="nav-link" data-scroll-target="#key-concepts-reinforcement"><span class="header-section-number">1.12</span> 📚 Key Concepts Reinforcement</a></li>
  <li><a href="#step-2-basic-r-testing-1" id="toc-step-2-basic-r-testing-1" class="nav-link" data-scroll-target="#step-2-basic-r-testing-1"><span class="header-section-number">1.13</span> Step 2: Basic R Testing</a></li>
  <li><a href="#step-3-add-docker-1" id="toc-step-3-add-docker-1" class="nav-link" data-scroll-target="#step-3-add-docker-1"><span class="header-section-number">1.14</span> Step 3: Add Docker</a></li>
  <li><a href="#step-4-add-real-tests-1" id="toc-step-4-add-real-tests-1" class="nav-link" data-scroll-target="#step-4-add-real-tests-1"><span class="header-section-number">1.15</span> Step 4: Add Real Tests</a>
  <ul class="collapse">
  <li><a href="#volume-mounting--v-pwdhomeanalystproject" id="toc-volume-mounting--v-pwdhomeanalystproject" class="nav-link" data-scroll-target="#volume-mounting--v-pwdhomeanalystproject"><span class="header-section-number">1.15.1</span> Volume Mounting (<code>-v $PWD:/home/analyst/project</code>)</a></li>
  <li><a href="#exit-codes-and-workflow-status" id="toc-exit-codes-and-workflow-status" class="nav-link" data-scroll-target="#exit-codes-and-workflow-status"><span class="header-section-number">1.15.2</span> Exit Codes and Workflow Status</a></li>
  <li><a href="#file-structure-expected" id="toc-file-structure-expected" class="nav-link" data-scroll-target="#file-structure-expected"><span class="header-section-number">1.15.3</span> File Structure Expected</a></li>
  </ul></li>
  <li><a href="#step-5-add-package-detection-1" id="toc-step-5-add-package-detection-1" class="nav-link" data-scroll-target="#step-5-add-package-detection-1"><span class="header-section-number">1.16</span> Step 5: Add Package Detection</a></li>
  <li><a href="#step-6-add-pr-comments-1" id="toc-step-6-add-pr-comments-1" class="nav-link" data-scroll-target="#step-6-add-pr-comments-1"><span class="header-section-number">1.17</span> Step 6: Add PR Comments</a>
  <ul class="collapse">
  <li><a href="#step-ids-and-outputs" id="toc-step-ids-and-outputs" class="nav-link" data-scroll-target="#step-ids-and-outputs"><span class="header-section-number">1.17.1</span> Step IDs and Outputs</a></li>
  <li><a href="#shell-conditional-logic" id="toc-shell-conditional-logic" class="nav-link" data-scroll-target="#shell-conditional-logic"><span class="header-section-number">1.17.2</span> Shell Conditional Logic</a></li>
  <li><a href="#github-api-via-javascript" id="toc-github-api-via-javascript" class="nav-link" data-scroll-target="#github-api-via-javascript"><span class="header-section-number">1.17.3</span> GitHub API via JavaScript</a></li>
  <li><a href="#github_output-file" id="toc-github_output-file" class="nav-link" data-scroll-target="#github_output-file"><span class="header-section-number">1.17.4</span> $GITHUB_OUTPUT File</a></li>
  </ul></li>
  <li><a href="#step-7-complete-system-1" id="toc-step-7-complete-system-1" class="nav-link" data-scroll-target="#step-7-complete-system-1"><span class="header-section-number">1.18</span> Step 7: Complete System</a></li>
  <li><a href="#how-to-practice-1" id="toc-how-to-practice-1" class="nav-link" data-scroll-target="#how-to-practice-1"><span class="header-section-number">1.19</span> 🎯 How to Practice</a>
  <ul class="collapse">
  <li><a href="#week-1-start-simple-1" id="toc-week-1-start-simple-1" class="nav-link" data-scroll-target="#week-1-start-simple-1"><span class="header-section-number">1.19.1</span> Week 1: Start Simple</a></li>
  <li><a href="#week-2-add-complexity-1" id="toc-week-2-add-complexity-1" class="nav-link" data-scroll-target="#week-2-add-complexity-1"><span class="header-section-number">1.19.2</span> Week 2: Add Complexity</a></li>
  <li><a href="#week-3-complete-system-1" id="toc-week-3-complete-system-1" class="nav-link" data-scroll-target="#week-3-complete-system-1"><span class="header-section-number">1.19.3</span> Week 3: Complete System</a></li>
  </ul></li>
  <li><a href="#testing-each-step-1" id="toc-testing-each-step-1" class="nav-link" data-scroll-target="#testing-each-step-1"><span class="header-section-number">1.20</span> 🔧 Testing Each Step</a></li>
  <li><a href="#common-issues-and-solutions-1" id="toc-common-issues-and-solutions-1" class="nav-link" data-scroll-target="#common-issues-and-solutions-1"><span class="header-section-number">1.21</span> 🚨 Common Issues and Solutions</a>
  <ul class="collapse">
  <li><a href="#issue-yaml-syntax-errors-1" id="toc-issue-yaml-syntax-errors-1" class="nav-link" data-scroll-target="#issue-yaml-syntax-errors-1"><span class="header-section-number">1.21.1</span> Issue: YAML syntax errors</a></li>
  <li><a href="#issue-workflow-not-running-1" id="toc-issue-workflow-not-running-1" class="nav-link" data-scroll-target="#issue-workflow-not-running-1"><span class="header-section-number">1.21.2</span> Issue: Workflow not running</a></li>
  <li><a href="#issue-docker-build-fails-1" id="toc-issue-docker-build-fails-1" class="nav-link" data-scroll-target="#issue-docker-build-fails-1"><span class="header-section-number">1.21.3</span> Issue: Docker build fails</a></li>
  <li><a href="#issue-tests-fail-in-ci-but-pass-locally-1" id="toc-issue-tests-fail-in-ci-but-pass-locally-1" class="nav-link" data-scroll-target="#issue-tests-fail-in-ci-but-pass-locally-1"><span class="header-section-number">1.21.4</span> Issue: Tests fail in CI but pass locally</a></li>
  <li><a href="#issue-permissions-errors-1" id="toc-issue-permissions-errors-1" class="nav-link" data-scroll-target="#issue-permissions-errors-1"><span class="header-section-number">1.21.5</span> Issue: Permissions errors</a></li>
  </ul></li>
  <li><a href="#key-concepts-reinforcement-1" id="toc-key-concepts-reinforcement-1" class="nav-link" data-scroll-target="#key-concepts-reinforcement-1"><span class="header-section-number">1.22</span> 📚 Key Concepts Reinforcement</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><div class="quarto-title-block"><div class="quarto-title-tools-only"><h1></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://rgtlab.org">Ronald (Ryy) Glenn Thomas</a> <a href="https://orcid.org/0000-0003-1686-4965" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://ucsd.edu">
            UCSD
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="simplified-penguins-workflow---step-by-step-learning" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Simplified Penguins Workflow - Step by Step Learning</h1>
<p>Learn GitHub Actions by building up your penguins analysis workflow piece by piece.</p>
<section id="learning-strategy" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="learning-strategy"><span class="header-section-number">1.1</span> 🎯 Learning Strategy</h2>
<p>Start with the simplest possible workflow and add one feature at a time:</p>
<ol type="1">
<li><strong>Step 1</strong>: Hello World</li>
<li><strong>Step 2</strong>: Basic R Testing<br>
</li>
<li><strong>Step 3</strong>: Add Docker</li>
<li><strong>Step 4</strong>: Add Package Detection</li>
<li><strong>Step 5</strong>: Add Post-Merge Automation</li>
<li><strong>Step 6</strong>: Complete System</li>
</ol>
</section>
<section id="step-1-hello-world-workflow" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="step-1-hello-world-workflow"><span class="header-section-number">1.2</span> Step 1: Hello World Workflow</h2>
<p><strong>Goal</strong>: Understand basic GitHub Actions structure</p>
<p>Create <code>.github/workflows/step1-hello.yml</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 1 - Hello World</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># When should this run?</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">        # Every time you push code</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co"> # Every time someone creates a PR</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># What should it do?</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hello</span><span class="kw">:</span><span class="co">                    # Job name (you choose this)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span><span class="co">  # What computer to use</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span><span class="co">                  # List of things to do</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Say hello</span><span class="co">       # Step name (you choose this)</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Hello from penguins analysis!"</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Show info</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        echo "Repository: ${{ github.repository }}"</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        echo "Event: ${{ github.event_name }}"</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>        echo "Actor: ${{ github.actor }}"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Try this:</strong> 1. Create this file 2. Commit and push: <code>git add . &amp;&amp; git commit -m "add hello workflow" &amp;&amp; git push</code> 3. Go to Actions tab on GitHub 4. Watch it run and click on the workflow to see logs</p>
<p><strong>What you’ll learn:</strong> - Where workflow files go (<code>.github/workflows/</code>) - Basic YAML structure (<code>name</code>, <code>on</code>, <code>jobs</code>, <code>steps</code>) - How to use <code>run:</code> for shell commands - How to access GitHub context variables (<code>${{ github.* }}</code>)</p>
</section>
<section id="step-2-basic-r-testing" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="step-2-basic-r-testing"><span class="header-section-number">1.3</span> Step 2: Basic R Testing</h2>
<p><strong>Goal</strong>: Run R commands in GitHub Actions</p>
<p>Create <code>.github/workflows/step2-basic-r.yml</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 2 - Basic R Testing</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 1: Get your code</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Get repository code</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span><span class="co">    # This is a pre-built action</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 2: Install R</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup R</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'4.3.0'</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 3: Install R packages</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install basic packages  </span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        R -e "install.packages(c('testthat', 'palmerpenguins'), repos='https://cloud.r-project.org')"</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 4: Run simple R test</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test R and data</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        R -e "</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        library(testthat)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        # Simple test</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        cat('=== Basic R Test ===\n')</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data rows:', nrow(penguins), '\n')</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        # Actual test</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        expect_equal(ncol(penguins), 8)</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        expect_gt(nrow(penguins), 300)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        cat('✅ Basic tests passed!\n')</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        "</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Try this:</strong> 1. Replace the hello workflow or create this alongside it 2. Push and watch it run 3. Look at the logs to see R output</p>
<p><strong>What you’ll learn:</strong> - How to use pre-built actions (<code>uses:</code>) - How to install and run R in GitHub Actions - How to run multi-line R commands - Basic testing with <code>testthat</code></p>
</section>
<section id="step-3-add-docker" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="step-3-add-docker"><span class="header-section-number">1.4</span> Step 3: Add Docker</h2>
<p><strong>Goal</strong>: Use Docker instead of installing R directly</p>
<p>Create <code>.github/workflows/step3-docker.yml</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 3 - Docker Testing</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">    # Get your code</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # Build Docker image from your Dockerfile</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">    # Run tests inside Docker container</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests in Docker</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        docker run --rm penguins-test R -e "</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        cat('=== Docker R Test ===\n')</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        # Check if packages are available</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data loaded with', nrow(penguins), 'rows\n')</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>        cat('✅ Docker test passed!\n')</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        "</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What changed:</strong> - Removed R installation steps (Docker handles this) - Added <code>docker build</code> to create image from your Dockerfile - Added <code>docker run</code> to execute R inside container</p>
<p><strong>Try this:</strong> 1. Make sure you have a working Dockerfile in your repo 2. Push and watch it build your Docker image 3. See R running inside the container</p>
<p><strong>What you’ll learn:</strong> - How Docker integrates with GitHub Actions - Difference between <code>docker build</code> and <code>docker run</code> - How containers provide consistent environments</p>
</section>
<section id="step-4-add-real-tests" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="step-4-add-real-tests"><span class="header-section-number">1.5</span> Step 4: Add Real Tests</h2>
<p><strong>Goal</strong>: Run your actual testthat test suite</p>
<p>Create <code>.github/workflows/step4-real-tests.yml</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 4 - Real Test Suite</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image  </span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run testthat test suite</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        docker run --rm \</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>          -v $PWD:/home/analyst/project \</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>          penguins-test \</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>          R -e "</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>          # Move to project directory</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>          cat('=== Running Test Suite ===\n')</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>          # Load testthat</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>          # Check if test directory exists</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>          if (!dir.exists('tests/testthat')) {</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>            cat('❌ No tests/testthat directory found\n')</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>          # Run all tests</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>          # Print results</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>          cat('Tests passed:', test_results[['passed']], '\n')</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>          cat('Tests failed:', test_results[['failed']], '\n')</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>          # Exit with error if tests failed</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) {</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>            cat('❌ Some tests failed!\n')</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>            cat('✅ All tests passed!\n')</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>          "</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What’s new:</strong> - <code>-v $PWD:/home/analyst/project</code> mounts your code into the container - <code>setwd()</code> changes to the project directory inside container - <code>test_dir()</code> runs your actual test files - <code>quit(status = 1)</code> makes GitHub Actions fail if tests fail</p>
<p><strong>What you’ll learn:</strong> - How to mount local files into Docker containers - How to make workflows fail when tests fail - How to run your real test suite in CI</p>
</section>
<section id="step-5-add-package-detection" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="step-5-add-package-detection"><span class="header-section-number">1.6</span> Step 5: Add Package Detection</h2>
<p><strong>Goal</strong>: Detect when new R packages are added</p>
<p>Create <code>.github/workflows/step5-package-detection.yml</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 5 - Package Detection</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co">    # NEW: Package detection</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check for new packages</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>          cat('=== Package Detection ===\n')</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>          # Find R files  </span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>          r_files &lt;- c(</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>            list.files('analysis', pattern = '\\\\.Rmd$', full.names = TRUE, recursive = TRUE),</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>            list.files('R', pattern = '\\\\.R$', full.names = TRUE, recursive = TRUE)</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>          # Extract library() calls</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>          all_packages &lt;- character(0)</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>          for (file in r_files) {</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>            if (file.exists(file)) {</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>              content &lt;- readLines(file, warn = FALSE)</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>              # Look for library(package) patterns</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>              lib_matches &lt;- regmatches(content, gregexpr('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', content))</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>              packages &lt;- unlist(lapply(lib_matches, function(x) {</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>                if (length(x) &gt; 0 &amp;&amp; x != '') {</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>                  gsub('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', '\\\\1', x)</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>                } else character(0)</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>              }))</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>              all_packages &lt;- c(all_packages, packages)</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>          # Remove base packages and duplicates</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>          base_pkgs &lt;- c('base', 'utils', 'stats', 'graphics', 'grDevices', 'methods')</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>          new_packages &lt;- unique(setdiff(all_packages, base_pkgs))</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>          if (length(new_packages) &gt; 0) {</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>            cat('📦 Packages found in code:\n')</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>            cat(' -', paste(new_packages, collapse = '\n - '), '\n')</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>            cat('No additional packages detected\n')</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>          "</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What’s new:</strong> - Added a separate step for package detection - R code that scans files for <code>library()</code> calls - Regular expressions to extract package names - Logic to filter out base R packages</p>
<p><strong>What you’ll learn:</strong> - How to add multiple steps to a job - Basic text processing with R and regex - How to scan code for dependencies</p>
</section>
<section id="step-6-add-pr-comments" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="step-6-add-pr-comments"><span class="header-section-number">1.7</span> Step 6: Add PR Comments</h2>
<p><strong>Goal</strong>: Make GitHub Actions talk back to you</p>
<p>Create <code>.github/workflows/step6-pr-comments.yml</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 6 - PR Comments</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">pull_request</span><span class="kw">]</span><span class="co">  # Only run on PRs</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test-and-comment</span><span class="kw">:</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">id</span><span class="kw">:</span><span class="at"> test-step</span><span class="co">  # Give this step an ID so we can reference it</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>          # Save results to file so we can read them later</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_PASSED=', test_results[['passed']], '\n', sep='', file='/tmp/test_results.txt')</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_FAILED=', test_results[['failed']], '\n', sep='', file='/tmp/test_results.txt', append=TRUE)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>          " &amp;&amp; echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT || echo "TEST_STATUS=failed" &gt;&gt; $GITHUB_OUTPUT</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co">    # NEW: Comment on the PR</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>          const testStatus = '${{ steps.test-step.outputs.TEST_STATUS }}';</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>          let message = '## 🧪 Test Results\n\n';</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>          if (testStatus === 'passed') {</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>            message += '✅ **All tests passed!** This PR is ready for review.\n';</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>            message += '❌ **Tests failed!** Please check the logs and fix the issues.\n';</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>          message += '\n---\n*This comment was generated automatically by GitHub Actions*';</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>          });</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What’s new:</strong> - <code>id: test-step</code> gives the step a name we can reference - <code>echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT</code> saves data for later steps - <code>uses: actions/github-script@v7</code> lets us run JavaScript to interact with GitHub - <code>github.rest.issues.createComment()</code> posts a comment on the PR</p>
<p><strong>What you’ll learn:</strong> - How to pass data between steps using outputs - How to use GitHub’s JavaScript API - How to make workflows interactive with comments</p>
</section>
<section id="step-7-complete-system" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="step-7-complete-system"><span class="header-section-number">1.8</span> Step 7: Complete System</h2>
<p><strong>Goal</strong>: Put it all together with post-merge automation</p>
<p>Create <code>.github/workflows/step7-complete.yml</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 7 - Complete System</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Two different triggers for two different purposes</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co">          # Pre-merge validation</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">                  # Post-merge automation  </span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: Validate PRs (only runs on pull_request)</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">validate-pr</span><span class="kw">:</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'pull_request'</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run test suite</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>          cat('✅ All tests passed!\n')</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>          const message = '## ✅ PR Validation Passed\n\nAll tests are passing. This PR is ready for merge!';</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,  </span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 2: Post-merge automation (only runs on push to main)</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">post-merge</span><span class="kw">:</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and test</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>        docker build -t penguins-latest .</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>          penguins-latest R -e "</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>          test_dir('tests/testthat')</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>          cat('✅ Post-merge tests passed!\n')</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Create success comment</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>          const message = `## 🚀 Merge Successful</span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>          The code has been merged and all tests are still passing.</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>          **Commit**: ${context.sha.substring(0, 7)}</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>          **Time**: ${new Date().toISOString()}`;</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>          github.rest.repos.createCommitComment({</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,</span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>            commit_sha: context.sha,</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>          });</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What’s new:</strong> - Two separate jobs with different conditions - <code>if: github.event_name == 'pull_request'</code> - only run job on PRs - <code>if: github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</code> - only run on main branch pushes - <code>createCommitComment()</code> vs <code>createComment()</code> - different types of comments</p>
<p><strong>What you’ll learn:</strong> - How to create workflows that respond to different events - How to use conditions (<code>if:</code>) to control when jobs run - The difference between PR comments and commit comments</p>
</section>
<section id="how-to-practice" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="how-to-practice"><span class="header-section-number">1.9</span> 🎯 How to Practice</h2>
<section id="week-1-start-simple" class="level3" data-number="1.9.1">
<h3 data-number="1.9.1" class="anchored" data-anchor-id="week-1-start-simple"><span class="header-section-number">1.9.1</span> Week 1: Start Simple</h3>
<ol type="1">
<li><strong>Day 1</strong>: Create Step 1 (Hello World) - understand basic structure</li>
<li><strong>Day 2</strong>: Create Step 2 (Basic R) - learn about actions and R</li>
<li><strong>Day 3</strong>: Create Step 3 (Docker) - understand containers in CI</li>
</ol>
</section>
<section id="week-2-add-complexity" class="level3" data-number="1.9.2">
<h3 data-number="1.9.2" class="anchored" data-anchor-id="week-2-add-complexity"><span class="header-section-number">1.9.2</span> Week 2: Add Complexity</h3>
<ol start="4" type="1">
<li><strong>Day 4</strong>: Create Step 4 (Real Tests) - connect to your actual tests</li>
<li><strong>Day 5</strong>: Create Step 5 (Package Detection) - learn text processing</li>
<li><strong>Day 6</strong>: Create Step 6 (PR Comments) - make it interactive</li>
</ol>
</section>
<section id="week-3-complete-system" class="level3" data-number="1.9.3">
<h3 data-number="1.9.3" class="anchored" data-anchor-id="week-3-complete-system"><span class="header-section-number">1.9.3</span> Week 3: Complete System</h3>
<ol start="7" type="1">
<li><strong>Day 7</strong>: Create Step 7 (Complete) - put it all together</li>
<li><strong>Test extensively</strong>: Create test PRs and watch the full flow</li>
<li><strong>Customize</strong>: Modify for your specific needs</li>
</ol>
</section>
</section>
<section id="testing-each-step" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="testing-each-step"><span class="header-section-number">1.10</span> 🔧 Testing Each Step</h2>
<p>For each step, create a test scenario:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test branch</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> test-step-X</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a small change to trigger the workflow</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"# Testing step X"</span> <span class="op">&gt;&gt;</span> README.md</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Commit and push</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"test: step X workflow"</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin test-step-X</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create PR (for PR workflows) or just watch Actions tab (for push workflows)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="common-issues-and-solutions" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="common-issues-and-solutions"><span class="header-section-number">1.11</span> 🚨 Common Issues and Solutions</h2>
<section id="issue-yaml-syntax-errors" class="level3" data-number="1.11.1">
<h3 data-number="1.11.1" class="anchored" data-anchor-id="issue-yaml-syntax-errors"><span class="header-section-number">1.11.1</span> Issue: YAML syntax errors</h3>
<p><strong>Solution</strong>: Use online YAML validator, check indentation</p>
</section>
<section id="issue-workflow-not-running" class="level3" data-number="1.11.2">
<h3 data-number="1.11.2" class="anchored" data-anchor-id="issue-workflow-not-running"><span class="header-section-number">1.11.2</span> Issue: Workflow not running</h3>
<p><strong>Solution</strong>: Check file location (<code>.github/workflows/</code>), verify triggers</p>
</section>
<section id="issue-docker-build-fails" class="level3" data-number="1.11.3">
<h3 data-number="1.11.3" class="anchored" data-anchor-id="issue-docker-build-fails"><span class="header-section-number">1.11.3</span> Issue: Docker build fails</h3>
<p><strong>Solution</strong>: Test <code>docker build .</code> locally first</p>
</section>
<section id="issue-tests-fail-in-ci-but-pass-locally" class="level3" data-number="1.11.4">
<h3 data-number="1.11.4" class="anchored" data-anchor-id="issue-tests-fail-in-ci-but-pass-locally"><span class="header-section-number">1.11.4</span> Issue: Tests fail in CI but pass locally</h3>
<p><strong>Solution</strong>: Check Docker environment vs local environment</p>
</section>
<section id="issue-permissions-errors" class="level3" data-number="1.11.5">
<h3 data-number="1.11.5" class="anchored" data-anchor-id="issue-permissions-errors"><span class="header-section-number">1.11.5</span> Issue: Permissions errors</h3>
<p><strong>Solution</strong>: Repository Settings → Actions → General → “Read and write permissions”</p>
</section>
</section>
<section id="key-concepts-reinforcement" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="key-concepts-reinforcement"><span class="header-section-number">1.12</span> 📚 Key Concepts Reinforcement</h2>
<p>By the end of this progression, you’ll understand:</p>
<p>✅ <strong>Basic YAML structure</strong> (<code>name</code>, <code>on</code>, <code>jobs</code>, <code>steps</code>)<br>
✅ <strong>When workflows run</strong> (triggers: <code>push</code>, <code>pull_request</code>)<br>
✅ <strong>Where workflows run</strong> (<code>runs-on: ubuntu-latest</code>)<br>
✅ <strong>How to use actions</strong> (<code>uses:</code>) vs commands (<code>run:</code>)<br>
✅ <strong>Docker integration</strong> (<code>docker build</code>, <code>docker run</code>)<br>
✅ <strong>Conditional execution</strong> (<code>if:</code> statements)<br>
✅ <strong>GitHub API interaction</strong> (comments, commits)<br>
✅ <strong>Data flow between steps</strong> (outputs, files)</p>
<p>Start with Step 1 and don’t move to the next step until you understand the current one completely! ## Step 7: Complete System</p>
<p><strong>Goal</strong>: Put it all together with post-merge automation</p>
<p>Create <code>.github/workflows/step7-complete.yml</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow identifier</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 7 - Complete System</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># COMPLEX TRIGGERS: Different events trigger different behaviors</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co">          # TRIGGER 1: When PRs are created/updated</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span><span class="co">     #   - Only for PRs targeting 'main' branch</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">                  # TRIGGER 2: When code is pushed</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span><span class="co">     #   - Only for pushes TO 'main' branch (i.e., after merge)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># MULTIPLE JOBS: Different jobs for different purposes</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: VALIDATE PRs (Pre-merge quality gate)</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">validate-pr</span><span class="kw">:</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co">    # CONDITIONAL EXECUTION: Only run this job for pull request events</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'pull_request'</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">    # GITHUB CONTEXT VARIABLES:</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">    # github.event_name = 'push' | 'pull_request' | 'schedule' | etc.</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">    # Get the PR code (not the main branch code)</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">      # </span><span class="al">NOTE</span><span class="co">: For PRs, this checks out the PR branch, not main</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">    # Build container from the PR's Dockerfile</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="co">    # Test the PR's code</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run test suite</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>          # FAIL THE WORKFLOW if tests don't pass</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>          cat('✅ All tests passed!\n')</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co">    # Provide feedback to PR author</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>          const message = '## ✅ PR Validation Passed\n\nAll tests are passing. This PR is ready for merge!';</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>          // POST COMMENT to the specific PR that triggered this workflow</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,  # The PR number that triggered this</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,  </span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 2: POST-MERGE AUTOMATION (After code is merged to main)</span></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">post-merge</span><span class="kw">:</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a><span class="co">    # COMPLEX CONDITION: Only run for pushes to main branch</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a><span class="co">    # BREAKDOWN:</span></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a><span class="co">    # github.event_name == 'push'           = This was a push event (not PR)</span></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a><span class="co">    # github.ref == 'refs/heads/main'       = Push was to main branch</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a><span class="co">    # refs/heads/main = Full Git reference for main branch</span></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a><span class="co">    # Get the newly merged code from main branch</span></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a><span class="co">      # </span><span class="al">NOTE</span><span class="co">: For pushes, this checks out the main branch with new merged code</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a><span class="co">    # Verify the merged code still works</span></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and test</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>        # Build image with the merged code</span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>        docker build -t penguins-latest .</span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>        # Run post-merge verification tests</span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>          penguins-latest R -e "</span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>          test_dir('tests/testthat')</span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>          cat('✅ Post-merge tests passed!\n')</span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a><span class="co">    # Document the successful merge</span></span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Create success comment</span></span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-</span><span class="co"># Simplified Penguins Workflow - Step by Step Learning</span></span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a><span class="at">Learn GitHub Actions by building up your penguins analysis workflow piece by piece.</span></span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a><span class="co">## 🎯 Learning Strategy</span></span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a><span class="fu">Start with the simplest possible workflow and add one feature at a time</span><span class="kw">:</span></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a><span class="fu">1. **Step 1**</span><span class="kw">:</span><span class="at"> Hello World</span></span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a><span class="fu">2. **Step 2**</span><span class="kw">:</span><span class="at"> Basic R Testing  </span></span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a><span class="fu">3. **Step 3**</span><span class="kw">:</span><span class="at"> Add Docker</span></span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a><span class="fu">4. **Step 4**</span><span class="kw">:</span><span class="at"> Add Package Detection</span></span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a><span class="fu">5. **Step 5**</span><span class="kw">:</span><span class="at"> Add Post-Merge Automation</span></span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a><span class="fu">6. **Step 6**</span><span class="kw">:</span><span class="at"> Complete System</span></span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a><span class="co">## Step 1: Hello World Workflow</span></span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a><span class="ot">**Goal**:</span><span class="at"> Understand basic GitHub Actions structure</span></span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a><span class="fu">Create `.github/workflows/step1-hello.yml`</span><span class="kw">:</span></span>
<span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a><span class="at">```yaml</span></span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a><span class="co"># This is the workflow name that appears in GitHub's Actions tab</span></span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 1 - Hello World</span></span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGERS: When should this workflow run?</span></span>
<span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">        # Trigger: Every time you push code to ANY branch</span></span>
<span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co"> # Trigger: Every time someone creates/updates a PR</span></span>
<span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS: What should this workflow do? (You can have multiple jobs)</span></span>
<span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: This is a job called "hello" (you can name it anything)</span></span>
<span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hello</span><span class="kw">:</span><span class="at">                    </span></span>
<span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a><span class="co">    # RUNNER: What type of virtual machine should run this job?</span></span>
<span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span><span class="co">  # Options: ubuntu-latest, windows-latest, macos-latest</span></span>
<span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEPS: A list of things for this job to do (executed in order)</span></span>
<span id="cb9-137"><a href="#cb9-137" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span><span class="at">                  </span></span>
<span id="cb9-138"><a href="#cb9-138" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Run a simple shell command</span></span>
<span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Say hello</span><span class="co">       # This name appears in the logs (you choose it)</span></span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Hello from penguins analysis!"</span><span class="co">  # Shell command to execute</span></span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Show GitHub context information</span></span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Show info</span></span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span><span class="co">                # The "|" means "multi-line string" in YAML</span></span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a>        echo "Repository: ${{ github.repository }}"    # Shows: username/repo-name</span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a>        echo "Event: ${{ github.event_name }}"         # Shows: push or pull_request</span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a>        echo "Actor: ${{ github.actor }}"              # Shows: who triggered this</span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a>        # Note: ${{ }} is GitHub's expression syntax for accessing variables</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Try this:</strong> 1. Create this file 2. Commit and push: <code>git add . &amp;&amp; git commit -m "add hello workflow" &amp;&amp; git push</code> 3. Go to Actions tab on GitHub 4. Watch it run and click on the workflow to see logs</p>
<p><strong>What you’ll learn:</strong> - Where workflow files go (<code>.github/workflows/</code>) - Basic YAML structure (<code>name</code>, <code>on</code>, <code>jobs</code>, <code>steps</code>) - How to use <code>run:</code> for shell commands - How to access GitHub context variables (<code>${{ github.* }}</code>)</p>
</section>
<section id="step-2-basic-r-testing-1" class="level2" data-number="1.13">
<h2 data-number="1.13" class="anchored" data-anchor-id="step-2-basic-r-testing-1"><span class="header-section-number">1.13</span> Step 2: Basic R Testing</h2>
<p><strong>Goal</strong>: Run R commands in GitHub Actions</p>
<p>Create <code>.github/workflows/step2-basic-r.yml</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow name (shows up in GitHub Actions tab)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 2 - Basic R Testing</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGERS: When to run this workflow</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span><span class="co">  # Shorthand for both push AND pull_request events</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS SECTION: Define what work to do</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB NAME: "test" (could be anything: "build", "validate", "check", etc.)</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">    # VIRTUAL MACHINE: Use Ubuntu (most common choice for CI)</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEPS: Ordered list of things to do in this job</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Download your repository code into the runner</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Get repository code</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span><span class="co">    # PRE-BUILT ACTION (not a shell command)</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">      # This action downloads your repo files so the workflow can access them</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">      # @v4 is the version number (always use latest stable version)</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Install R on the virtual machine</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup R</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span><span class="co">  # Another pre-built action</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span><span class="co">                           # PARAMETERS for this action</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'4.3.0'</span><span class="co">           # Which R version to install</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">        # Other options: 'latest', 'release', '4.2.3', etc.</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="at">        </span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Install R packages we need</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install basic packages  </span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span><span class="co">                          # SHELL COMMAND (multi-line)</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>        # This runs R commands directly on the Ubuntu machine</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>        R -e "install.packages(c('testthat', 'palmerpenguins'), repos='https://cloud.r-project.org')"</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>        # R -e means "execute this R code"</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>        # repos= tells R where to download packages from</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 4: Run our R code to test things work</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test R and data</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span><span class="co">                          # Another multi-line shell command</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>        R -e "</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>        # Load the packages we just installed</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        library(testthat)</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>        # Print some info to the logs</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>        cat('=== Basic R Test ===\n')</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data rows:', nrow(penguins), '\n')</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>        # Run actual tests (these will FAIL the workflow if they don't pass)</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>        expect_equal(ncol(penguins), 8)    # Penguins data should have 8 columns</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>        expect_gt(nrow(penguins), 300)     # Should have more than 300 rows</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>        cat('✅ Basic tests passed!\n')</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>        "</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>        # Note: If any expect_* function fails, R exits with error code 1</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>        # This makes GitHub Actions mark the workflow as "failed"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Try this:</strong> 1. Replace the hello workflow or create this alongside it 2. Push and watch it run 3. Look at the logs to see R output</p>
<p><strong>What you’ll learn:</strong> - How to use pre-built actions (<code>uses:</code>) - How to install and run R in GitHub Actions - How to run multi-line R commands - Basic testing with <code>testthat</code></p>
</section>
<section id="step-3-add-docker-1" class="level2" data-number="1.14">
<h2 data-number="1.14" class="anchored" data-anchor-id="step-3-add-docker-1"><span class="header-section-number">1.14</span> Step 3: Add Docker</h2>
<p><strong>Goal</strong>: Use Docker instead of installing R directly</p>
<p>Create <code>.github/workflows/step3-docker.yml</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow identifier (shows in GitHub UI)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 3 - Docker Testing</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># WHEN: Trigger on pushes and pull requests</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># WHAT: Define the work to do</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB: Called "test" (arbitrary name)</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">    # WHERE: Use GitHub's Ubuntu virtual machines</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # HOW: Step-by-step instructions</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Get the source code (including Dockerfile)</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">      # This downloads ALL files from your repository into /github/workspace/</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">      # Now the runner has access to your Dockerfile, R code, tests, etc.</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Build Docker image from your Dockerfile</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">      # BREAKDOWN:</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">      # docker build    = Command to build a Docker image</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co">      # -t penguins-test = Tag (name) the image "penguins-test"</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co">      # .               = Build context (current directory - where Dockerfile is)</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co">      # This reads your Dockerfile and creates a container image with R + packages</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Run R commands inside the Docker container</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests in Docker</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>        docker run --rm penguins-test R -e "</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>        # This R code runs INSIDE the container, not on the Ubuntu host</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>        cat('=== Docker R Test ===\n')</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>        # Check if packages are available (should be installed via Dockerfile)</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data loaded with', nrow(penguins), 'rows\n')</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>        cat('✅ Docker test passed!\n')</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>        "</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>        # BREAKDOWN:</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>        # docker run      = Run a command in a new container</span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>        # --rm           = Delete the container when it finishes (cleanup)</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>        # penguins-test  = Use the image we just built</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>        # R -e "..."     = Run this R code inside the container</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What changed from Step 2:</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2 WAY (install R on Ubuntu host):</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup R</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span><span class="co">    # Install R</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install packages</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> R -e "install.packages(...)"</span><span class="co"> # Install packages</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 3 WAY (use Docker container):</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t name .</span><span class="co">       # Build container with R + packages</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run in container  </span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker run name R -e "..."</span><span class="co">   # Run R inside container</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Try this:</strong> 1. Make sure you have a working Dockerfile in your repo 2. Push and watch it build your Docker image 3. See R running inside the container</p>
<p><strong>What you’ll learn:</strong> - How Docker integrates with GitHub Actions - Difference between <code>docker build</code> and <code>docker run</code> - How containers provide consistent environments</p>
</section>
<section id="step-4-add-real-tests-1" class="level2" data-number="1.15">
<h2 data-number="1.15" class="anchored" data-anchor-id="step-4-add-real-tests-1"><span class="header-section-number">1.15</span> Step 4: Add Real Tests</h2>
<p><strong>Goal</strong>: Run your actual testthat test suite</p>
<p>Create <code>.github/workflows/step4-real-tests.yml</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow display name</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 4 - Real Test Suite</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGERS: When this workflow should execute</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS: What work should be done</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB DEFINITION: Single job named "test"</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">    # EXECUTION ENVIRONMENT: GitHub-hosted Ubuntu virtual machine</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # EXECUTION STEPS: Sequential tasks to perform</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Retrieve repository contents</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co">      # PURPOSE: Downloads your entire repo (code, tests, Dockerfile) to the runner</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="co">      # RESULT: Runner now has access to all your project files</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Create Docker image with R environment</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image  </span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">      # PURPOSE: Builds a container image from your Dockerfile</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co">      # WHAT HAPPENS: Docker reads Dockerfile, installs R, packages, dependencies</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="co">      # RESULT: Image named "penguins-test" ready to run your code</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Execute test suite inside containerized environment</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run testthat test suite</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>        docker run --rm \</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>          -v $PWD:/home/analyst/project \</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>          penguins-test \</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>          R -e "</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>          # === DOCKER COMMAND BREAKDOWN ===</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>          # docker run                    = Start a new container</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>          # --rm                         = Auto-delete container when finished</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>          # -v \$PWD:/home/analyst/project = VOLUME MOUNT (critical concept!)</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>          #    \$PWD                      = Current directory on GitHub runner</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>          #    :/home/analyst/project     = Directory inside container</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>          #    Effect: Container can see/modify your project files</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>          # penguins-test                = Use the image we built in step 2</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>          # R -e \"...\"                  = Execute this R code inside container</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>          # === R CODE EXECUTION (inside container) ===</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>          # Move to the mounted project directory</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>          # Now we're working in the directory that contains your tests/</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>          cat('=== Running Test Suite ===\n')</span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>          # Load the testing framework</span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>          # VALIDATION: Check if test directory exists</span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>          if (!dir.exists('tests/testthat')) {</span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>            cat('❌ No tests/testthat directory found\n')</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)    # Exit with error code 1 = FAIL the workflow</span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>          # EXECUTE: Run all test files in tests/testthat/</span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a>          # This runs every file matching tests/testthat/test-*.R</span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>          # Returns object with passed/failed/skipped counts</span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>          # REPORTING: Show results in workflow logs</span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>          cat('Tests passed:', test_results[['passed']], '\n')</span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>          cat('Tests failed:', test_results[['failed']], '\n')</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>          # WORKFLOW CONTROL: Fail GitHub Actions if any tests failed</span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) {</span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a>            cat('❌ Some tests failed!\n')</span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)    # Non-zero exit = GitHub marks workflow as FAILED</span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true" tabindex="-1"></a>            cat('✅ All tests passed!\n')</span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true" tabindex="-1"></a>            # Zero exit code = GitHub marks workflow as SUCCESSFUL</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true" tabindex="-1"></a>          "</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Key Concepts Explained:</strong></p>
<section id="volume-mounting--v-pwdhomeanalystproject" class="level3" data-number="1.15.1">
<h3 data-number="1.15.1" class="anchored" data-anchor-id="volume-mounting--v-pwdhomeanalystproject"><span class="header-section-number">1.15.1</span> Volume Mounting (<code>-v $PWD:/home/analyst/project</code>)</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># WITHOUT volume mount:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run penguins-test R <span class="at">-e</span> <span class="st">"list.files()"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Container can't see your test files - they're on the host machine</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># WITH volume mount:</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-v</span> <span class="va">$PWD</span>:/home/analyst/project penguins-test R <span class="at">-e</span> <span class="st">"list.files('/home/analyst/project')"</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Container can now see and access your project files</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exit-codes-and-workflow-status" class="level3" data-number="1.15.2">
<h3 data-number="1.15.2" class="anchored" data-anchor-id="exit-codes-and-workflow-status"><span class="header-section-number">1.15.2</span> Exit Codes and Workflow Status</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In R inside the container:</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quit</span>(<span class="at">status =</span> <span class="dv">0</span>)    <span class="co"># Success - GitHub shows green ✅</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">quit</span>(<span class="at">status =</span> <span class="dv">1</span>)    <span class="co"># Failure - GitHub shows red ❌ and stops here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="file-structure-expected" class="level3" data-number="1.15.3">
<h3 data-number="1.15.3" class="anchored" data-anchor-id="file-structure-expected"><span class="header-section-number">1.15.3</span> File Structure Expected</h3>
<pre><code>your-repo/
├── tests/
│   └── testthat/
│       ├── test-data-integrity.R
│       ├── test-analysis.R
│       └── test-*.R
├── Dockerfile
└── other files...</code></pre>
<p><strong>What you’ll learn:</strong> - How to mount local files into Docker containers - How to make workflows fail when tests fail - How to run your real test suite in CI</p>
</section>
</section>
<section id="step-5-add-package-detection-1" class="level2" data-number="1.16">
<h2 data-number="1.16" class="anchored" data-anchor-id="step-5-add-package-detection-1"><span class="header-section-number">1.16</span> Step 5: Add Package Detection</h2>
<p><strong>Goal</strong>: Detect when new R packages are added</p>
<p>Create <code>.github/workflows/step5-package-detection.yml</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 5 - Package Detection</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co">    # NEW: Package detection</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check for new packages</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>          cat('=== Package Detection ===\n')</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>          # Find R files  </span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>          r_files &lt;- c(</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>            list.files('analysis', pattern = '\\\\.Rmd$', full.names = TRUE, recursive = TRUE),</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>            list.files('R', pattern = '\\\\.R$', full.names = TRUE, recursive = TRUE)</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>          # Extract library() calls</span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>          all_packages &lt;- character(0)</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>          for (file in r_files) {</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>            if (file.exists(file)) {</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>              content &lt;- readLines(file, warn = FALSE)</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>              # Look for library(package) patterns</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>              lib_matches &lt;- regmatches(content, gregexpr('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', content))</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>              packages &lt;- unlist(lapply(lib_matches, function(x) {</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>                if (length(x) &gt; 0 &amp;&amp; x != '') {</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>                  gsub('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', '\\\\1', x)</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>                } else character(0)</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>              }))</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>              all_packages &lt;- c(all_packages, packages)</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>          # Remove base packages and duplicates</span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>          base_pkgs &lt;- c('base', 'utils', 'stats', 'graphics', 'grDevices', 'methods')</span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>          new_packages &lt;- unique(setdiff(all_packages, base_pkgs))</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>          if (length(new_packages) &gt; 0) {</span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>            cat('📦 Packages found in code:\n')</span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>            cat(' -', paste(new_packages, collapse = '\n - '), '\n')</span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>            cat('No additional packages detected\n')</span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>          "</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What’s new:</strong> - Added a separate step for package detection - R code that scans files for <code>library()</code> calls - Regular expressions to extract package names - Logic to filter out base R packages</p>
<p><strong>What you’ll learn:</strong> - How to add multiple steps to a job - Basic text processing with R and regex - How to scan code for dependencies</p>
</section>
<section id="step-6-add-pr-comments-1" class="level2" data-number="1.17">
<h2 data-number="1.17" class="anchored" data-anchor-id="step-6-add-pr-comments-1"><span class="header-section-number">1.17</span> Step 6: Add PR Comments</h2>
<p><strong>Goal</strong>: Make GitHub Actions talk back to you</p>
<p>Create <code>.github/workflows/step6-pr-comments.yml</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow name in GitHub Actions UI</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 6 - PR Comments</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGER RESTRICTION: Only run on pull requests (not pushes to main)</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">pull_request</span><span class="kw">]</span><span class="co">  # Removed 'push' because we only want PR comments</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS SECTION</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB: Combine testing + commenting in one job</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test-and-comment</span><span class="kw">:</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">    # EXECUTION ENVIRONMENT</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # SEQUENTIAL STEPS</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Get repository code</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Build container image</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Run tests AND capture results for later use</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">id</span><span class="kw">:</span><span class="at"> test-step</span><span class="co">  # ⭐ KEY: Give this step an ID so other steps can reference it</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>        # COMPLEX SHELL LOGIC: Run tests and capture success/failure</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>        # Note the &amp;&amp; and || operators for conditional execution</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>          # SAVE RESULTS: Write test results to files for later access</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_PASSED=', test_results[['passed']], '\n', sep='', file='/tmp/test_results.txt')</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_FAILED=', test_results[['failed']], '\n', sep='', file='/tmp/test_results.txt', append=TRUE)</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>          # CONDITIONAL EXIT: Still fail if tests fail</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>          " &amp;&amp; echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT || echo "TEST_STATUS=failed" &gt;&gt; $GITHUB_OUTPUT</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>          # BREAKDOWN OF CONDITIONAL LOGIC:</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>          # docker run ... &amp;&amp; echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT   # If tests succeed</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>          #                || echo "TEST_STATUS=failed" &gt;&gt; $GITHUB_OUTPUT  # If tests fail</span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>          # $GITHUB_OUTPUT is a special file that passes data between steps</span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 4: Create comment on the PR based on test results</span></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span><span class="co">  # ⭐ SPECIAL ACTION: Allows JavaScript to interact with GitHub API</span></span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a><span class="co">        # JAVASCRIPT CODE: This runs JavaScript, not shell commands</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>          // ACCESS PREVIOUS STEP DATA: Get the test status we saved</span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>          const testStatus = '${{ steps.test-step.outputs.TEST_STATUS }}';</span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>          // SYNTAX: ${{ steps.STEP_ID.outputs.OUTPUT_NAME }}</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>          // BUILD MESSAGE: Create markdown content for the comment</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>          let message = '## 🧪 Test Results\n\n';</span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>          // CONDITIONAL LOGIC: Different messages based on test outcome</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>          if (testStatus === 'passed') {</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>            message += '✅ **All tests passed!** This PR is ready for review.\n';</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>            message += '❌ **Tests failed!** Please check the logs and fix the issues.\n';</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>          // FOOTER: Add timestamp and attribution</span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>          message += '\n---\n*This comment was generated automatically by GitHub Actions*';</span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>          // GITHUB API CALL: Post the comment to the PR</span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,  // PR number (PRs are "issues" in GitHub API)</span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,           // Repository owner (username/org)</span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,             // Repository name</span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>            body: message                        // The markdown content we built</span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>          // CONTEXT VARIABLES:</span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>          // context.issue.number = Current PR number</span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>          // context.repo.owner   = Repository owner (your username)</span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>          // context.repo.repo    = Repository name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>New Concepts Explained:</strong></p>
<section id="step-ids-and-outputs" class="level3" data-number="1.17.1">
<h3 data-number="1.17.1" class="anchored" data-anchor-id="step-ids-and-outputs"><span class="header-section-number">1.17.1</span> Step IDs and Outputs</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 1: Create output data</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Some step</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">id</span><span class="kw">:</span><span class="at"> my-step-id</span><span class="co">               # Give step an ID</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "result=success" &gt;&gt; $GITHUB_OUTPUT</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2: Use the output data  </span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Use previous result</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Previous step said: ${{ steps.my-step-id.outputs.result }}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="shell-conditional-logic" class="level3" data-number="1.17.2">
<h3 data-number="1.17.2" class="anchored" data-anchor-id="shell-conditional-logic"><span class="header-section-number">1.17.2</span> Shell Conditional Logic</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pattern: command1 &amp;&amp; command2 || command3</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Meaning: </span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Run command1</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   - IF command1 succeeds (exit code 0): run command2</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   - IF command1 fails (exit code != 0): run command3</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run ... <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> <span class="st">"success"</span> <span class="kw">||</span> <span class="bu">echo</span> <span class="st">"failed"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="github-api-via-javascript" class="level3" data-number="1.17.3">
<h3 data-number="1.17.3" class="anchored" data-anchor-id="github-api-via-javascript"><span class="header-section-number">1.17.3</span> GitHub API via JavaScript</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// github.rest.issues.createComment() creates a PR comment</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">// github.rest.repos.createCommitComment() creates a commit comment  </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">// github.rest.pulls.update() modifies PR details</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">// context.issue.number gets the current PR number</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">// context.repo gives repository info</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="github_output-file" class="level3" data-number="1.17.4">
<h3 data-number="1.17.4" class="anchored" data-anchor-id="github_output-file"><span class="header-section-number">1.17.4</span> $GITHUB_OUTPUT File</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># WRITING OUTPUT DATA (in shell):</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"key=value"</span> <span class="op">&gt;&gt;</span> <span class="va">$GITHUB_OUTPUT</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># READING OUTPUT DATA (in later step):</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="va">${</span><span class="er">{ steps.step-id.outputs.key </span><span class="va">}</span><span class="ex">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What you’ll learn:</strong> - How to pass data between steps using outputs - How to use GitHub’s JavaScript API - How to make workflows interactive with comments</p>
</section>
</section>
<section id="step-7-complete-system-1" class="level2" data-number="1.18">
<h2 data-number="1.18" class="anchored" data-anchor-id="step-7-complete-system-1"><span class="header-section-number">1.18</span> Step 7: Complete System</h2>
<p><strong>Goal</strong>: Put it all together with post-merge automation</p>
<p>Create <code>.github/workflows/step7-complete.yml</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 7 - Complete System</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Two different triggers for two different purposes</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co">          # Pre-merge validation</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">                  # Post-merge automation  </span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: Validate PRs (only runs on pull_request)</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">validate-pr</span><span class="kw">:</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'pull_request'</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run test suite</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>          cat('✅ All tests passed!\n')</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>          const message = '## ✅ PR Validation Passed\n\nAll tests are passing. This PR is ready for merge!';</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,  </span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 2: Post-merge automation (only runs on push to main)</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">post-merge</span><span class="kw">:</span></span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</span></span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and test</span></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>        docker build -t penguins-latest .</span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>          penguins-latest R -e "</span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>          test_dir('tests/testthat')</span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a>          cat('✅ Post-merge tests passed!\n')</span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Create success comment</span></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a>          const message = `## 🚀 Merge Successful</span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a>          The code has been merged and all tests are still passing.</span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a>          **Commit**: ${context.sha.substring(0, 7)}</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a>          **Time**: ${new Date().toISOString()}`;</span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a>          github.rest.repos.createCommitComment({</span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,</span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a>            commit_sha: context.sha,</span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a>          });</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What’s new:</strong> - Two separate jobs with different conditions - <code>if: github.event_name == 'pull_request'</code> - only run job on PRs - <code>if: github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</code> - only run on main branch pushes - <code>createCommitComment()</code> vs <code>createComment()</code> - different types of comments</p>
<p><strong>What you’ll learn:</strong> - How to create workflows that respond to different events - How to use conditions (<code>if:</code>) to control when jobs run - The difference between PR comments and commit comments</p>
</section>
<section id="how-to-practice-1" class="level2" data-number="1.19">
<h2 data-number="1.19" class="anchored" data-anchor-id="how-to-practice-1"><span class="header-section-number">1.19</span> 🎯 How to Practice</h2>
<section id="week-1-start-simple-1" class="level3" data-number="1.19.1">
<h3 data-number="1.19.1" class="anchored" data-anchor-id="week-1-start-simple-1"><span class="header-section-number">1.19.1</span> Week 1: Start Simple</h3>
<ol type="1">
<li><strong>Day 1</strong>: Create Step 1 (Hello World) - understand basic structure</li>
<li><strong>Day 2</strong>: Create Step 2 (Basic R) - learn about actions and R</li>
<li><strong>Day 3</strong>: Create Step 3 (Docker) - understand containers in CI</li>
</ol>
</section>
<section id="week-2-add-complexity-1" class="level3" data-number="1.19.2">
<h3 data-number="1.19.2" class="anchored" data-anchor-id="week-2-add-complexity-1"><span class="header-section-number">1.19.2</span> Week 2: Add Complexity</h3>
<ol start="4" type="1">
<li><strong>Day 4</strong>: Create Step 4 (Real Tests) - connect to your actual tests</li>
<li><strong>Day 5</strong>: Create Step 5 (Package Detection) - learn text processing</li>
<li><strong>Day 6</strong>: Create Step 6 (PR Comments) - make it interactive</li>
</ol>
</section>
<section id="week-3-complete-system-1" class="level3" data-number="1.19.3">
<h3 data-number="1.19.3" class="anchored" data-anchor-id="week-3-complete-system-1"><span class="header-section-number">1.19.3</span> Week 3: Complete System</h3>
<ol start="7" type="1">
<li><strong>Day 7</strong>: Create Step 7 (Complete) - put it all together</li>
<li><strong>Test extensively</strong>: Create test PRs and watch the full flow</li>
<li><strong>Customize</strong>: Modify for your specific needs</li>
</ol>
</section>
</section>
<section id="testing-each-step-1" class="level2" data-number="1.20">
<h2 data-number="1.20" class="anchored" data-anchor-id="testing-each-step-1"><span class="header-section-number">1.20</span> 🔧 Testing Each Step</h2>
<p>For each step, create a test scenario:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test branch</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> test-step-X</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a small change to trigger the workflow</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"# Testing step X"</span> <span class="op">&gt;&gt;</span> README.md</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Commit and push</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"test: step X workflow"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin test-step-X</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create PR (for PR workflows) or just watch Actions tab (for push workflows)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="common-issues-and-solutions-1" class="level2" data-number="1.21">
<h2 data-number="1.21" class="anchored" data-anchor-id="common-issues-and-solutions-1"><span class="header-section-number">1.21</span> 🚨 Common Issues and Solutions</h2>
<section id="issue-yaml-syntax-errors-1" class="level3" data-number="1.21.1">
<h3 data-number="1.21.1" class="anchored" data-anchor-id="issue-yaml-syntax-errors-1"><span class="header-section-number">1.21.1</span> Issue: YAML syntax errors</h3>
<p><strong>Solution</strong>: Use online YAML validator, check indentation</p>
</section>
<section id="issue-workflow-not-running-1" class="level3" data-number="1.21.2">
<h3 data-number="1.21.2" class="anchored" data-anchor-id="issue-workflow-not-running-1"><span class="header-section-number">1.21.2</span> Issue: Workflow not running</h3>
<p><strong>Solution</strong>: Check file location (<code>.github/workflows/</code>), verify triggers</p>
</section>
<section id="issue-docker-build-fails-1" class="level3" data-number="1.21.3">
<h3 data-number="1.21.3" class="anchored" data-anchor-id="issue-docker-build-fails-1"><span class="header-section-number">1.21.3</span> Issue: Docker build fails</h3>
<p><strong>Solution</strong>: Test <code>docker build .</code> locally first</p>
</section>
<section id="issue-tests-fail-in-ci-but-pass-locally-1" class="level3" data-number="1.21.4">
<h3 data-number="1.21.4" class="anchored" data-anchor-id="issue-tests-fail-in-ci-but-pass-locally-1"><span class="header-section-number">1.21.4</span> Issue: Tests fail in CI but pass locally</h3>
<p><strong>Solution</strong>: Check Docker environment vs local environment</p>
</section>
<section id="issue-permissions-errors-1" class="level3" data-number="1.21.5">
<h3 data-number="1.21.5" class="anchored" data-anchor-id="issue-permissions-errors-1"><span class="header-section-number">1.21.5</span> Issue: Permissions errors</h3>
<p><strong>Solution</strong>: Repository Settings → Actions → General → “Read and write permissions”</p>
</section>
</section>
<section id="key-concepts-reinforcement-1" class="level2" data-number="1.22">
<h2 data-number="1.22" class="anchored" data-anchor-id="key-concepts-reinforcement-1"><span class="header-section-number">1.22</span> 📚 Key Concepts Reinforcement</h2>
<p>By the end of this progression, you’ll understand:</p>
<p>✅ <strong>Basic YAML structure</strong> (<code>name</code>, <code>on</code>, <code>jobs</code>, <code>steps</code>)<br>
✅ <strong>When workflows run</strong> (triggers: <code>push</code>, <code>pull_request</code>)<br>
✅ <strong>Where workflows run</strong> (<code>runs-on: ubuntu-latest</code>)<br>
✅ <strong>How to use actions</strong> (<code>uses:</code>) vs commands (<code>run:</code>)<br>
✅ <strong>Docker integration</strong> (<code>docker build</code>, <code>docker run</code>)<br>
✅ <strong>Conditional execution</strong> (<code>if:</code> statements)<br>
✅ <strong>GitHub API interaction</strong> (comments, commits)<br>
✅ <strong>Data flow between steps</strong> (outputs, files)</p>
<p>Start with Step 1 and don’t move to the next step until you understand the current one completely!</p>


<!-- -->

</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{(ryy)_glenn_thomas,
  author = {(Ryy) Glenn Thomas, Ronald},
  url = {https://focusonr.org/posts/share_R_code_via_docker_p25/actions.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-(ryy)_glenn_thomas" class="csl-entry quarto-appendix-citeas" role="listitem">
(Ryy) Glenn Thomas, Ronald. n.d. <a href="https://focusonr.org/posts/share_R_code_via_docker_p25/actions.html">https://focusonr.org/posts/share_R_code_via_docker_p25/actions.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/focusonr\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="rgt47/qblog" data-repo-id="R_kgDOH6TO7A" data-category="Announcements" data-category-id="DIC_kwDOH5G3U84CRUp9" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light"><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb25" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Simplified Penguins Workflow - Step by Step Learning</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>Learn GitHub Actions by building up your penguins analysis workflow piece by piece.</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">## 🎯 Learning Strategy</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>Start with the simplest possible workflow and add one feature at a time:</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Step 1**: Hello World</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Step 2**: Basic R Testing  </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Step 3**: Add Docker</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Step 4**: Add Package Detection</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Step 5**: Add Post-Merge Automation</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>**Step 6**: Complete System</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 1: Hello World Workflow</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>**Goal**: Understand basic GitHub Actions structure</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step1-hello.yml`</span>:</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 1 - Hello World</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co"># When should this run?</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">        # Every time you push code</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co"> # Every time someone creates a PR</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a><span class="co"># What should it do?</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hello</span><span class="kw">:</span><span class="co">                    # Job name (you choose this)</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span><span class="co">  # What computer to use</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span><span class="co">                  # List of things to do</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Say hello</span><span class="co">       # Step name (you choose this)</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Hello from penguins analysis!"</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Show info</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>        echo "Repository: ${{ github.repository }}"</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>        echo "Event: ${{ github.event_name }}"</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>        echo "Actor: ${{ github.actor }}"</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>**Try this:**</span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Create this file</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Commit and push: <span class="in">`git add . &amp;&amp; git commit -m "add hello workflow" &amp;&amp; git push`</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Go to Actions tab on GitHub</span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Watch it run and click on the workflow to see logs</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Where workflow files go (<span class="in">`.github/workflows/`</span>)</span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Basic YAML structure (<span class="in">`name`</span>, <span class="in">`on`</span>, <span class="in">`jobs`</span>, <span class="in">`steps`</span>)</span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use <span class="in">`run:`</span> for shell commands</span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to access GitHub context variables (<span class="in">`${{ github.* }}`</span>)</span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 2: Basic R Testing</span></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>**Goal**: Run R commands in GitHub Actions</span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step2-basic-r.yml`</span>:</span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 2 - Basic R Testing</span></span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-72"><a href="#cb25-72" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-73"><a href="#cb25-73" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-74"><a href="#cb25-74" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 1: Get your code</span></span>
<span id="cb25-75"><a href="#cb25-75" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Get repository code</span></span>
<span id="cb25-76"><a href="#cb25-76" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span><span class="co">    # This is a pre-built action</span></span>
<span id="cb25-77"><a href="#cb25-77" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-78"><a href="#cb25-78" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 2: Install R</span></span>
<span id="cb25-79"><a href="#cb25-79" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup R</span></span>
<span id="cb25-80"><a href="#cb25-80" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span></span>
<span id="cb25-81"><a href="#cb25-81" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-82"><a href="#cb25-82" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'4.3.0'</span></span>
<span id="cb25-83"><a href="#cb25-83" aria-hidden="true" tabindex="-1"></a><span class="at">        </span></span>
<span id="cb25-84"><a href="#cb25-84" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 3: Install R packages</span></span>
<span id="cb25-85"><a href="#cb25-85" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install basic packages  </span></span>
<span id="cb25-86"><a href="#cb25-86" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-87"><a href="#cb25-87" aria-hidden="true" tabindex="-1"></a>        R -e "install.packages(c('testthat', 'palmerpenguins'), repos='https://cloud.r-project.org')"</span>
<span id="cb25-88"><a href="#cb25-88" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-89"><a href="#cb25-89" aria-hidden="true" tabindex="-1"></a><span class="co">    # Step 4: Run simple R test</span></span>
<span id="cb25-90"><a href="#cb25-90" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test R and data</span></span>
<span id="cb25-91"><a href="#cb25-91" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-92"><a href="#cb25-92" aria-hidden="true" tabindex="-1"></a>        R -e "</span>
<span id="cb25-93"><a href="#cb25-93" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb25-94"><a href="#cb25-94" aria-hidden="true" tabindex="-1"></a>        library(testthat)</span>
<span id="cb25-95"><a href="#cb25-95" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-96"><a href="#cb25-96" aria-hidden="true" tabindex="-1"></a>        # Simple test</span>
<span id="cb25-97"><a href="#cb25-97" aria-hidden="true" tabindex="-1"></a>        cat('=== Basic R Test ===\n')</span>
<span id="cb25-98"><a href="#cb25-98" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb25-99"><a href="#cb25-99" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data rows:', nrow(penguins), '\n')</span>
<span id="cb25-100"><a href="#cb25-100" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-101"><a href="#cb25-101" aria-hidden="true" tabindex="-1"></a>        # Actual test</span>
<span id="cb25-102"><a href="#cb25-102" aria-hidden="true" tabindex="-1"></a>        expect_equal(ncol(penguins), 8)</span>
<span id="cb25-103"><a href="#cb25-103" aria-hidden="true" tabindex="-1"></a>        expect_gt(nrow(penguins), 300)</span>
<span id="cb25-104"><a href="#cb25-104" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-105"><a href="#cb25-105" aria-hidden="true" tabindex="-1"></a>        cat('✅ Basic tests passed!\n')</span>
<span id="cb25-106"><a href="#cb25-106" aria-hidden="true" tabindex="-1"></a>        "</span>
<span id="cb25-107"><a href="#cb25-107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-108"><a href="#cb25-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-109"><a href="#cb25-109" aria-hidden="true" tabindex="-1"></a>**Try this:**</span>
<span id="cb25-110"><a href="#cb25-110" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Replace the hello workflow or create this alongside it</span>
<span id="cb25-111"><a href="#cb25-111" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Push and watch it run</span>
<span id="cb25-112"><a href="#cb25-112" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Look at the logs to see R output</span>
<span id="cb25-113"><a href="#cb25-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-114"><a href="#cb25-114" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-115"><a href="#cb25-115" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use pre-built actions (<span class="in">`uses:`</span>)</span>
<span id="cb25-116"><a href="#cb25-116" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to install and run R in GitHub Actions</span>
<span id="cb25-117"><a href="#cb25-117" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to run multi-line R commands</span>
<span id="cb25-118"><a href="#cb25-118" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Basic testing with <span class="in">`testthat`</span></span>
<span id="cb25-119"><a href="#cb25-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-120"><a href="#cb25-120" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 3: Add Docker</span></span>
<span id="cb25-121"><a href="#cb25-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-122"><a href="#cb25-122" aria-hidden="true" tabindex="-1"></a>**Goal**: Use Docker instead of installing R directly</span>
<span id="cb25-123"><a href="#cb25-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-124"><a href="#cb25-124" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step3-docker.yml`</span>:</span>
<span id="cb25-125"><a href="#cb25-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-126"><a href="#cb25-126" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-127"><a href="#cb25-127" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 3 - Docker Testing</span></span>
<span id="cb25-128"><a href="#cb25-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-129"><a href="#cb25-129" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb25-130"><a href="#cb25-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-131"><a href="#cb25-131" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-132"><a href="#cb25-132" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-133"><a href="#cb25-133" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-134"><a href="#cb25-134" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-135"><a href="#cb25-135" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-136"><a href="#cb25-136" aria-hidden="true" tabindex="-1"></a><span class="co">    # Get your code</span></span>
<span id="cb25-137"><a href="#cb25-137" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-138"><a href="#cb25-138" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-139"><a href="#cb25-139" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-140"><a href="#cb25-140" aria-hidden="true" tabindex="-1"></a><span class="co">    # Build Docker image from your Dockerfile</span></span>
<span id="cb25-141"><a href="#cb25-141" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-142"><a href="#cb25-142" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-143"><a href="#cb25-143" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-144"><a href="#cb25-144" aria-hidden="true" tabindex="-1"></a><span class="co">    # Run tests inside Docker container</span></span>
<span id="cb25-145"><a href="#cb25-145" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests in Docker</span></span>
<span id="cb25-146"><a href="#cb25-146" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-147"><a href="#cb25-147" aria-hidden="true" tabindex="-1"></a>        docker run --rm penguins-test R -e "</span>
<span id="cb25-148"><a href="#cb25-148" aria-hidden="true" tabindex="-1"></a>        cat('=== Docker R Test ===\n')</span>
<span id="cb25-149"><a href="#cb25-149" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb25-150"><a href="#cb25-150" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-151"><a href="#cb25-151" aria-hidden="true" tabindex="-1"></a>        # Check if packages are available</span>
<span id="cb25-152"><a href="#cb25-152" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb25-153"><a href="#cb25-153" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data loaded with', nrow(penguins), 'rows\n')</span>
<span id="cb25-154"><a href="#cb25-154" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-155"><a href="#cb25-155" aria-hidden="true" tabindex="-1"></a>        cat('✅ Docker test passed!\n')</span>
<span id="cb25-156"><a href="#cb25-156" aria-hidden="true" tabindex="-1"></a>        "</span>
<span id="cb25-157"><a href="#cb25-157" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-158"><a href="#cb25-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-159"><a href="#cb25-159" aria-hidden="true" tabindex="-1"></a>**What changed:**</span>
<span id="cb25-160"><a href="#cb25-160" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Removed R installation steps (Docker handles this)</span>
<span id="cb25-161"><a href="#cb25-161" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Added <span class="in">`docker build`</span> to create image from your Dockerfile</span>
<span id="cb25-162"><a href="#cb25-162" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Added <span class="in">`docker run`</span> to execute R inside container</span>
<span id="cb25-163"><a href="#cb25-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-164"><a href="#cb25-164" aria-hidden="true" tabindex="-1"></a>**Try this:**</span>
<span id="cb25-165"><a href="#cb25-165" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Make sure you have a working Dockerfile in your repo</span>
<span id="cb25-166"><a href="#cb25-166" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Push and watch it build your Docker image</span>
<span id="cb25-167"><a href="#cb25-167" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>See R running inside the container</span>
<span id="cb25-168"><a href="#cb25-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-169"><a href="#cb25-169" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-170"><a href="#cb25-170" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How Docker integrates with GitHub Actions</span>
<span id="cb25-171"><a href="#cb25-171" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Difference between <span class="in">`docker build`</span> and <span class="in">`docker run`</span></span>
<span id="cb25-172"><a href="#cb25-172" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How containers provide consistent environments</span>
<span id="cb25-173"><a href="#cb25-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-174"><a href="#cb25-174" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 4: Add Real Tests</span></span>
<span id="cb25-175"><a href="#cb25-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-176"><a href="#cb25-176" aria-hidden="true" tabindex="-1"></a>**Goal**: Run your actual testthat test suite</span>
<span id="cb25-177"><a href="#cb25-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-178"><a href="#cb25-178" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step4-real-tests.yml`</span>:</span>
<span id="cb25-179"><a href="#cb25-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-180"><a href="#cb25-180" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-181"><a href="#cb25-181" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 4 - Real Test Suite</span></span>
<span id="cb25-182"><a href="#cb25-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-183"><a href="#cb25-183" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb25-184"><a href="#cb25-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-185"><a href="#cb25-185" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-186"><a href="#cb25-186" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-187"><a href="#cb25-187" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-188"><a href="#cb25-188" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-189"><a href="#cb25-189" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-190"><a href="#cb25-190" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-191"><a href="#cb25-191" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-192"><a href="#cb25-192" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-193"><a href="#cb25-193" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image  </span></span>
<span id="cb25-194"><a href="#cb25-194" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-195"><a href="#cb25-195" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-196"><a href="#cb25-196" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run testthat test suite</span></span>
<span id="cb25-197"><a href="#cb25-197" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-198"><a href="#cb25-198" aria-hidden="true" tabindex="-1"></a>        docker run --rm \</span>
<span id="cb25-199"><a href="#cb25-199" aria-hidden="true" tabindex="-1"></a>          -v $PWD:/home/analyst/project \</span>
<span id="cb25-200"><a href="#cb25-200" aria-hidden="true" tabindex="-1"></a>          penguins-test \</span>
<span id="cb25-201"><a href="#cb25-201" aria-hidden="true" tabindex="-1"></a>          R -e "</span>
<span id="cb25-202"><a href="#cb25-202" aria-hidden="true" tabindex="-1"></a>          # Move to project directory</span>
<span id="cb25-203"><a href="#cb25-203" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-204"><a href="#cb25-204" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-205"><a href="#cb25-205" aria-hidden="true" tabindex="-1"></a>          cat('=== Running Test Suite ===\n')</span>
<span id="cb25-206"><a href="#cb25-206" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-207"><a href="#cb25-207" aria-hidden="true" tabindex="-1"></a>          # Load testthat</span>
<span id="cb25-208"><a href="#cb25-208" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-209"><a href="#cb25-209" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-210"><a href="#cb25-210" aria-hidden="true" tabindex="-1"></a>          # Check if test directory exists</span>
<span id="cb25-211"><a href="#cb25-211" aria-hidden="true" tabindex="-1"></a>          if (!dir.exists('tests/testthat')) {</span>
<span id="cb25-212"><a href="#cb25-212" aria-hidden="true" tabindex="-1"></a>            cat('❌ No tests/testthat directory found\n')</span>
<span id="cb25-213"><a href="#cb25-213" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)</span>
<span id="cb25-214"><a href="#cb25-214" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-215"><a href="#cb25-215" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-216"><a href="#cb25-216" aria-hidden="true" tabindex="-1"></a>          # Run all tests</span>
<span id="cb25-217"><a href="#cb25-217" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-218"><a href="#cb25-218" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-219"><a href="#cb25-219" aria-hidden="true" tabindex="-1"></a>          # Print results</span>
<span id="cb25-220"><a href="#cb25-220" aria-hidden="true" tabindex="-1"></a>          cat('Tests passed:', test_results[['passed']], '\n')</span>
<span id="cb25-221"><a href="#cb25-221" aria-hidden="true" tabindex="-1"></a>          cat('Tests failed:', test_results[['failed']], '\n')</span>
<span id="cb25-222"><a href="#cb25-222" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-223"><a href="#cb25-223" aria-hidden="true" tabindex="-1"></a>          # Exit with error if tests failed</span>
<span id="cb25-224"><a href="#cb25-224" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) {</span>
<span id="cb25-225"><a href="#cb25-225" aria-hidden="true" tabindex="-1"></a>            cat('❌ Some tests failed!\n')</span>
<span id="cb25-226"><a href="#cb25-226" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)</span>
<span id="cb25-227"><a href="#cb25-227" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb25-228"><a href="#cb25-228" aria-hidden="true" tabindex="-1"></a>            cat('✅ All tests passed!\n')</span>
<span id="cb25-229"><a href="#cb25-229" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-230"><a href="#cb25-230" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-231"><a href="#cb25-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-232"><a href="#cb25-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-233"><a href="#cb25-233" aria-hidden="true" tabindex="-1"></a>**What's new:**</span>
<span id="cb25-234"><a href="#cb25-234" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`-v $PWD:/home/analyst/project`</span> mounts your code into the container</span>
<span id="cb25-235"><a href="#cb25-235" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`setwd()`</span> changes to the project directory inside container</span>
<span id="cb25-236"><a href="#cb25-236" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`test_dir()`</span> runs your actual test files</span>
<span id="cb25-237"><a href="#cb25-237" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`quit(status = 1)`</span> makes GitHub Actions fail if tests fail</span>
<span id="cb25-238"><a href="#cb25-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-239"><a href="#cb25-239" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-240"><a href="#cb25-240" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to mount local files into Docker containers</span>
<span id="cb25-241"><a href="#cb25-241" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to make workflows fail when tests fail</span>
<span id="cb25-242"><a href="#cb25-242" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to run your real test suite in CI</span>
<span id="cb25-243"><a href="#cb25-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-244"><a href="#cb25-244" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 5: Add Package Detection</span></span>
<span id="cb25-245"><a href="#cb25-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-246"><a href="#cb25-246" aria-hidden="true" tabindex="-1"></a>**Goal**: Detect when new R packages are added</span>
<span id="cb25-247"><a href="#cb25-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-248"><a href="#cb25-248" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step5-package-detection.yml`</span>:</span>
<span id="cb25-249"><a href="#cb25-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-250"><a href="#cb25-250" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-251"><a href="#cb25-251" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 5 - Package Detection</span></span>
<span id="cb25-252"><a href="#cb25-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-253"><a href="#cb25-253" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb25-254"><a href="#cb25-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-255"><a href="#cb25-255" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-256"><a href="#cb25-256" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-257"><a href="#cb25-257" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-258"><a href="#cb25-258" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-259"><a href="#cb25-259" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-260"><a href="#cb25-260" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-261"><a href="#cb25-261" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-262"><a href="#cb25-262" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-263"><a href="#cb25-263" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-264"><a href="#cb25-264" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-265"><a href="#cb25-265" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-266"><a href="#cb25-266" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb25-267"><a href="#cb25-267" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-268"><a href="#cb25-268" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-269"><a href="#cb25-269" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-270"><a href="#cb25-270" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-271"><a href="#cb25-271" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-272"><a href="#cb25-272" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-273"><a href="#cb25-273" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb25-274"><a href="#cb25-274" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-275"><a href="#cb25-275" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-276"><a href="#cb25-276" aria-hidden="true" tabindex="-1"></a><span class="co">    # NEW: Package detection</span></span>
<span id="cb25-277"><a href="#cb25-277" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check for new packages</span></span>
<span id="cb25-278"><a href="#cb25-278" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-279"><a href="#cb25-279" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-280"><a href="#cb25-280" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-281"><a href="#cb25-281" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-282"><a href="#cb25-282" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-283"><a href="#cb25-283" aria-hidden="true" tabindex="-1"></a>          cat('=== Package Detection ===\n')</span>
<span id="cb25-284"><a href="#cb25-284" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-285"><a href="#cb25-285" aria-hidden="true" tabindex="-1"></a>          # Find R files  </span>
<span id="cb25-286"><a href="#cb25-286" aria-hidden="true" tabindex="-1"></a>          r_files &lt;- c(</span>
<span id="cb25-287"><a href="#cb25-287" aria-hidden="true" tabindex="-1"></a>            list.files('analysis', pattern = '\\\\.Rmd$', full.names = TRUE, recursive = TRUE),</span>
<span id="cb25-288"><a href="#cb25-288" aria-hidden="true" tabindex="-1"></a>            list.files('R', pattern = '\\\\.R$', full.names = TRUE, recursive = TRUE)</span>
<span id="cb25-289"><a href="#cb25-289" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb25-290"><a href="#cb25-290" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-291"><a href="#cb25-291" aria-hidden="true" tabindex="-1"></a>          # Extract library() calls</span>
<span id="cb25-292"><a href="#cb25-292" aria-hidden="true" tabindex="-1"></a>          all_packages &lt;- character(0)</span>
<span id="cb25-293"><a href="#cb25-293" aria-hidden="true" tabindex="-1"></a>          for (file in r_files) {</span>
<span id="cb25-294"><a href="#cb25-294" aria-hidden="true" tabindex="-1"></a>            if (file.exists(file)) {</span>
<span id="cb25-295"><a href="#cb25-295" aria-hidden="true" tabindex="-1"></a>              content &lt;- readLines(file, warn = FALSE)</span>
<span id="cb25-296"><a href="#cb25-296" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb25-297"><a href="#cb25-297" aria-hidden="true" tabindex="-1"></a>              # Look for library(package) patterns</span>
<span id="cb25-298"><a href="#cb25-298" aria-hidden="true" tabindex="-1"></a>              lib_matches &lt;- regmatches(content, gregexpr('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', content))</span>
<span id="cb25-299"><a href="#cb25-299" aria-hidden="true" tabindex="-1"></a>              packages &lt;- unlist(lapply(lib_matches, function(x) {</span>
<span id="cb25-300"><a href="#cb25-300" aria-hidden="true" tabindex="-1"></a>                if (length(x) &gt; 0 &amp;&amp; x != '') {</span>
<span id="cb25-301"><a href="#cb25-301" aria-hidden="true" tabindex="-1"></a>                  gsub('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', '\\\\1', x)</span>
<span id="cb25-302"><a href="#cb25-302" aria-hidden="true" tabindex="-1"></a>                } else character(0)</span>
<span id="cb25-303"><a href="#cb25-303" aria-hidden="true" tabindex="-1"></a>              }))</span>
<span id="cb25-304"><a href="#cb25-304" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb25-305"><a href="#cb25-305" aria-hidden="true" tabindex="-1"></a>              all_packages &lt;- c(all_packages, packages)</span>
<span id="cb25-306"><a href="#cb25-306" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb25-307"><a href="#cb25-307" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-308"><a href="#cb25-308" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-309"><a href="#cb25-309" aria-hidden="true" tabindex="-1"></a>          # Remove base packages and duplicates</span>
<span id="cb25-310"><a href="#cb25-310" aria-hidden="true" tabindex="-1"></a>          base_pkgs &lt;- c('base', 'utils', 'stats', 'graphics', 'grDevices', 'methods')</span>
<span id="cb25-311"><a href="#cb25-311" aria-hidden="true" tabindex="-1"></a>          new_packages &lt;- unique(setdiff(all_packages, base_pkgs))</span>
<span id="cb25-312"><a href="#cb25-312" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-313"><a href="#cb25-313" aria-hidden="true" tabindex="-1"></a>          if (length(new_packages) &gt; 0) {</span>
<span id="cb25-314"><a href="#cb25-314" aria-hidden="true" tabindex="-1"></a>            cat('📦 Packages found in code:\n')</span>
<span id="cb25-315"><a href="#cb25-315" aria-hidden="true" tabindex="-1"></a>            cat(' -', paste(new_packages, collapse = '\n - '), '\n')</span>
<span id="cb25-316"><a href="#cb25-316" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb25-317"><a href="#cb25-317" aria-hidden="true" tabindex="-1"></a>            cat('No additional packages detected\n')</span>
<span id="cb25-318"><a href="#cb25-318" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-319"><a href="#cb25-319" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-320"><a href="#cb25-320" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-321"><a href="#cb25-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-322"><a href="#cb25-322" aria-hidden="true" tabindex="-1"></a>**What's new:**</span>
<span id="cb25-323"><a href="#cb25-323" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Added a separate step for package detection</span>
<span id="cb25-324"><a href="#cb25-324" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>R code that scans files for <span class="in">`library()`</span> calls</span>
<span id="cb25-325"><a href="#cb25-325" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Regular expressions to extract package names</span>
<span id="cb25-326"><a href="#cb25-326" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Logic to filter out base R packages</span>
<span id="cb25-327"><a href="#cb25-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-328"><a href="#cb25-328" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-329"><a href="#cb25-329" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to add multiple steps to a job</span>
<span id="cb25-330"><a href="#cb25-330" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Basic text processing with R and regex</span>
<span id="cb25-331"><a href="#cb25-331" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to scan code for dependencies</span>
<span id="cb25-332"><a href="#cb25-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-333"><a href="#cb25-333" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 6: Add PR Comments</span></span>
<span id="cb25-334"><a href="#cb25-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-335"><a href="#cb25-335" aria-hidden="true" tabindex="-1"></a>**Goal**: Make GitHub Actions talk back to you</span>
<span id="cb25-336"><a href="#cb25-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-337"><a href="#cb25-337" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step6-pr-comments.yml`</span>:</span>
<span id="cb25-338"><a href="#cb25-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-339"><a href="#cb25-339" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-340"><a href="#cb25-340" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 6 - PR Comments</span></span>
<span id="cb25-341"><a href="#cb25-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-342"><a href="#cb25-342" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">pull_request</span><span class="kw">]</span><span class="co">  # Only run on PRs</span></span>
<span id="cb25-343"><a href="#cb25-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-344"><a href="#cb25-344" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-345"><a href="#cb25-345" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test-and-comment</span><span class="kw">:</span></span>
<span id="cb25-346"><a href="#cb25-346" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-347"><a href="#cb25-347" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-348"><a href="#cb25-348" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-349"><a href="#cb25-349" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-350"><a href="#cb25-350" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-351"><a href="#cb25-351" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-352"><a href="#cb25-352" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-353"><a href="#cb25-353" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-354"><a href="#cb25-354" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-355"><a href="#cb25-355" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb25-356"><a href="#cb25-356" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">id</span><span class="kw">:</span><span class="at"> test-step</span><span class="co">  # Give this step an ID so we can reference it</span></span>
<span id="cb25-357"><a href="#cb25-357" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-358"><a href="#cb25-358" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-359"><a href="#cb25-359" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-360"><a href="#cb25-360" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-361"><a href="#cb25-361" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-362"><a href="#cb25-362" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-363"><a href="#cb25-363" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-364"><a href="#cb25-364" aria-hidden="true" tabindex="-1"></a>          # Save results to file so we can read them later</span>
<span id="cb25-365"><a href="#cb25-365" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_PASSED=', test_results[['passed']], '\n', sep='', file='/tmp/test_results.txt')</span>
<span id="cb25-366"><a href="#cb25-366" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_FAILED=', test_results[['failed']], '\n', sep='', file='/tmp/test_results.txt', append=TRUE)</span>
<span id="cb25-367"><a href="#cb25-367" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-368"><a href="#cb25-368" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb25-369"><a href="#cb25-369" aria-hidden="true" tabindex="-1"></a>          " &amp;&amp; echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT || echo "TEST_STATUS=failed" &gt;&gt; $GITHUB_OUTPUT</span>
<span id="cb25-370"><a href="#cb25-370" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-371"><a href="#cb25-371" aria-hidden="true" tabindex="-1"></a><span class="co">    # NEW: Comment on the PR</span></span>
<span id="cb25-372"><a href="#cb25-372" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb25-373"><a href="#cb25-373" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb25-374"><a href="#cb25-374" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-375"><a href="#cb25-375" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-376"><a href="#cb25-376" aria-hidden="true" tabindex="-1"></a>          const testStatus = '${{ steps.test-step.outputs.TEST_STATUS }}';</span>
<span id="cb25-377"><a href="#cb25-377" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-378"><a href="#cb25-378" aria-hidden="true" tabindex="-1"></a>          let message = '## 🧪 Test Results\n\n';</span>
<span id="cb25-379"><a href="#cb25-379" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-380"><a href="#cb25-380" aria-hidden="true" tabindex="-1"></a>          if (testStatus === 'passed') {</span>
<span id="cb25-381"><a href="#cb25-381" aria-hidden="true" tabindex="-1"></a>            message += '✅ **All tests passed!** This PR is ready for review.\n';</span>
<span id="cb25-382"><a href="#cb25-382" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb25-383"><a href="#cb25-383" aria-hidden="true" tabindex="-1"></a>            message += '❌ **Tests failed!** Please check the logs and fix the issues.\n';</span>
<span id="cb25-384"><a href="#cb25-384" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-385"><a href="#cb25-385" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-386"><a href="#cb25-386" aria-hidden="true" tabindex="-1"></a>          message += '\n---\n*This comment was generated automatically by GitHub Actions*';</span>
<span id="cb25-387"><a href="#cb25-387" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-388"><a href="#cb25-388" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb25-389"><a href="#cb25-389" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,</span>
<span id="cb25-390"><a href="#cb25-390" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,</span>
<span id="cb25-391"><a href="#cb25-391" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb25-392"><a href="#cb25-392" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb25-393"><a href="#cb25-393" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb25-394"><a href="#cb25-394" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-395"><a href="#cb25-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-396"><a href="#cb25-396" aria-hidden="true" tabindex="-1"></a>**What's new:**</span>
<span id="cb25-397"><a href="#cb25-397" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`id: test-step`</span> gives the step a name we can reference</span>
<span id="cb25-398"><a href="#cb25-398" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT`</span> saves data for later steps</span>
<span id="cb25-399"><a href="#cb25-399" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`uses: actions/github-script@v7`</span> lets us run JavaScript to interact with GitHub</span>
<span id="cb25-400"><a href="#cb25-400" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`github.rest.issues.createComment()`</span> posts a comment on the PR</span>
<span id="cb25-401"><a href="#cb25-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-402"><a href="#cb25-402" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-403"><a href="#cb25-403" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to pass data between steps using outputs</span>
<span id="cb25-404"><a href="#cb25-404" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use GitHub's JavaScript API</span>
<span id="cb25-405"><a href="#cb25-405" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to make workflows interactive with comments</span>
<span id="cb25-406"><a href="#cb25-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-407"><a href="#cb25-407" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 7: Complete System</span></span>
<span id="cb25-408"><a href="#cb25-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-409"><a href="#cb25-409" aria-hidden="true" tabindex="-1"></a>**Goal**: Put it all together with post-merge automation</span>
<span id="cb25-410"><a href="#cb25-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-411"><a href="#cb25-411" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step7-complete.yml`</span>:</span>
<span id="cb25-412"><a href="#cb25-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-413"><a href="#cb25-413" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-414"><a href="#cb25-414" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 7 - Complete System</span></span>
<span id="cb25-415"><a href="#cb25-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-416"><a href="#cb25-416" aria-hidden="true" tabindex="-1"></a><span class="co"># Two different triggers for two different purposes</span></span>
<span id="cb25-417"><a href="#cb25-417" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb25-418"><a href="#cb25-418" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co">          # Pre-merge validation</span></span>
<span id="cb25-419"><a href="#cb25-419" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb25-420"><a href="#cb25-420" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">                  # Post-merge automation  </span></span>
<span id="cb25-421"><a href="#cb25-421" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb25-422"><a href="#cb25-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-423"><a href="#cb25-423" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-424"><a href="#cb25-424" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: Validate PRs (only runs on pull_request)</span></span>
<span id="cb25-425"><a href="#cb25-425" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">validate-pr</span><span class="kw">:</span></span>
<span id="cb25-426"><a href="#cb25-426" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'pull_request'</span></span>
<span id="cb25-427"><a href="#cb25-427" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-428"><a href="#cb25-428" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-429"><a href="#cb25-429" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-430"><a href="#cb25-430" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-431"><a href="#cb25-431" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-432"><a href="#cb25-432" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-433"><a href="#cb25-433" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-434"><a href="#cb25-434" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-435"><a href="#cb25-435" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-436"><a href="#cb25-436" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run test suite</span></span>
<span id="cb25-437"><a href="#cb25-437" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-438"><a href="#cb25-438" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-439"><a href="#cb25-439" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-440"><a href="#cb25-440" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-441"><a href="#cb25-441" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-442"><a href="#cb25-442" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-443"><a href="#cb25-443" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb25-444"><a href="#cb25-444" aria-hidden="true" tabindex="-1"></a>          cat('✅ All tests passed!\n')</span>
<span id="cb25-445"><a href="#cb25-445" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-446"><a href="#cb25-446" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-447"><a href="#cb25-447" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb25-448"><a href="#cb25-448" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb25-449"><a href="#cb25-449" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-450"><a href="#cb25-450" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-451"><a href="#cb25-451" aria-hidden="true" tabindex="-1"></a>          const message = '## ✅ PR Validation Passed\n\nAll tests are passing. This PR is ready for merge!';</span>
<span id="cb25-452"><a href="#cb25-452" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-453"><a href="#cb25-453" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb25-454"><a href="#cb25-454" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,</span>
<span id="cb25-455"><a href="#cb25-455" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,  </span>
<span id="cb25-456"><a href="#cb25-456" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb25-457"><a href="#cb25-457" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb25-458"><a href="#cb25-458" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb25-459"><a href="#cb25-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-460"><a href="#cb25-460" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 2: Post-merge automation (only runs on push to main)</span></span>
<span id="cb25-461"><a href="#cb25-461" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">post-merge</span><span class="kw">:</span></span>
<span id="cb25-462"><a href="#cb25-462" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</span></span>
<span id="cb25-463"><a href="#cb25-463" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-464"><a href="#cb25-464" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-465"><a href="#cb25-465" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-466"><a href="#cb25-466" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-467"><a href="#cb25-467" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-468"><a href="#cb25-468" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-469"><a href="#cb25-469" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and test</span></span>
<span id="cb25-470"><a href="#cb25-470" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-471"><a href="#cb25-471" aria-hidden="true" tabindex="-1"></a>        docker build -t penguins-latest .</span>
<span id="cb25-472"><a href="#cb25-472" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-473"><a href="#cb25-473" aria-hidden="true" tabindex="-1"></a>          penguins-latest R -e "</span>
<span id="cb25-474"><a href="#cb25-474" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-475"><a href="#cb25-475" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-476"><a href="#cb25-476" aria-hidden="true" tabindex="-1"></a>          test_dir('tests/testthat')</span>
<span id="cb25-477"><a href="#cb25-477" aria-hidden="true" tabindex="-1"></a>          cat('✅ Post-merge tests passed!\n')</span>
<span id="cb25-478"><a href="#cb25-478" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-479"><a href="#cb25-479" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-480"><a href="#cb25-480" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Create success comment</span></span>
<span id="cb25-481"><a href="#cb25-481" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb25-482"><a href="#cb25-482" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-483"><a href="#cb25-483" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-484"><a href="#cb25-484" aria-hidden="true" tabindex="-1"></a>          const message = `## 🚀 Merge Successful</span>
<span id="cb25-485"><a href="#cb25-485" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-486"><a href="#cb25-486" aria-hidden="true" tabindex="-1"></a>          The code has been merged and all tests are still passing.</span>
<span id="cb25-487"><a href="#cb25-487" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-488"><a href="#cb25-488" aria-hidden="true" tabindex="-1"></a>          **Commit**: ${context.sha.substring(0, 7)}</span>
<span id="cb25-489"><a href="#cb25-489" aria-hidden="true" tabindex="-1"></a>          **Time**: ${new Date().toISOString()}`;</span>
<span id="cb25-490"><a href="#cb25-490" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-491"><a href="#cb25-491" aria-hidden="true" tabindex="-1"></a>          github.rest.repos.createCommitComment({</span>
<span id="cb25-492"><a href="#cb25-492" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,</span>
<span id="cb25-493"><a href="#cb25-493" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb25-494"><a href="#cb25-494" aria-hidden="true" tabindex="-1"></a>            commit_sha: context.sha,</span>
<span id="cb25-495"><a href="#cb25-495" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb25-496"><a href="#cb25-496" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb25-497"><a href="#cb25-497" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-498"><a href="#cb25-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-499"><a href="#cb25-499" aria-hidden="true" tabindex="-1"></a>**What's new:**</span>
<span id="cb25-500"><a href="#cb25-500" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Two separate jobs with different conditions</span>
<span id="cb25-501"><a href="#cb25-501" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`if: github.event_name == 'pull_request'`</span> - only run job on PRs</span>
<span id="cb25-502"><a href="#cb25-502" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`if: github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'`</span> - only run on main branch pushes</span>
<span id="cb25-503"><a href="#cb25-503" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`createCommitComment()`</span> vs <span class="in">`createComment()`</span> - different types of comments</span>
<span id="cb25-504"><a href="#cb25-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-505"><a href="#cb25-505" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-506"><a href="#cb25-506" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to create workflows that respond to different events</span>
<span id="cb25-507"><a href="#cb25-507" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use conditions (<span class="in">`if:`</span>) to control when jobs run</span>
<span id="cb25-508"><a href="#cb25-508" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The difference between PR comments and commit comments</span>
<span id="cb25-509"><a href="#cb25-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-510"><a href="#cb25-510" aria-hidden="true" tabindex="-1"></a><span class="fu">## 🎯 How to Practice</span></span>
<span id="cb25-511"><a href="#cb25-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-512"><a href="#cb25-512" aria-hidden="true" tabindex="-1"></a><span class="fu">### Week 1: Start Simple</span></span>
<span id="cb25-513"><a href="#cb25-513" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Day 1**: Create Step 1 (Hello World) - understand basic structure</span>
<span id="cb25-514"><a href="#cb25-514" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Day 2**: Create Step 2 (Basic R) - learn about actions and R</span>
<span id="cb25-515"><a href="#cb25-515" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Day 3**: Create Step 3 (Docker) - understand containers in CI</span>
<span id="cb25-516"><a href="#cb25-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-517"><a href="#cb25-517" aria-hidden="true" tabindex="-1"></a><span class="fu">### Week 2: Add Complexity  </span></span>
<span id="cb25-518"><a href="#cb25-518" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Day 4**: Create Step 4 (Real Tests) - connect to your actual tests</span>
<span id="cb25-519"><a href="#cb25-519" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Day 5**: Create Step 5 (Package Detection) - learn text processing</span>
<span id="cb25-520"><a href="#cb25-520" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>**Day 6**: Create Step 6 (PR Comments) - make it interactive</span>
<span id="cb25-521"><a href="#cb25-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-522"><a href="#cb25-522" aria-hidden="true" tabindex="-1"></a><span class="fu">### Week 3: Complete System</span></span>
<span id="cb25-523"><a href="#cb25-523" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span>**Day 7**: Create Step 7 (Complete) - put it all together</span>
<span id="cb25-524"><a href="#cb25-524" aria-hidden="true" tabindex="-1"></a><span class="ss">8. </span>**Test extensively**: Create test PRs and watch the full flow</span>
<span id="cb25-525"><a href="#cb25-525" aria-hidden="true" tabindex="-1"></a><span class="ss">9. </span>**Customize**: Modify for your specific needs</span>
<span id="cb25-526"><a href="#cb25-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-527"><a href="#cb25-527" aria-hidden="true" tabindex="-1"></a><span class="fu">## 🔧 Testing Each Step</span></span>
<span id="cb25-528"><a href="#cb25-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-529"><a href="#cb25-529" aria-hidden="true" tabindex="-1"></a>For each step, create a test scenario:</span>
<span id="cb25-530"><a href="#cb25-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-531"><a href="#cb25-531" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb25-532"><a href="#cb25-532" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test branch</span></span>
<span id="cb25-533"><a href="#cb25-533" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> test-step-X</span>
<span id="cb25-534"><a href="#cb25-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-535"><a href="#cb25-535" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a small change to trigger the workflow</span></span>
<span id="cb25-536"><a href="#cb25-536" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"# Testing step X"</span> <span class="op">&gt;&gt;</span> README.md</span>
<span id="cb25-537"><a href="#cb25-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-538"><a href="#cb25-538" aria-hidden="true" tabindex="-1"></a><span class="co"># Commit and push</span></span>
<span id="cb25-539"><a href="#cb25-539" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb25-540"><a href="#cb25-540" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"test: step X workflow"</span></span>
<span id="cb25-541"><a href="#cb25-541" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin test-step-X</span>
<span id="cb25-542"><a href="#cb25-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-543"><a href="#cb25-543" aria-hidden="true" tabindex="-1"></a><span class="co"># Create PR (for PR workflows) or just watch Actions tab (for push workflows)</span></span>
<span id="cb25-544"><a href="#cb25-544" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-545"><a href="#cb25-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-546"><a href="#cb25-546" aria-hidden="true" tabindex="-1"></a><span class="fu">## 🚨 Common Issues and Solutions</span></span>
<span id="cb25-547"><a href="#cb25-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-548"><a href="#cb25-548" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: YAML syntax errors</span></span>
<span id="cb25-549"><a href="#cb25-549" aria-hidden="true" tabindex="-1"></a>**Solution**: Use online YAML validator, check indentation</span>
<span id="cb25-550"><a href="#cb25-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-551"><a href="#cb25-551" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Workflow not running</span></span>
<span id="cb25-552"><a href="#cb25-552" aria-hidden="true" tabindex="-1"></a>**Solution**: Check file location (<span class="in">`.github/workflows/`</span>), verify triggers</span>
<span id="cb25-553"><a href="#cb25-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-554"><a href="#cb25-554" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Docker build fails</span></span>
<span id="cb25-555"><a href="#cb25-555" aria-hidden="true" tabindex="-1"></a>**Solution**: Test <span class="in">`docker build .`</span> locally first</span>
<span id="cb25-556"><a href="#cb25-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-557"><a href="#cb25-557" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Tests fail in CI but pass locally</span></span>
<span id="cb25-558"><a href="#cb25-558" aria-hidden="true" tabindex="-1"></a>**Solution**: Check Docker environment vs local environment</span>
<span id="cb25-559"><a href="#cb25-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-560"><a href="#cb25-560" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Permissions errors</span></span>
<span id="cb25-561"><a href="#cb25-561" aria-hidden="true" tabindex="-1"></a>**Solution**: Repository Settings → Actions → General → "Read and write permissions"</span>
<span id="cb25-562"><a href="#cb25-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-563"><a href="#cb25-563" aria-hidden="true" tabindex="-1"></a><span class="fu">## 📚 Key Concepts Reinforcement</span></span>
<span id="cb25-564"><a href="#cb25-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-565"><a href="#cb25-565" aria-hidden="true" tabindex="-1"></a>By the end of this progression, you'll understand:</span>
<span id="cb25-566"><a href="#cb25-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-567"><a href="#cb25-567" aria-hidden="true" tabindex="-1"></a>✅ **Basic YAML structure** (<span class="in">`name`</span>, <span class="in">`on`</span>, <span class="in">`jobs`</span>, <span class="in">`steps`</span>)  </span>
<span id="cb25-568"><a href="#cb25-568" aria-hidden="true" tabindex="-1"></a>✅ **When workflows run** (triggers: <span class="in">`push`</span>, <span class="in">`pull_request`</span>)  </span>
<span id="cb25-569"><a href="#cb25-569" aria-hidden="true" tabindex="-1"></a>✅ **Where workflows run** (<span class="in">`runs-on: ubuntu-latest`</span>)  </span>
<span id="cb25-570"><a href="#cb25-570" aria-hidden="true" tabindex="-1"></a>✅ **How to use actions** (<span class="in">`uses:`</span>) vs commands (<span class="in">`run:`</span>)  </span>
<span id="cb25-571"><a href="#cb25-571" aria-hidden="true" tabindex="-1"></a>✅ **Docker integration** (<span class="in">`docker build`</span>, <span class="in">`docker run`</span>)  </span>
<span id="cb25-572"><a href="#cb25-572" aria-hidden="true" tabindex="-1"></a>✅ **Conditional execution** (<span class="in">`if:`</span> statements)  </span>
<span id="cb25-573"><a href="#cb25-573" aria-hidden="true" tabindex="-1"></a>✅ **GitHub API interaction** (comments, commits)  </span>
<span id="cb25-574"><a href="#cb25-574" aria-hidden="true" tabindex="-1"></a>✅ **Data flow between steps** (outputs, files)  </span>
<span id="cb25-575"><a href="#cb25-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-576"><a href="#cb25-576" aria-hidden="true" tabindex="-1"></a>Start with Step 1 and don't move to the next step until you understand the current one completely!</span>
<span id="cb25-577"><a href="#cb25-577" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 7: Complete System</span></span>
<span id="cb25-578"><a href="#cb25-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-579"><a href="#cb25-579" aria-hidden="true" tabindex="-1"></a>**Goal**: Put it all together with post-merge automation</span>
<span id="cb25-580"><a href="#cb25-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-581"><a href="#cb25-581" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step7-complete.yml`</span>:</span>
<span id="cb25-582"><a href="#cb25-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-583"><a href="#cb25-583" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-584"><a href="#cb25-584" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow identifier</span></span>
<span id="cb25-585"><a href="#cb25-585" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 7 - Complete System</span></span>
<span id="cb25-586"><a href="#cb25-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-587"><a href="#cb25-587" aria-hidden="true" tabindex="-1"></a><span class="co"># COMPLEX TRIGGERS: Different events trigger different behaviors</span></span>
<span id="cb25-588"><a href="#cb25-588" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb25-589"><a href="#cb25-589" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co">          # TRIGGER 1: When PRs are created/updated</span></span>
<span id="cb25-590"><a href="#cb25-590" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span><span class="co">     #   - Only for PRs targeting 'main' branch</span></span>
<span id="cb25-591"><a href="#cb25-591" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">                  # TRIGGER 2: When code is pushed</span></span>
<span id="cb25-592"><a href="#cb25-592" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span><span class="co">     #   - Only for pushes TO 'main' branch (i.e., after merge)</span></span>
<span id="cb25-593"><a href="#cb25-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-594"><a href="#cb25-594" aria-hidden="true" tabindex="-1"></a><span class="co"># MULTIPLE JOBS: Different jobs for different purposes</span></span>
<span id="cb25-595"><a href="#cb25-595" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-596"><a href="#cb25-596" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb25-597"><a href="#cb25-597" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: VALIDATE PRs (Pre-merge quality gate)</span></span>
<span id="cb25-598"><a href="#cb25-598" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb25-599"><a href="#cb25-599" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">validate-pr</span><span class="kw">:</span></span>
<span id="cb25-600"><a href="#cb25-600" aria-hidden="true" tabindex="-1"></a><span class="co">    # CONDITIONAL EXECUTION: Only run this job for pull request events</span></span>
<span id="cb25-601"><a href="#cb25-601" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'pull_request'</span></span>
<span id="cb25-602"><a href="#cb25-602" aria-hidden="true" tabindex="-1"></a><span class="co">    # GITHUB CONTEXT VARIABLES:</span></span>
<span id="cb25-603"><a href="#cb25-603" aria-hidden="true" tabindex="-1"></a><span class="co">    # github.event_name = 'push' | 'pull_request' | 'schedule' | etc.</span></span>
<span id="cb25-604"><a href="#cb25-604" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-605"><a href="#cb25-605" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-606"><a href="#cb25-606" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-607"><a href="#cb25-607" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-608"><a href="#cb25-608" aria-hidden="true" tabindex="-1"></a><span class="co">    # Get the PR code (not the main branch code)</span></span>
<span id="cb25-609"><a href="#cb25-609" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-610"><a href="#cb25-610" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-611"><a href="#cb25-611" aria-hidden="true" tabindex="-1"></a><span class="co">      # </span><span class="al">NOTE</span><span class="co">: For PRs, this checks out the PR branch, not main</span></span>
<span id="cb25-612"><a href="#cb25-612" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-613"><a href="#cb25-613" aria-hidden="true" tabindex="-1"></a><span class="co">    # Build container from the PR's Dockerfile</span></span>
<span id="cb25-614"><a href="#cb25-614" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-615"><a href="#cb25-615" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-616"><a href="#cb25-616" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-617"><a href="#cb25-617" aria-hidden="true" tabindex="-1"></a><span class="co">    # Test the PR's code</span></span>
<span id="cb25-618"><a href="#cb25-618" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run test suite</span></span>
<span id="cb25-619"><a href="#cb25-619" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-620"><a href="#cb25-620" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-621"><a href="#cb25-621" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-622"><a href="#cb25-622" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-623"><a href="#cb25-623" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-624"><a href="#cb25-624" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-625"><a href="#cb25-625" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-626"><a href="#cb25-626" aria-hidden="true" tabindex="-1"></a>          # FAIL THE WORKFLOW if tests don't pass</span>
<span id="cb25-627"><a href="#cb25-627" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb25-628"><a href="#cb25-628" aria-hidden="true" tabindex="-1"></a>          cat('✅ All tests passed!\n')</span>
<span id="cb25-629"><a href="#cb25-629" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-630"><a href="#cb25-630" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-631"><a href="#cb25-631" aria-hidden="true" tabindex="-1"></a><span class="co">    # Provide feedback to PR author</span></span>
<span id="cb25-632"><a href="#cb25-632" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb25-633"><a href="#cb25-633" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb25-634"><a href="#cb25-634" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-635"><a href="#cb25-635" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-636"><a href="#cb25-636" aria-hidden="true" tabindex="-1"></a>          const message = '## ✅ PR Validation Passed\n\nAll tests are passing. This PR is ready for merge!';</span>
<span id="cb25-637"><a href="#cb25-637" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-638"><a href="#cb25-638" aria-hidden="true" tabindex="-1"></a>          // POST COMMENT to the specific PR that triggered this workflow</span>
<span id="cb25-639"><a href="#cb25-639" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb25-640"><a href="#cb25-640" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,  # The PR number that triggered this</span>
<span id="cb25-641"><a href="#cb25-641" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,  </span>
<span id="cb25-642"><a href="#cb25-642" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb25-643"><a href="#cb25-643" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb25-644"><a href="#cb25-644" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb25-645"><a href="#cb25-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-646"><a href="#cb25-646" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb25-647"><a href="#cb25-647" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 2: POST-MERGE AUTOMATION (After code is merged to main)</span></span>
<span id="cb25-648"><a href="#cb25-648" aria-hidden="true" tabindex="-1"></a><span class="co">  # ═══════════════════════════════════════════════════════════════════</span></span>
<span id="cb25-649"><a href="#cb25-649" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">post-merge</span><span class="kw">:</span></span>
<span id="cb25-650"><a href="#cb25-650" aria-hidden="true" tabindex="-1"></a><span class="co">    # COMPLEX CONDITION: Only run for pushes to main branch</span></span>
<span id="cb25-651"><a href="#cb25-651" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</span></span>
<span id="cb25-652"><a href="#cb25-652" aria-hidden="true" tabindex="-1"></a><span class="co">    # BREAKDOWN:</span></span>
<span id="cb25-653"><a href="#cb25-653" aria-hidden="true" tabindex="-1"></a><span class="co">    # github.event_name == 'push'           = This was a push event (not PR)</span></span>
<span id="cb25-654"><a href="#cb25-654" aria-hidden="true" tabindex="-1"></a><span class="co">    # github.ref == 'refs/heads/main'       = Push was to main branch</span></span>
<span id="cb25-655"><a href="#cb25-655" aria-hidden="true" tabindex="-1"></a><span class="co">    # refs/heads/main = Full Git reference for main branch</span></span>
<span id="cb25-656"><a href="#cb25-656" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-657"><a href="#cb25-657" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-658"><a href="#cb25-658" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-659"><a href="#cb25-659" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-660"><a href="#cb25-660" aria-hidden="true" tabindex="-1"></a><span class="co">    # Get the newly merged code from main branch</span></span>
<span id="cb25-661"><a href="#cb25-661" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-662"><a href="#cb25-662" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-663"><a href="#cb25-663" aria-hidden="true" tabindex="-1"></a><span class="co">      # </span><span class="al">NOTE</span><span class="co">: For pushes, this checks out the main branch with new merged code</span></span>
<span id="cb25-664"><a href="#cb25-664" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-665"><a href="#cb25-665" aria-hidden="true" tabindex="-1"></a><span class="co">    # Verify the merged code still works</span></span>
<span id="cb25-666"><a href="#cb25-666" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and test</span></span>
<span id="cb25-667"><a href="#cb25-667" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-668"><a href="#cb25-668" aria-hidden="true" tabindex="-1"></a>        # Build image with the merged code</span>
<span id="cb25-669"><a href="#cb25-669" aria-hidden="true" tabindex="-1"></a>        docker build -t penguins-latest .</span>
<span id="cb25-670"><a href="#cb25-670" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-671"><a href="#cb25-671" aria-hidden="true" tabindex="-1"></a>        # Run post-merge verification tests</span>
<span id="cb25-672"><a href="#cb25-672" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-673"><a href="#cb25-673" aria-hidden="true" tabindex="-1"></a>          penguins-latest R -e "</span>
<span id="cb25-674"><a href="#cb25-674" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-675"><a href="#cb25-675" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-676"><a href="#cb25-676" aria-hidden="true" tabindex="-1"></a>          test_dir('tests/testthat')</span>
<span id="cb25-677"><a href="#cb25-677" aria-hidden="true" tabindex="-1"></a>          cat('✅ Post-merge tests passed!\n')</span>
<span id="cb25-678"><a href="#cb25-678" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-679"><a href="#cb25-679" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-680"><a href="#cb25-680" aria-hidden="true" tabindex="-1"></a><span class="co">    # Document the successful merge</span></span>
<span id="cb25-681"><a href="#cb25-681" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Create success comment</span></span>
<span id="cb25-682"><a href="#cb25-682" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-</span><span class="co"># Simplified Penguins Workflow - Step by Step Learning</span></span>
<span id="cb25-683"><a href="#cb25-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-684"><a href="#cb25-684" aria-hidden="true" tabindex="-1"></a>Learn<span class="at"> </span>GitHub<span class="at"> </span>Actions<span class="at"> </span>by<span class="at"> </span>building<span class="at"> </span>up<span class="at"> </span>your<span class="at"> </span>penguins<span class="at"> </span>analysis<span class="at"> </span>workflow<span class="at"> </span>piece<span class="at"> </span>by<span class="at"> </span>piece.</span>
<span id="cb25-685"><a href="#cb25-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-686"><a href="#cb25-686" aria-hidden="true" tabindex="-1"></a><span class="co">## 🎯 Learning Strategy</span></span>
<span id="cb25-687"><a href="#cb25-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-688"><a href="#cb25-688" aria-hidden="true" tabindex="-1"></a><span class="fu">Start with the simplest possible workflow and add one feature at a time</span><span class="kw">:</span></span>
<span id="cb25-689"><a href="#cb25-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-690"><a href="#cb25-690" aria-hidden="true" tabindex="-1"></a><span class="fu">1. **Step 1**</span><span class="kw">:</span><span class="at"> Hello World</span></span>
<span id="cb25-691"><a href="#cb25-691" aria-hidden="true" tabindex="-1"></a><span class="fu">2. **Step 2**</span><span class="kw">:</span><span class="at"> Basic R Testing  </span></span>
<span id="cb25-692"><a href="#cb25-692" aria-hidden="true" tabindex="-1"></a><span class="fu">3. **Step 3**</span><span class="kw">:</span><span class="at"> Add Docker</span></span>
<span id="cb25-693"><a href="#cb25-693" aria-hidden="true" tabindex="-1"></a><span class="fu">4. **Step 4**</span><span class="kw">:</span><span class="at"> Add Package Detection</span></span>
<span id="cb25-694"><a href="#cb25-694" aria-hidden="true" tabindex="-1"></a><span class="fu">5. **Step 5**</span><span class="kw">:</span><span class="at"> Add Post-Merge Automation</span></span>
<span id="cb25-695"><a href="#cb25-695" aria-hidden="true" tabindex="-1"></a><span class="fu">6. **Step 6**</span><span class="kw">:</span><span class="at"> Complete System</span></span>
<span id="cb25-696"><a href="#cb25-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-697"><a href="#cb25-697" aria-hidden="true" tabindex="-1"></a><span class="co">## Step 1: Hello World Workflow</span></span>
<span id="cb25-698"><a href="#cb25-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-699"><a href="#cb25-699" aria-hidden="true" tabindex="-1"></a><span class="ot">**Goal**:</span><span class="at"> </span>Understand<span class="at"> </span>basic<span class="at"> </span>GitHub<span class="at"> </span>Actions<span class="at"> </span>structure</span>
<span id="cb25-700"><a href="#cb25-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-701"><a href="#cb25-701" aria-hidden="true" tabindex="-1"></a><span class="fu">Create `.github/workflows/step1-hello.yml`</span><span class="kw">:</span></span>
<span id="cb25-702"><a href="#cb25-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-703"><a href="#cb25-703" aria-hidden="true" tabindex="-1"></a>```yaml</span>
<span id="cb25-704"><a href="#cb25-704" aria-hidden="true" tabindex="-1"></a><span class="co"># This is the workflow name that appears in GitHub's Actions tab</span></span>
<span id="cb25-705"><a href="#cb25-705" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 1 - Hello World</span></span>
<span id="cb25-706"><a href="#cb25-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-707"><a href="#cb25-707" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGERS: When should this workflow run?</span></span>
<span id="cb25-708"><a href="#cb25-708" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb25-709"><a href="#cb25-709" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">        # Trigger: Every time you push code to ANY branch</span></span>
<span id="cb25-710"><a href="#cb25-710" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co"> # Trigger: Every time someone creates/updates a PR</span></span>
<span id="cb25-711"><a href="#cb25-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-712"><a href="#cb25-712" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS: What should this workflow do? (You can have multiple jobs)</span></span>
<span id="cb25-713"><a href="#cb25-713" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-714"><a href="#cb25-714" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: This is a job called "hello" (you can name it anything)</span></span>
<span id="cb25-715"><a href="#cb25-715" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hello</span><span class="kw">:</span><span class="at">                    </span></span>
<span id="cb25-716"><a href="#cb25-716" aria-hidden="true" tabindex="-1"></a><span class="co">    # RUNNER: What type of virtual machine should run this job?</span></span>
<span id="cb25-717"><a href="#cb25-717" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span><span class="co">  # Options: ubuntu-latest, windows-latest, macos-latest</span></span>
<span id="cb25-718"><a href="#cb25-718" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-719"><a href="#cb25-719" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEPS: A list of things for this job to do (executed in order)</span></span>
<span id="cb25-720"><a href="#cb25-720" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span><span class="at">                  </span></span>
<span id="cb25-721"><a href="#cb25-721" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Run a simple shell command</span></span>
<span id="cb25-722"><a href="#cb25-722" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Say hello</span><span class="co">       # This name appears in the logs (you choose it)</span></span>
<span id="cb25-723"><a href="#cb25-723" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Hello from penguins analysis!"</span><span class="co">  # Shell command to execute</span></span>
<span id="cb25-724"><a href="#cb25-724" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-725"><a href="#cb25-725" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Show GitHub context information</span></span>
<span id="cb25-726"><a href="#cb25-726" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Show info</span></span>
<span id="cb25-727"><a href="#cb25-727" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span><span class="co">                # The "|" means "multi-line string" in YAML</span></span>
<span id="cb25-728"><a href="#cb25-728" aria-hidden="true" tabindex="-1"></a>        echo "Repository: ${{ github.repository }}"    # Shows: username/repo-name</span>
<span id="cb25-729"><a href="#cb25-729" aria-hidden="true" tabindex="-1"></a>        echo "Event: ${{ github.event_name }}"         # Shows: push or pull_request</span>
<span id="cb25-730"><a href="#cb25-730" aria-hidden="true" tabindex="-1"></a>        echo "Actor: ${{ github.actor }}"              # Shows: who triggered this</span>
<span id="cb25-731"><a href="#cb25-731" aria-hidden="true" tabindex="-1"></a>        # Note: ${{ }} is GitHub's expression syntax for accessing variables</span>
<span id="cb25-732"><a href="#cb25-732" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-733"><a href="#cb25-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-734"><a href="#cb25-734" aria-hidden="true" tabindex="-1"></a>**Try this:**</span>
<span id="cb25-735"><a href="#cb25-735" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Create this file</span>
<span id="cb25-736"><a href="#cb25-736" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Commit and push: <span class="in">`git add . &amp;&amp; git commit -m "add hello workflow" &amp;&amp; git push`</span></span>
<span id="cb25-737"><a href="#cb25-737" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Go to Actions tab on GitHub</span>
<span id="cb25-738"><a href="#cb25-738" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Watch it run and click on the workflow to see logs</span>
<span id="cb25-739"><a href="#cb25-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-740"><a href="#cb25-740" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-741"><a href="#cb25-741" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Where workflow files go (<span class="in">`.github/workflows/`</span>)</span>
<span id="cb25-742"><a href="#cb25-742" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Basic YAML structure (<span class="in">`name`</span>, <span class="in">`on`</span>, <span class="in">`jobs`</span>, <span class="in">`steps`</span>)</span>
<span id="cb25-743"><a href="#cb25-743" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use <span class="in">`run:`</span> for shell commands</span>
<span id="cb25-744"><a href="#cb25-744" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to access GitHub context variables (<span class="in">`${{ github.* }}`</span>)</span>
<span id="cb25-745"><a href="#cb25-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-746"><a href="#cb25-746" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 2: Basic R Testing</span></span>
<span id="cb25-747"><a href="#cb25-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-748"><a href="#cb25-748" aria-hidden="true" tabindex="-1"></a>**Goal**: Run R commands in GitHub Actions</span>
<span id="cb25-749"><a href="#cb25-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-750"><a href="#cb25-750" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step2-basic-r.yml`</span>:</span>
<span id="cb25-751"><a href="#cb25-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-752"><a href="#cb25-752" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-753"><a href="#cb25-753" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow name (shows up in GitHub Actions tab)</span></span>
<span id="cb25-754"><a href="#cb25-754" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 2 - Basic R Testing</span></span>
<span id="cb25-755"><a href="#cb25-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-756"><a href="#cb25-756" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGERS: When to run this workflow</span></span>
<span id="cb25-757"><a href="#cb25-757" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span><span class="co">  # Shorthand for both push AND pull_request events</span></span>
<span id="cb25-758"><a href="#cb25-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-759"><a href="#cb25-759" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS SECTION: Define what work to do</span></span>
<span id="cb25-760"><a href="#cb25-760" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-761"><a href="#cb25-761" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB NAME: "test" (could be anything: "build", "validate", "check", etc.)</span></span>
<span id="cb25-762"><a href="#cb25-762" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-763"><a href="#cb25-763" aria-hidden="true" tabindex="-1"></a><span class="co">    # VIRTUAL MACHINE: Use Ubuntu (most common choice for CI)</span></span>
<span id="cb25-764"><a href="#cb25-764" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-765"><a href="#cb25-765" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-766"><a href="#cb25-766" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEPS: Ordered list of things to do in this job</span></span>
<span id="cb25-767"><a href="#cb25-767" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-768"><a href="#cb25-768" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Download your repository code into the runner</span></span>
<span id="cb25-769"><a href="#cb25-769" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Get repository code</span></span>
<span id="cb25-770"><a href="#cb25-770" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span><span class="co">    # PRE-BUILT ACTION (not a shell command)</span></span>
<span id="cb25-771"><a href="#cb25-771" aria-hidden="true" tabindex="-1"></a><span class="co">      # This action downloads your repo files so the workflow can access them</span></span>
<span id="cb25-772"><a href="#cb25-772" aria-hidden="true" tabindex="-1"></a><span class="co">      # @v4 is the version number (always use latest stable version)</span></span>
<span id="cb25-773"><a href="#cb25-773" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-774"><a href="#cb25-774" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Install R on the virtual machine</span></span>
<span id="cb25-775"><a href="#cb25-775" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup R</span></span>
<span id="cb25-776"><a href="#cb25-776" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span><span class="co">  # Another pre-built action</span></span>
<span id="cb25-777"><a href="#cb25-777" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span><span class="co">                           # PARAMETERS for this action</span></span>
<span id="cb25-778"><a href="#cb25-778" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'4.3.0'</span><span class="co">           # Which R version to install</span></span>
<span id="cb25-779"><a href="#cb25-779" aria-hidden="true" tabindex="-1"></a><span class="co">        # Other options: 'latest', 'release', '4.2.3', etc.</span></span>
<span id="cb25-780"><a href="#cb25-780" aria-hidden="true" tabindex="-1"></a><span class="at">        </span></span>
<span id="cb25-781"><a href="#cb25-781" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Install R packages we need</span></span>
<span id="cb25-782"><a href="#cb25-782" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install basic packages  </span></span>
<span id="cb25-783"><a href="#cb25-783" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span><span class="co">                          # SHELL COMMAND (multi-line)</span></span>
<span id="cb25-784"><a href="#cb25-784" aria-hidden="true" tabindex="-1"></a>        # This runs R commands directly on the Ubuntu machine</span>
<span id="cb25-785"><a href="#cb25-785" aria-hidden="true" tabindex="-1"></a>        R -e "install.packages(c('testthat', 'palmerpenguins'), repos='https://cloud.r-project.org')"</span>
<span id="cb25-786"><a href="#cb25-786" aria-hidden="true" tabindex="-1"></a>        # R -e means "execute this R code"</span>
<span id="cb25-787"><a href="#cb25-787" aria-hidden="true" tabindex="-1"></a>        # repos= tells R where to download packages from</span>
<span id="cb25-788"><a href="#cb25-788" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-789"><a href="#cb25-789" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 4: Run our R code to test things work</span></span>
<span id="cb25-790"><a href="#cb25-790" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test R and data</span></span>
<span id="cb25-791"><a href="#cb25-791" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span><span class="co">                          # Another multi-line shell command</span></span>
<span id="cb25-792"><a href="#cb25-792" aria-hidden="true" tabindex="-1"></a>        R -e "</span>
<span id="cb25-793"><a href="#cb25-793" aria-hidden="true" tabindex="-1"></a>        # Load the packages we just installed</span>
<span id="cb25-794"><a href="#cb25-794" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb25-795"><a href="#cb25-795" aria-hidden="true" tabindex="-1"></a>        library(testthat)</span>
<span id="cb25-796"><a href="#cb25-796" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-797"><a href="#cb25-797" aria-hidden="true" tabindex="-1"></a>        # Print some info to the logs</span>
<span id="cb25-798"><a href="#cb25-798" aria-hidden="true" tabindex="-1"></a>        cat('=== Basic R Test ===\n')</span>
<span id="cb25-799"><a href="#cb25-799" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb25-800"><a href="#cb25-800" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data rows:', nrow(penguins), '\n')</span>
<span id="cb25-801"><a href="#cb25-801" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-802"><a href="#cb25-802" aria-hidden="true" tabindex="-1"></a>        # Run actual tests (these will FAIL the workflow if they don't pass)</span>
<span id="cb25-803"><a href="#cb25-803" aria-hidden="true" tabindex="-1"></a>        expect_equal(ncol(penguins), 8)    # Penguins data should have 8 columns</span>
<span id="cb25-804"><a href="#cb25-804" aria-hidden="true" tabindex="-1"></a>        expect_gt(nrow(penguins), 300)     # Should have more than 300 rows</span>
<span id="cb25-805"><a href="#cb25-805" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-806"><a href="#cb25-806" aria-hidden="true" tabindex="-1"></a>        cat('✅ Basic tests passed!\n')</span>
<span id="cb25-807"><a href="#cb25-807" aria-hidden="true" tabindex="-1"></a>        "</span>
<span id="cb25-808"><a href="#cb25-808" aria-hidden="true" tabindex="-1"></a>        # Note: If any expect_* function fails, R exits with error code 1</span>
<span id="cb25-809"><a href="#cb25-809" aria-hidden="true" tabindex="-1"></a>        # This makes GitHub Actions mark the workflow as "failed"</span>
<span id="cb25-810"><a href="#cb25-810" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-811"><a href="#cb25-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-812"><a href="#cb25-812" aria-hidden="true" tabindex="-1"></a>**Try this:**</span>
<span id="cb25-813"><a href="#cb25-813" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Replace the hello workflow or create this alongside it</span>
<span id="cb25-814"><a href="#cb25-814" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Push and watch it run</span>
<span id="cb25-815"><a href="#cb25-815" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Look at the logs to see R output</span>
<span id="cb25-816"><a href="#cb25-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-817"><a href="#cb25-817" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-818"><a href="#cb25-818" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use pre-built actions (<span class="in">`uses:`</span>)</span>
<span id="cb25-819"><a href="#cb25-819" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to install and run R in GitHub Actions</span>
<span id="cb25-820"><a href="#cb25-820" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to run multi-line R commands</span>
<span id="cb25-821"><a href="#cb25-821" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Basic testing with <span class="in">`testthat`</span></span>
<span id="cb25-822"><a href="#cb25-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-823"><a href="#cb25-823" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 3: Add Docker</span></span>
<span id="cb25-824"><a href="#cb25-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-825"><a href="#cb25-825" aria-hidden="true" tabindex="-1"></a>**Goal**: Use Docker instead of installing R directly</span>
<span id="cb25-826"><a href="#cb25-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-827"><a href="#cb25-827" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step3-docker.yml`</span>:</span>
<span id="cb25-828"><a href="#cb25-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-829"><a href="#cb25-829" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-830"><a href="#cb25-830" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow identifier (shows in GitHub UI)</span></span>
<span id="cb25-831"><a href="#cb25-831" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 3 - Docker Testing</span></span>
<span id="cb25-832"><a href="#cb25-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-833"><a href="#cb25-833" aria-hidden="true" tabindex="-1"></a><span class="co"># WHEN: Trigger on pushes and pull requests</span></span>
<span id="cb25-834"><a href="#cb25-834" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb25-835"><a href="#cb25-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-836"><a href="#cb25-836" aria-hidden="true" tabindex="-1"></a><span class="co"># WHAT: Define the work to do</span></span>
<span id="cb25-837"><a href="#cb25-837" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-838"><a href="#cb25-838" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB: Called "test" (arbitrary name)</span></span>
<span id="cb25-839"><a href="#cb25-839" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-840"><a href="#cb25-840" aria-hidden="true" tabindex="-1"></a><span class="co">    # WHERE: Use GitHub's Ubuntu virtual machines</span></span>
<span id="cb25-841"><a href="#cb25-841" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-842"><a href="#cb25-842" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-843"><a href="#cb25-843" aria-hidden="true" tabindex="-1"></a><span class="co">    # HOW: Step-by-step instructions</span></span>
<span id="cb25-844"><a href="#cb25-844" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-845"><a href="#cb25-845" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Get the source code (including Dockerfile)</span></span>
<span id="cb25-846"><a href="#cb25-846" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-847"><a href="#cb25-847" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-848"><a href="#cb25-848" aria-hidden="true" tabindex="-1"></a><span class="co">      # This downloads ALL files from your repository into /github/workspace/</span></span>
<span id="cb25-849"><a href="#cb25-849" aria-hidden="true" tabindex="-1"></a><span class="co">      # Now the runner has access to your Dockerfile, R code, tests, etc.</span></span>
<span id="cb25-850"><a href="#cb25-850" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-851"><a href="#cb25-851" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Build Docker image from your Dockerfile</span></span>
<span id="cb25-852"><a href="#cb25-852" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-853"><a href="#cb25-853" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-854"><a href="#cb25-854" aria-hidden="true" tabindex="-1"></a><span class="co">      # BREAKDOWN:</span></span>
<span id="cb25-855"><a href="#cb25-855" aria-hidden="true" tabindex="-1"></a><span class="co">      # docker build    = Command to build a Docker image</span></span>
<span id="cb25-856"><a href="#cb25-856" aria-hidden="true" tabindex="-1"></a><span class="co">      # -t penguins-test = Tag (name) the image "penguins-test"</span></span>
<span id="cb25-857"><a href="#cb25-857" aria-hidden="true" tabindex="-1"></a><span class="co">      # .               = Build context (current directory - where Dockerfile is)</span></span>
<span id="cb25-858"><a href="#cb25-858" aria-hidden="true" tabindex="-1"></a><span class="co">      # This reads your Dockerfile and creates a container image with R + packages</span></span>
<span id="cb25-859"><a href="#cb25-859" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-860"><a href="#cb25-860" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Run R commands inside the Docker container</span></span>
<span id="cb25-861"><a href="#cb25-861" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests in Docker</span></span>
<span id="cb25-862"><a href="#cb25-862" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-863"><a href="#cb25-863" aria-hidden="true" tabindex="-1"></a>        docker run --rm penguins-test R -e "</span>
<span id="cb25-864"><a href="#cb25-864" aria-hidden="true" tabindex="-1"></a>        # This R code runs INSIDE the container, not on the Ubuntu host</span>
<span id="cb25-865"><a href="#cb25-865" aria-hidden="true" tabindex="-1"></a>        cat('=== Docker R Test ===\n')</span>
<span id="cb25-866"><a href="#cb25-866" aria-hidden="true" tabindex="-1"></a>        cat('R version:', R.version.string, '\n')</span>
<span id="cb25-867"><a href="#cb25-867" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-868"><a href="#cb25-868" aria-hidden="true" tabindex="-1"></a>        # Check if packages are available (should be installed via Dockerfile)</span>
<span id="cb25-869"><a href="#cb25-869" aria-hidden="true" tabindex="-1"></a>        library(palmerpenguins)</span>
<span id="cb25-870"><a href="#cb25-870" aria-hidden="true" tabindex="-1"></a>        cat('Penguins data loaded with', nrow(penguins), 'rows\n')</span>
<span id="cb25-871"><a href="#cb25-871" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-872"><a href="#cb25-872" aria-hidden="true" tabindex="-1"></a>        cat('✅ Docker test passed!\n')</span>
<span id="cb25-873"><a href="#cb25-873" aria-hidden="true" tabindex="-1"></a>        "</span>
<span id="cb25-874"><a href="#cb25-874" aria-hidden="true" tabindex="-1"></a>        # BREAKDOWN:</span>
<span id="cb25-875"><a href="#cb25-875" aria-hidden="true" tabindex="-1"></a>        # docker run      = Run a command in a new container</span>
<span id="cb25-876"><a href="#cb25-876" aria-hidden="true" tabindex="-1"></a>        # --rm           = Delete the container when it finishes (cleanup)</span>
<span id="cb25-877"><a href="#cb25-877" aria-hidden="true" tabindex="-1"></a>        # penguins-test  = Use the image we just built</span>
<span id="cb25-878"><a href="#cb25-878" aria-hidden="true" tabindex="-1"></a>        # R -e "..."     = Run this R code inside the container</span>
<span id="cb25-879"><a href="#cb25-879" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-880"><a href="#cb25-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-881"><a href="#cb25-881" aria-hidden="true" tabindex="-1"></a>**What changed from Step 2:**</span>
<span id="cb25-882"><a href="#cb25-882" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-883"><a href="#cb25-883" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2 WAY (install R on Ubuntu host):</span></span>
<span id="cb25-884"><a href="#cb25-884" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup R</span></span>
<span id="cb25-885"><a href="#cb25-885" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span><span class="co">    # Install R</span></span>
<span id="cb25-886"><a href="#cb25-886" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install packages</span></span>
<span id="cb25-887"><a href="#cb25-887" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> R -e "install.packages(...)"</span><span class="co"> # Install packages</span></span>
<span id="cb25-888"><a href="#cb25-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-889"><a href="#cb25-889" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 3 WAY (use Docker container):</span></span>
<span id="cb25-890"><a href="#cb25-890" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-891"><a href="#cb25-891" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t name .</span><span class="co">       # Build container with R + packages</span></span>
<span id="cb25-892"><a href="#cb25-892" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run in container  </span></span>
<span id="cb25-893"><a href="#cb25-893" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker run name R -e "..."</span><span class="co">   # Run R inside container</span></span>
<span id="cb25-894"><a href="#cb25-894" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-895"><a href="#cb25-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-896"><a href="#cb25-896" aria-hidden="true" tabindex="-1"></a>**Try this:**</span>
<span id="cb25-897"><a href="#cb25-897" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Make sure you have a working Dockerfile in your repo</span>
<span id="cb25-898"><a href="#cb25-898" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Push and watch it build your Docker image</span>
<span id="cb25-899"><a href="#cb25-899" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>See R running inside the container</span>
<span id="cb25-900"><a href="#cb25-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-901"><a href="#cb25-901" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-902"><a href="#cb25-902" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How Docker integrates with GitHub Actions</span>
<span id="cb25-903"><a href="#cb25-903" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Difference between <span class="in">`docker build`</span> and <span class="in">`docker run`</span></span>
<span id="cb25-904"><a href="#cb25-904" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How containers provide consistent environments</span>
<span id="cb25-905"><a href="#cb25-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-906"><a href="#cb25-906" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 4: Add Real Tests</span></span>
<span id="cb25-907"><a href="#cb25-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-908"><a href="#cb25-908" aria-hidden="true" tabindex="-1"></a>**Goal**: Run your actual testthat test suite</span>
<span id="cb25-909"><a href="#cb25-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-910"><a href="#cb25-910" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step4-real-tests.yml`</span>:</span>
<span id="cb25-911"><a href="#cb25-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-912"><a href="#cb25-912" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-913"><a href="#cb25-913" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow display name</span></span>
<span id="cb25-914"><a href="#cb25-914" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 4 - Real Test Suite</span></span>
<span id="cb25-915"><a href="#cb25-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-916"><a href="#cb25-916" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGERS: When this workflow should execute</span></span>
<span id="cb25-917"><a href="#cb25-917" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb25-918"><a href="#cb25-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-919"><a href="#cb25-919" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS: What work should be done</span></span>
<span id="cb25-920"><a href="#cb25-920" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-921"><a href="#cb25-921" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB DEFINITION: Single job named "test"</span></span>
<span id="cb25-922"><a href="#cb25-922" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-923"><a href="#cb25-923" aria-hidden="true" tabindex="-1"></a><span class="co">    # EXECUTION ENVIRONMENT: GitHub-hosted Ubuntu virtual machine</span></span>
<span id="cb25-924"><a href="#cb25-924" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-925"><a href="#cb25-925" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-926"><a href="#cb25-926" aria-hidden="true" tabindex="-1"></a><span class="co">    # EXECUTION STEPS: Sequential tasks to perform</span></span>
<span id="cb25-927"><a href="#cb25-927" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-928"><a href="#cb25-928" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Retrieve repository contents</span></span>
<span id="cb25-929"><a href="#cb25-929" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-930"><a href="#cb25-930" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-931"><a href="#cb25-931" aria-hidden="true" tabindex="-1"></a><span class="co">      # PURPOSE: Downloads your entire repo (code, tests, Dockerfile) to the runner</span></span>
<span id="cb25-932"><a href="#cb25-932" aria-hidden="true" tabindex="-1"></a><span class="co">      # RESULT: Runner now has access to all your project files</span></span>
<span id="cb25-933"><a href="#cb25-933" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-934"><a href="#cb25-934" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Create Docker image with R environment</span></span>
<span id="cb25-935"><a href="#cb25-935" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image  </span></span>
<span id="cb25-936"><a href="#cb25-936" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-937"><a href="#cb25-937" aria-hidden="true" tabindex="-1"></a><span class="co">      # PURPOSE: Builds a container image from your Dockerfile</span></span>
<span id="cb25-938"><a href="#cb25-938" aria-hidden="true" tabindex="-1"></a><span class="co">      # WHAT HAPPENS: Docker reads Dockerfile, installs R, packages, dependencies</span></span>
<span id="cb25-939"><a href="#cb25-939" aria-hidden="true" tabindex="-1"></a><span class="co">      # RESULT: Image named "penguins-test" ready to run your code</span></span>
<span id="cb25-940"><a href="#cb25-940" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-941"><a href="#cb25-941" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Execute test suite inside containerized environment</span></span>
<span id="cb25-942"><a href="#cb25-942" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run testthat test suite</span></span>
<span id="cb25-943"><a href="#cb25-943" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-944"><a href="#cb25-944" aria-hidden="true" tabindex="-1"></a>        docker run --rm \</span>
<span id="cb25-945"><a href="#cb25-945" aria-hidden="true" tabindex="-1"></a>          -v $PWD:/home/analyst/project \</span>
<span id="cb25-946"><a href="#cb25-946" aria-hidden="true" tabindex="-1"></a>          penguins-test \</span>
<span id="cb25-947"><a href="#cb25-947" aria-hidden="true" tabindex="-1"></a>          R -e "</span>
<span id="cb25-948"><a href="#cb25-948" aria-hidden="true" tabindex="-1"></a>          # === DOCKER COMMAND BREAKDOWN ===</span>
<span id="cb25-949"><a href="#cb25-949" aria-hidden="true" tabindex="-1"></a>          # docker run                    = Start a new container</span>
<span id="cb25-950"><a href="#cb25-950" aria-hidden="true" tabindex="-1"></a>          # --rm                         = Auto-delete container when finished</span>
<span id="cb25-951"><a href="#cb25-951" aria-hidden="true" tabindex="-1"></a>          # -v \$PWD:/home/analyst/project = VOLUME MOUNT (critical concept!)</span>
<span id="cb25-952"><a href="#cb25-952" aria-hidden="true" tabindex="-1"></a>          #    \$PWD                      = Current directory on GitHub runner</span>
<span id="cb25-953"><a href="#cb25-953" aria-hidden="true" tabindex="-1"></a>          #    :/home/analyst/project     = Directory inside container</span>
<span id="cb25-954"><a href="#cb25-954" aria-hidden="true" tabindex="-1"></a>          #    Effect: Container can see/modify your project files</span>
<span id="cb25-955"><a href="#cb25-955" aria-hidden="true" tabindex="-1"></a>          # penguins-test                = Use the image we built in step 2</span>
<span id="cb25-956"><a href="#cb25-956" aria-hidden="true" tabindex="-1"></a>          # R -e \"...\"                  = Execute this R code inside container</span>
<span id="cb25-957"><a href="#cb25-957" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-958"><a href="#cb25-958" aria-hidden="true" tabindex="-1"></a>          # === R CODE EXECUTION (inside container) ===</span>
<span id="cb25-959"><a href="#cb25-959" aria-hidden="true" tabindex="-1"></a>          # Move to the mounted project directory</span>
<span id="cb25-960"><a href="#cb25-960" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-961"><a href="#cb25-961" aria-hidden="true" tabindex="-1"></a>          # Now we're working in the directory that contains your tests/</span>
<span id="cb25-962"><a href="#cb25-962" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-963"><a href="#cb25-963" aria-hidden="true" tabindex="-1"></a>          cat('=== Running Test Suite ===\n')</span>
<span id="cb25-964"><a href="#cb25-964" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-965"><a href="#cb25-965" aria-hidden="true" tabindex="-1"></a>          # Load the testing framework</span>
<span id="cb25-966"><a href="#cb25-966" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-967"><a href="#cb25-967" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-968"><a href="#cb25-968" aria-hidden="true" tabindex="-1"></a>          # VALIDATION: Check if test directory exists</span>
<span id="cb25-969"><a href="#cb25-969" aria-hidden="true" tabindex="-1"></a>          if (!dir.exists('tests/testthat')) {</span>
<span id="cb25-970"><a href="#cb25-970" aria-hidden="true" tabindex="-1"></a>            cat('❌ No tests/testthat directory found\n')</span>
<span id="cb25-971"><a href="#cb25-971" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)    # Exit with error code 1 = FAIL the workflow</span>
<span id="cb25-972"><a href="#cb25-972" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-973"><a href="#cb25-973" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-974"><a href="#cb25-974" aria-hidden="true" tabindex="-1"></a>          # EXECUTE: Run all test files in tests/testthat/</span>
<span id="cb25-975"><a href="#cb25-975" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-976"><a href="#cb25-976" aria-hidden="true" tabindex="-1"></a>          # This runs every file matching tests/testthat/test-*.R</span>
<span id="cb25-977"><a href="#cb25-977" aria-hidden="true" tabindex="-1"></a>          # Returns object with passed/failed/skipped counts</span>
<span id="cb25-978"><a href="#cb25-978" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-979"><a href="#cb25-979" aria-hidden="true" tabindex="-1"></a>          # REPORTING: Show results in workflow logs</span>
<span id="cb25-980"><a href="#cb25-980" aria-hidden="true" tabindex="-1"></a>          cat('Tests passed:', test_results[['passed']], '\n')</span>
<span id="cb25-981"><a href="#cb25-981" aria-hidden="true" tabindex="-1"></a>          cat('Tests failed:', test_results[['failed']], '\n')</span>
<span id="cb25-982"><a href="#cb25-982" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-983"><a href="#cb25-983" aria-hidden="true" tabindex="-1"></a>          # WORKFLOW CONTROL: Fail GitHub Actions if any tests failed</span>
<span id="cb25-984"><a href="#cb25-984" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) {</span>
<span id="cb25-985"><a href="#cb25-985" aria-hidden="true" tabindex="-1"></a>            cat('❌ Some tests failed!\n')</span>
<span id="cb25-986"><a href="#cb25-986" aria-hidden="true" tabindex="-1"></a>            quit(status = 1)    # Non-zero exit = GitHub marks workflow as FAILED</span>
<span id="cb25-987"><a href="#cb25-987" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb25-988"><a href="#cb25-988" aria-hidden="true" tabindex="-1"></a>            cat('✅ All tests passed!\n')</span>
<span id="cb25-989"><a href="#cb25-989" aria-hidden="true" tabindex="-1"></a>            # Zero exit code = GitHub marks workflow as SUCCESSFUL</span>
<span id="cb25-990"><a href="#cb25-990" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-991"><a href="#cb25-991" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-992"><a href="#cb25-992" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-993"><a href="#cb25-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-994"><a href="#cb25-994" aria-hidden="true" tabindex="-1"></a>**Key Concepts Explained:**</span>
<span id="cb25-995"><a href="#cb25-995" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-996"><a href="#cb25-996" aria-hidden="true" tabindex="-1"></a><span class="fu">### Volume Mounting (`-v $PWD:/home/analyst/project`)</span></span>
<span id="cb25-997"><a href="#cb25-997" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb25-998"><a href="#cb25-998" aria-hidden="true" tabindex="-1"></a><span class="co"># WITHOUT volume mount:</span></span>
<span id="cb25-999"><a href="#cb25-999" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run penguins-test R <span class="at">-e</span> <span class="st">"list.files()"</span></span>
<span id="cb25-1000"><a href="#cb25-1000" aria-hidden="true" tabindex="-1"></a><span class="co"># Container can't see your test files - they're on the host machine</span></span>
<span id="cb25-1001"><a href="#cb25-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1002"><a href="#cb25-1002" aria-hidden="true" tabindex="-1"></a><span class="co"># WITH volume mount:</span></span>
<span id="cb25-1003"><a href="#cb25-1003" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-v</span> <span class="va">$PWD</span>:/home/analyst/project penguins-test R <span class="at">-e</span> <span class="st">"list.files('/home/analyst/project')"</span></span>
<span id="cb25-1004"><a href="#cb25-1004" aria-hidden="true" tabindex="-1"></a><span class="co"># Container can now see and access your project files</span></span>
<span id="cb25-1005"><a href="#cb25-1005" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1006"><a href="#cb25-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1007"><a href="#cb25-1007" aria-hidden="true" tabindex="-1"></a><span class="fu">### Exit Codes and Workflow Status</span></span>
<span id="cb25-1008"><a href="#cb25-1008" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb25-1009"><a href="#cb25-1009" aria-hidden="true" tabindex="-1"></a><span class="co"># In R inside the container:</span></span>
<span id="cb25-1010"><a href="#cb25-1010" aria-hidden="true" tabindex="-1"></a><span class="fu">quit</span>(<span class="at">status =</span> <span class="dv">0</span>)    <span class="co"># Success - GitHub shows green ✅</span></span>
<span id="cb25-1011"><a href="#cb25-1011" aria-hidden="true" tabindex="-1"></a><span class="fu">quit</span>(<span class="at">status =</span> <span class="dv">1</span>)    <span class="co"># Failure - GitHub shows red ❌ and stops here</span></span>
<span id="cb25-1012"><a href="#cb25-1012" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1013"><a href="#cb25-1013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1014"><a href="#cb25-1014" aria-hidden="true" tabindex="-1"></a><span class="fu">### File Structure Expected</span></span>
<span id="cb25-1015"><a href="#cb25-1015" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1016"><a href="#cb25-1016" aria-hidden="true" tabindex="-1"></a><span class="in">your-repo/</span></span>
<span id="cb25-1017"><a href="#cb25-1017" aria-hidden="true" tabindex="-1"></a><span class="in">├── tests/</span></span>
<span id="cb25-1018"><a href="#cb25-1018" aria-hidden="true" tabindex="-1"></a><span class="in">│   └── testthat/</span></span>
<span id="cb25-1019"><a href="#cb25-1019" aria-hidden="true" tabindex="-1"></a><span class="in">│       ├── test-data-integrity.R</span></span>
<span id="cb25-1020"><a href="#cb25-1020" aria-hidden="true" tabindex="-1"></a><span class="in">│       ├── test-analysis.R</span></span>
<span id="cb25-1021"><a href="#cb25-1021" aria-hidden="true" tabindex="-1"></a><span class="in">│       └── test-*.R</span></span>
<span id="cb25-1022"><a href="#cb25-1022" aria-hidden="true" tabindex="-1"></a><span class="in">├── Dockerfile</span></span>
<span id="cb25-1023"><a href="#cb25-1023" aria-hidden="true" tabindex="-1"></a><span class="in">└── other files...</span></span>
<span id="cb25-1024"><a href="#cb25-1024" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1025"><a href="#cb25-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1026"><a href="#cb25-1026" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-1027"><a href="#cb25-1027" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to mount local files into Docker containers</span>
<span id="cb25-1028"><a href="#cb25-1028" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to make workflows fail when tests fail</span>
<span id="cb25-1029"><a href="#cb25-1029" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to run your real test suite in CI</span>
<span id="cb25-1030"><a href="#cb25-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1031"><a href="#cb25-1031" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 5: Add Package Detection</span></span>
<span id="cb25-1032"><a href="#cb25-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1033"><a href="#cb25-1033" aria-hidden="true" tabindex="-1"></a>**Goal**: Detect when new R packages are added</span>
<span id="cb25-1034"><a href="#cb25-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1035"><a href="#cb25-1035" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step5-package-detection.yml`</span>:</span>
<span id="cb25-1036"><a href="#cb25-1036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1037"><a href="#cb25-1037" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-1038"><a href="#cb25-1038" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 5 - Package Detection</span></span>
<span id="cb25-1039"><a href="#cb25-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1040"><a href="#cb25-1040" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">,</span><span class="at"> pull_request</span><span class="kw">]</span></span>
<span id="cb25-1041"><a href="#cb25-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1042"><a href="#cb25-1042" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-1043"><a href="#cb25-1043" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb25-1044"><a href="#cb25-1044" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-1045"><a href="#cb25-1045" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-1046"><a href="#cb25-1046" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-1047"><a href="#cb25-1047" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-1048"><a href="#cb25-1048" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-1049"><a href="#cb25-1049" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-1050"><a href="#cb25-1050" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-1051"><a href="#cb25-1051" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-1052"><a href="#cb25-1052" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-1053"><a href="#cb25-1053" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb25-1054"><a href="#cb25-1054" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1055"><a href="#cb25-1055" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-1056"><a href="#cb25-1056" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-1057"><a href="#cb25-1057" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-1058"><a href="#cb25-1058" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-1059"><a href="#cb25-1059" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-1060"><a href="#cb25-1060" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb25-1061"><a href="#cb25-1061" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-1062"><a href="#cb25-1062" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1063"><a href="#cb25-1063" aria-hidden="true" tabindex="-1"></a><span class="co">    # NEW: Package detection</span></span>
<span id="cb25-1064"><a href="#cb25-1064" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check for new packages</span></span>
<span id="cb25-1065"><a href="#cb25-1065" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1066"><a href="#cb25-1066" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-1067"><a href="#cb25-1067" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-1068"><a href="#cb25-1068" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-1069"><a href="#cb25-1069" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1070"><a href="#cb25-1070" aria-hidden="true" tabindex="-1"></a>          cat('=== Package Detection ===\n')</span>
<span id="cb25-1071"><a href="#cb25-1071" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1072"><a href="#cb25-1072" aria-hidden="true" tabindex="-1"></a>          # Find R files  </span>
<span id="cb25-1073"><a href="#cb25-1073" aria-hidden="true" tabindex="-1"></a>          r_files &lt;- c(</span>
<span id="cb25-1074"><a href="#cb25-1074" aria-hidden="true" tabindex="-1"></a>            list.files('analysis', pattern = '\\\\.Rmd$', full.names = TRUE, recursive = TRUE),</span>
<span id="cb25-1075"><a href="#cb25-1075" aria-hidden="true" tabindex="-1"></a>            list.files('R', pattern = '\\\\.R$', full.names = TRUE, recursive = TRUE)</span>
<span id="cb25-1076"><a href="#cb25-1076" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb25-1077"><a href="#cb25-1077" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1078"><a href="#cb25-1078" aria-hidden="true" tabindex="-1"></a>          # Extract library() calls</span>
<span id="cb25-1079"><a href="#cb25-1079" aria-hidden="true" tabindex="-1"></a>          all_packages &lt;- character(0)</span>
<span id="cb25-1080"><a href="#cb25-1080" aria-hidden="true" tabindex="-1"></a>          for (file in r_files) {</span>
<span id="cb25-1081"><a href="#cb25-1081" aria-hidden="true" tabindex="-1"></a>            if (file.exists(file)) {</span>
<span id="cb25-1082"><a href="#cb25-1082" aria-hidden="true" tabindex="-1"></a>              content &lt;- readLines(file, warn = FALSE)</span>
<span id="cb25-1083"><a href="#cb25-1083" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb25-1084"><a href="#cb25-1084" aria-hidden="true" tabindex="-1"></a>              # Look for library(package) patterns</span>
<span id="cb25-1085"><a href="#cb25-1085" aria-hidden="true" tabindex="-1"></a>              lib_matches &lt;- regmatches(content, gregexpr('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', content))</span>
<span id="cb25-1086"><a href="#cb25-1086" aria-hidden="true" tabindex="-1"></a>              packages &lt;- unlist(lapply(lib_matches, function(x) {</span>
<span id="cb25-1087"><a href="#cb25-1087" aria-hidden="true" tabindex="-1"></a>                if (length(x) &gt; 0 &amp;&amp; x != '') {</span>
<span id="cb25-1088"><a href="#cb25-1088" aria-hidden="true" tabindex="-1"></a>                  gsub('library\\([\"\\']?([^\"\\')]+)[\"\\']?\\)', '\\\\1', x)</span>
<span id="cb25-1089"><a href="#cb25-1089" aria-hidden="true" tabindex="-1"></a>                } else character(0)</span>
<span id="cb25-1090"><a href="#cb25-1090" aria-hidden="true" tabindex="-1"></a>              }))</span>
<span id="cb25-1091"><a href="#cb25-1091" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb25-1092"><a href="#cb25-1092" aria-hidden="true" tabindex="-1"></a>              all_packages &lt;- c(all_packages, packages)</span>
<span id="cb25-1093"><a href="#cb25-1093" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb25-1094"><a href="#cb25-1094" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-1095"><a href="#cb25-1095" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1096"><a href="#cb25-1096" aria-hidden="true" tabindex="-1"></a>          # Remove base packages and duplicates</span>
<span id="cb25-1097"><a href="#cb25-1097" aria-hidden="true" tabindex="-1"></a>          base_pkgs &lt;- c('base', 'utils', 'stats', 'graphics', 'grDevices', 'methods')</span>
<span id="cb25-1098"><a href="#cb25-1098" aria-hidden="true" tabindex="-1"></a>          new_packages &lt;- unique(setdiff(all_packages, base_pkgs))</span>
<span id="cb25-1099"><a href="#cb25-1099" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1100"><a href="#cb25-1100" aria-hidden="true" tabindex="-1"></a>          if (length(new_packages) &gt; 0) {</span>
<span id="cb25-1101"><a href="#cb25-1101" aria-hidden="true" tabindex="-1"></a>            cat('📦 Packages found in code:\n')</span>
<span id="cb25-1102"><a href="#cb25-1102" aria-hidden="true" tabindex="-1"></a>            cat(' -', paste(new_packages, collapse = '\n - '), '\n')</span>
<span id="cb25-1103"><a href="#cb25-1103" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb25-1104"><a href="#cb25-1104" aria-hidden="true" tabindex="-1"></a>            cat('No additional packages detected\n')</span>
<span id="cb25-1105"><a href="#cb25-1105" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-1106"><a href="#cb25-1106" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-1107"><a href="#cb25-1107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1108"><a href="#cb25-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1109"><a href="#cb25-1109" aria-hidden="true" tabindex="-1"></a>**What's new:**</span>
<span id="cb25-1110"><a href="#cb25-1110" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Added a separate step for package detection</span>
<span id="cb25-1111"><a href="#cb25-1111" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>R code that scans files for <span class="in">`library()`</span> calls</span>
<span id="cb25-1112"><a href="#cb25-1112" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Regular expressions to extract package names</span>
<span id="cb25-1113"><a href="#cb25-1113" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Logic to filter out base R packages</span>
<span id="cb25-1114"><a href="#cb25-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1115"><a href="#cb25-1115" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-1116"><a href="#cb25-1116" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to add multiple steps to a job</span>
<span id="cb25-1117"><a href="#cb25-1117" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Basic text processing with R and regex</span>
<span id="cb25-1118"><a href="#cb25-1118" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to scan code for dependencies</span>
<span id="cb25-1119"><a href="#cb25-1119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1120"><a href="#cb25-1120" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 6: Add PR Comments</span></span>
<span id="cb25-1121"><a href="#cb25-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1122"><a href="#cb25-1122" aria-hidden="true" tabindex="-1"></a>**Goal**: Make GitHub Actions talk back to you</span>
<span id="cb25-1123"><a href="#cb25-1123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1124"><a href="#cb25-1124" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step6-pr-comments.yml`</span>:</span>
<span id="cb25-1125"><a href="#cb25-1125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1126"><a href="#cb25-1126" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-1127"><a href="#cb25-1127" aria-hidden="true" tabindex="-1"></a><span class="co"># Workflow name in GitHub Actions UI</span></span>
<span id="cb25-1128"><a href="#cb25-1128" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 6 - PR Comments</span></span>
<span id="cb25-1129"><a href="#cb25-1129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1130"><a href="#cb25-1130" aria-hidden="true" tabindex="-1"></a><span class="co"># TRIGGER RESTRICTION: Only run on pull requests (not pushes to main)</span></span>
<span id="cb25-1131"><a href="#cb25-1131" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">pull_request</span><span class="kw">]</span><span class="co">  # Removed 'push' because we only want PR comments</span></span>
<span id="cb25-1132"><a href="#cb25-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1133"><a href="#cb25-1133" aria-hidden="true" tabindex="-1"></a><span class="co"># JOBS SECTION</span></span>
<span id="cb25-1134"><a href="#cb25-1134" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-1135"><a href="#cb25-1135" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB: Combine testing + commenting in one job</span></span>
<span id="cb25-1136"><a href="#cb25-1136" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">test-and-comment</span><span class="kw">:</span></span>
<span id="cb25-1137"><a href="#cb25-1137" aria-hidden="true" tabindex="-1"></a><span class="co">    # EXECUTION ENVIRONMENT</span></span>
<span id="cb25-1138"><a href="#cb25-1138" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-1139"><a href="#cb25-1139" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-1140"><a href="#cb25-1140" aria-hidden="true" tabindex="-1"></a><span class="co">    # SEQUENTIAL STEPS</span></span>
<span id="cb25-1141"><a href="#cb25-1141" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-1142"><a href="#cb25-1142" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 1: Get repository code</span></span>
<span id="cb25-1143"><a href="#cb25-1143" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-1144"><a href="#cb25-1144" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-1145"><a href="#cb25-1145" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-1146"><a href="#cb25-1146" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 2: Build container image</span></span>
<span id="cb25-1147"><a href="#cb25-1147" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-1148"><a href="#cb25-1148" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-1149"><a href="#cb25-1149" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-1150"><a href="#cb25-1150" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 3: Run tests AND capture results for later use</span></span>
<span id="cb25-1151"><a href="#cb25-1151" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb25-1152"><a href="#cb25-1152" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">id</span><span class="kw">:</span><span class="at"> test-step</span><span class="co">  # ⭐ KEY: Give this step an ID so other steps can reference it</span></span>
<span id="cb25-1153"><a href="#cb25-1153" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1154"><a href="#cb25-1154" aria-hidden="true" tabindex="-1"></a>        # COMPLEX SHELL LOGIC: Run tests and capture success/failure</span>
<span id="cb25-1155"><a href="#cb25-1155" aria-hidden="true" tabindex="-1"></a>        # Note the &amp;&amp; and || operators for conditional execution</span>
<span id="cb25-1156"><a href="#cb25-1156" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-1157"><a href="#cb25-1157" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-1158"><a href="#cb25-1158" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-1159"><a href="#cb25-1159" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-1160"><a href="#cb25-1160" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-1161"><a href="#cb25-1161" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1162"><a href="#cb25-1162" aria-hidden="true" tabindex="-1"></a>          # SAVE RESULTS: Write test results to files for later access</span>
<span id="cb25-1163"><a href="#cb25-1163" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_PASSED=', test_results[['passed']], '\n', sep='', file='/tmp/test_results.txt')</span>
<span id="cb25-1164"><a href="#cb25-1164" aria-hidden="true" tabindex="-1"></a>          cat('TESTS_FAILED=', test_results[['failed']], '\n', sep='', file='/tmp/test_results.txt', append=TRUE)</span>
<span id="cb25-1165"><a href="#cb25-1165" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1166"><a href="#cb25-1166" aria-hidden="true" tabindex="-1"></a>          # CONDITIONAL EXIT: Still fail if tests fail</span>
<span id="cb25-1167"><a href="#cb25-1167" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb25-1168"><a href="#cb25-1168" aria-hidden="true" tabindex="-1"></a>          " &amp;&amp; echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT || echo "TEST_STATUS=failed" &gt;&gt; $GITHUB_OUTPUT</span>
<span id="cb25-1169"><a href="#cb25-1169" aria-hidden="true" tabindex="-1"></a>          # BREAKDOWN OF CONDITIONAL LOGIC:</span>
<span id="cb25-1170"><a href="#cb25-1170" aria-hidden="true" tabindex="-1"></a>          # docker run ... &amp;&amp; echo "TEST_STATUS=passed" &gt;&gt; $GITHUB_OUTPUT   # If tests succeed</span>
<span id="cb25-1171"><a href="#cb25-1171" aria-hidden="true" tabindex="-1"></a>          #                || echo "TEST_STATUS=failed" &gt;&gt; $GITHUB_OUTPUT  # If tests fail</span>
<span id="cb25-1172"><a href="#cb25-1172" aria-hidden="true" tabindex="-1"></a>          # $GITHUB_OUTPUT is a special file that passes data between steps</span>
<span id="cb25-1173"><a href="#cb25-1173" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1174"><a href="#cb25-1174" aria-hidden="true" tabindex="-1"></a><span class="co">    # STEP 4: Create comment on the PR based on test results</span></span>
<span id="cb25-1175"><a href="#cb25-1175" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb25-1176"><a href="#cb25-1176" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span><span class="co">  # ⭐ SPECIAL ACTION: Allows JavaScript to interact with GitHub API</span></span>
<span id="cb25-1177"><a href="#cb25-1177" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-1178"><a href="#cb25-1178" aria-hidden="true" tabindex="-1"></a><span class="co">        # JAVASCRIPT CODE: This runs JavaScript, not shell commands</span></span>
<span id="cb25-1179"><a href="#cb25-1179" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1180"><a href="#cb25-1180" aria-hidden="true" tabindex="-1"></a>          // ACCESS PREVIOUS STEP DATA: Get the test status we saved</span>
<span id="cb25-1181"><a href="#cb25-1181" aria-hidden="true" tabindex="-1"></a>          const testStatus = '${{ steps.test-step.outputs.TEST_STATUS }}';</span>
<span id="cb25-1182"><a href="#cb25-1182" aria-hidden="true" tabindex="-1"></a>          // SYNTAX: ${{ steps.STEP_ID.outputs.OUTPUT_NAME }}</span>
<span id="cb25-1183"><a href="#cb25-1183" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1184"><a href="#cb25-1184" aria-hidden="true" tabindex="-1"></a>          // BUILD MESSAGE: Create markdown content for the comment</span>
<span id="cb25-1185"><a href="#cb25-1185" aria-hidden="true" tabindex="-1"></a>          let message = '## 🧪 Test Results\n\n';</span>
<span id="cb25-1186"><a href="#cb25-1186" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1187"><a href="#cb25-1187" aria-hidden="true" tabindex="-1"></a>          // CONDITIONAL LOGIC: Different messages based on test outcome</span>
<span id="cb25-1188"><a href="#cb25-1188" aria-hidden="true" tabindex="-1"></a>          if (testStatus === 'passed') {</span>
<span id="cb25-1189"><a href="#cb25-1189" aria-hidden="true" tabindex="-1"></a>            message += '✅ **All tests passed!** This PR is ready for review.\n';</span>
<span id="cb25-1190"><a href="#cb25-1190" aria-hidden="true" tabindex="-1"></a>          } else {</span>
<span id="cb25-1191"><a href="#cb25-1191" aria-hidden="true" tabindex="-1"></a>            message += '❌ **Tests failed!** Please check the logs and fix the issues.\n';</span>
<span id="cb25-1192"><a href="#cb25-1192" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb25-1193"><a href="#cb25-1193" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1194"><a href="#cb25-1194" aria-hidden="true" tabindex="-1"></a>          // FOOTER: Add timestamp and attribution</span>
<span id="cb25-1195"><a href="#cb25-1195" aria-hidden="true" tabindex="-1"></a>          message += '\n---\n*This comment was generated automatically by GitHub Actions*';</span>
<span id="cb25-1196"><a href="#cb25-1196" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1197"><a href="#cb25-1197" aria-hidden="true" tabindex="-1"></a>          // GITHUB API CALL: Post the comment to the PR</span>
<span id="cb25-1198"><a href="#cb25-1198" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb25-1199"><a href="#cb25-1199" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,  // PR number (PRs are "issues" in GitHub API)</span>
<span id="cb25-1200"><a href="#cb25-1200" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,           // Repository owner (username/org)</span>
<span id="cb25-1201"><a href="#cb25-1201" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,             // Repository name</span>
<span id="cb25-1202"><a href="#cb25-1202" aria-hidden="true" tabindex="-1"></a>            body: message                        // The markdown content we built</span>
<span id="cb25-1203"><a href="#cb25-1203" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb25-1204"><a href="#cb25-1204" aria-hidden="true" tabindex="-1"></a>          // CONTEXT VARIABLES:</span>
<span id="cb25-1205"><a href="#cb25-1205" aria-hidden="true" tabindex="-1"></a>          // context.issue.number = Current PR number</span>
<span id="cb25-1206"><a href="#cb25-1206" aria-hidden="true" tabindex="-1"></a>          // context.repo.owner   = Repository owner (your username)</span>
<span id="cb25-1207"><a href="#cb25-1207" aria-hidden="true" tabindex="-1"></a>          // context.repo.repo    = Repository name</span>
<span id="cb25-1208"><a href="#cb25-1208" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1209"><a href="#cb25-1209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1210"><a href="#cb25-1210" aria-hidden="true" tabindex="-1"></a>**New Concepts Explained:**</span>
<span id="cb25-1211"><a href="#cb25-1211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1212"><a href="#cb25-1212" aria-hidden="true" tabindex="-1"></a><span class="fu">### Step IDs and Outputs</span></span>
<span id="cb25-1213"><a href="#cb25-1213" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-1214"><a href="#cb25-1214" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 1: Create output data</span></span>
<span id="cb25-1215"><a href="#cb25-1215" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Some step</span></span>
<span id="cb25-1216"><a href="#cb25-1216" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">id</span><span class="kw">:</span><span class="at"> my-step-id</span><span class="co">               # Give step an ID</span></span>
<span id="cb25-1217"><a href="#cb25-1217" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "result=success" &gt;&gt; $GITHUB_OUTPUT</span></span>
<span id="cb25-1218"><a href="#cb25-1218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1219"><a href="#cb25-1219" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2: Use the output data  </span></span>
<span id="cb25-1220"><a href="#cb25-1220" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Use previous result</span></span>
<span id="cb25-1221"><a href="#cb25-1221" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> echo "Previous step said: ${{ steps.my-step-id.outputs.result }}"</span></span>
<span id="cb25-1222"><a href="#cb25-1222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1223"><a href="#cb25-1223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1224"><a href="#cb25-1224" aria-hidden="true" tabindex="-1"></a><span class="fu">### Shell Conditional Logic</span></span>
<span id="cb25-1225"><a href="#cb25-1225" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb25-1226"><a href="#cb25-1226" aria-hidden="true" tabindex="-1"></a><span class="co"># Pattern: command1 &amp;&amp; command2 || command3</span></span>
<span id="cb25-1227"><a href="#cb25-1227" aria-hidden="true" tabindex="-1"></a><span class="co"># Meaning: </span></span>
<span id="cb25-1228"><a href="#cb25-1228" aria-hidden="true" tabindex="-1"></a><span class="co">#   - Run command1</span></span>
<span id="cb25-1229"><a href="#cb25-1229" aria-hidden="true" tabindex="-1"></a><span class="co">#   - IF command1 succeeds (exit code 0): run command2</span></span>
<span id="cb25-1230"><a href="#cb25-1230" aria-hidden="true" tabindex="-1"></a><span class="co">#   - IF command1 fails (exit code != 0): run command3</span></span>
<span id="cb25-1231"><a href="#cb25-1231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1232"><a href="#cb25-1232" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run ... <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> <span class="st">"success"</span> <span class="kw">||</span> <span class="bu">echo</span> <span class="st">"failed"</span></span>
<span id="cb25-1233"><a href="#cb25-1233" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1234"><a href="#cb25-1234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1235"><a href="#cb25-1235" aria-hidden="true" tabindex="-1"></a><span class="fu">### GitHub API via JavaScript</span></span>
<span id="cb25-1236"><a href="#cb25-1236" aria-hidden="true" tabindex="-1"></a><span class="in">```javascript</span></span>
<span id="cb25-1237"><a href="#cb25-1237" aria-hidden="true" tabindex="-1"></a><span class="co">// github.rest.issues.createComment() creates a PR comment</span></span>
<span id="cb25-1238"><a href="#cb25-1238" aria-hidden="true" tabindex="-1"></a><span class="co">// github.rest.repos.createCommitComment() creates a commit comment  </span></span>
<span id="cb25-1239"><a href="#cb25-1239" aria-hidden="true" tabindex="-1"></a><span class="co">// github.rest.pulls.update() modifies PR details</span></span>
<span id="cb25-1240"><a href="#cb25-1240" aria-hidden="true" tabindex="-1"></a><span class="co">// context.issue.number gets the current PR number</span></span>
<span id="cb25-1241"><a href="#cb25-1241" aria-hidden="true" tabindex="-1"></a><span class="co">// context.repo gives repository info</span></span>
<span id="cb25-1242"><a href="#cb25-1242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1243"><a href="#cb25-1243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1244"><a href="#cb25-1244" aria-hidden="true" tabindex="-1"></a><span class="fu">### $GITHUB_OUTPUT File</span></span>
<span id="cb25-1245"><a href="#cb25-1245" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb25-1246"><a href="#cb25-1246" aria-hidden="true" tabindex="-1"></a><span class="co"># WRITING OUTPUT DATA (in shell):</span></span>
<span id="cb25-1247"><a href="#cb25-1247" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"key=value"</span> <span class="op">&gt;&gt;</span> <span class="va">$GITHUB_OUTPUT</span></span>
<span id="cb25-1248"><a href="#cb25-1248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1249"><a href="#cb25-1249" aria-hidden="true" tabindex="-1"></a><span class="co"># READING OUTPUT DATA (in later step):</span></span>
<span id="cb25-1250"><a href="#cb25-1250" aria-hidden="true" tabindex="-1"></a><span class="va">${</span><span class="er">{ steps.step-id.outputs.key </span><span class="va">}</span><span class="ex">}</span></span>
<span id="cb25-1251"><a href="#cb25-1251" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1252"><a href="#cb25-1252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1253"><a href="#cb25-1253" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-1254"><a href="#cb25-1254" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to pass data between steps using outputs</span>
<span id="cb25-1255"><a href="#cb25-1255" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use GitHub's JavaScript API</span>
<span id="cb25-1256"><a href="#cb25-1256" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to make workflows interactive with comments</span>
<span id="cb25-1257"><a href="#cb25-1257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1258"><a href="#cb25-1258" aria-hidden="true" tabindex="-1"></a><span class="fu">## Step 7: Complete System</span></span>
<span id="cb25-1259"><a href="#cb25-1259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1260"><a href="#cb25-1260" aria-hidden="true" tabindex="-1"></a>**Goal**: Put it all together with post-merge automation</span>
<span id="cb25-1261"><a href="#cb25-1261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1262"><a href="#cb25-1262" aria-hidden="true" tabindex="-1"></a>Create <span class="in">`.github/workflows/step7-complete.yml`</span>:</span>
<span id="cb25-1263"><a href="#cb25-1263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1264"><a href="#cb25-1264" aria-hidden="true" tabindex="-1"></a><span class="in">```yaml</span></span>
<span id="cb25-1265"><a href="#cb25-1265" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Step 7 - Complete System</span></span>
<span id="cb25-1266"><a href="#cb25-1266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1267"><a href="#cb25-1267" aria-hidden="true" tabindex="-1"></a><span class="co"># Two different triggers for two different purposes</span></span>
<span id="cb25-1268"><a href="#cb25-1268" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb25-1269"><a href="#cb25-1269" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span><span class="co">          # Pre-merge validation</span></span>
<span id="cb25-1270"><a href="#cb25-1270" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb25-1271"><a href="#cb25-1271" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span><span class="co">                  # Post-merge automation  </span></span>
<span id="cb25-1272"><a href="#cb25-1272" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb25-1273"><a href="#cb25-1273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1274"><a href="#cb25-1274" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb25-1275"><a href="#cb25-1275" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 1: Validate PRs (only runs on pull_request)</span></span>
<span id="cb25-1276"><a href="#cb25-1276" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">validate-pr</span><span class="kw">:</span></span>
<span id="cb25-1277"><a href="#cb25-1277" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'pull_request'</span></span>
<span id="cb25-1278"><a href="#cb25-1278" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-1279"><a href="#cb25-1279" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-1280"><a href="#cb25-1280" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-1281"><a href="#cb25-1281" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-1282"><a href="#cb25-1282" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-1283"><a href="#cb25-1283" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-1284"><a href="#cb25-1284" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb25-1285"><a href="#cb25-1285" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> docker build -t penguins-test .</span></span>
<span id="cb25-1286"><a href="#cb25-1286" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-1287"><a href="#cb25-1287" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run test suite</span></span>
<span id="cb25-1288"><a href="#cb25-1288" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1289"><a href="#cb25-1289" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-1290"><a href="#cb25-1290" aria-hidden="true" tabindex="-1"></a>          penguins-test R -e "</span>
<span id="cb25-1291"><a href="#cb25-1291" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-1292"><a href="#cb25-1292" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-1293"><a href="#cb25-1293" aria-hidden="true" tabindex="-1"></a>          test_results &lt;- test_dir('tests/testthat')</span>
<span id="cb25-1294"><a href="#cb25-1294" aria-hidden="true" tabindex="-1"></a>          if (test_results[['failed']] &gt; 0) quit(status = 1)</span>
<span id="cb25-1295"><a href="#cb25-1295" aria-hidden="true" tabindex="-1"></a>          cat('✅ All tests passed!\n')</span>
<span id="cb25-1296"><a href="#cb25-1296" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-1297"><a href="#cb25-1297" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1298"><a href="#cb25-1298" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Comment on PR</span></span>
<span id="cb25-1299"><a href="#cb25-1299" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb25-1300"><a href="#cb25-1300" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-1301"><a href="#cb25-1301" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1302"><a href="#cb25-1302" aria-hidden="true" tabindex="-1"></a>          const message = '## ✅ PR Validation Passed\n\nAll tests are passing. This PR is ready for merge!';</span>
<span id="cb25-1303"><a href="#cb25-1303" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1304"><a href="#cb25-1304" aria-hidden="true" tabindex="-1"></a>          github.rest.issues.createComment({</span>
<span id="cb25-1305"><a href="#cb25-1305" aria-hidden="true" tabindex="-1"></a>            issue_number: context.issue.number,</span>
<span id="cb25-1306"><a href="#cb25-1306" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,  </span>
<span id="cb25-1307"><a href="#cb25-1307" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb25-1308"><a href="#cb25-1308" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb25-1309"><a href="#cb25-1309" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb25-1310"><a href="#cb25-1310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1311"><a href="#cb25-1311" aria-hidden="true" tabindex="-1"></a><span class="co">  # JOB 2: Post-merge automation (only runs on push to main)</span></span>
<span id="cb25-1312"><a href="#cb25-1312" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">post-merge</span><span class="kw">:</span></span>
<span id="cb25-1313"><a href="#cb25-1313" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'</span></span>
<span id="cb25-1314"><a href="#cb25-1314" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb25-1315"><a href="#cb25-1315" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb25-1316"><a href="#cb25-1316" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb25-1317"><a href="#cb25-1317" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb25-1318"><a href="#cb25-1318" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb25-1319"><a href="#cb25-1319" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb25-1320"><a href="#cb25-1320" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and test</span></span>
<span id="cb25-1321"><a href="#cb25-1321" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1322"><a href="#cb25-1322" aria-hidden="true" tabindex="-1"></a>        docker build -t penguins-latest .</span>
<span id="cb25-1323"><a href="#cb25-1323" aria-hidden="true" tabindex="-1"></a>        docker run --rm -v $PWD:/home/analyst/project \</span>
<span id="cb25-1324"><a href="#cb25-1324" aria-hidden="true" tabindex="-1"></a>          penguins-latest R -e "</span>
<span id="cb25-1325"><a href="#cb25-1325" aria-hidden="true" tabindex="-1"></a>          setwd('/home/analyst/project')</span>
<span id="cb25-1326"><a href="#cb25-1326" aria-hidden="true" tabindex="-1"></a>          library(testthat)</span>
<span id="cb25-1327"><a href="#cb25-1327" aria-hidden="true" tabindex="-1"></a>          test_dir('tests/testthat')</span>
<span id="cb25-1328"><a href="#cb25-1328" aria-hidden="true" tabindex="-1"></a>          cat('✅ Post-merge tests passed!\n')</span>
<span id="cb25-1329"><a href="#cb25-1329" aria-hidden="true" tabindex="-1"></a>          "</span>
<span id="cb25-1330"><a href="#cb25-1330" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1331"><a href="#cb25-1331" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Create success comment</span></span>
<span id="cb25-1332"><a href="#cb25-1332" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/github-script@v7</span></span>
<span id="cb25-1333"><a href="#cb25-1333" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-1334"><a href="#cb25-1334" aria-hidden="true" tabindex="-1"></a><span class="fu">        script</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-1335"><a href="#cb25-1335" aria-hidden="true" tabindex="-1"></a>          const message = `## 🚀 Merge Successful</span>
<span id="cb25-1336"><a href="#cb25-1336" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1337"><a href="#cb25-1337" aria-hidden="true" tabindex="-1"></a>          The code has been merged and all tests are still passing.</span>
<span id="cb25-1338"><a href="#cb25-1338" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1339"><a href="#cb25-1339" aria-hidden="true" tabindex="-1"></a>          **Commit**: ${context.sha.substring(0, 7)}</span>
<span id="cb25-1340"><a href="#cb25-1340" aria-hidden="true" tabindex="-1"></a>          **Time**: ${new Date().toISOString()}`;</span>
<span id="cb25-1341"><a href="#cb25-1341" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb25-1342"><a href="#cb25-1342" aria-hidden="true" tabindex="-1"></a>          github.rest.repos.createCommitComment({</span>
<span id="cb25-1343"><a href="#cb25-1343" aria-hidden="true" tabindex="-1"></a>            owner: context.repo.owner,</span>
<span id="cb25-1344"><a href="#cb25-1344" aria-hidden="true" tabindex="-1"></a>            repo: context.repo.repo,</span>
<span id="cb25-1345"><a href="#cb25-1345" aria-hidden="true" tabindex="-1"></a>            commit_sha: context.sha,</span>
<span id="cb25-1346"><a href="#cb25-1346" aria-hidden="true" tabindex="-1"></a>            body: message</span>
<span id="cb25-1347"><a href="#cb25-1347" aria-hidden="true" tabindex="-1"></a>          });</span>
<span id="cb25-1348"><a href="#cb25-1348" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1349"><a href="#cb25-1349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1350"><a href="#cb25-1350" aria-hidden="true" tabindex="-1"></a>**What's new:**</span>
<span id="cb25-1351"><a href="#cb25-1351" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Two separate jobs with different conditions</span>
<span id="cb25-1352"><a href="#cb25-1352" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`if: github.event_name == 'pull_request'`</span> - only run job on PRs</span>
<span id="cb25-1353"><a href="#cb25-1353" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`if: github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'`</span> - only run on main branch pushes</span>
<span id="cb25-1354"><a href="#cb25-1354" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`createCommitComment()`</span> vs <span class="in">`createComment()`</span> - different types of comments</span>
<span id="cb25-1355"><a href="#cb25-1355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1356"><a href="#cb25-1356" aria-hidden="true" tabindex="-1"></a>**What you'll learn:**</span>
<span id="cb25-1357"><a href="#cb25-1357" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to create workflows that respond to different events</span>
<span id="cb25-1358"><a href="#cb25-1358" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How to use conditions (<span class="in">`if:`</span>) to control when jobs run</span>
<span id="cb25-1359"><a href="#cb25-1359" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The difference between PR comments and commit comments</span>
<span id="cb25-1360"><a href="#cb25-1360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1361"><a href="#cb25-1361" aria-hidden="true" tabindex="-1"></a><span class="fu">## 🎯 How to Practice</span></span>
<span id="cb25-1362"><a href="#cb25-1362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1363"><a href="#cb25-1363" aria-hidden="true" tabindex="-1"></a><span class="fu">### Week 1: Start Simple</span></span>
<span id="cb25-1364"><a href="#cb25-1364" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Day 1**: Create Step 1 (Hello World) - understand basic structure</span>
<span id="cb25-1365"><a href="#cb25-1365" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Day 2**: Create Step 2 (Basic R) - learn about actions and R</span>
<span id="cb25-1366"><a href="#cb25-1366" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Day 3**: Create Step 3 (Docker) - understand containers in CI</span>
<span id="cb25-1367"><a href="#cb25-1367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1368"><a href="#cb25-1368" aria-hidden="true" tabindex="-1"></a><span class="fu">### Week 2: Add Complexity  </span></span>
<span id="cb25-1369"><a href="#cb25-1369" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Day 4**: Create Step 4 (Real Tests) - connect to your actual tests</span>
<span id="cb25-1370"><a href="#cb25-1370" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Day 5**: Create Step 5 (Package Detection) - learn text processing</span>
<span id="cb25-1371"><a href="#cb25-1371" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>**Day 6**: Create Step 6 (PR Comments) - make it interactive</span>
<span id="cb25-1372"><a href="#cb25-1372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1373"><a href="#cb25-1373" aria-hidden="true" tabindex="-1"></a><span class="fu">### Week 3: Complete System</span></span>
<span id="cb25-1374"><a href="#cb25-1374" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span>**Day 7**: Create Step 7 (Complete) - put it all together</span>
<span id="cb25-1375"><a href="#cb25-1375" aria-hidden="true" tabindex="-1"></a><span class="ss">8. </span>**Test extensively**: Create test PRs and watch the full flow</span>
<span id="cb25-1376"><a href="#cb25-1376" aria-hidden="true" tabindex="-1"></a><span class="ss">9. </span>**Customize**: Modify for your specific needs</span>
<span id="cb25-1377"><a href="#cb25-1377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1378"><a href="#cb25-1378" aria-hidden="true" tabindex="-1"></a><span class="fu">## 🔧 Testing Each Step</span></span>
<span id="cb25-1379"><a href="#cb25-1379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1380"><a href="#cb25-1380" aria-hidden="true" tabindex="-1"></a>For each step, create a test scenario:</span>
<span id="cb25-1381"><a href="#cb25-1381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1382"><a href="#cb25-1382" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb25-1383"><a href="#cb25-1383" aria-hidden="true" tabindex="-1"></a><span class="co"># Create test branch</span></span>
<span id="cb25-1384"><a href="#cb25-1384" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> test-step-X</span>
<span id="cb25-1385"><a href="#cb25-1385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1386"><a href="#cb25-1386" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a small change to trigger the workflow</span></span>
<span id="cb25-1387"><a href="#cb25-1387" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"# Testing step X"</span> <span class="op">&gt;&gt;</span> README.md</span>
<span id="cb25-1388"><a href="#cb25-1388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1389"><a href="#cb25-1389" aria-hidden="true" tabindex="-1"></a><span class="co"># Commit and push</span></span>
<span id="cb25-1390"><a href="#cb25-1390" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb25-1391"><a href="#cb25-1391" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"test: step X workflow"</span></span>
<span id="cb25-1392"><a href="#cb25-1392" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin test-step-X</span>
<span id="cb25-1393"><a href="#cb25-1393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1394"><a href="#cb25-1394" aria-hidden="true" tabindex="-1"></a><span class="co"># Create PR (for PR workflows) or just watch Actions tab (for push workflows)</span></span>
<span id="cb25-1395"><a href="#cb25-1395" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1396"><a href="#cb25-1396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1397"><a href="#cb25-1397" aria-hidden="true" tabindex="-1"></a><span class="fu">## 🚨 Common Issues and Solutions</span></span>
<span id="cb25-1398"><a href="#cb25-1398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1399"><a href="#cb25-1399" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: YAML syntax errors</span></span>
<span id="cb25-1400"><a href="#cb25-1400" aria-hidden="true" tabindex="-1"></a>**Solution**: Use online YAML validator, check indentation</span>
<span id="cb25-1401"><a href="#cb25-1401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1402"><a href="#cb25-1402" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Workflow not running</span></span>
<span id="cb25-1403"><a href="#cb25-1403" aria-hidden="true" tabindex="-1"></a>**Solution**: Check file location (<span class="in">`.github/workflows/`</span>), verify triggers</span>
<span id="cb25-1404"><a href="#cb25-1404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1405"><a href="#cb25-1405" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Docker build fails</span></span>
<span id="cb25-1406"><a href="#cb25-1406" aria-hidden="true" tabindex="-1"></a>**Solution**: Test <span class="in">`docker build .`</span> locally first</span>
<span id="cb25-1407"><a href="#cb25-1407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1408"><a href="#cb25-1408" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Tests fail in CI but pass locally</span></span>
<span id="cb25-1409"><a href="#cb25-1409" aria-hidden="true" tabindex="-1"></a>**Solution**: Check Docker environment vs local environment</span>
<span id="cb25-1410"><a href="#cb25-1410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1411"><a href="#cb25-1411" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issue: Permissions errors</span></span>
<span id="cb25-1412"><a href="#cb25-1412" aria-hidden="true" tabindex="-1"></a>**Solution**: Repository Settings → Actions → General → "Read and write permissions"</span>
<span id="cb25-1413"><a href="#cb25-1413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1414"><a href="#cb25-1414" aria-hidden="true" tabindex="-1"></a><span class="fu">## 📚 Key Concepts Reinforcement</span></span>
<span id="cb25-1415"><a href="#cb25-1415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1416"><a href="#cb25-1416" aria-hidden="true" tabindex="-1"></a>By the end of this progression, you'll understand:</span>
<span id="cb25-1417"><a href="#cb25-1417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1418"><a href="#cb25-1418" aria-hidden="true" tabindex="-1"></a>✅ **Basic YAML structure** (<span class="in">`name`</span>, <span class="in">`on`</span>, <span class="in">`jobs`</span>, <span class="in">`steps`</span>)  </span>
<span id="cb25-1419"><a href="#cb25-1419" aria-hidden="true" tabindex="-1"></a>✅ **When workflows run** (triggers: <span class="in">`push`</span>, <span class="in">`pull_request`</span>)  </span>
<span id="cb25-1420"><a href="#cb25-1420" aria-hidden="true" tabindex="-1"></a>✅ **Where workflows run** (<span class="in">`runs-on: ubuntu-latest`</span>)  </span>
<span id="cb25-1421"><a href="#cb25-1421" aria-hidden="true" tabindex="-1"></a>✅ **How to use actions** (<span class="in">`uses:`</span>) vs commands (<span class="in">`run:`</span>)  </span>
<span id="cb25-1422"><a href="#cb25-1422" aria-hidden="true" tabindex="-1"></a>✅ **Docker integration** (<span class="in">`docker build`</span>, <span class="in">`docker run`</span>)  </span>
<span id="cb25-1423"><a href="#cb25-1423" aria-hidden="true" tabindex="-1"></a>✅ **Conditional execution** (<span class="in">`if:`</span> statements)  </span>
<span id="cb25-1424"><a href="#cb25-1424" aria-hidden="true" tabindex="-1"></a>✅ **GitHub API interaction** (comments, commits)  </span>
<span id="cb25-1425"><a href="#cb25-1425" aria-hidden="true" tabindex="-1"></a>✅ **Data flow between steps** (outputs, files)  </span>
<span id="cb25-1426"><a href="#cb25-1426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1427"><a href="#cb25-1427" aria-hidden="true" tabindex="-1"></a>Start with Step 1 and don't move to the next step until you understand the current one completely!</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2023-2025, Ronald G. Thomas</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rgt47">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/rgt47">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<!-- PDF view/download button for blog posts -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Only add the button on post pages
  if (window.location.pathname.includes('/posts/') && !window.location.pathname.endsWith('/posts/') && !window.location.pathname.endsWith('/posts/index.html')) {
    var currentPath = window.location.pathname;
    var pdfPath = currentPath.replace('.html', '.pdf');

    // Check if PDF exists first
    fetch(pdfPath, { method: 'HEAD' })
      .then(function(response) {
        if (response.ok) {
          // PDF exists, show download button
          showDownloadButton(pdfPath);
        } else {
          // PDF doesn't exist, show link to generate
          showGenerateButton(currentPath);
        }
      })
      .catch(function() {
        // Error checking PDF, show generate button
        showGenerateButton(currentPath);
      });
  }
});

function showDownloadButton(pdfPath) {
  var downloadBtn = document.createElement('div');
  downloadBtn.className = 'pdf-download-button';

  // Get file size if possible
  fetch(pdfPath, { method: 'HEAD' })
    .then(function(response) {
      var size = response.headers.get('Content-Length');
      var sizeText = '';

      if (size) {
        // Convert to MB or KB
        var sizeInMB = size / (1024 * 1024);
        if (sizeInMB >= 1) {
          sizeText = ' (' + sizeInMB.toFixed(1) + ' MB)';
        } else {
          sizeText = ' (' + (size / 1024).toFixed(0) + ' KB)';
        }
      }

      downloadBtn.innerHTML =
        '<div class="alert alert-secondary d-flex align-items-center p-3" role="alert">' +
        '  <a href="' + pdfPath + '" class="btn btn-primary btn-sm me-3" target="_blank">' +
        '    <i class="bi bi-file-pdf me-1"></i> Download PDF' + sizeText +
        '  </a>' +
        '  <span class="small text-muted">View or save a printer-friendly version of this article</span>' +
        '</div>';
    })
    .catch(function() {
      // Basic fallback if we can't get file size
      downloadBtn.innerHTML =
        '<div class="alert alert-secondary d-flex align-items-center p-3" role="alert">' +
        '  <a href="' + pdfPath + '" class="btn btn-primary btn-sm me-3" target="_blank">' +
        '    <i class="bi bi-file-pdf me-1"></i> Download PDF' +
        '  </a>' +
        '  <span class="small text-muted">View or save a printer-friendly version of this article</span>' +
        '</div>';
    });

  // Find where to insert the button (right after the title block)
  var titleBlock = document.querySelector('.quarto-title-meta');
  if (titleBlock) {
    titleBlock.after(downloadBtn);
  }
}

function showGenerateButton(htmlPath) {
  var qmdPath = htmlPath.replace('/posts/', 'posts/').replace('index.html', 'index.qmd');

  var generateBtn = document.createElement('div');
  generateBtn.className = 'pdf-download-button';
  generateBtn.innerHTML =
    '<div class="alert alert-secondary d-flex flex-column gap-2 p-3" role="alert">' +
    '  <div><i class="bi bi-file-pdf me-2"></i><strong>PDF version available</strong></div>' +
    '  <div class="small">Generate a PDF version of this article by running this command in the terminal:</div>' +
    '  <pre class="bg-light p-2 rounded mb-0 mt-1"><code>./generate_pdf.sh ' + qmdPath + '</code></pre>' +
    '</div>';

  // Find where to insert the button (right after the title block)
  var titleBlock = document.querySelector('.quarto-title-meta');
  if (titleBlock) {
    titleBlock.after(generateBtn);
  }
}
</script>

<style>
.pdf-download-button {
  margin-top: 1rem;
  margin-bottom: 1rem;
}
</style>




</body></html>