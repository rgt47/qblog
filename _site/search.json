[
  {
    "objectID": "posts/simpleS3/index.html",
    "href": "posts/simpleS3/index.html",
    "title": "Writing a simple R package in S3.",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash"
  },
  {
    "objectID": "posts/simpleS3/index.html#aws-working-environment",
    "href": "posts/simpleS3/index.html#aws-working-environment",
    "title": "Writing a simple R package in S3.",
    "section": "AWS Working Environment",
    "text": "AWS Working Environment\nThat is, along with selecting a server we‚Äôll need to set up a working environment. We recommend setting up the working environment before launching the server, as it saves some back and forth. This working environment consists of four main components:\n\nA secure shell (ssh) key-pair to allow we to remotely and securely login to the virtual server once its launched.\nA firewall to restrict access to only secure connections. The firewall closes off all incoming traffic except through those ports specifically named.\n\nA static IP address. This is required for maintaining the link between the domain name and the server when rebooting. (The default is for the instance/server to be assigned a new IP each time its rebooted.) and\nA domain name, say rgtlab.org. A domain name is not required but will facilitate collaborator access by not needing to use the IP address directly."
  },
  {
    "objectID": "posts/simpleS3/index.html#ssh-key-pair",
    "href": "posts/simpleS3/index.html#ssh-key-pair",
    "title": "Writing a simple R package in S3.",
    "section": "Ssh key pair",
    "text": "Ssh key pair\nThe first time we create an AWS account we need to exchange an ssh key pair with AWS. The pairs consist of a private and a public key. The pair of keys will allow us to login securely to any server we launch on EC2. We can generate an ssh key pair in one of two ways in EC2. Either, locally, on our workstation and upload the public key to EC2, or have EC2 generate the key pair and download the private key.\nFor the first option we create a directory on our workstation to hold the keys and navigate to it. e.g.¬†~/.ssh. Generate the keys with the command\nssh-keygen -m PEM\n‚ÄúPEM‚Äù defines the key format. More information on public key authentication can be found here. In the interactive dialog name the key prefix something like power1_app_ssh. The dialog will ask for a passphrase. Enter one for an additional level of security, but its not required. The ssh-keygen program will generate two files: power1_app_ssh and power1_app_ssh.pub\nTo complete the process return to the EC2 dashboard select Keys Pairs in the left panel. The select Create key pair botton in the upper right of the page.\nA form appears and asks for a name. Enter something like power1_app_ssh. Select RSA for key pair type and .pem for key file format to match the ssh-keygen process we went through on our workstation.\nasks for the location of the public key. Browse to the ~/.ssh directory on wer workstation and import the public key power1_app_ssh.pub.\nGive the pair a name, say power1_app_ssh, and the keys will be created and the private key power1_app_ssh.pem will be downloaded to our local machine to the ~/.ssh directory. Change the access permissions for the private key with the following command:\nsudo chmod 600 power1_app_ssh.pem"
  },
  {
    "objectID": "posts/simpleS3/index.html#firewall",
    "href": "posts/simpleS3/index.html#firewall",
    "title": "Writing a simple R package in S3.",
    "section": "Firewall",
    "text": "Firewall\nTo create a firewall click on Network settings in the left hand panel. Choose Create security group and select Allow SSH traffic and Allow HTTPS traffic. This will create a firewall that leaves open only ports 22 and 443, for ssh and https incoming traffic respectively. The default name for the firewall will be something like launch-wizard-6. name the security group power1_firewall."
  },
  {
    "objectID": "posts/simpleS3/index.html#static-ip-address",
    "href": "posts/simpleS3/index.html#static-ip-address",
    "title": "Writing a simple R package in S3.",
    "section": "Static IP address",
    "text": "Static IP address\nThe next step is to use the elastic IP service to get a static IP that can be assigned to the server. Navigate to Network and Security again and select Allocate Elastic IP. An IP will be assigned from the EC2 pool of available IPv4 IP addresses."
  },
  {
    "objectID": "posts/simpleS3/index.html#domain-name",
    "href": "posts/simpleS3/index.html#domain-name",
    "title": "Writing a simple R package in S3.",
    "section": "Domain Name",
    "text": "Domain Name\nTo obtain a dedicated domain name go to Amazon route 53 to select a domain name and associate it with our static IP.\nOnce a domain name is acquired, e.g.¬†rgtlab.org, associate it with our static IP address. This can be done via the Route 53 service. To associate domain name rgtlab.org with elastic IP do the following in Route 53:\n\nclick on hosted zones in side panel\nclick on rgtlab.org in center panel\nclick on checkbox for rgtlab.org type=A line\nthen click on edit record in right panel\nchange IP address to the static IP (e.g.¬†13.57.139.31)."
  },
  {
    "objectID": "posts/simpleS3/index.html#access-server",
    "href": "posts/simpleS3/index.html#access-server",
    "title": "Writing a simple R package in S3.",
    "section": "Access server",
    "text": "Access server\nOn wer laptop log into server with\nssh -i \"~/.ssh/power1_app_ssh.pem\" ubuntu@rgtlab.org"
  },
  {
    "objectID": "posts/awscli_approach/index.html",
    "href": "posts/awscli_approach/index.html",
    "title": "Using the AWS command line interface to launch a EC2 server and docker compose",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash"
  },
  {
    "objectID": "posts/awscli_approach/index.html#appendix-1",
    "href": "posts/awscli_approach/index.html#appendix-1",
    "title": "Using the AWS command line interface to launch a EC2 server and docker compose",
    "section": "Appendix 1 Set up AWS IAM",
    "text": "Appendix 1 Set up AWS IAM\nSet up aws access via the aws configure program. To get the needed credentials use the AWS IAM service.\nDetails follow:\nLog into AWS console.\nSearch for IAM service. Navigate to IAM dashboard.\nSelect Users in left hand panel.\nThen select Add Users button (in upper right).\nThen enter a User name in the form. Click Next (lower right)\nThen Create User.\nClick on the user name\nIn the page that comes up. Select Security Credentials tab (center of page).\nUnder Access Keys panel click Create access key (right side or bottom of panel).\nClick Command Line Interface CLI)\nand at the bottom of the page click the checkbox ‚ÄúI understand‚Ä¶‚Äù.\nFinally select Create access key and\nchoose Download .csv file (lower right).\nNavigate Download screen to local ~/.aws directory.\nClick Done\nNow in the terminal on your workstation, configure the aws cli app via the command.\n aws configure \nEnter info from the credentials file just downloaded. After entering the AWS Access Key ID and AWS Secret Access Key information you are asked for a Region, (My region is us-west-1), and an output format suggested output format is JSON."
  },
  {
    "objectID": "posts/setupaws/index.html",
    "href": "posts/setupaws/index.html",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash"
  },
  {
    "objectID": "posts/setupaws/index.html#select-a-hosting-service",
    "href": "posts/setupaws/index.html#select-a-hosting-service",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "Select a hosting service",
    "text": "Select a hosting service\nThere are a number of cloud based server options to choose from: Microsoft Azure, Oracle, Google Cloud, Amazon AWS EC2, Digital Ocean to name a few. Each has their own approach to setting up a custom virtual server. Several have free or low-cost service tiers available.\nIn this post we‚Äôll provide a step-by-step description of the process with Amazon Web Services Elastic Compute Cloud (AWS EC2).\nAWS is a reasonable choice for setting up a small custom server. Its not the cheapest option, but the system is very well documented and, in our experience, reliable.\nTo start, open the EC2 console by visiting the URL:\n   https://aws.amazon.com/console\n(see margin figure)\nIn the console window choose regional service. For me its ‚ÄúN. California‚Äù.\n\n\n\n\n\nAWS console\n\n\nNext create an account, or sign in, and once you‚Äôre logged in navigate to the EC2 dashboard. Its by way of the dashboard that we‚Äôll define the parameters for the type of server to launch and the mechanisms for communicating with it."
  },
  {
    "objectID": "posts/setupaws/index.html#aws-working-environment",
    "href": "posts/setupaws/index.html#aws-working-environment",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "AWS Working Environment",
    "text": "AWS Working Environment\nAlong with selecting a server we‚Äôll need to set up a working environment. We recommend setting up the working environment before launching the server, as it saves some back and forth. The working environment consists of four main components:\n\nA secure shell (ssh) key-pair to allow us to remotely and securely login to the virtual server once its launched.\nA firewall which will restrict server access to only secure connections. The firewall closes off all incoming traffic except through those ports specifically named.\n\nA static IP address. This is required for maintaining the link between the domain name and the server when rebooting. (The default is for the instance/server to be assigned a new IP address each time its rebooted).\n\nand 4. A domain name, say rgtlab.org. A domain name is not required but will facilitate collaborator access by not needing to use the IP address directly.\n\nSsh key pair\nThe first time we create an AWS account we need to exchange an ssh key pair with AWS. The pairs consist of a private and a public key. The pair of keys will allow us to login securely to any server we launch on EC2. We can generate an ssh key pair in one of two ways in EC2. Either, locally, on our workstation and upload the public key to EC2, or have EC2 generate the key pair and download the private key.\nFor the first option we create a directory on our workstation to hold the keys and navigate to it. e.g.¬†~/.ssh. Generate the keys with the command\nssh-keygen -m PEM\n‚ÄúPEM‚Äù defines the key format. More information on public key authentication can be found here. In the interactive dialog name the key prefix something like power1_app.pem. The dialog will ask for a passphrase. Enter one for an additional level of security, but its not required. The ssh-keygen program will generate two files: power1_app.pem.pub and power1_app.pub\nTo complete the process return to the EC2 dashboard select Actions and then Import key pairin the left panel. Enter the name power1_app and select the Browse button. Navigate to the file power1_app.pem.pub in the directory ~/.sshand and select the Import key pair button at the bottom of the page.\nFor the second approach select Create key pair botton in the upper right of the page.\nA form appears and asks for a name. Enter something like power1_app. Select RSA for key pair type and .pem for key file format.\nGive the pair a name, say power1_app, and the keys will be created and the private key power1_app.pem will be downloaded to our local machine to the ~/.ssh directory. Change the access permissions for the private key with the following command:\nsudo chmod 600 power1_app.pem\n\n\nFirewall\nTo create a firewall click on Network settings in the left hand panel. Choose Create security group and select Allow SSH traffic and Allow HTTPS traffic. This will create a firewall that leaves open only ports 22 and 443, for ssh and https incoming traffic respectively. The default name for the firewall will be something like launch-wizard-6. name the security group power1_firewall.\n\n\nStatic IP address\nThe next step is to use the elastic IP service to get a static IP that can be assigned to the server. Navigate to Network and Security again and select Allocate Elastic IP. An IP will be assigned from the EC2 pool of available IPv4 IP addresses.\n\n\nDomain Name\nTo obtain a dedicated domain name go to Amazon route 53 to select a domain name and associate it with our static IP.\nOnce a domain name is acquired, e.g.¬†rgtlab.org, associate it with our static IP address. This can be done via the Route 53 service. To associate domain name rgtlab.org with elastic IP do the following in Route 53:\n\nclick on hosted zones in side panel\nclick on rgtlab.org in center panel\nclick on checkbox for rgtlab.org type=A line\nthen click on edit record in right panel\nchange IP address to the static IP (e.g.¬†13.57.139.31)."
  },
  {
    "objectID": "posts/setupaws/index.html#ssh-key-pair",
    "href": "posts/setupaws/index.html#ssh-key-pair",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "Ssh key pair",
    "text": "Ssh key pair\nThe first time we create an AWS account we need to exchange an ssh key pair with AWS. The pairs consist of a private and a public key. The pair of keys will allow us to login securely to any server we launch on EC2. We can generate an ssh key pair in one of two ways in EC2. Either, locally, on our workstation and upload the public key to EC2, or have EC2 generate the key pair and download the private key.\nFor the first option we create a directory on our workstation to hold the keys and navigate to it. e.g.¬†~/.ssh. Generate the keys with the command\nssh-keygen -m PEM\n‚ÄúPEM‚Äù defines the key format. More information on public key authentication can be found here. In the interactive dialog name the key prefix something like power1_app.pem. The dialog will ask for a passphrase. Enter one for an additional level of security, but its not required. The ssh-keygen program will generate two files: power1_app.pem.pub and power1_app.pub\nTo complete the process return to the EC2 dashboard select Actions and then Import key pairin the left panel. Enter the name power1_app and select the Browse button. Navigate to the file power1_app.pem.pub in the directory ~/.sshand and select the Import key pair button at the bottom of the page.\nFor the second approach select Create key pair botton in the upper right of the page.\nA form appears and asks for a name. Enter something like power1_app. Select RSA for key pair type and .pem for key file format.\nGive the pair a name, say power1_app, and the keys will be created and the private key power1_app.pem will be downloaded to our local machine to the ~/.ssh directory. Change the access permissions for the private key with the following command:\nsudo chmod 600 power1_app_ssh.pem"
  },
  {
    "objectID": "posts/setupaws/index.html#firewall",
    "href": "posts/setupaws/index.html#firewall",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "Firewall",
    "text": "Firewall\nTo create a firewall click on Network settings in the left hand panel. Choose Create security group and select Allow SSH traffic and Allow HTTPS traffic. This will create a firewall that leaves open only ports 22 and 443, for ssh and https incoming traffic respectively. The default name for the firewall will be something like launch-wizard-6. name the security group power1_firewall."
  },
  {
    "objectID": "posts/setupaws/index.html#static-ip-address",
    "href": "posts/setupaws/index.html#static-ip-address",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "Static IP address",
    "text": "Static IP address\nThe next step is to use the elastic IP service to get a static IP that can be assigned to the server. Navigate to Network and Security again and select Allocate Elastic IP. An IP will be assigned from the EC2 pool of available IPv4 IP addresses."
  },
  {
    "objectID": "posts/setupaws/index.html#domain-name",
    "href": "posts/setupaws/index.html#domain-name",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "Domain Name",
    "text": "Domain Name\nTo obtain a dedicated domain name go to Amazon route 53 to select a domain name and associate it with our static IP.\nOnce a domain name is acquired, e.g.¬†rgtlab.org, associate it with our static IP address. This can be done via the Route 53 service. To associate domain name rgtlab.org with elastic IP do the following in Route 53:\n\nclick on hosted zones in side panel\nclick on rgtlab.org in center panel\nclick on checkbox for rgtlab.org type=A line\nthen click on edit record in right panel\nchange IP address to the static IP (e.g.¬†13.57.139.31)."
  },
  {
    "objectID": "posts/setupaws/index.html#access-server",
    "href": "posts/setupaws/index.html#access-server",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "Access server",
    "text": "Access server\nOn your laptop log into server with\nssh -i \"~/.ssh/power1_app_ssh.pem\" ubuntu@rgtlab.org"
  },
  {
    "objectID": "posts/setupquarto/index.html",
    "href": "posts/setupquarto/index.html",
    "title": "Setting up Quarto",
    "section": "",
    "text": "This is inline code plus a small code chunk.\n\nlibrary(tidyverse)\n\nggplot(mpg) +\n  geom_jitter(aes(cty, hwy), size = 4, alpha = 0.5) \n\n\n\n\n\n\n\nTransforming OLS estimatesMaximizing likelihood\n\n\n\n\nCode\npreds_lm %&gt;% \n  ggplot(aes(body_mass_g, bill_length_mm, col = correct)) +\n  geom_jitter(size = 4, alpha = 0.6) +\n  facet_wrap(vars(species)) +\n  scale_color_manual(values = c('grey60', thematic::okabe_ito(3)[3])) +\n  scale_x_continuous(breaks = seq(3000, 6000, 1000)) +\n  theme_minimal(base_size = 12) +\n  theme(\n    legend.position = 'top', \n    panel.background = element_rect(color = 'black'),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    x = 'Body mass (in g)',\n    y = 'Bill length (in mm)'\n  )\n\n\n\n\n\n\n\n\n\nCode\nglm.mod &lt;- glm(sex ~ body_mass_g + bill_length_mm + species, family = binomial, data = dat)\n\npreds &lt;- dat %&gt;% \n  mutate(\n    prob.fit = glm.mod$fitted.values,\n    prediction = if_else(prob.fit &gt; 0.5, 'male', 'female'),\n    correct = if_else(sex == prediction, 'correct', 'incorrect')\n  )\n\n\npreds %&gt;% \n  ggplot(aes(body_mass_g, bill_length_mm, col = correct)) +\n  geom_jitter(size = 4, alpha = 0.6) +\n  facet_wrap(vars(species)) +\n  scale_x_continuous(breaks = seq(3000, 6000, 1000)) +\n  scale_color_manual(values = c('grey60', thematic::okabe_ito(3)[3])) +\n  theme_minimal(base_size = 10) +\n  theme(\n    legend.position = 'top', \n    panel.background = element_rect(color = 'black'),\n    panel.grid.minor = element_blank()\n  ) +\n  labs(\n    x = 'Body mass (in g)',\n    y = 'Bill length (in mm)'\n  )\n\n\n\n\n\n\n\n\n\n\n\\[\n\\int_0^1 f(x) \\ dx\n\\]\n\n\n\n\n\n\n\ngeom_density(\n  mapping = NULL,\n  data = NULL,\n  stat = \"density\",\n  position = \"identity\",\n  ...,\n  na.rm = FALSE,\n  orientation = NA,\n  show.legend = NA,\n  inherit.aes = TRUE,\n  outline.type = \"upper\"\n)\n\n\nstat_density(\n  mapping = NULL,\n  data = NULL,\n  geom = \"area\",\n  position = \"stack\",\n  ...,\n  bw = \"nrd0\",\n  adjust = 1,\n  kernel = \"gaussian\",\n  n = 512,\n  trim = FALSE,\n  na.rm = FALSE,\n  orientation = NA,\n  show.legend = NA,\n  inherit.aes = TRUE\n)\n\n\n\n\n\n\n\nggplot(data = gapminder::gapminder, mapping = aes(x = lifeExp, fill = continent)) +\n  stat_density(position = \"identity\", alpha = 0.5)\n\n\n\n\nBla bla bla. This is a caption in the margin. Super cool isn‚Äôt it?\n\n\n\n\nStart with running quarto create-project at ~/prj level\n~/Dropbox/prj via üìê v4.2.1\n‚ùØ quarto create-project qblog --type website:blog\nCreating project at /Users/zenn/Dropbox/prj/qblog:\n  - Created _quarto.yml\n  - Created index.qmd\n  - Created posts/welcome/index.qmd\n  - Created posts/post-with-code/index.qmd\n  - Created about.qmd\n  - Created styles.css\n  - Created posts/_metadata.yml\n\ncd to ~/qblog/posts/\ncreate a new directory, say setupquarto\ncd to ~/qblog/posts/setupquarto\ntouch setupquarto.qmd\nv setupquarto.qmd"
  },
  {
    "objectID": "posts/setupquarto/index.html#columns",
    "href": "posts/setupquarto/index.html#columns",
    "title": "Setting up Quarto",
    "section": "",
    "text": "geom_density(\n  mapping = NULL,\n  data = NULL,\n  stat = \"density\",\n  position = \"identity\",\n  ...,\n  na.rm = FALSE,\n  orientation = NA,\n  show.legend = NA,\n  inherit.aes = TRUE,\n  outline.type = \"upper\"\n)\n\n\nstat_density(\n  mapping = NULL,\n  data = NULL,\n  geom = \"area\",\n  position = \"stack\",\n  ...,\n  bw = \"nrd0\",\n  adjust = 1,\n  kernel = \"gaussian\",\n  n = 512,\n  trim = FALSE,\n  na.rm = FALSE,\n  orientation = NA,\n  show.legend = NA,\n  inherit.aes = TRUE\n)"
  },
  {
    "objectID": "posts/setupquarto/index.html#margin-captions",
    "href": "posts/setupquarto/index.html#margin-captions",
    "title": "Setting up Quarto",
    "section": "",
    "text": "ggplot(data = gapminder::gapminder, mapping = aes(x = lifeExp, fill = continent)) +\n  stat_density(position = \"identity\", alpha = 0.5)\n\n\n\n\nBla bla bla. This is a caption in the margin. Super cool isn‚Äôt it?\n\n\n\n\nStart with running quarto create-project at ~/prj level\n~/Dropbox/prj via üìê v4.2.1\n‚ùØ quarto create-project qblog --type website:blog\nCreating project at /Users/zenn/Dropbox/prj/qblog:\n  - Created _quarto.yml\n  - Created index.qmd\n  - Created posts/welcome/index.qmd\n  - Created posts/post-with-code/index.qmd\n  - Created about.qmd\n  - Created styles.css\n  - Created posts/_metadata.yml\n\ncd to ~/qblog/posts/\ncreate a new directory, say setupquarto\ncd to ~/qblog/posts/setupquarto\ntouch setupquarto.qmd\nv setupquarto.qmd"
  },
  {
    "objectID": "posts/setupneovim/TODO.html",
    "href": "posts/setupneovim/TODO.html",
    "title": "Focus on R: a new qblog",
    "section": "",
    "text": "Reusehttps://creativecommons.org/licenses/by/4.0/CitationBibTeX citation:@online{(ryy) glenn thomas,\n  author = {(Ryy) Glenn Thomas, Ronald},\n  url = {https://focusonr.org/posts/setupneovim/TODO.html},\n  langid = {en}\n}\nFor attribution, please cite this work as:\n(Ryy) Glenn Thomas, Ronald. n.d. https://focusonr.org/posts/setupneovim/TODO.html."
  },
  {
    "objectID": "posts/setupubuntu/index.html",
    "href": "posts/setupubuntu/index.html",
    "title": "Setup Ubuntu on AWS or parallels",
    "section": "",
    "text": "1 Introduction\nCould I use Docker?\nThis seems like genius:\n alias nvim=\"docker run -it -v `pwd`:/mnt/volume --workdir=/mnt/volume anatolelucet/neovim:stable\"\nalias nvim=\"docker run -it -v `pwd`:/mnt/volume --workdir=/mnt/volume anatolelucet/neovim:nightly\"\n\nstep one set up parallels tools. Use ‚ÄúActions‚Äù menu to select ‚Äúinstall parallels tools. This will point CD/DVD device at the iso image. Open the DVD in‚ÄùFiles‚Äù. Open install parallel tool-gui.\nmacbook harddrive will be available under share\nFirefox is installed. Add vinium-ff extension.\n\n\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/CitationBibTeX citation:@online{(ryy)glennthomas2023,\n  author = {Ronald (Ryy) Glenn Thomas},\n  title = {Setup {Ubuntu} on {AWS} or Parallels},\n  date = {2023-05-26},\n  url = {https://focusonr.org/posts/setupubuntu},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nRonald (Ryy) Glenn Thomas. 2023. ‚ÄúSetup Ubuntu on AWS or\nParallels.‚Äù May 26, 2023. https://focusonr.org/posts/setupubuntu."
  },
  {
    "objectID": "posts/dockerize_compose/index.html",
    "href": "posts/dockerize_compose/index.html",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash"
  },
  {
    "objectID": "posts/dockerize_compose/index.html#hosting",
    "href": "posts/dockerize_compose/index.html#hosting",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Hosting",
    "text": "Hosting\n\n\n\n\n\nData flow \n\n\nFigure 2 illustrates the tools we‚Äôll use and the flow of program and configuration files. In order to host power1 online we‚Äôll need to complete the following tasks:\n\ncreate a virtual server (connected via ssh) with a firewall\nobtain a static IP address (to identify the server online)\nobtain a domain name (name for IP address)\ninstall and configure a webserver (tool to interact with https protocol requests and respond)\nobtain and install an SSL certificate (to allow encrypted communication)\nsetup an authentication method (password protection)\nconfigure a reverse proxy method (translate https, port 443, requests to Shiny, port 3838)\n\nAt first glance these 7 requirements can appear daunting, but on closer inspection all can be met with relative ease and minimal cost ( using a cloud-hosting service, e.g.¬†Amazon‚Äôs EC2 or Digital Ocean, and a ‚Äúleased‚Äù domain name from, e.g.¬†GoDaddy, or Amazon‚Äôs Route 53) or no cost( if you have your own server with IP address, and domain name)"
  },
  {
    "objectID": "posts/dockerize_compose/index.html#select-a-hosting-service",
    "href": "posts/dockerize_compose/index.html#select-a-hosting-service",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Select a hosting service",
    "text": "Select a hosting service\nThere are a number of cloud based server options: Microsoft Azure, Oracle, Google Cloud, Amazon AWS EC2, Digital Ocean to name a few. Each has their own approach to setting up a custom virtual server. Several have free or low-cost service tiers available.\nAn overview of the process with EC2 follows. Detailed instructions for AWS EC2 are covered in an earlier post here.\n\nCreate an account or sign in.\nSet up an interactive environment with AWS server.\n\ndefine ssh key-pair.\nconfigure firewall.\nrequest static IP.\nobtain domain name.\nselect an instance and launch server.\n\n\nOnce the server is available connect via ssh, and login,\nThe only necessary software to install is docker and git. Install both with the following commands:\nsudo apt install -y git\nsudo snap install docker.io\nOnce the host is set up and the requisite software installed we‚Äôll have a customized virtual server wtih a static IP address, and a unique domain name and firewall in place. In other words, items 1, 2, and 3 from our hosting list above will be taken care of."
  },
  {
    "objectID": "posts/dockerize_compose/index.html#website",
    "href": "posts/dockerize_compose/index.html#website",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Website",
    "text": "Website\nTo configure the web server and containerize our app we need to add three files to the repo, to go along with our Shiny app.\nWe‚Äôll use a slightly indirect route to create and place the necessary files on the server but this approach will allow to do all our countinuing development on our local workstation and have the web app be automatically continually undated. We‚Äôll create the configuration files we need on our workstation and push them github and from there they can be accessed from our server.\nThese three configuation files are:\n\na Docker configuration file (default name Dockerfile)\n\n\n\n  Photo by Ian Taylor on Unsplash \nWe‚Äôll use docker to access R/Shiny, and docker-compose to access Caddy, our webserver. The first file is the dockerfile. Here is our minimal dockerfile with comments:\n\nshow the Dockerfile code\nfrom rocker/shiny:4.2.0\ncopy /power1_shiny/* /srv/shiny-server/\ncmd [\"/usr/bin/shiny-server\"]\n\n\nGrab the latest rocker/Shiny image from Docker Hub to use as a base image.\nCopy the Shiny code to the default location for shiny-server\nRun the Shiny-server using the default app code\n\nThis configuration file instructs Docker to build a container based on a Rocker/Shiny image (which itself is a ubuntu image with R and Shiny installed) then copy into the container the power1_shiny.R code and finally launch Shiny on (default) port 3838. We placed the power1_app.R code in the default location /srv/shiny-server we only need to start the server and it will find the shiny program.\n\na Caddy web server configuration file (default name Caddyfile)\n\nWe‚Äôll use Caddy as our web server. Caddy is an open-source tool that has the very useful feature of automating the acquiring and installing of an SSL certificate. An SSL cert is required by most browsers to use the encrypted communication protocol https.\nCaddy is configured with a file named Caddyfile. We use the caddy configuration file to specify three critical things.\n\nthe site domain name.\nthe ‚Äòreverse proxy‚Äô map that redirects requests to port 443 (ssl port) to port 3838 (Shiny port).\nadd login credentials for bob/vanilla47:\n\nOur barebones Caddyfile looks like this:\n\nShow the Caddyfile code\n# use caddy auth tool to generate a password via the `bcrypt` algorithm. \n# &gt; caddy hash-password --plaintext vanilla47 \nrgtlab.org {\n    basicauth * /power1_shiny/* {\n        bob $2a$14$pYWd5O7JqNeGLS4m4CKkzemM2pq5ezn9bcTDowofZTl5wRVl8NTJm\n    }\n    root * /srv\n    handle_path /power1_shiny/* {\n            reverse_proxy power1_shiny:3838\n    }\n    file_server\n}\n\nWe can accomplish what we need for items 4, 5, and 7 through the Caddyfile.\nNote:\n\nrgtlab.org is our domain name\nhandle_path maps all https requests to port 3838 where Shiny is listening.\n\nProviding our servers domain name, rgtlab.org is sufficient to initiate an exchange with the letsencrypt service to generates an SSL certificate.\nAnd a third file is the docker compose file that containerizes our Shiny app, pulls a caddy webserver image from Docker Hub and creates a local network for the two containers to communicate in.\n\na Docker-compose configuration file (default name docker-compose.yml).\n\nThe docker-compose.yml file:\n\ndocker-compose.yml. Show the code\nversion: \"3.7\"\n\nservices:\n  power1_shiny:\n    build: .\n    expose:\n    - \"3838\"\n  caddy:\n    image: caddy:2.3.0-alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - $PWD/Caddyfile:/etc/caddy/Caddyfile\n      - $PWD/site:/srv\n      - caddy_data:/data\nvolumes:\n    caddy_data:\n\nLastly, we need an html file, index.html that provides the landing page for our server.\n\nindex.html. Show the code\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Power1 app&lt;/h1&gt;\n    &lt;ul&gt;\n      &lt;li&gt;&lt;a href=\"./power1_shiny/\"&gt;Power1 app&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/body&gt;\n&lt;/html&gt; \n\nAt this point our power1_app repo looks like this:\n.\n‚îú‚îÄ‚îÄ Caddyfile\n‚îú‚îÄ‚îÄ Dockerfile\n‚îú‚îÄ‚îÄ README.md\n‚îú‚îÄ‚îÄ docker-compose.yml\n‚îú‚îÄ‚îÄ power1_shiny\n‚îÇ¬†¬† ‚îî‚îÄ‚îÄ app.R\n‚îî‚îÄ‚îÄ site\n    ‚îî‚îÄ‚îÄ index.html"
  },
  {
    "objectID": "posts/dockerize_compose/index.html#appendix-1",
    "href": "posts/dockerize_compose/index.html#appendix-1",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Appendix-1",
    "text": "Appendix-1"
  },
  {
    "objectID": "posts/dockerize_compose/index.html#app.r",
    "href": "posts/dockerize_compose/index.html#app.r",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "App.R",
    "text": "App.R\nConsider an app that is a balance of simple and functional ‚Äì one that calculates the power for a 2-sample t-test as a function of the standardized effect size. re is our shiny app power1_shiny.R:\nConsider the power1.R file:\n\nui &lt;- fluidPage(\ntitlePanel(\"Power Calculator for Two Group Parallel Designs\"),\nsliderInput(\"N\", \"Total Sample Size:\", min = 0, max = 300, value = 100),\nplotOutput(\"plot\"),\nverbatimTextOutput(\"eff\"))\n\nserver &lt;- function(input, output, session) {\n  delta = seq(0, 1.5,.05)\n  pow = reactive(sapply(delta, function(x) power.t.test(input$N, d=x)$power ))\n  eff =  renderText(power.t.test(input$N, power=.8)$d)\n  output$plot &lt;- renderPlot({\n  plot(delta, pow(), cex=1.5, ylab=\"power\")\n  abline(h = .8,  col = \"red\", lwd =2.5, lty = 4)\n  abline(v = eff(), col = \"blue\",lwd =2.5, lty = 4)})  \n  output$eff &lt;- renderText(\n    paste0(\"Std. effect detectable with power 80% = \", eff()) )\n}\nshinyApp(ui, server)\nThe app is designed to be maximally minimal. Using only base R functions, with a minimum of reactive widgets and layout commands to keep it simple while still performing a useful function."
  },
  {
    "objectID": "posts/dockerize_compose/index.html#bonus-add-basic-authentication",
    "href": "posts/dockerize_compose/index.html#bonus-add-basic-authentication",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Bonus: Add basic authentication",
    "text": "Bonus: Add basic authentication\nadd login credentials for bob/vanilla47 to the Caddyfile:\n# use caddy auth tool to generate a password via the `bcrypt` algorithm. \n&gt; caddy hash-password --plaintext vanilla47 \ncaddy hash-password \nrgtlab.org {\nbasicauth * /power1_shiny/* {\n        bob $2a$14$pYWd5O7JqNeGLS4m4CKkzemM2pq5ezn9bcTDowofZTl5wRVl8NTJm\n    }\n    root * /var/www/html\n    handle_path /power1_shiny/* {\n            reverse_proxy 0.0.0.0:3838\n    }\n    file_server\n}"
  },
  {
    "objectID": "posts/dockerize_compose/index.html#tip-1.-docker-on-m1-macbook.",
    "href": "posts/dockerize_compose/index.html#tip-1.-docker-on-m1-macbook.",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Tip 1. Docker on M1 macbook.",
    "text": "Tip 1. Docker on M1 macbook.\nTo get docker functioning on M1 Mac desktop\ndocker build -t power1_shiny --platform linux/x86_64 .\ndocker run -d -p 80:3838 --platform linux/x86_64 power1_shiny"
  },
  {
    "objectID": "posts/dockerize_compose/index.html#tip-2-add-user-to-docker-group-on-server.",
    "href": "posts/dockerize_compose/index.html#tip-2-add-user-to-docker-group-on-server.",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Tip 2 add user to docker group on server.",
    "text": "Tip 2 add user to docker group on server.\nAdd ubuntu to the docker group to allow docker to run without sudo.\nsudo usermod -aG docker ${USER}"
  },
  {
    "objectID": "posts/dockerize_compose/index.html#tip-3-ssh-config-file.",
    "href": "posts/dockerize_compose/index.html#tip-3-ssh-config-file.",
    "title": "A straightforward strategy to get your Shiny app online, securely and continuously updated.",
    "section": "Tip 3 ssh config file.",
    "text": "Tip 3 ssh config file.\nFor convenience, construct a config file in ~/.ssh as:\nHost rgtlab.org\nHostName 13.57.139.31 # static IP\nUser ubuntu # default user on ubuntu server\nPort 22  # the default port ssh uses\nIdentityFile ~/Downloads/power1.rsa\nthen you can ssh into the new server with\nsh&gt; ssh rgtlab.org"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Focus on R blog",
    "section": "",
    "text": "Writing a simple R package in S3.\n\n\n\n\n\n\n\nAWS\n\n\n\n\nGetting started with S3 OO programming in R\n\n\n\n\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\nInstall Linux Mint on macbook Pro\n\n\nA set of tips for install and post install\n\n\n\n\nMint\n\n\nR\n\n\nPython\n\n\nJulia\n\n\n\n\nstep by step description of howto install and customize a Mint instance for data science workflow\n\n\n\n\n\n\nMay 27, 2023\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\nA simple process to get your Shiny app online (securely).\n\n\n\n\n\n\n\nDocker\n\n\nShiny\n\n\n\n\nThis is the first in a series of posts offering suggested strategies for leveraging open source technologies to effectively host data science analysis apps and reports online.\n\n\n\n\n\n\nMay 26, 2023\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\nSet up a virtual server on AWS (in anticipation of hosting Shiny apps)\n\n\n\n\n\n\n\nAWS\n\n\n\n\nDetailed steps for setting up a lightweight server on AWS.\n\n\n\n\n\n\nMay 26, 2023\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\nA straightforward strategy to get your Shiny app online, securely and continuously updated.\n\n\nGithub, Docker-compose, EC2 version\n\n\n\n\nDocker\n\n\nShiny\n\n\ndocker-compose\n\n\n\n\nThis is the first in a series of posts offering suggested strategies for leveraging open source technologies to effectively host data science analysis apps and reports online.\n\n\n\n\n\n\nMay 24, 2023\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\nUsing the AWS command line interface to launch an EC2 server\n\n\n\n\n\n\n\nAWS\n\n\n\n\nA single batch program to setup virtual server to host shiny app\n\n\n\n\n\n\nMay 24, 2023\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\nSetting up a minimal neovim environment for data science code development\n\n\nA neovim IDE for R, Python, and Julia\n\n\nThis is the first in a series of posts offering suggested strategies for setting up key tools for data science code development\n\n\n\n\n\n\nMay 15, 2023\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\n  \n\n\n\n\nSetting up Quarto\n\n\n\n\n\n\n\n123\n\n\nSecond Tag\n\n\n\n\nThis is a second post.\n\n\n\n\n\n\nAug 31, 2022\n\n\nRonald (Ryy) Glenn Thomas\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Focused on new and interesting data science technologies."
  },
  {
    "objectID": "posts/setupneovim/index.html",
    "href": "posts/setupneovim/index.html",
    "title": "Setting up a minimal neovim environment for data science code development",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash \n\nIntroduction\nNeovim (a fork of Vim) is a text editor that has several advantages for data science code development. One of the main attractions is that it is open source and has a number of useful plugins to facilitate working on R, python, and julia code. Also, its modal, keyboard-centric system allows text and code manipulation at potentially far greater speed than conventional, mouse-centric, systems.\nIn this post we describe both a minimal, yet functional setup, as well as a more extensive setup utilizing several of the newest neovim-only plugins, for neovim to allow IDE style code editing and REPL interaction for the three primary data science coding tools: R, Python, and Julia.\nOur presentation here is for a Macos environment. Appendix one contains required adjustments for a ubuntu linux environment.\n\n\nInstall the latest stable version of neovim.\nWith minimal effort we can install both the terminal and GUI versions of neovim. The simplist approach is to use homebrew:\n&gt; brew install neovim neovim-qt\nSet up convenience aliases in zsh.\n&gt; alias ng = neovim-qt\n&gt; alias nt = neovim\n(mnemonic: the t in nt is for terminal, the g in ng is for GUI)\n\n\nConfigure neovim\nThe standard location for neovim configuration files on ‚Äúunix-like‚Äù systems is ~/.config/nvim. The main config file is either init.vim (VimL) or init.lua (Lua). In this post we‚Äôll focus on lua based configuration.\nSpecifically, the following code block creates an nvim subdirectory under ~/.config and initialize a configuration file init.lua.\nHere is the file hierarchy we‚Äôll construct. In fact all the code could be bundled into the init.lua file, but this approach is clearer and cleaner.\n.\n|-- ginit.vim\n|-- init.lua\n|-- lazy-lock.json\n|-- lua\n|   |-- basics.lua\n|   |-- leap-config.lua\n|   |-- nvim-R-config.lua\n|   |-- nvim-cmp-config.lua\n|   |-- nvim-telescope-config.lua\n|   |-- nvim-tree-config.lua\n|   `-- treesitter-config.lua\n|-- my_snippets\n|   |-- all.snippets\n|   |-- giles.tex.snipppets\n|   |-- mail.snippets\n|   |-- r.snippets\n|   |-- rmd.snippets\n|   |-- snippets.snippets\n|   |-- tex.snippets\n|   |-- text.snippets\n|   `-- txt.snippets\n|-- spell\n|   |-- en.utf-8.add\n|   `-- en.utf-8.add.spl\nTo install the lazy plugin manager\ngit clone https://github.com/folke/lazy.nvim.git \\\n   ~/.local/share/nvim/lazy/lazy.nvim\nAdd the following code to init.lua list the plugins needed to be installed from github and ‚Äúfeed‚Äù them to Lazy for installation.\nNvim-R, Leap, UltiSnips, and vimtex need additional configuration. The required code is contained in bespoke files under the lua directory.\n\nvim.g.mapleader = \" \"\nvim.g.maplocalleader = \",\"\nvim.opt.rtp:prepend(\"~/.local/share/nvim/lazy/lazy.nvim\")\nrequire('plugins')\n\nlocal lspconfig = require('lspconfig')\nrequire('nvim-cmp-config')\nrequire'lspconfig'.lua_ls.setup{}\nrequire'lspconfig'.r_language_server.setup{}\n\nrequire('basics')\nrequire('nvim-tree-config')\nrequire('nvim-R-config')\nrequire('nvim-telescope-config')\nrequire('leap').add_default_mappings()\nrequire('leap-config')\n\nvim.api.nvim_create_autocmd('LspAttach', {\n  desc = 'LSP actions',\n  callback = function()\n    local bufmap = function(mode, lhs, rhs)\n      local opts = {buffer = true}\n      vim.keymap.set(mode, lhs, rhs, opts)\n    end\n    bufmap('n', 'K', '&lt;cmd&gt;lua vim.lsp.buf.hover()&lt;cr&gt;')\n    bufmap('n', 'gl', '&lt;cmd&gt;lua vim.diagnostic.open_float()&lt;cr&gt;')\n    bufmap('n', '[d', '&lt;cmd&gt;lua vim.diagnostic.goto_prev()&lt;cr&gt;')\n    bufmap('n', ']d', '&lt;cmd&gt;lua vim.diagnostic.goto_next()&lt;cr&gt;')\n  end\n})\nList of plugins\nrequire('lazy').setup({\n'folke/tokyonight.nvim',\n'VonHeikemen/lsp-zero.nvim',\n'neovim/nvim-lspconfig',\n'hrsh7th/cmp-calc',\n'f3fora/cmp-spell',\n'onsails/lspkind.nvim',\n'tamago324/cmp-zsh',\n'hrsh7th/cmp-nvim-lsp-signature-help',\n'hrsh7th/cmp-nvim-lsp',\n'hrsh7th/cmp-buffer',\n'hrsh7th/cmp-path',\n'hrsh7th/cmp-cmdline',\n'SirVer/ultisnips',\n'quangnguyen30192/cmp-nvim-ultisnips',\n'honza/vim-snippets',\n'machakann/vim-highlightedyank',\n'jalvesaq/Nvim-R',\n'jalvesaq/cmp-nvim-r',\n'ggandor/leap.nvim',\n'rhysd/clever-f.vim',\n'hrsh7th/nvim-cmp',\n'kylechui/nvim-surround',\n'lervag/vimtex',\n'nvim-tree/nvim-tree.lua',\n'nvim-telescope/telescope.nvim',\n'nvim-treesitter/nvim-treesitter',\n'quarto-dev/quarto-nvim',\n'jmbuhr/otter.nvim',\n'junegunn/vim-peekaboo',\n'preservim/nerdcommenter',\n'nvim-lua/plenary.nvim',\n'nvim-tree/nvim-web-devicons',\n'jalvesaq/vimcmdline',\n'junegunn/fzf',\n'junegunn/goyo.vim',\n'junegunn/limelight.vim',\n'junegunn/vim-easy-align',\n'voldikss/vim-floaterm',\n'uga-rosa/cmp-dictionary',\n'LuaLS/lua-language-server',\n})\n\n\nplugin discussions\n\n\ncmp config\n\nlocal kind_icons = {\n  Class = \"Ô¥Ø\",\n  Color = \"Ô£ó\",\n  Constant = \"Ô£æ\",\n  Constructor = \"Ôê£\",\n  Enum = \"ÔÖù\",\n  EnumMember = \"ÔÖù\",\n  Event = \"ÔÉß\",\n  Field = \"Ôõº\",\n  File = \"Ôúò\",\n  Folder = \"Ôùä\",\n  Function = \"Ôûî\",\n  Interface = \"ÔÉ®\",\n  Keyword = \"Ô†ä\",\n  Method = \"Ôö¶\",\n  Module = \"Ôíá\",\n  Operator = \"Ôöî\",\n  Property = \"Ô∞†\",\n  Reference = \"ÔíÅ\",\n  Snippet = \"Ôëè\",\n  Struct = \"ÔÜ≥\",\n  Text = \"Óòí\",\n  TypeParameter = \"Ôô±\",\n  Unit = \"Óàü\",\n  Value = \"Ô¢ü\",\n  Variable = \"Ôñ†\",\n}\n\nlocal cmp_ultisnips_mappings = require(\"cmp_nvim_ultisnips.mappings\")\nlocal cmp = require'cmp'\nlocal lspkind = require('lspkind')\n\nlocal mappings = {\n  [\"&lt;Tab&gt;\"] = cmp.mapping(\n    function(fallback)\n      cmp_ultisnips_mappings.compose { \"select_next_item\" }(fallback)\n    end,\n    { \"i\", \"s\", --[[ \"c\" (to enable the mapping in command mode) ]] }\n  ),\n  [\"&lt;S-Tab&gt;\"] = cmp.mapping(\n    function(fallback)\n      cmp_ultisnips_mappings.compose { \"select_prev_item\" }(fallback)\n    end,\n    { \"i\", \"s\", --[[ \"c\" (to enable the mapping in command mode) ]] }\n  ),\n  ['&lt;C-u&gt;'] = cmp.mapping(cmp.mapping.scroll_docs(-4), { 'i', 'c' }),\n  ['&lt;C-d&gt;'] = cmp.mapping(cmp.mapping.scroll_docs(4), { 'i', 'c' }),\n  ['&lt;C-Space&gt;'] = cmp.mapping(cmp.mapping.complete(), { 'i', 'c' }),\n  ['&lt;C-g&gt;'] = cmp.mapping({ i = cmp.mapping.abort(), c = cmp.mapping.close(), }),\n  ['&lt;CR&gt;'] = cmp.mapping.confirm({ select = false }),\n  [\"&lt;C-j&gt;\"] = cmp.mapping(\n    function()\n      cmp_ultisnips_mappings.compose { \"jump_forwards\", \"expand\" }(function ()\n\n      end)\n    end,\n    { \"i\", \"s\", --[[ \"c\" (to enable the mapping in command mode) ]] }\n  ),\n  [\"&lt;C-k&gt;\"] = cmp.mapping(\n    function(fallback)\n      cmp_ultisnips_mappings.jump_backwards(fallback)\n    end,\n    { \"i\", \"s\", --[[ \"c\" (to enable the mapping in command mode) ]] }\n  ),\n}\n\ncmp.setup({\nwindow = {\n    completion = cmp.config.window.bordered(),\n    documentation = cmp.config.window.bordered(),\n  },\nformatting = {\nformat = function(entry, vim_item)\n      -- Kind icons\n      vim_item.kind = string.format(\"%s %s\", kind_icons[vim_item.kind], vim_item.kind) --Concatonate the icons with name of the item-kind\n      vim_item.menu = ({\n        nvim_lsp = \"[LSP]\",\n        spell = \"[Spellings]\",\n        zsh = \"[Zsh]\",\n        buffer = \"[Buffer]\",\n        ultisnips = \"[Snip]\",\n        treesitter = \"[Treesitter]\",\n        calc = \"[Calculator]\",\n        cmp_nvim_r = \"[R]\",\n        nvim_lua = \"[Lua]\",\n        path = \"[Path]\",\n        nvim_lsp_signature_help = \"[Signature]\",\n        cmdline = \"[Vim Command]\"\n      })[entry.source.name]\n      return vim_item\n    end,\n    },\n-- completion = {\n  --   completeopt = 'menu,menuone,noinsert'\n  -- },\n  snippet = {\n    expand = function(args)\n      vim.fn[\"UltiSnips#Anon\"](args.body) \n    end,\n  },\n\nsources = cmp.config.sources({\n    { name = \"nvim_lsp\" },\n    { name = 'cmp_nvim_r' },\n    { name = 'nvim_lua' },\n    { name = \"ultisnips\" },\n    { name = \"dictionary\", keyword_length=4, },\n    { name = \"buffer\", option = { get_bufnrs = function()\n      return vim.api.nvim_list_bufs()\n    end\n    }},\n    { name = \"path\" },\n    { name = \"calc\" }\n  }),\n  mapping = mappings,\n})\n\n  -- Set up lspconfig.\n  --local capabilities = require('cmp_nvim_lsp').default_capabilities()\n  require('lspconfig')['r_language_server'].setup {\n    capabilities = capabilities\n  }\n\nrequire'cmp_nvim_r'.setup({\n  filetypes = {'r', 'rmd', 'quarto'},\n  doc_width = 58\n  })\n\n\nbasics\n\nlocal map = vim.keymap.set\nlocal opts = {noremap = true}\nvim.cmd([[\n\"    copy clipboard to register x for safe keeping\nnnoremap &lt;leader&gt;x :let @x=@*\n\"    paste registers into terminal\ntnoremap &lt;expr&gt; &lt;C-R&gt; '&lt;C-\\&gt;&lt;C-N&gt;\"'.nr2char(getchar()).'pi'\nset background=dark\ncolorscheme evening\nlet $FZF_DEFAULT_COMMAND = 'rg --files --hidden'\nset completeopt=menu,menuone,noinsert,noselect\nset number relativenumber\nset textwidth=80\nset cursorline\nset clipboard=unnamed\nset iskeyword-=_ \nset hlsearch   \nset splitright\nset hidden   \nset incsearch    \nset noswapfile\nset showmatch\nset ignorecase\nset smartcase\nset gdefault\nfiletype plugin on\nset encoding=utf-8\nset nobackup\nset nowritebackup\nset updatetime=300\nset signcolumn=yes\nset colorcolumn=80\nautocmd! User GoyoEnter Limelight\nautocmd! User GoyoLeave Limelight!\n\nset dictionary+=/usr/share/dict/words\nset thesaurus+=/Users/zenn/mthesaur.txt\n\nlet g:UltiSnipsSnippetDirectories=[\"UltiSnips\", \"my_snippets\"]\nlet g:UltiSnipsEditSplit=\"vertical\"\nlet g:UltiSnipsUsePythonVersion = 3\n\nautocmd FileType julia,python nnoremap &lt;buffer&gt; &lt;C-CR&gt;  :call VimCmdLineStartApp()&lt;CR&gt;\nautocmd FileType julia,python nnoremap &lt;buffer&gt; &lt;CR&gt;  :call VimCmdLineSendLine()&lt;CR&gt;\n]])\n\nmap('n', ':', ';', opts)\nmap('n', ';', ':', opts)\nmap('n', '&lt;leader&gt;u',':UltiSnipsEdit&lt;cr&gt;', opts)\nmap('n', '&lt;Space&gt;&lt;Space&gt;','&lt;C-d&gt;', opts)\nmap('n', '-','$', opts)\nmap('n', '&lt;leader&gt;w','vipgq', opts)\nmap('n', '&lt;leader&gt;v',':edit ~/.config/nvim/init.lua&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;n',':edit ~/.config/nvim/lua/basics.lua&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;a','ggVG', opts)\nmap('n', '&lt;leader&gt;t',':tab split&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;y',':vert sb3&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;0',':ls!&lt;CR&gt;:b&lt;Space&gt;', opts)\nmap('n', '&lt;localleader&gt;&lt;localleader&gt;','&lt;C-w&gt;w', opts)\nmap('n', '&lt;leader&gt;1','&lt;C-w&gt;:b1&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;2','&lt;C-w&gt;:b2&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;3','&lt;C-w&gt;:b3&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;4','&lt;C-w&gt;:b4&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;5','&lt;C-w&gt;:b5&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;6','&lt;C-w&gt;:b6&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;7','&lt;C-w&gt;:b7&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;8','&lt;C-w&gt;:b8&lt;cr&gt;', opts)\nmap('n', '&lt;leader&gt;9','&lt;C-w&gt;:b9&lt;cr&gt;', opts)\nmap('t',  'ZZ', \"q('yes')&lt;CR&gt;\", opts)\nmap('t',  'ZQ', \"q('no')&lt;CR&gt;\", opts)\nmap('v',  '-', '$', opts)\nmap('t',  '&lt;leader&gt;0','&lt;C-\\\\&gt;&lt;C-n&gt;&lt;C-w&gt;:ls!&lt;cr&gt;:b&lt;Space&gt;', opts)\nmap('t',  '&lt;Escape&gt;','&lt;C-\\\\&gt;&lt;C-n&gt;', opts)\nmap('t',  '&lt;localeader&gt;&lt;localleader&gt;','&lt;C-\\\\&gt;&lt;C-n&gt;&lt;C-w&gt;w', opts)\nmap('i',  '&lt;Esc&gt;', '&lt;Esc&gt;`^', opts)\n\n\nvim.api.nvim_create_autocmd(\n    { \"BufRead\", \"BufNewFile\" },\n    { pattern = { \"*.txt\", \"*.md\"}, command = \"setlocal spell\" }\n)\n\n\n\n\n\nSet up R\n\nvim.cmd([[\nlet R_auto_start = 2\nlet R_hl_term = 0\nlet R_clear_line = 1\nlet R_pdfviewer = \"zathura\" \nlet R_assign = 2\nlet R_latexcmd = ['xelatex']\naugroup rmarkdown\nautocmd!\nautocmd FileType rmd,r nnoremap &lt;buffer&gt; &lt;CR&gt;  :call SendLineToR(\"down\")&lt;CR&gt;\nautocmd FileType rmd,r nnoremap &lt;buffer&gt; &lt;space&gt;' :call RMakeRmd(\"default\")&lt;cr&gt;\nautocmd FileType rmd,r noremap &lt;space&gt;i :call RAction(\"dim\")&lt;cr&gt;\nautocmd FileType rmd,r noremap &lt;space&gt;h :call RAction(\"head\")&lt;cr&gt;\nautocmd FileType rmd,r noremap &lt;space&gt;p :call RAction(\"print\")&lt;cr&gt;\nautocmd FileType rmd,r noremap &lt;space&gt;q :call RAction(\"length\")&lt;cr&gt;\nautocmd FileType rmd,r noremap &lt;space&gt;n :call RAction(\"nvim.names\")&lt;cr&gt;\nautocmd FileType rmd,r vmap &lt;buffer&gt; &lt;CR&gt; &lt;localleader&gt;sd\nautocmd FileType rmd,r nmap &lt;buffer&gt; &lt;space&gt;j &lt;localleader&gt;gn\nautocmd FileType rmd,r nmap &lt;buffer&gt; &lt;space&gt;k &lt;localleader&gt;gN\nautocmd FileType rmd,r nmap &lt;buffer&gt; &lt;space&gt;l &lt;localleader&gt;cd\naugroup END\n]])\n\n\nAppendix Ubuntu tweaks\n\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/CitationBibTeX citation:@online{(ryy) glenn thomas2023,\n  author = {(Ryy) Glenn Thomas, Ronald},\n  title = {Setting up a Minimal Neovim Environment for Data Science Code\n    Development},\n  date = {2023-05-14},\n  url = {https://focusonr.org/posts/setupneovim},\n  langid = {en}\n}\nFor attribution, please cite this work as:\n(Ryy) Glenn Thomas, Ronald. 2023. ‚ÄúSetting up a Minimal Neovim\nEnvironment for Data Science Code Development.‚Äù May 14, 2023. https://focusonr.org/posts/setupneovim."
  },
  {
    "objectID": "posts/dockerize_simple/index.html",
    "href": "posts/dockerize_simple/index.html",
    "title": "A simple process to get your Shiny app online (securely).",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash"
  },
  {
    "objectID": "posts/dockerize_simple/index.html#select-a-hosting-service",
    "href": "posts/dockerize_simple/index.html#select-a-hosting-service",
    "title": "A simple process to get your Shiny app online (securely).",
    "section": "3.1 Select a hosting service",
    "text": "3.1 Select a hosting service\nThere are a number of cloud based server options: Microsoft Azure, Oracle, Google Cloud, Amazon AWS EC2, Digital Ocean to name a few. Each has their own approach to setting up a custom virtual server. Several have free or low-cost service tiers available.\nAn overview of the process with EC2 follows. (Detailed instructions for AWS EC2 were described in an earlier post: https://focusonr.org/posts/setupaws/)\nstep 0. Create an AWS account or sign in and navigate to the EC2 dashboard. step 1. Set up an working environment with AWS server. a. define secure shell (ssh) key-pair b. configure firewall. c.¬†obtain static IP. d.¬†obtain domain name.\nOnce the environment is set up\nstep 2. a. select instance operating system (ubuntu) and type (t2-micro) b. launch server\nOnce the server is available connect via ssh.\nssh -i \"~/.ssh/power1_app_ssh.pem\"  ubuntu@rgtlab.org\nor using the config setup described in Tip 1.\nssh rgtlab.org \nThe only necessary software to install is Docker and Caddy. Install them with the following commands:\nsudo apt install docker.io\nsudo apt install -y debian-keyring debian-archive-keyring apt-transport-https\ncurl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | \\\nsudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg\ncurl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | \\\nsudo tee /etc/apt/sources.list.d/caddy-stable.list\nsudo apt update\nsudo apt install caddy\nAt this point we have a customized virtual server with a static IP address, unique domain name and firewall in place. In other words, items 1, 2, and 3 from our ‚Äòhosting‚Äô list above are taken care of."
  },
  {
    "objectID": "posts/dockerize_simple/index.html#website",
    "href": "posts/dockerize_simple/index.html#website",
    "title": "A simple process to get your Shiny app online (securely).",
    "section": "3.2 Website",
    "text": "3.2 Website\nTo configure the web server and containerize our app we need to add three files to the server, to go along with our Shiny app in the power1_app directory and move all files to the server.\nThe three configuation files are:\n\na Docker configuration file (default name Dockerfile)\n\n\n\n  Photo by Ian Taylor on Unsplash \nWe‚Äôll use docker to access R/Shiny. Here is our minimal dockerfile:\n\nShow the code\nFROM rocker/shiny:4.2.0\nCOPY /power1_shiny/* /srv/shiny-server/\nCMD [\"/usr/bin/shiny-server\"]\n\nThis file instructs Docker to build a container based on a Rocker/Shiny image (which is a ubuntu image with R and Shiny installed) then copy into the container the power1_shiny directory containing the shiny code and finally launch Shiny server listening on (default) port 3838. We placed the power1_shiny/app.R code in the default location /srv/shiny-server so we only need to start the server and it will find the shiny program.\n\na Caddy web server configuration file (default name Caddyfile)\n\nWe‚Äôll use Caddy as our web server. Caddy is an open-source tool that has the very useful feature of automating the acquiring and installing of an SSL certificate. (An SSL cert is required by most browsers to use the encrypted communication protocol https.)\nCaddy is configured with a file named Caddyfile. We use the caddy configuration file to specify three critical things.\n\nthe site domain name.\nthe authentication pair login/hash-password, for each user and\nthe ‚Äòreverse proxy‚Äô map that redirects requests to port 443 (ssl port) onto port 3838 (Shiny port) in the docker container.\n\nOur barebones Caddyfile looks like this:\n\nCaddyfile: Show the code\nrgtlab.org {\n    basicauth * /power1_shiny/* {\n        bob $2a$14$pYWd5O7JqNeGLS4m4CKkzemM2pq5ezn9bcTDowofZTl5wRVl8NTJm\n    }\n    root * /var/www/html\n    handle_path /power1_shiny/* {\n            reverse_proxy 0.0.0.0:3838\n    }\n    file_server\n}\n\nWe can accomplish what we need for items 4, 5, 6 and 7 through the Caddyfile.\nNote:\n\nrgtlab.org is our domain name\nthe basicauth directive specifies login credentials for bob (password: vanilla47)\nhandle_path maps all https requests to port 3838 where Shiny is listening.\nroot directive tells Caddy where to look for the index.html file.\n\nProviding our servers domain name, rgtlab.org is sufficient to initiate an exchange with the letsencrypt service to generates an SSL certificate.\nAnd the third file is the index.html file to provide a launch page for the app.\n\nindex.html: Show the code\n<!DOCTYPE html>\n<html>\n  <body>\n    <h1>Power1 app</h1>\n    <ul>\n      <li><a href=\"./power1_shiny/\">Power1 app</a></li>\n    </ul>\n  </body>\n</html> \n\nOnce the three config files and the the Shiny code directory are in place copy the power1_app directory to the server rgtlab.org with the command:\nscp -i \"~/.ssh/power1_app_ssh.pem\" -r ~/prj/power1_app/  ubuntu@rgtlab.org:~\nLastly, ssh to the server and cd to power1_app directory\ncopy Caddyfile to location caddy expects in /etc/caddy directory\nsudo cp ./Caddyfile /etc/caddy/Caddyfile \ncopy index.html to location caddy expects in /var/www/html directory\ncp  ./index.html /var/www/html/index.html \nand run the following command to\nbuild the Docker container on rgtlab.org\ndocker build -t power1_image .\ncreate container and run\ndocker run -d --name=power1_shiny -p 3838:3838 --restart=always power1_image\nrestart Caddy\nsudo systemctl reload caddy\nApp launch page is now available at https://rgtlab.org.\nand you‚Äôre good to go!"
  },
  {
    "objectID": "posts/dockerize_simple/index.html#tip-construct-ssh-config-file.",
    "href": "posts/dockerize_simple/index.html#tip-construct-ssh-config-file.",
    "title": "A simple process to get your Shiny app online (securely).",
    "section": "3.3 Tip construct ssh config file.",
    "text": "3.3 Tip construct ssh config file.\nFor convenience, construct a config file in ~/.ssh as:\nHost rgtlab.org\nHostName 13.57.139.31 # static IP\nStrictHostKeyChecking no  #avoid known host file error message\nUser ubuntu # default user on ubuntu server\nPort 22  # the default port ssh uses\nIdentityFile ~/.ssh/power1_app.pem\nthen you can ssh into the new server with\nsh> ssh rgtlab.org"
  },
  {
    "objectID": "posts/setupneovim/test.html",
    "href": "posts/setupneovim/test.html",
    "title": "Focus on R: a new qblog",
    "section": "",
    "text": "duplicated(1:10)\n\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n\nduplicated(c(1:5,5))\n\n[1] FALSE FALSE FALSE FALSE FALSE  TRUE\n\nlibrary(ggplot2)\n\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/CitationBibTeX citation:@online{(ryy) glenn thomas,\n  author = {(Ryy) Glenn Thomas, Ronald},\n  url = {https://focusonr.org/posts/setupneovim/test.html},\n  langid = {en}\n}\nFor attribution, please cite this work as:\n(Ryy) Glenn Thomas, Ronald. n.d. https://focusonr.org/posts/setupneovim/test.html."
  },
  {
    "objectID": "posts/setupaws/index.html#select-and-launch-instance",
    "href": "posts/setupaws/index.html#select-and-launch-instance",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "Select and launch instance",
    "text": "Select and launch instance\n\nFrom ‚ÄúQuick Start‚Äù in the EC2 dashboard select an operating system for the server. Our recommendation is the Ubuntu OS. Ubuntu is based on linux. Click the Ubuntu button.\n\n\nName the server, say power1\n\n\nNext choose an instance type, e.g.¬†‚Äút2-micro‚Äù. Different instance types are combinations of, processors, memory, storage capacity, and network performance.\nclick Configure Instance Details\nchoose a Key pair (use power1_app.rsa from your environment) .\nAdd security group, e.g.¬†‚Äòpower1_firewall‚Äô from your environment.\nchoose 30 GB of EBS General Purpose (SSD) or Magnetic storage. Thirty GBs is the maximum allowed in the ‚ÄòFree tier‚Äô of servers on AWS. In our experience smaller disk sizes can lead to problems.\nclick Launch Instance\n\nto Launch the Instance."
  },
  {
    "objectID": "posts/server_setup_aws_console/index.html",
    "href": "posts/server_setup_aws_console/index.html",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash"
  },
  {
    "objectID": "posts/server_setup_aws_console/index.html#select-a-hosting-service",
    "href": "posts/server_setup_aws_console/index.html#select-a-hosting-service",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "2.1 Select a hosting service",
    "text": "2.1 Select a hosting service\nThere are a number of cloud based server options to choose from: Microsoft Azure, Oracle, Google Cloud, Amazon AWS EC2, Digital Ocean to name a few. Each has their own approach to setting up a custom virtual server. Several have free or low-cost service tiers available.\nIn this post we‚Äôll provide a step-by-step description of the process with Amazon Web Services Elastic Compute Cloud (AWS EC2).\nAWS is a reasonable choice for setting up a small custom server. Its not the cheapest option, but the system is very well documented and, in our experience, reliable.\nTo start, open the EC2 console by visiting the URL:\n   https://aws.amazon.com/console\n(see margin figure)\nIn the console window choose regional service. For me its ‚ÄúN. California‚Äù.\n\n\n\n\n\nAWS console\n\n\nNext create an account, or sign in, and once you‚Äôre logged in navigate to the EC2 dashboard. Its by way of the dashboard that we‚Äôll define the parameters for the type of server to launch and the mechanisms for communicating with it."
  },
  {
    "objectID": "posts/server_setup_aws_console/index.html#aws-working-environment",
    "href": "posts/server_setup_aws_console/index.html#aws-working-environment",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "2.2 AWS Working Environment",
    "text": "2.2 AWS Working Environment\nAlong with selecting a server we‚Äôll need to set up a working environment. We recommend setting up the working environment before launching the server, as it saves some back and forth. The working environment consists of four main components:\n\nA secure shell (ssh) key-pair to allow us to remotely and securely login to the virtual server once its launched.\nA firewall which will restrict server access to only secure connections. The firewall closes off all incoming traffic except through those ports specifically named.\n\nA static IP address. This is required for maintaining the link between the domain name and the server when rebooting. (The default is for the instance/server to be assigned a new IP address each time its rebooted).\n\nand 4. A domain name, say rgtlab.org. A domain name is not required but will facilitate collaborator access by not needing to use the IP address directly.\n\n2.2.1 Ssh key pair\nThe first time we create an AWS account we need to exchange an ssh key pair with AWS. The pairs consist of a private and a public key. The pair of keys will allow us to login securely to any server we launch on EC2. We can generate an ssh key pair in one of two ways in EC2. Either, locally, on our workstation and upload the public key to EC2, or have EC2 generate the key pair and download the private key.\nFor the first option we create a directory on our workstation to hold the keys and navigate to it. e.g.¬†~/.ssh. Generate the keys with the command\nssh-keygen -m PEM\n‚ÄúPEM‚Äù defines the key format. More information on public key authentication can be found here. In the interactive dialog name the key prefix something like power1_app.pem. The dialog will ask for a passphrase. Enter one for an additional level of security, but its not required. The ssh-keygen program will generate two files: power1_app.pem.pub and power1_app.pub\nTo complete the process return to the EC2 dashboard select Actions and then Import key pairin the left panel. Enter the name power1_app and select the Browse button. Navigate to the file power1_app.pem.pub in the directory ~/.sshand and select the Import key pair button at the bottom of the page.\nFor the second approach select Create key pair botton in the upper right of the page.\nA form appears and asks for a name. Enter something like power1_app. Select RSA for key pair type and .pem for key file format.\nGive the pair a name, say power1_app, and the keys will be created and the private key power1_app.pem will be downloaded to our local machine to the ~/.ssh directory. Change the access permissions for the private key with the following command:\nsudo chmod 600 power1_app.pem\n\n\n2.2.2 Firewall\nTo create a firewall click on Network settings in the left hand panel. Choose Create security group and select Allow SSH traffic and Allow HTTPS traffic. This will create a firewall that leaves open only ports 22 and 443, for ssh and https incoming traffic respectively. The default name for the firewall will be something like launch-wizard-6. name the security group power1_firewall.\n\n\n2.2.3 Static IP address\nThe next step is to use the elastic IP service to get a static IP that can be assigned to the server. Navigate to Network and Security again and select Allocate Elastic IP. An IP will be assigned from the EC2 pool of available IPv4 IP addresses.\n\n\n2.2.4 Domain Name\nTo obtain a dedicated domain name go to Amazon route 53 to select a domain name and associate it with our static IP.\nOnce a domain name is acquired, e.g.¬†rgtlab.org, associate it with our static IP address. This can be done via the Route 53 service. To associate domain name rgtlab.org with elastic IP do the following in Route 53:\n\nclick on hosted zones in side panel\nclick on rgtlab.org in center panel\nclick on checkbox for rgtlab.org type=A line\nthen click on edit record in right panel\nchange IP address to the static IP (e.g.¬†13.57.139.31)."
  },
  {
    "objectID": "posts/server_setup_aws_console/index.html#select-and-launch-instance",
    "href": "posts/server_setup_aws_console/index.html#select-and-launch-instance",
    "title": "Set up a virtual server on AWS (in anticipation of hosting Shiny apps)",
    "section": "2.3 Select and launch instance",
    "text": "2.3 Select and launch instance\n\nFrom ‚ÄúQuick Start‚Äù in the EC2 dashboard select an operating system for the server. Our recommendation is the Ubuntu OS. Ubuntu is based on linux. Click the Ubuntu button.\n\n\nName the server, say power1\n\n\nNext choose an instance type, e.g.¬†‚Äút2-micro‚Äù. Different instance types are combinations of, processors, memory, storage capacity, and network performance.\nclick Configure Instance Details\nchoose a Key pair (use power1_app.rsa from your environment) .\nAdd security group, e.g.¬†‚Äòpower1_firewall‚Äô from your environment.\nchoose 30 GB of EBS General Purpose (SSD) or Magnetic storage. Thirty GBs is the maximum allowed in the ‚ÄòFree tier‚Äô of servers on AWS. In our experience smaller disk sizes can lead to problems.\nclick Launch Instance\n\nto Launch the Instance."
  },
  {
    "objectID": "posts/server_setup_aws_cli/index.html",
    "href": "posts/server_setup_aws_cli/index.html",
    "title": "Using the AWS command line interface to launch an EC2 server",
    "section": "",
    "text": "Photo by Nathan Waters on Unsplash"
  },
  {
    "objectID": "posts/server_setup_aws_cli/index.html#create-security-group-script",
    "href": "posts/server_setup_aws_cli/index.html#create-security-group-script",
    "title": "Using the AWS command line interface to launch an EC2 server",
    "section": "2.1 Create security group script",
    "text": "2.1 Create security group script\n#!/usr/bin/env bash\n# The script generates a new security group \n# the group name is \"max_restrict\"\n# only ports 22 and 443 are open. \n# to open other ports replicate the last paragraph and change the port number. \n# Will fail if group name \"max_restrict\" in already in use. \n# reads vpc_id from the environment variables set in .zshrc\n#\naws ec2 create-security-group \\\n    --group-name max_restrict \\\n    --description \"most restrictive: ports 22 and 443 only\" \\\n    --tag-specifications \\\n    'ResourceType=security-group,Tags=[{Key=Name,Value=max_restrict}]' \\\n    --vpc-id $vpc_id \nwait    \nexport security_grp=`aws ec2 describe-security-groups | \\\njq -r '.SecurityGroups[] | select(.GroupName==\"max_restrict\").GroupId'`\n\naws ec2 authorize-security-group-ingress \\\n    --group-id $security_grp \\\n    --protocol tcp \\\n    --port 22 \\\n    --cidr \"0.0.0.0/0\" \n\n\naws ec2 authorize-security-group-ingress \\\n    --group-id $security_grp \\\n    --protocol tcp \\\n    --port 443 \\\n    --cidr \"0.0.0.0/0\""
  },
  {
    "objectID": "posts/server_setup_aws_cli/index.html#create-new-key-pair-with-a-project-name-flag",
    "href": "posts/server_setup_aws_cli/index.html#create-new-key-pair-with-a-project-name-flag",
    "title": "Using the AWS command line interface to launch an EC2 server",
    "section": "2.2 Create new key pair with a project name flag",
    "text": "2.2 Create new key pair with a project name flag\n\n\n#!/usr/bin/env bash\n#while getopts n: flag\n#do\n    #case \"${flag}\" in\n        #n) key_pair_name=${OPTARG};;\n    #esac\n#done\nbase=`basename $PWD`\nif [ -z \"$1\" ]\nthen\n  key_pair_name=$base\nelse\n  key_pair_name=\"$1\"\nfi\n\necho \"key_pair_name is $key_pair_name\"\n\nread -p \"Continue (y/n)?\" CONT\nif [ \"$CONT\" = \"y\" ]; then\n  echo \"Here we go!\";\nelse\n  echo \"too bad. bye.\"; exit; \nfi\n\ncd ~/.ssh \nrm -f  ~/.ssh/$key_pair_name.pem\naws ec2 create-key-pair  --key-name  $key_pair_name \\\n   --query 'KeyMaterial' --output text &gt; ~/.ssh/$key_pair_name.pem\n\nwait\nchmod 600 ~/.ssh/$key_pair_name.pem\nstart up script. awscli.sh\n\n\n#!/usr/bin/env bash\nwhile getopts s:t:k:p: flag\ndo\n    case \"${flag}\" in\n        s) size=${OPTARG};;\n        t) type=${OPTARG};;\n        k) key_name=${OPTARG};;\n        p) proj_name=${OPTARG};;\n    esac\ndone\nbase=`basename $PWD`\nif [ -z \"$proj_name\" ]\nthen\n  proj_name=$base\nfi\n\n\n\nif [ -z \"$type\" ]\nthen\n type=\"t2.micro\" \nfi\n\nif [ -z \"$size\" ]\nthen\n  size=30\nfi\n\necho \"Review parameters: \"\necho \"---\"\necho \"proj_name is $proj_name\"\necho \"key_name is $key_name\"\necho \"vpc_id: $vpc_id\";\necho \"subnet_id: $subnet_id\";\necho \"ami_id: $ami_id\";\necho \"security_grp: $security_grp\";\necho \"static_ip: $static_ip\";\necho \"type: $type\";\necho \"size: $size\";\n\nread -p \"Review Notes (y/n)?\" NOTES\nif [ \"$NOTES\" = \"y\" ]; then\necho \"Notes on currect parameters:\"\necho \"security group should be in place already. check on EC2. \nIf not, run ./awscli_create_security.sh. \nKey pair should be in place. check in ~/.ssh. \nIf not run ./create_keypair.sh. \nami id is for ubuntu linux 22.04 LTS. \nIf not what is desired check EC2 list of instances. \";\nelse\n  echo \"I guess you know what you're doing\"; \nfi\n\nread -p \"Continue (y/n)?\" CONT\nif [ \"$CONT\" = \"y\" ]; then\n  echo \"Here we go!\";\nelse\n  echo \"too bad. bye.\"; exit; \nfi\n\n\n#cd ~/.ssh \n#rm -f  ~/.ssh/$proj_name.pem\n#aws ec2 create-key-pair  --key-name  $proj_name \\\n#   --query 'KeyMaterial' --output text &gt; ~/.ssh/$proj_name.pem\n#\n#wait\n#chmod 600 ~/.ssh/$proj_name.pem\n\n\naws ec2 run-instances \\\n    --image-id $ami_id \\\n    --count 1 \\\n    --instance-type $type \\\n    --key-name $proj_name \\\n    --security-group-ids $security_grp \\\n    --subnet-id $subnet_id \\\n    --block-device-mappings \"[{\\\"DeviceName\\\":\\\"/dev/sda1\\\",\\\"Ebs\\\":{\\\"VolumeSize\\\":$size}}]\" \\\n    --tag-specifications \"ResourceType=instance,Tags=[{Key=Name,Value=$proj_name}]\"  \\\n    --user-data file://~/Dropbox/prj/c060/aws_startup.sh\nwait\niid=`aws ec2 describe-instances --filters \"Name=tag:Name,Values=$proj_name\" | \\\n    jq -r '.Reservations[].Instances[].InstanceId'`\n\naws ec2 associate-address --public-ip $static_ip --instance-id $iid\nwait\nssh -o \"StrictHostKeyChecking no\" rgtlab.org \\\n    'cd docker_compose_power1_app; sudo docker compose up -d'\naws_startup.sh\n\n#!/bin/bash snap install docker git clone\nhttps://rgt47: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@github.com/rgt47/docker_compose_power1_app.git\nwait cp -R docker_compose_power1_app/ ~ubuntu cd ~ubuntu sudo chown -R\nubuntu:ubuntu ~ubuntu/docker_compose_power1_app/ cd\n~ubuntu/docker_compose_power1_app ```\n\n::: {.callout-tip}\n\n## Tip 1.\n\nFor convenience, construct a `config` file in `~/.ssh` as:\n\n``` sh\nHost rgtlab.org\nHostName 13.57.139.31 # static IP\nUser ubuntu # default user on ubuntu server\nPort 22  # the default port ssh uses\nIdentityFile ~/.ssh/power1_app_ssh.rsa\nthen we can ssh into the new server with\nsh&gt; ssh rgtlab.org\n:::\nChange the access permissions: sudo chmod 600 power1ssh.pem to be more restrictive."
  },
  {
    "objectID": "posts/server_setup_aws_cli/index.html#appendix-1",
    "href": "posts/server_setup_aws_cli/index.html#appendix-1",
    "title": "Using the AWS command line interface to launch an EC2 server",
    "section": "2.3 Appendix 1 Set up AWS IAM",
    "text": "2.3 Appendix 1 Set up AWS IAM\nTo initiate batch processing via the AWS cli app. Set up aws access via the aws configure program.\nTo get the needed credentials to configure command line aws use the AWS IAM service.\nDetails follow:\nLog into AWS console.\nSearch for IAM service. Navigate to IAM dashboard.\nSelect Users in left hand panel.\nThen select Add Users button (in upper right).\nThen enter a User name in the form. Click Next (lower right)\nThen Create User.\nClick on the user name\nIn the page that comes up. Select Security Credentials tab (center of page).\nUnder Access Keys panel click Create access key (right side or bottom of panel).\nClick Command Line Interface CLI\nand at the bottom of the page click the checkbox ‚ÄúI understand‚Ä¶‚Äù.\nFinally select Create access key and\nchoose Download .csv file (lower right).\nNavigate Download screen to local ~/.aws directory.\nClick Done\nNow in the terminal on your workstation, configure the aws cli app via the command.\n aws configure \nEnter info from the credentials file just downloaded. After entering the AWS Access Key ID and AWS Secret Access Key information you are asked for a Region, (my region is us-west-1), and an output format (suggested output format is JSON)."
  },
  {
    "objectID": "posts/install_mint_on_macbook/index.html",
    "href": "posts/install_mint_on_macbook/index.html",
    "title": "Install Linux Mint on macbook Pro",
    "section": "",
    "text": "The target MacBook is a 13-inch, 2016, Four Thunderbolt 3 Ports.\n\n\n\nISO file is 2.5 GB in size.\nDownload torrent file from website \nUse app on macbook pro running macos, say Transmission to open torrent file and download. Takes about 6 minutes via ethernet connection.\nTransfer iso file to USB drive, ‚Äúburn‚Äù. use Easy https://etcher.balena.io/\nInsert the USB flash drive into the target mac and reboot. Hold the ALT key to allow booting from the external USB drive. (The mac will offer icons for the hard drive and the USB drive).\nFrom the Grub menu choose ‚ÄúStart Linux Mint 21.1 Cinnamon 64-bit‚Äù\nThere will be a long period with just the mint logo on the screen, maybe 5 minutes. (This is different from most other distro installs in our experience, but is more consistent with an Apple or Windows install.)\nFinally a linux mint desktop will appear. There is one icon on the screen lfbeled ‚Äúinstall Linux Mint‚Äù. Double click it.\nA setup dialog will start. First Language, the Network, then codexes, the options for a fresh install or something else. Next Location, then name a root user and assign a password.\nThe Linux Mint 21.1 Vera download site is here\nCould I use Docker?\nThis seems like genius:\n alias nvim=\"docker run -it -v `pwd`:/mnt/volume --workdir=/mnt/volume anatolelucet/neovim:stable\"\nalias nvim=\"docker run -it -v `pwd`:/mnt/volume --workdir=/mnt/volume anatolelucet/neovim:nightly\"\n\nstep one set up parallels tools. Use ‚ÄúActions‚Äù menu to select ‚Äúinstall parallels tools. This will point CD/DVD device at the iso image. Open the DVD in‚ÄùFiles‚Äù. Open install parallel tool-gui.\nmacbook harddrive will be available under share\nFirefox is installed. Add vinium-ff extension."
  },
  {
    "objectID": "posts/install_mint_on_macbook/index.html#install-mint-onto-a-macbook-pro",
    "href": "posts/install_mint_on_macbook/index.html#install-mint-onto-a-macbook-pro",
    "title": "Install Linux Mint on macbook Pro",
    "section": "",
    "text": "The target MacBook is a 13-inch, 2016, Four Thunderbolt 3 Ports."
  },
  {
    "objectID": "posts/install_mint_on_macbook/index.html#get-an-iso-file-from-the-mint-website",
    "href": "posts/install_mint_on_macbook/index.html#get-an-iso-file-from-the-mint-website",
    "title": "Install Linux Mint on macbook Pro",
    "section": "",
    "text": "ISO file is 2.5 GB in size.\nDownload torrent file from website \nUse app on macbook pro running macos, say Transmission to open torrent file and download. Takes about 6 minutes via ethernet connection.\nTransfer iso file to USB drive, ‚Äúburn‚Äù. use Easy https://etcher.balena.io/\nInsert the USB flash drive into the target mac and reboot. Hold the ALT key to allow booting from the external USB drive. (The mac will offer icons for the hard drive and the USB drive).\nFrom the Grub menu choose ‚ÄúStart Linux Mint 21.1 Cinnamon 64-bit‚Äù\nThere will be a long period with just the mint logo on the screen, maybe 5 minutes. (This is different from most other distro installs in our experience, but is more consistent with an Apple or Windows install.)\nFinally a linux mint desktop will appear. There is one icon on the screen lfbeled ‚Äúinstall Linux Mint‚Äù. Double click it.\nA setup dialog will start. First Language, the Network, then codexes, the options for a fresh install or something else. Next Location, then name a root user and assign a password.\nThe Linux Mint 21.1 Vera download site is here\nCould I use Docker?\nThis seems like genius:\n alias nvim=\"docker run -it -v `pwd`:/mnt/volume --workdir=/mnt/volume anatolelucet/neovim:stable\"\nalias nvim=\"docker run -it -v `pwd`:/mnt/volume --workdir=/mnt/volume anatolelucet/neovim:nightly\"\n\nstep one set up parallels tools. Use ‚ÄúActions‚Äù menu to select ‚Äúinstall parallels tools. This will point CD/DVD device at the iso image. Open the DVD in‚ÄùFiles‚Äù. Open install parallel tool-gui.\nmacbook harddrive will be available under share\nFirefox is installed. Add vinium-ff extension."
  }
]