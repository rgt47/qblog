<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Thomas Lab</title>
<link>https://focusonr.org/blog/</link>
<atom:link href="https://focusonr.org/blog/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.7.25</generator>
<lastBuildDate>Tue, 10 Feb 2026 08:00:00 GMT</lastBuildDate>
<item>
  <title>Install Linux Mint on a Macbook Air</title>
  <link>https://focusonr.org/posts/03-installmintonmacbook/installmintonmacbook/</link>
  <description><![CDATA[ 





<div class="no-row-height column-margin column-container"><div class="">
<p><img src="https://focusonr.org/posts/03-installmintonmacbook/installmintonmacbook/img/mint.jpg" class="img-fluid"></p>
</div></div><section id="introduction" class="level1 page-columns page-full" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>The specific goal of this “DIY” project is to refurbish a seven year old macbook air laptop with a modern linux operating system. The OS we’ll focus on for this post is <code>Linux Mint 22</code>. Why Mint? Well, as its been, “since the beginning” of the linux era (circa 1993) the main challenge to installing a linux distribution on almost any PC or mac is wrestling with the hardware drivers: notably video, audio, trackpad and power management drivers. The Mint distro provides a solution the drivers needed for our target macbook air, making the install much, much more straightforward. There are many other considerations that can go into choosing a linux distribution, but for our purposes, this is the main one.</p>
<p>To get started acquire a copy of the Mint distribution. The simplist way to do this is to download the latest Linux Mint ISO image file using an already setup workstation, and “burn” it onto a USB drive. For example use a “mac” laptop with <code>macos</code> installed. Confirm internet connectivity is available (Wifi or ethernet), and the machine has at least one external port.</p>
<section id="install-mint-on-a-macbook-air" class="level2 page-columns page-full" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="install-mint-on-a-macbook-air"><span class="header-section-number">1.1</span> Install Mint on a macbook air</h2>
<p>The target machine is a 2016 13-inch MacBook Air with four Thunderbolt 3 Ports.</p>
<p>To start the process download an <code>iso</code> file from the Mint website. The current “Virginia” version of Mint <code>iso</code> file is 3.07 GB in size. The “Cinnamon” edition is recommended.</p>
<p>Specifically, download the torrent file for Linux Mint 22 Wilma Cinnamon edition. <code>linuxmint-22-cinnamon-64bit.iso.torrent</code> Install the mac app <a href="https://transmissionbt.com/download">Transmission</a> and add the torrent file.</p>
<p>Also download the associated <code>sha256sum.txt</code> file.</p>
<p>To check the integrity of your local ISO file, generate its SHA256 checksum and compare it to the content of the <code>sha256sum.txt</code> file:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> sha256sum <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-b</span> linuxmint-22-cinnamon-64bit.iso</span></code></pre></div>
<p>We can transfer the <code>iso</code> file to a <code>USB</code> flash drive using one of several methods. On <code>macos</code> we suggest using the app <code>balanaEtcher</code>. You can download <a href="https://etcher.balena.io/">balanaEtcher</a></p>
<p>Insert the bootable <code>USB</code> flash drive into the target macbook and reboot. Hold the <code>ALT</code> key while the machine reboots and you’ll be presented with a screen offering boot drive options. Select the icon for the USB drive. A <code>grub</code> menu will appear.<sup>1</sup></p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp; <strong>GNU GRand Unified Bootloader (GRUB)</strong>. “When your Linux operating system starts up, GRUB is the first program that runs. It loads the kernel of the operating system, and then the kernel loads the rest of the operating system, including the shell, the desktop environment, and other operating system features.” <font size="1"> <a href="&quot;https://www.codecademy.com/resources/blog/grub-linux/&quot;">codecademy.com</a> </font> </p></div></div><p>From the <code>Grub</code> menu choose <code>Start Linux Mint 22 Cinnamon 64-bit</code>. and the Mint install program will start.</p>
<p>A <code>linux mint</code> desktop will appear allowing you to “test drive” <code>Mint</code> or to continue the install by double clicking the icon labeled <code>install Linux Mint</code>.</p>
<p>A setup dialog will start. Select, in sequence</p>
<ul>
<li>Language (English for us),</li>
<li>Network (If ethernet is available startup program will autmatically connect. If wifi only, not needed at this point, suggest skip),</li>
<li>codexes (check box “install multimedia codecs”),</li>
<li>options for installation type (choose “erase disk and install linux mint”).</li>
<li>Location (Los Angeles for us),</li>
<li>name a user who will have administrator privileges, assign a password, and a hostname.</li>
</ul>
<p>After these screens the install process will proceed without additional user input.</p>
<p>When complete connect the target machine to the Internet. As mentioned above, if you have ethernet connectivity plug the cable directly into the target macbook and Mint should connect automatically to the internet. For wireless wifi access Mint may or may not recognize hardware modem. If not use a supported external modem e.g.&nbsp;Panda Wireless modem. Panda is supported since Mint 22 has <code>Ralink RT5372</code> drivers installed.</p>
<p>The final hardware related step is to add a second monitor, if available, via <code>HDMI</code> or “USB-C”.</p>
<p>Thats it. The base system is ready to go. Reboot and login with the admin username and password you provided earlier.</p>
</section>
</section>
<section id="setup-configuration" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Setup configuration</h1>
<p>Set keyboard and trackpad preferences:</p>
<pre><code>* Open `Mouse and Touchpad` in settings. Turn on  `Reverse scroll`.

* Open `Keyboard` &gt; `Layouts` &gt; `Options` &gt; `Caps Lock behavior` and select
  `Swap Esc` and `Caps-Lock`. This is an important setting for `vim` use. 

* Open `Shortcuts` &gt; `Windows`. 
    *  Set `Maximize window` to `Super-f`
    *  Set `Unmaximize window` to `Super-g`
    *  Set `Close window` to `Super-q`
  * Move window to other monitor `Shift-Super-UpArrow`</code></pre>
<p>Next configure the displays.</p>
<ol type="1">
<li>On a two monitor sysem open Display menu (press <code>command</code> key to open menu and search for “display”). Select the macbook as the primary monitor with 1920x1200 (thinkpad) resolution. Set <code>Monitor scale</code> at 150% to increase default font size in apps. Second monitor (e.g.&nbsp;Dell) should be set at <code>3840x2160</code>.</li>
</ol>
</section>
<section id="additional-software-setup" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Additional Software setup</h1>
<p>Copy files from Host to new Mint machine</p>
<p>Connect to new machine via ssh from mac laptop</p>
<p>First on the new machine (zz)</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zz</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> sudo apt install openssh-server</span>
<span id="cb3-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zz</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> ip route</span></code></pre></div>
<p>get IP for target from the output to <code>ip route</code>, say 10.0.1.196</p>
<p>Secure copy key files over. Key files are</p>
<ul>
<li>.vimrc</li>
<li>.zshrc</li>
<li>.vim directory (contains <code>plug</code> and <code>ultisnips</code>) place all key files in dotfiles folder kickstart.</li>
</ul>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mac</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> scp ~/Dropbox/dotfiles/kickstart/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span> z@10.0.1.196:~</span></code></pre></div>
<p>Copy over test workspace</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mac</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> scp ~/work/teaching/fmph243b/project1  z@10.0.1.196:~</span></code></pre></div>
<p>Next</p>
<ul>
<li>Update the <code>apt</code> “listings” and</li>
<li>install basic utilities <code>fzf</code>,<code>ripgrep</code>, <code>git</code>, <code>zsh</code> and plugins, as well as</li>
<li>major applications <code>R</code>, <code>vim</code>, and <code>zathura</code> with the following commands:</li>
</ul>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt update</span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt upgrade <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span></span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb6-4">r-base-core terminator eza tree zsh git vim fzf ripgrep <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb6-5">autojump zsh-autosuggestions <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb6-6">zathura <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span></span></code></pre></div>
</section>
<section id="miscellaneous-extra-steps-for-software-install." class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Miscellaneous extra steps for software install.</h1>
<p>Run bash shell script <code>~/Dropbox/dotfiles/set_up_links.sh</code> to set up symbolic links (e.g.&nbsp;<code>ln -s ~/Dropbox/prj ~/prj</code>). See Appendix 1 below for details.</p>
<p>Make <code>zsh</code> the default shell.</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> chsh <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-s</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> zsh<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<p>Set up the shell (zsh) per the post <a href="https://focusonr/settingupshell">link to set up terminal post</a></p>
<p>Install <code>zotero</code> and <code>docker</code> using software manager and set up syncing (login: rgthomas)</p>
<p>add <code>vimium</code> extension to <code>firefox</code></p>
<p>Testing: Should be able to render both Rmd and qmd files.</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> c176</span>
<span id="cb8-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">vm</span> </span>
<span id="cb8-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ZT</span></span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">po</span></span>
<span id="cb8-6"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> setupmint</span>
<span id="cb8-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">quarto</span> render index.qmd <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--to</span> pdf</span></code></pre></div>
<p>Finish with Dropbox to transfer working environment</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install nautilus-dropbox</span>
<span id="cb9-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dropbox</span> autostart y</span>
<span id="cb9-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dropbox</span> start <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span></span></code></pre></div>
<p>Dropbox startup process will launch a “Sign in” web page. Login with Dropbox credentials through web page.</p>
</section>
<section id="appendix-1.-script-to-set-up-links-from-local-home-to-dropbox" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Appendix 1. Script to set up links from local Home to Dropbox</h1>
<p><code>set_up_links.sh</code></p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/bin/zsh</span></span>
<span id="cb10-2"></span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># since the install process creates a .config directory move it temporarily</span></span>
<span id="cb10-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mv</span> ~/.config ~/.config.tmp</span>
<span id="cb10-5"></span>
<span id="cb10-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># create links to hidden files from ~/Dropbox/dotfiles directories</span></span>
<span id="cb10-7"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ff</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".zshrc"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".viminfo"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".vimrc"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".local"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".vim"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb10-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".vimplugins"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".config"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".Rprofile"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb10-9"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> P <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ff</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb10-10"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span></span>
<span id="cb10-11"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"create  a link for Dropbox/dotfiles version of </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$P</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> in Home"</span></span>
<span id="cb10-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ln</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-s</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/Dropbox/dotfiles/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$P</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$P</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb10-13"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">done</span></span>
<span id="cb10-14"></span>
<span id="cb10-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># copy the original ".config" files into new linked .config</span></span>
<span id="cb10-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cp</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> ~/config.tmp/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span> ~/.config</span>
<span id="cb10-17"></span>
<span id="cb10-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># create new directories (links) for working files from Dropbox</span></span>
<span id="cb10-19"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dd</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sandbox"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bin"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"docs"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"prj"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"work"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ssh"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"shr"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb10-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> P <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${dd</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb10-21"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span></span>
<span id="cb10-22">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"create  a link for Dropbox/dotfiles version of echo </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$P</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> in Home"</span></span>
<span id="cb10-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ln</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-s</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/Dropbox/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$P</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$P</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb10-24"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">done</span></span></code></pre></div>
<p>Possible Shortcut</p>
<p>Install dropbox first. You could wait for <code>Dropbox</code> to finish installing or you could use scp to copy and run the two shell scripts: <code>install_app.sh</code> and <code>set_up_links.sh</code> from <code>~/Dropbox/dotfiles</code>. These two shells can run in parallel with <code>Dropbox</code> installing.</p>
</section>
<section id="practice" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Practice</h1>
<p>Notes.</p>
<p>Power management. Switch “suspend” to “shut down immediately” everywhere. This will avoid system lock on timeout.</p>
<p>Situation: Mint is loaded and peng1.Rmd is transferred from researcher 1 to /home/z directory.</p>
<p>Try to run the program with command from colleague:</p>
<blockquote class="blockquote">
<p>R -e “render(‘peng1.Rmd’)”</p>
</blockquote>
<p>Result: error message:</p>
<p>Command R not found.</p>
<p>So install R…. to fix</p>
<blockquote class="blockquote">
<p>sudo apt install r-base-core Try again…</p>
</blockquote>
<blockquote class="blockquote">
<p>R -e “render(‘peng1.Rmd’)” Result: R loads but gives error: could not find function “render”</p>
</blockquote>
<p>Search google “R render”</p>
<p>Result: https://pkgs.rstudio.com/rmarkdown/reference/render.html</p>
<p>Looks like render is a function inside rmarkdown package. so install package R&gt; install.packages(“rmarkdown”)</p>
<p>Try again.</p>
<blockquote class="blockquote">
<p>R -e “library(rmarkdown); render(‘peng1.Rmd’)”</p>
</blockquote>
<p>Result: error. pandoc version 1.12.3 or higher required.</p>
<p>Now try to install pandoc Try again. &gt; R -e “library(rmarkdown); render(‘peng1.Rmd’)” Result: error. there is no called pacman</p>
<p>so install pacman R&gt; install.packages(“pacman”) Try again…</p>
<blockquote class="blockquote">
<p>R -e “library(rmarkdown); render(‘peng1.Rmd’)” result: failed pandoc could not find /Users/zenn/shr/preamble.tex</p>
</blockquote>
<p>This makes sense we forgot to send the preamble.tex file to researcher 2. Lets send it now. Also we need to adjust its location from a macos style file name to a linux based one.</p>
<p>To edit peng1.Rmd we need vim &gt; sudo apt install vim</p>
<p>Try again Result: pandoc error “pdflatex not found” Lets install tinytex. First in R and then in mint R&gt; install.packages(“tinytex”) R&gt; tinytex::install_tinytex() # to uninstall TinyTeX, run # tinytex::uninstall_tinytex()</p>
<p>Try again:</p>
<blockquote class="blockquote">
<p>R -e “library(rmarkdown); render(‘peng1.Rmd’)” result: pandoc error: file sudoku_apple.pdf not found.</p>
</blockquote>
<p>This makes sense we forgot to send the logo file. Lets send the file and try again.</p>
<blockquote class="blockquote">
<p>R -e “library(rmarkdown); render(‘peng1.Rmd’)” Result: error no bibliography file found.</p>
</blockquote>
<p>This makes sense we forgot to send the bib file. Lets send the file and try again. Also need to edit the location of bib file.</p>
<p>Try again:</p>
<blockquote class="blockquote">
<p>R -e “library(rmarkdown); render(‘peng1.Rmd’)”</p>
</blockquote>
<p>results: minor error. Some packages weren’t loading via pacman.</p>
<p>Try removing janitor, kableExtra, tidyverse, readxl and add ggplot2.</p>
<p>Try again:</p>
<blockquote class="blockquote">
<p>R -e “library(rmarkdown); render(‘peng1.Rmd’)”</p>
</blockquote>
<p>Success!</p>
</section>
<section id="install-docker" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Install Docker</h1>
<p>Installing <code>Docker</code> on <code>Mint</code> is a bit tricky. You need to add <code>Docker</code>’s <code>GPG</code> key and include the repository in the <code>Apt</code> sources</p>
<p><a href="https://linuxiac.com/how-to-install-docker-on-linux-mint-21/">How to Install Docker on Linux Mint 21: A Step-by-Step Guide</a></p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt update</span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install apt-transport-https ca-certificates curl gnupg</span>
<span id="cb11-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> gpg <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dearmor</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> /usr/share/keyrings/docker.gpg</span>
<span id="cb11-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"deb [arch=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dpkg</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--print-architecture</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> signed-by=/usr/share/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu jammy stable"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> tee /etc/apt/sources.list.d/docker.list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> /dev/null</span>
<span id="cb11-5"></span>
<span id="cb11-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt update</span>
<span id="cb11-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span>
<span id="cb11-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> systemctl is-active docker</span></code></pre></div>
<section id="prerequisites" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="prerequisites"><span class="header-section-number">7.1</span> Prerequisites</h2>
<p>In development</p>
</section>
<section id="step-by-step-implementation" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="step-by-step-implementation"><span class="header-section-number">7.2</span> Step-by-Step Implementation</h2>
<p>In development</p>
</section>
<section id="key-takeaways" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">7.3</span> Key Takeaways</h2>
<p>In development</p>
</section>
<section id="further-reading" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">7.4</span> Further Reading</h2>
<p>In development</p>


</section>
</section>


 ]]></description>
  <category>Mint</category>
  <category>linux</category>
  <category>R</category>
  <category>Python</category>
  <category>Julia</category>
  <guid>https://focusonr.org/posts/03-installmintonmacbook/installmintonmacbook/</guid>
  <pubDate>Tue, 10 Feb 2026 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/03-installmintonmacbook/installmintonmacbook/img/mint.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>The Pipe Equivalence Myth: When f() |&gt; g() Is Not the Same as g(f())</title>
  <dc:creator>RG Thomas</dc:creator>
  <link>https://focusonr.org/posts/15-piping/piping/</link>
  <description><![CDATA[ 




<section id="the-assumption" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="the-assumption"><span class="header-section-number">1</span> The Assumption</h2>
<p>Ask any R programmer what <code>x |&gt; f()</code> means, and they will tell you it is equivalent to <code>f(x)</code>. The pipe operator is just syntactic sugar for function composition, right?</p>
<p>This is exactly what the documentation and tutorials tell us:</p>
<blockquote class="blockquote">
<p>“<code>x %&gt;% f</code> is equivalent to <code>f(x)</code>”</p>
<p>“<code>x %&gt;% f(y)</code> is equivalent to <code>f(x, y)</code>”</p>
<p>“<code>x %&gt;% f %&gt;% g %&gt;% h</code> is equivalent to <code>h(g(f(x)))</code>”</p>
<p>— A popular R package vignette</p>
</blockquote>
<p>And from a widely-used data science textbook:</p>
<blockquote class="blockquote">
<p>“The pipe takes the thing on its left and passes it along to the function on its right so that <code>x |&gt; f(y)</code> is equivalent to <code>f(x, y)</code>, and <code>x |&gt; f(y) |&gt; g(z)</code> is equivalent to <code>g(f(x, y), z)</code>.”</p>
</blockquote>
<p>Tutorials reinforce this message:</p>
<blockquote class="blockquote">
<p>“Multiple pipes can be chained together, such that <code>x %&gt;% f() %&gt;% g() %&gt;% h()</code> is equivalent to <code>h(g(f(x)))</code>.”</p>
<p>— A popular online R tutorial</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># These are "the same"</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>()</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>))</span></code></pre></div>
</div>
<p>Both return 1.3862944. So far, so good.</p>
<p>This equivalence holds for the vast majority of R code. But there is a class of functions where this assumption breaks down completely, and understanding why reveals something fundamental about how R works.</p>
</section>
<section id="when-the-equivalence-breaks" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="when-the-equivalence-breaks"><span class="header-section-number">2</span> When the Equivalence Breaks</h2>
<p>Consider a function that needs to capture the <em>expression</em> passed to it, not just its <em>value</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">capture_expr <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(expr) {</span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">deparse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">substitute</span>(expr))</span>
<span id="cb2-3">}</span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Direct call - captures the expression</span></span>
<span id="cb2-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">capture_expr</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sqrt(16)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Piped call - captures... what?</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">capture_expr</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sqrt(16)"</code></pre>
</div>
</div>
<p>The direct call captures <code>"sqrt(16)"</code> as a string. The piped version captures something entirely different—the intermediate result after <code>sqrt(16)</code> has already been evaluated.</p>
<p>This is not a bug. It is a fundamental consequence of how pipes work.</p>
</section>
<section id="the-evaluation-order-problem" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="the-evaluation-order-problem"><span class="header-section-number">3</span> The Evaluation Order Problem</h2>
<p>The pipe operator evaluates left-to-right <em>before</em> passing to the next function. By the time <code>capture_expr()</code> can call <code>substitute()</code>, it only sees the return value, not the original expression.</p>
<p>Here is the sequence of events:</p>
<p><strong>Direct call: <code>capture_expr(sqrt(16))</code></strong></p>
<ol type="1">
<li>R sees the call to <code>capture_expr()</code></li>
<li>The argument <code>sqrt(16)</code> is passed <em>unevaluated</em> (lazy evaluation)</li>
<li>Inside <code>capture_expr()</code>, <code>substitute(expr)</code> captures <code>sqrt(16)</code></li>
<li><code>deparse()</code> converts it to the string <code>"sqrt(16)"</code></li>
</ol>
<p><strong>Piped call: <code>sqrt(16) |&gt; capture_expr()</code></strong></p>
<ol type="1">
<li>R evaluates <code>sqrt(16)</code> → returns <code>4</code></li>
<li>The value <code>4</code> is passed to <code>capture_expr()</code></li>
<li>Inside <code>capture_expr()</code>, <code>substitute(expr)</code> captures <code>4</code></li>
<li><code>deparse()</code> converts it to the string <code>"4"</code></li>
</ol>
<p>The critical difference: with direct calls, R’s lazy evaluation means arguments are passed as <em>promises</em> containing the unevaluated expression. The pipe forces evaluation before the handoff.</p>
</section>
<section id="why-this-matters-a-real-world-example" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="why-this-matters-a-real-world-example"><span class="header-section-number">4</span> Why This Matters: A Real-World Example</h2>
<p>This is not just academic. Consider building a plot wrapper that captures what the user typed for logging or history:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Desired behavior: capture "plot(mtcars$wt, mtcars$mpg)" for the log</span></span>
<span id="cb6-2">zzplot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(expr) {</span>
<span id="cb6-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Capture what the user typed</span></span>
<span id="cb6-4">  code <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">deparse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">substitute</span>(expr))</span>
<span id="cb6-5"></span>
<span id="cb6-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Open device, evaluate, close device</span></span>
<span id="cb6-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">png</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot.png"</span>)</span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">eval</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">substitute</span>(expr), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">envir =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parent.frame</span>())</span>
<span id="cb6-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dev.off</span>()</span>
<span id="cb6-10"></span>
<span id="cb6-11">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Log the code</span></span>
<span id="cb6-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">message</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Rendered: "</span>, code)</span>
<span id="cb6-13">}</span>
<span id="cb6-14"></span>
<span id="cb6-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This works - captures the expression</span></span>
<span id="cb6-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>wt, mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mpg))</span>
<span id="cb6-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Message: Rendered: plot(mtcars$wt, mtcars$mpg)</span></span>
<span id="cb6-18"></span>
<span id="cb6-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This fails - plot already executed, returns NULL</span></span>
<span id="cb6-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>wt, mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mpg) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot</span>()</span>
<span id="cb6-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Message: Rendered: NULL</span></span></code></pre></div>
</div>
<p>The wrapper function needs to:</p>
<ol type="1">
<li>Capture the plotting code as an expression</li>
<li>Evaluate it inside a graphics device context</li>
<li>Log what was executed</li>
</ol>
<p>With piping, step 1 fails because the plot has already been drawn to whatever device was active <em>before</em> <code>zzplot()</code> even runs.</p>
</section>
<section id="functions-affected-by-this-problem" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="functions-affected-by-this-problem"><span class="header-section-number">5</span> Functions Affected by This Problem</h2>
<p>Any function using non-standard evaluation (NSE) is potentially affected:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Purpose</th>
<th>Pipe-safe?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>substitute()</code></td>
<td>Capture unevaluated expression</td>
<td>No</td>
</tr>
<tr class="even">
<td><code>deparse(substitute())</code></td>
<td>Convert expression to string</td>
<td>No</td>
</tr>
<tr class="odd">
<td><code>match.call()</code></td>
<td>Capture the entire function call</td>
<td>No</td>
</tr>
<tr class="even">
<td><code>enquo()</code> / <code>enquos()</code></td>
<td>Tidy eval expression capture</td>
<td>No</td>
</tr>
<tr class="odd">
<td><code>rlang::enexpr()</code></td>
<td>Capture single expression</td>
<td>No</td>
</tr>
<tr class="even">
<td><code>quote()</code></td>
<td>Quote an expression</td>
<td>Yes*</td>
</tr>
<tr class="odd">
<td><code>bquote()</code></td>
<td>Quote with substitution</td>
<td>Yes*</td>
</tr>
</tbody>
</table>
<p>* These quote the literal argument, so piping changes <em>what</em> gets quoted.</p>
<p>Many tidyverse functions use NSE internally but are designed to work with pipes because they evaluate captured expressions in data contexts. However, when <em>you</em> write functions that need to capture user expressions, the pipe becomes problematic.</p>
</section>
<section id="the-native-pipe-vs.-magrittr" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="the-native-pipe-vs.-magrittr"><span class="header-section-number">6</span> The Native Pipe vs.&nbsp;Magrittr</h2>
<p>Does it matter which pipe you use? Not for this problem.</p>
<p>Both <code>|&gt;</code> (native, R 4.1+) and <code>%&gt;%</code> (magrittr) evaluate the left-hand side before passing it to the right. The native pipe is essentially a syntax transformation at parse time <span class="citation" data-cites="wickham2023base">(Wickham and Henry 2023)</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Native pipe: parsed as</span></span>
<span id="cb7-2">x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">f</span>(y)</span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># becomes</span></span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">f</span>(x, y)</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># But x is still evaluated before f() sees it</span></span></code></pre></div>
</div>
<p>The magrittr pipe does more work behind the scenes but has the same fundamental behavior: eager evaluation of the left-hand side <span class="citation" data-cites="bache2022magrittr">(Bache and Wickham 2022)</span>.</p>
<p>Magrittr does offer <code>%!&gt;%</code>, an “eager pipe” that forces evaluation at each step, but this is for controlling <em>when</em> side effects occur, not for enabling expression capture.</p>
</section>
<section id="workarounds-and-design-patterns" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="workarounds-and-design-patterns"><span class="header-section-number">7</span> Workarounds and Design Patterns</h2>
<section id="pattern-1-accept-the-limitation" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="pattern-1-accept-the-limitation"><span class="header-section-number">7.1</span> Pattern 1: Accept the Limitation</h3>
<p>Design your API to require wrapping, not piping:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Document that this is the correct usage</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">boxplot</span>(mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> cyl, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars))</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Not this</span></span>
<span id="cb8-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">boxplot</span>(mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> cyl, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot</span>()</span></code></pre></div>
</div>
<p>This is explicit and unambiguous. The tradeoff is that it breaks the “pipe everything” mental model some users have developed.</p>
</section>
<section id="pattern-2-provide-both-apis" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="pattern-2-provide-both-apis"><span class="header-section-number">7.2</span> Pattern 2: Provide Both APIs</h3>
<p>Offer a standard evaluation version alongside the NSE version:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># NSE version - for interactive use</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(x, y))</span>
<span id="cb9-3"></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># SE version - for programmatic use and piping (sort of)</span></span>
<span id="cb9-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot_expr</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quote</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(x, y)))</span>
<span id="cb9-6"></span>
<span id="cb9-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Or with a string</span></span>
<span id="cb9-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot_code</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot(x, y)"</span>)</span></code></pre></div>
</div>
</section>
<section id="pattern-3-use-quosures-tidy-eval" class="level3" data-number="7.3">
<h3 data-number="7.3" class="anchored" data-anchor-id="pattern-3-use-quosures-tidy-eval"><span class="header-section-number">7.3</span> Pattern 3: Use Quosures (Tidy Eval)</h3>
<p>The rlang package provides quosures, which bundle an expression with its environment <span class="citation" data-cites="henry2023rlang">(Henry and Wickham 2023)</span>. This enables more robust expression capture in some contexts:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rlang)</span>
<span id="cb10-2"></span>
<span id="cb10-3">my_function <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(expr) {</span>
<span id="cb10-4">  quo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">enquo</span>(expr)</span>
<span id="cb10-5">  expr_text <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quo_text</span>(quo)</span>
<span id="cb10-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... use the quosure</span></span>
<span id="cb10-7">}</span></code></pre></div>
</div>
<p>However, this still does not solve the pipe problem—<code>enquo()</code> captures what it receives, and the pipe has already evaluated the left-hand side.</p>
</section>
<section id="pattern-4-redesign-to-avoid-nse" class="level3" data-number="7.4">
<h3 data-number="7.4" class="anchored" data-anchor-id="pattern-4-redesign-to-avoid-nse"><span class="header-section-number">7.4</span> Pattern 4: Redesign to Avoid NSE</h3>
<p>Sometimes the cleanest solution is to not use NSE at all:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Instead of capturing expressions, accept functions</span></span>
<span id="cb11-2">zzplot_fn <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(plot_fn, ...) {</span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">png</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot.png"</span>)</span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_fn</span>(...)</span>
<span id="cb11-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dev.off</span>()</span>
<span id="cb11-6">}</span>
<span id="cb11-7"></span>
<span id="cb11-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Usage (pipeable with anonymous functions)</span></span>
<span id="cb11-9">\() <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>wt, mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mpg) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zzplot_fn</span>()</span></code></pre></div>
</div>
<p>This is less elegant but completely unambiguous about evaluation order.</p>
</section>
</section>
<section id="the-deeper-lesson-referential-transparency" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="the-deeper-lesson-referential-transparency"><span class="header-section-number">8</span> The Deeper Lesson: Referential Transparency</h2>
<p>This issue reflects a fundamental property of programming languages: <em>referential transparency</em>. A function is referentially transparent if you can replace any expression with its value without changing the program’s behavior <span class="citation" data-cites="wickham2019advanced">(Wickham 2019)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Referentially transparent</span></span>
<span id="cb12-2">f <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(x) x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">f</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Same as f(4)</span></span>
<span id="cb12-4"></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># NOT referentially transparent</span></span>
<span id="cb12-6">g <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(x) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">deparse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">substitute</span>(x))</span>
<span id="cb12-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">g</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Returns "2 + 2"</span></span>
<span id="cb12-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">g</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Returns "4"</span></span></code></pre></div>
</div>
<p>NSE functions are not referentially transparent by design—they care about <em>how</em> you express something, not just <em>what</em> value it produces. Pipes assume referential transparency because they pre-compute values.</p>
<p>Hadley Wickham notes in <em>Advanced R</em>: “The biggest downside of NSE is that functions that use it are no longer referentially transparent” <span class="citation" data-cites="wickham2019advanced">(Wickham 2019)</span>.</p>
</section>
<section id="conclusion" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">9</span> Conclusion</h2>
<p>The pipe equivalence <code>f() |&gt; g() ≡ g(f())</code> holds for value semantics but fails for expression semantics. This is not a bug in R or the pipe operators; it is a fundamental tension between:</p>
<ul>
<li><strong>Eager evaluation</strong> (pipes compute left-to-right)</li>
<li><strong>Lazy evaluation</strong> (functions receive unevaluated promises)</li>
<li><strong>Non-standard evaluation</strong> (functions inspect the expression, not just the value)</li>
</ul>
<p>When writing functions that use <code>substitute()</code>, <code>match.call()</code>, or similar metaprogramming tools, document clearly that piping will not work as expected. When using such functions, remember that wrapping <code>f(g(x))</code> and piping <code>x |&gt; g() |&gt; f()</code> are semantically different operations, even when they produce the same final value.</p>
<p>Understanding this distinction is essential for effective R metaprogramming and explains why some tidyverse patterns require specific syntax that cannot be arbitrarily reformatted.</p>
</section>
<section id="references" class="level2" data-number="10">
<h2 data-number="10" class="anchored" data-anchor-id="references"><span class="header-section-number">10</span> References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0">
<div id="ref-bache2022magrittr" class="csl-entry">
Bache, Stefan Milton, and Hadley Wickham. 2022. <em>Magrittr: <span>A</span> Forward-Pipe Operator for <span>R</span></em>. <a href="https://CRAN.R-project.org/package=magrittr">https://CRAN.R-project.org/package=magrittr</a>.
</div>
<div id="ref-henry2023rlang" class="csl-entry">
Henry, Lionel, and Hadley Wickham. 2023. <em>Rlang: <span>Functions</span> for Base Types and Core <span>R</span> and Tidyverse Features</em>. <a href="https://CRAN.R-project.org/package=rlang">https://CRAN.R-project.org/package=rlang</a>.
</div>
<div id="ref-wickham2019advanced" class="csl-entry">
Wickham, Hadley. 2019. <em>Advanced <span>R</span></em>. 2nd ed. Boca Raton, FL: Chapman; Hall/CRC. <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.
</div>
<div id="ref-wickham2023base" class="csl-entry">
Wickham, Hadley, and Lionel Henry. 2023. <span>“Differences Between the Base <span>R</span> and Magrittr Pipes.”</span> tidyverse blog. <a href="https://tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/">https://tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/</a>.
</div>
</div>
</section>
<section id="further-reading" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">11</span> Further Reading</h2>
<ul>
<li><a href="http://adv-r.had.co.nz/Computing-on-the-language.html">Non-standard evaluation</a> in <em>Advanced R</em> (1st ed.) by Hadley Wickham</li>
<li><a href="https://adv-r.hadley.nz/evaluation.html">Evaluation</a> chapter in <em>Advanced R</em> (2nd ed.)</li>
<li><a href="https://tidyeval.tidyverse.org/">Tidy Evaluation</a> book by the tidyverse team</li>
<li><a href="https://www.brodieg.com/2020/05/05/on-nse/">Standard and Non-Standard Evaluation in R</a> by Brodie Gaslam</li>
<li><a href="https://tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/">Differences between the base R and magrittr pipes</a> on the tidyverse blog</li>
<li><a href="https://magrittr.tidyverse.org/articles/tradeoffs.html">Design tradeoffs</a> in magrittr</li>
<li><a href="https://thomasadventure.blog/posts/understanding-nse-part1/">Understanding Non-Standard Evaluation, Part 1</a> by Thomas Adventureson</li>
</ul>


</section>

 ]]></description>
  <category>R</category>
  <category>metaprogramming</category>
  <category>pipes</category>
  <guid>https://focusonr.org/posts/15-piping/piping/</guid>
  <pubDate>Sat, 31 Jan 2026 08:00:00 GMT</pubDate>
</item>
<item>
  <title>Palmer Penguins Data Analysis Series (Part 1): Exploratory Data Analysis and Simple Regression</title>
  <dc:creator>Data Science Team</dc:creator>
  <link>https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/media/images/penguins-library-7755210_1280.jpg" class="img-fluid figure-img"></p>
<figcaption>Curious Adelie penguins beginning their data science journey - because every great analysis starts with getting to know your data!</figcaption>
</figure>
</div>
<p><em>Photo: African penguins at Boulders Beach, South Africa. Licensed under <a href="https://creativecommons.org/licenses/by/2.0/">CC BY 2.0</a> via <a href="https://commons.wikimedia.org/wiki/File:Boulders_Beach_penguins_(46475505885).jpg">Wikimedia Commons</a></em></p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Palmer Penguins Data Analysis Series
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is <strong>Part 1</strong> of a 5-part series exploring penguin morphometrics:</p>
<ol type="1">
<li><strong>Part 1: EDA and Simple Regression</strong> (This post)</li>
<li><a href="../palmerpenguinspart2/">Part 2: Multiple Regression and Species Effects</a></li>
<li><a href="../palmerpenguinspart3/">Part 3: Advanced Models and Cross-Validation</a></li>
<li><a href="../palmerpenguinspart4/">Part 4: Model Diagnostics and Interpretation</a></li>
<li><a href="../palmerpenguinspart5/">Part 5: Random Forest vs Linear Models</a></li>
</ol>
</div>
</div>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Welcome to our comprehensive exploration of the Palmer penguins dataset! In this 5-part series, we’ll journey through the complete data science workflow, from initial data exploration to advanced modeling techniques. The Palmer penguins dataset has become a beloved alternative to the iris dataset, providing real-world biological data that’s both engaging and educationally valuable.</p>
<p>Collected by Dr.&nbsp;Kristen Gorman at Palmer Station Antarctica, this dataset contains morphometric measurements for three penguin species: Adelie (<em>Pygoscelis adeliae</em>), Chinstrap (<em>Pygoscelis antarcticus</em>), and Gentoo (<em>Pygoscelis papua</em>). Understanding these relationships is crucial for Antarctic ecology research, as body mass serves as a key indicator of penguin health and reproductive success.</p>
<p>In this first part, we’ll focus on:</p>
<ul>
<li>Getting familiar with the Palmer penguins dataset</li>
<li>Conducting thorough exploratory data analysis</li>
<li>Understanding the relationships between morphometric variables</li>
<li>Building our first simple regression model</li>
<li>Establishing the foundation for more complex analyses in subsequent parts</li>
</ul>
<p>By the end of this post, you’ll have a solid understanding of the data structure and the strongest individual predictors of penguin body mass.</p>
</section>
<section id="prerequisites-and-setup" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Prerequisites and Setup</h1>
<p>Before we begin our Antarctic adventure, let’s ensure we have the right tools:</p>
<p><strong>Required Packages:</strong></p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install required packages if not already installed</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"palmerpenguins"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyverse"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"broom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"corrplot"</span>,</span>
<span id="cb1-3">                   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GGally"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"patchwork"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"knitr"</span>))</span></code></pre></div>
<p><strong>Load Libraries:</strong></p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(palmerpenguins)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(broom)</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(corrplot)</span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(GGally)</span>
<span id="cb2-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(patchwork)</span>
<span id="cb2-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(knitr)</span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set theme for consistent plotting</span></span>
<span id="cb2-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_set</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb2-11"></span>
<span id="cb2-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set penguin-friendly colors (high contrast)</span></span>
<span id="cb2-13">penguin_colors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adelie"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FF6B6B"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chinstrap"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#9B59B6"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gentoo"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#2E86AB"</span>)</span></code></pre></div>
</section>
<section id="meet-the-penguins-dataset-overview" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Meet the Penguins: Dataset Overview</h1>
<p>Let’s start by getting acquainted with our Antarctic research subjects:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Palmer Penguins Dataset Characteristics</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Total Observations</td>
<td style="text-align: left;">333</td>
</tr>
<tr class="even">
<td style="text-align: left;">Variables</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Species</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Islands</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Year Range</td>
<td style="text-align: left;">2007–2009</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Our analysis includes 333 complete penguin observations from three species across three Antarctic islands, spanning the years 2007-2009.</p>
</section>
<section id="exploratory-data-analysis" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Exploratory Data Analysis</h1>
<section id="species-and-morphometric-overview" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="species-and-morphometric-overview"><span class="header-section-number">4.1</span> Species and Morphometric Overview</h2>
<p>Let’s understand our penguin community composition and key measurements:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Species Distribution and Key Morphometrics</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Species</th>
<th style="text-align: right;">N</th>
<th style="text-align: right;">Body Mass (g)</th>
<th style="text-align: right;">Flipper Length (mm)</th>
<th style="text-align: right;">% of Dataset</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">3706</td>
<td style="text-align: right;">190.1</td>
<td style="text-align: right;">43.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">3733</td>
<td style="text-align: right;">195.8</td>
<td style="text-align: right;">20.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">5092</td>
<td style="text-align: right;">217.2</td>
<td style="text-align: right;">35.7</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/figures/eda-overview.png" class="img-fluid figure-img"></p>
<figcaption>Species distribution and morphometric relationship overview showing sample sizes and the key flipper-body mass relationship across species</figcaption>
</figure>
</div>
</section>
</section>
<section id="species-specific-patterns" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Species-Specific Patterns</h1>
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/media/images/penguins-26046_1280.jpg" class="img-fluid" style="width:50.0%" alt="Data scientists examining their subjects"> <em>“Each species has its own personality… and body mass distribution!”</em></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Morphometric Statistics by Species (±95% CI)</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Species</th>
<th style="text-align: right;">N</th>
<th style="text-align: right;">Body Mass (g)</th>
<th style="text-align: right;">±95% CI</th>
<th style="text-align: right;">Flipper Length (mm)</th>
<th style="text-align: right;">±95% CI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">3706</td>
<td style="text-align: right;">74.4</td>
<td style="text-align: right;">190.1</td>
<td style="text-align: right;">1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">3733</td>
<td style="text-align: right;">91.4</td>
<td style="text-align: right;">195.8</td>
<td style="text-align: right;">1.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: right;">119</td>
<td style="text-align: right;">5092</td>
<td style="text-align: right;">90.1</td>
<td style="text-align: right;">217.2</td>
<td style="text-align: right;">1.2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/figures/species-comparison.png" class="img-fluid figure-img"></p>
<figcaption>Box plot comparing body mass distributions across the three penguin species, showing Gentoo penguins are substantially larger</figcaption>
</figure>
</div>
</section>
<section id="correlation-analysis" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Correlation Analysis</h1>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Morphometric Correlations with Body Mass</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Correlation with Body Mass</th>
<th style="text-align: left;">Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Flipper Length</td>
<td style="text-align: right;">0.873</td>
<td style="text-align: left;">Strongest predictor</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bill Length</td>
<td style="text-align: right;">0.589</td>
<td style="text-align: left;">Moderate positive</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bill Depth</td>
<td style="text-align: right;">-0.472</td>
<td style="text-align: left;">Weak negative</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/figures/correlation-matrix.png" class="img-fluid figure-img"></p>
<figcaption>Correlation matrix showing flipper length as the strongest predictor of body mass (r=0.87)</figcaption>
</figure>
</div>
</section>
<section id="simple-linear-regression" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Simple Linear Regression</h1>
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/media/images/penguin-gentoo-penguin-7073394_1280.jpg" class="img-fluid" style="width:45.0%" alt="Penguins lining up for regression analysis"> <em>“Time to see if flipper length really predicts our weight!”</em></p>
<section id="building-and-interpreting-the-model" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="building-and-interpreting-the-model"><span class="header-section-number">7.1</span> Building and Interpreting the Model</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Simple Linear Model Performance</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Metric</th>
<th style="text-align: left;">Value</th>
<th style="text-align: left;">Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">R²</td>
<td style="text-align: left;">0.762</td>
<td style="text-align: left;">76.2% variance explained</td>
</tr>
<tr class="even">
<td style="text-align: left;">RMSE</td>
<td style="text-align: left;">393.3 g</td>
<td style="text-align: left;">Mean prediction error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F-statistic</td>
<td style="text-align: left;">1060.3</td>
<td style="text-align: left;">p &lt; 0.001 (highly significant)</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>**Model Equation:**</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Body Mass = -5872.1 + 50.2 × Flipper Length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Slope 95% CI: [47.1, 53.2] grams/mm</code></pre>
</div>
</div>
<section id="example-predictions" class="level4" data-number="7.1.0.1">
<h4 data-number="7.1.0.1" class="anchored" data-anchor-id="example-predictions"><span class="header-section-number">7.1.0.1</span> Example Predictions</h4>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Predicted Body Mass for Example Flipper Lengths</caption>
<colgroup>
<col style="width: 28%">
<col style="width: 34%">
<col style="width: 18%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Flipper Length (mm)</th>
<th style="text-align: right;">Predicted Body Mass (g)</th>
<th style="text-align: right;">95% CI Lower</th>
<th style="text-align: right;">95% CI Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">180</td>
<td style="text-align: right;">3637</td>
<td style="text-align: right;">3589</td>
<td style="text-align: right;">3685</td>
</tr>
<tr class="even">
<td style="text-align: right;">200</td>
<td style="text-align: right;">4749</td>
<td style="text-align: right;">4712</td>
<td style="text-align: right;">4786</td>
</tr>
<tr class="odd">
<td style="text-align: right;">220</td>
<td style="text-align: right;">5860</td>
<td style="text-align: right;">5815</td>
<td style="text-align: right;">5905</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/figures/simple-regression-model.png" class="img-fluid figure-img"></p>
<figcaption>Simple linear regression model showing body mass predicted by flipper length with 95% confidence interval</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="model-limitations-and-assumptions" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Model Limitations and Assumptions</h1>
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/media/images/penguins-7553626_1280.jpg" class="img-fluid" style="width:40.0%" alt="Cautious penguins reading the fine print"> <em>“Wait, we should read the assumptions first!”</em></p>
<p>Before interpreting our results, we must acknowledge important limitations:</p>
<section id="statistical-limitations" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="statistical-limitations"><span class="header-section-number">8.1</span> Statistical Limitations</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Model Diagnostic Summary</caption>
<colgroup>
<col style="width: 23%">
<col style="width: 50%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Assumption</th>
<th style="text-align: left;">Result</th>
<th style="text-align: left;">Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linearity</td>
<td style="text-align: left;">Relationship appears approximately linear</td>
<td style="text-align: left;">✓ Met</td>
</tr>
<tr class="even">
<td style="text-align: left;">Independence</td>
<td style="text-align: left;">Observations are independent</td>
<td style="text-align: left;">✓ Met</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Normality</td>
<td style="text-align: left;">Residuals approximately normal</td>
<td style="text-align: left;">✓ Reasonable</td>
</tr>
<tr class="even">
<td style="text-align: left;">Homoscedasticity</td>
<td style="text-align: left;">Variance constant across range</td>
<td style="text-align: left;">⚠ Violated by species</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Outliers</td>
<td style="text-align: left;">5 observations &gt;2.5 SD</td>
<td style="text-align: left;">⚠ Present</td>
</tr>
<tr class="even">
<td style="text-align: left;">Residual Std. Error</td>
<td style="text-align: left;">393.3 grams</td>
<td style="text-align: left;">✓ Acceptable</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/figures/model-diagnostics.png" class="img-fluid figure-img"></p>
<figcaption>Model diagnostic plot showing residuals clustered by species, indicating model limitations</figcaption>
</figure>
</div>
</section>
<section id="key-limitations" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="key-limitations"><span class="header-section-number">8.2</span> Key Limitations</h2>
<ol type="1">
<li><strong>Simpson’s Paradox Risk</strong>: The model ignores species differences, potentially masking important biological relationships</li>
<li><strong>Model Assumptions</strong>:
<ul>
<li>Linear relationship assumption appears reasonable</li>
<li>Residual clustering by species indicates missing predictors</li>
<li>Homoscedasticity assumption may be violated across species</li>
</ul></li>
<li><strong>Temporal Generalizability</strong>: Data spans 2007-2009; climate change may affect current relationships</li>
<li><strong>Geographic Scope</strong>: Limited to Palmer Station region; may not generalize to other penguin populations</li>
<li><strong>Measurement Precision</strong>: Morphometric measurements have inherent measurement error not captured in model</li>
<li><strong>Biological Constraints</strong>: Model predictions outside observed flipper length range (172-231mm) should be interpreted cautiously</li>
</ol>
</section>
</section>
<section id="practical-applications-and-implications" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Practical Applications and Implications</h1>
<p><img src="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/media/images/penguin-hero.jpg" class="img-fluid" style="width:45.0%" alt="Penguins putting their data science skills to practical use"> <em>“Now let’s use this model to help our penguin community!”</em></p>
<section id="real-world-applications" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="real-world-applications"><span class="header-section-number">9.1</span> Real-World Applications</h2>
<p>Our simple regression model has several practical applications in Antarctic research:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Practical Applications of the Model</caption>
<colgroup>
<col style="width: 22%">
<col style="width: 67%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Application</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Relevance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Field Assessment</td>
<td style="text-align: left;">Flipper measurements estimate body condition (effect size: 0.06)</td>
<td style="text-align: left;">High</td>
</tr>
<tr class="even">
<td style="text-align: left;">Population Monitoring</td>
<td style="text-align: left;">Track penguin health trends using morphometric relationships</td>
<td style="text-align: left;">High</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Climate Research</td>
<td style="text-align: left;">Changes in relationships may indicate environmental stress</td>
<td style="text-align: left;">Medium</td>
</tr>
<tr class="even">
<td style="text-align: left;">Conservation Planning</td>
<td style="text-align: left;">Identify underweight individuals for intervention</td>
<td style="text-align: left;">High</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Body Condition Classification Thresholds</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Condition Category</th>
<th style="text-align: left;">Body Mass Range (g)</th>
<th style="text-align: left;">Percentile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Low Condition</td>
<td style="text-align: left;">&lt; 3550</td>
<td style="text-align: left;">Below 25th</td>
</tr>
<tr class="even">
<td style="text-align: left;">Normal Range</td>
<td style="text-align: left;">3550–4775</td>
<td style="text-align: left;">25th–75th</td>
</tr>
<tr class="odd">
<td style="text-align: left;">High Condition</td>
<td style="text-align: left;">&gt; 4775</td>
<td style="text-align: left;">Above 75th</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="key-findings-and-next-steps" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Key Findings and Next Steps</h1>
<section id="what-weve-learned-in-part-1" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="what-weve-learned-in-part-1"><span class="header-section-number">10.1</span> What We’ve Learned in Part 1</h2>
<ol type="1">
<li><p><strong>Strong Predictive Relationship</strong>: Flipper length explains 76.2% of body mass variance (R² = 0.762), providing a reliable field assessment tool</p></li>
<li><p><strong>Species-Specific Patterns</strong>: Residual clustering by species suggests important biological differences not captured by flipper length alone</p></li>
<li><p><strong>Model Performance</strong>: RMSE of 393g indicates reasonable prediction accuracy for most applications</p></li>
<li><p><strong>Research Implications</strong>: Simple morphometric relationships can support field research and conservation efforts</p></li>
</ol>
</section>
<section id="looking-ahead-to-part-2" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="looking-ahead-to-part-2"><span class="header-section-number">10.2</span> Looking Ahead to Part 2</h2>
<p>Our residual analysis reveals clear opportunities for improvement through:</p>
<ul>
<li><strong>Species Integration</strong>: Accounting for biological differences between penguin species</li>
<li><strong>Multiple Predictors</strong>: Incorporating bill measurements for enhanced accuracy</li>
<li><strong>Interaction Effects</strong>: Exploring how predictors work together</li>
<li><strong>Model Validation</strong>: Comparing simple vs.&nbsp;complex model performance</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🎯 Preview: Dramatic Model Improvement
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Part 2, adding species information will improve our model’s R² from 0.762 to over 0.860 - demonstrating why biological context matters in ecological modeling!</p>
</div>
</div>
</section>
</section>
<section id="reproducibility-information" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Reproducibility Information</h1>
<p>This blog post is part of a <strong>reproducible research compendium</strong> using ZZCOLLAB. To reproduce the entire analysis:</p>
<section id="quick-start" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="quick-start"><span class="header-section-number">11.1</span> Quick Start</h2>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>repository-url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb6-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> posts/palmerpenguinspart1</span>
<span id="cb6-3"></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build Docker environment (one-time setup)</span></span>
<span id="cb6-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-build</span>
<span id="cb6-6"></span>
<span id="cb6-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run complete analysis pipeline and render blog post</span></span>
<span id="cb6-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> docker-post-render</span>
<span id="cb6-9"></span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># View results</span></span>
<span id="cb6-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">open</span> index.html</span></code></pre></div>
</section>
<section id="analysis-pipeline" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="analysis-pipeline"><span class="header-section-number">11.2</span> Analysis Pipeline</h2>
<p>The complete analysis consists of three reproducible scripts:</p>
<ol type="1">
<li><strong>01_prepare_data.R</strong> - Load Palmer Penguins data, clean, and save derived data</li>
<li><strong>02_fit_models.R</strong> - Fit simple linear regression model, extract coefficients and diagnostics</li>
<li><strong>03_generate_figures.R</strong> - Generate publication-quality figures from analysis results</li>
</ol>
<p>All figures shown in this post are generated by the analysis scripts and can be reproduced exactly using the provided code.</p>
</section>
<section id="environment-information" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="environment-information"><span class="header-section-number">11.3</span> Environment Information</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Analysis Environment</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">R Version</td>
<td style="text-align: left;">R version 4.5.2 (2025-10-31)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Platform</td>
<td style="text-align: left;">aarch64-apple-darwin20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Analysis Date</td>
<td style="text-align: left;">2026-02-10</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="data-source" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="data-source"><span class="header-section-number">11.4</span> Data Source</h2>
<p><strong>Palmer Penguins Dataset:</strong> - Gorman KB, Williams TD, Fraser WR (2014). Ecological sexual dimorphism and environmental variability within a community of Antarctic penguins (genus <em>Pygoscelis</em>). PLOS ONE 9(3): e90081. - Data accessible via: <code>palmerpenguins</code> R package - Original data repository: https://github.com/allisonhorst/palmerpenguins</p>


</section>
</section>

 ]]></description>
  <category>R Programming</category>
  <category>Data Science</category>
  <category>Statistical Computing</category>
  <category>Exploratory Data Analysis</category>
  <category>Palmer Penguins</category>
  <guid>https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/</guid>
  <pubDate>Wed, 01 Jan 2025 08:00:00 GMT</pubDate>
  <media:content url="https://focusonr.org/posts/08-palmerpenguinspart1/palmerpenguinspart1/media/images/penguin-hero.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
